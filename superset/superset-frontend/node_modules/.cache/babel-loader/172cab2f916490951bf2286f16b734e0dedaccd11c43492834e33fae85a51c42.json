{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport { t, styled, SupersetClient } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { CssEditor as AceCssEditor } from 'src/components/AsyncAceEditor';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledWrapper = styled.div`\n  ${({ theme }) => `\n    .css-editor-header {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: ${theme.gridUnit * 2}px;\n\n      h5 {\n        margin-top: ${theme.gridUnit}px;\n      }\n    }\n    .css-editor {\n      border: 1px solid ${theme.colors.grayscale.light1};\n    }\n  `}\n`;\nclass CssEditor extends React.PureComponent {\n\n\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      css: props.initialCss\n    };\n    this.changeCss = this.changeCss.bind(this);\n    this.changeCssTemplate = this.changeCssTemplate.bind(this);\n  }\n  componentDidMount() {\n    AceCssEditor.preload();\n    SupersetClient.get({ endpoint: '/csstemplateasyncmodelview/api/read' }).\n    then(({ json }) => {\n      const templates = json.result.map((row) => ({\n        value: row.template_name,\n        css: row.css,\n        label: row.template_name\n      }));\n      this.setState({ templates });\n    }).\n    catch(() => {\n      this.props.addDangerToast(t('An error occurred while fetching available CSS templates'));\n    });\n  }\n  changeCss(css) {\n    this.setState({ css }, () => {\n      this.props.onChange(css);\n    });\n  }\n  changeCssTemplate(info) {\n    const keyAsString = String(info.key);\n    this.changeCss(keyAsString);\n  }\n  renderTemplateSelector() {\n    if (this.state.templates) {\n      const menu = ___EmotionJSX(Menu, { onClick: this.changeCssTemplate },\n      this.state.templates.map((template) => ___EmotionJSX(Menu.Item, { key: template.css }, template.label))\n      );\n      return ___EmotionJSX(AntdDropdown, { overlay: menu, placement: \"bottomRight\" },\n      ___EmotionJSX(Button, null, t('Load a CSS template'))\n      );\n    }\n    return null;\n  }\n  render() {\n    return ___EmotionJSX(ModalTrigger, { triggerNode: this.props.triggerNode, modalTitle: t('CSS'), modalBody: ___EmotionJSX(StyledWrapper, null,\n      ___EmotionJSX(\"div\", { className: \"css-editor-header\" },\n      ___EmotionJSX(\"h5\", null, t('Live CSS editor')),\n      this.renderTemplateSelector()\n      ),\n      ___EmotionJSX(AceCssEditor, { className: \"css-editor\", minLines: 12, maxLines: 30, onChange: this.changeCss, height: \"200px\", width: \"100%\", editorProps: { $blockScrolling: true }, enableLiveAutocompletion: true, value: this.state.css || '' })\n      ) });\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}CssEditor.defaultProps = { initialCss: '', onChange: () => {} };const _default = CssEditor;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledWrapper, \"StyledWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/CssEditor/index.tsx\");reactHotLoader.register(CssEditor, \"CssEditor\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/CssEditor/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/CssEditor/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","AntdDropdown","Menu","Button","t","styled","SupersetClient","ModalTrigger","CssEditor","AceCssEditor","jsx","___EmotionJSX","StyledWrapper","div","theme","gridUnit","colors","grayscale","light1","PureComponent","constructor","props","state","css","initialCss","changeCss","bind","changeCssTemplate","componentDidMount","preload","get","endpoint","then","json","templates","result","map","row","value","template_name","label","setState","catch","addDangerToast","onChange","info","keyAsString","String","key","renderTemplateSelector","menu","onClick","template","Item","overlay","placement","render","triggerNode","modalTitle","modalBody","className","minLines","maxLines","height","width","editorProps","$blockScrolling","enableLiveAutocompletion","__reactstandin__regenerateByEval","code","eval","defaultProps","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/CssEditor/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport { t, styled, SupersetClient } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { CssEditor as AceCssEditor } from 'src/components/AsyncAceEditor';\n\nexport interface CssEditorProps {\n  initialCss: string;\n  triggerNode: React.ReactNode;\n  onChange: (css: string) => void;\n  addDangerToast: (msg: string) => void;\n}\n\nexport type CssEditorState = {\n  css: string;\n  templates?: Array<{\n    css: string;\n    label: string;\n  }>;\n};\nconst StyledWrapper = styled.div`\n  ${({ theme }) => `\n    .css-editor-header {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: ${theme.gridUnit * 2}px;\n\n      h5 {\n        margin-top: ${theme.gridUnit}px;\n      }\n    }\n    .css-editor {\n      border: 1px solid ${theme.colors.grayscale.light1};\n    }\n  `}\n`;\n\nclass CssEditor extends React.PureComponent<CssEditorProps, CssEditorState> {\n  static defaultProps: Partial<CssEditorProps> = {\n    initialCss: '',\n    onChange: () => {},\n  };\n\n  constructor(props: CssEditorProps) {\n    super(props);\n    this.state = {\n      css: props.initialCss,\n    };\n    this.changeCss = this.changeCss.bind(this);\n    this.changeCssTemplate = this.changeCssTemplate.bind(this);\n  }\n\n  componentDidMount() {\n    AceCssEditor.preload();\n\n    SupersetClient.get({ endpoint: '/csstemplateasyncmodelview/api/read' })\n      .then(({ json }) => {\n        const templates = json.result.map(\n          (row: { template_name: string; css: string }) => ({\n            value: row.template_name,\n            css: row.css,\n            label: row.template_name,\n          }),\n        );\n\n        this.setState({ templates });\n      })\n      .catch(() => {\n        this.props.addDangerToast(\n          t('An error occurred while fetching available CSS templates'),\n        );\n      });\n  }\n\n  changeCss(css: string) {\n    this.setState({ css }, () => {\n      this.props.onChange(css);\n    });\n  }\n\n  changeCssTemplate(info: { key: React.Key }) {\n    const keyAsString = String(info.key);\n    this.changeCss(keyAsString);\n  }\n\n  renderTemplateSelector() {\n    if (this.state.templates) {\n      const menu = (\n        <Menu onClick={this.changeCssTemplate}>\n          {this.state.templates.map(template => (\n            <Menu.Item key={template.css}>{template.label}</Menu.Item>\n          ))}\n        </Menu>\n      );\n      return (\n        <AntdDropdown overlay={menu} placement=\"bottomRight\">\n          <Button>{t('Load a CSS template')}</Button>\n        </AntdDropdown>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <ModalTrigger\n        triggerNode={this.props.triggerNode}\n        modalTitle={t('CSS')}\n        modalBody={\n          <StyledWrapper>\n            <div className=\"css-editor-header\">\n              <h5>{t('Live CSS editor')}</h5>\n              {this.renderTemplateSelector()}\n            </div>\n            <AceCssEditor\n              className=\"css-editor\"\n              minLines={12}\n              maxLines={30}\n              onChange={this.changeCss}\n              height=\"200px\"\n              width=\"100%\"\n              editorProps={{ $blockScrolling: true }}\n              enableLiveAutocompletion\n              value={this.state.css || ''}\n            />\n          </StyledWrapper>\n        }\n      />\n    );\n  }\n}\n\nexport default CssEditor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}