{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { testWithId } from 'src/utils/testUtils';\nimport { useSelector } from 'react-redux';\nexport const getOnlyExtraFormData = (data) => Object.values(data).reduce((prev, next) => ({ ...prev, [next.id]: next.extraFormData }), {});\nexport const checkIsMissingRequiredValue = (filter, filterState) => {var _filter$controlValues;\n  const value = filterState == null ? void 0 : filterState.value;\n  // TODO: this property should be unhardcoded\n  return ((_filter$controlValues = filter.controlValues) == null ? void 0 : _filter$controlValues.enableEmptyFilter) && (\n  value === null || value === undefined);\n};\nexport const checkIsApplyDisabled = (dataMaskSelected, dataMaskApplied, filters) => {\n  const dataSelectedValues = Object.values(dataMaskSelected);\n  const dataAppliedValues = Object.values(dataMaskApplied);\n  return areObjectsEqual(getOnlyExtraFormData(dataMaskSelected), getOnlyExtraFormData(dataMaskApplied), { ignoreUndefined: true }) ||\n  dataSelectedValues.length !== dataAppliedValues.length ||\n  filters.some((filter) => {var _dataMaskSelected$fil;return checkIsMissingRequiredValue(filter, dataMaskSelected == null ? void 0 : (_dataMaskSelected$fil = dataMaskSelected[filter == null ? void 0 : filter.id]) == null ? void 0 : _dataMaskSelected$fil.filterState);});\n};\nexport const useChartsVerboseMaps = () => useSelector((state) => {\n  const { charts, datasources } = state;\n  return Object.keys(state.charts).reduce((chartsVerboseMaps, chartId) => {var _charts$chartId, _charts$chartId$form_;\n    const chartDatasource = datasources[(_charts$chartId = charts[chartId]) == null ? void 0 : (_charts$chartId$form_ = _charts$chartId.form_data) == null ? void 0 : _charts$chartId$form_.datasource];\n    return {\n      ...chartsVerboseMaps,\n      [chartId]: chartDatasource ? chartDatasource.verbose_map : {}\n    };\n  }, {});\n});__signature__(useChartsVerboseMaps, \"useSelector{}\", () => [useSelector]);\nexport const FILTER_BAR_TEST_ID = 'filter-bar';\nexport const getFilterBarTestId = testWithId(FILTER_BAR_TEST_ID);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getOnlyExtraFormData, \"getOnlyExtraFormData\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(checkIsMissingRequiredValue, \"checkIsMissingRequiredValue\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(checkIsApplyDisabled, \"checkIsApplyDisabled\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(useChartsVerboseMaps, \"useChartsVerboseMaps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(FILTER_BAR_TEST_ID, \"FILTER_BAR_TEST_ID\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");reactHotLoader.register(getFilterBarTestId, \"getFilterBarTestId\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["areObjectsEqual","testWithId","useSelector","getOnlyExtraFormData","data","Object","values","reduce","prev","next","id","extraFormData","checkIsMissingRequiredValue","filter","filterState","_filter$controlValues","value","controlValues","enableEmptyFilter","undefined","checkIsApplyDisabled","dataMaskSelected","dataMaskApplied","filters","dataSelectedValues","dataAppliedValues","ignoreUndefined","length","some","_dataMaskSelected$fil","useChartsVerboseMaps","state","charts","datasources","keys","chartsVerboseMaps","chartId","_charts$chartId","_charts$chartId$form_","chartDatasource","form_data","datasource","verbose_map","__signature__","FILTER_BAR_TEST_ID","getFilterBarTestId","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/utils.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { DataMaskStateWithId, Filter, FilterState } from '@superset-ui/core';\nimport { testWithId } from 'src/utils/testUtils';\nimport { RootState } from 'src/dashboard/types';\nimport { useSelector } from 'react-redux';\n\nexport const getOnlyExtraFormData = (data: DataMaskStateWithId) =>\n  Object.values(data).reduce(\n    (prev, next) => ({ ...prev, [next.id]: next.extraFormData }),\n    {},\n  );\n\nexport const checkIsMissingRequiredValue = (\n  filter: Filter,\n  filterState?: FilterState,\n) => {\n  const value = filterState?.value;\n  // TODO: this property should be unhardcoded\n  return (\n    filter.controlValues?.enableEmptyFilter &&\n    (value === null || value === undefined)\n  );\n};\n\nexport const checkIsApplyDisabled = (\n  dataMaskSelected: DataMaskStateWithId,\n  dataMaskApplied: DataMaskStateWithId,\n  filters: Filter[],\n) => {\n  const dataSelectedValues = Object.values(dataMaskSelected);\n  const dataAppliedValues = Object.values(dataMaskApplied);\n  return (\n    areObjectsEqual(\n      getOnlyExtraFormData(dataMaskSelected),\n      getOnlyExtraFormData(dataMaskApplied),\n      { ignoreUndefined: true },\n    ) ||\n    dataSelectedValues.length !== dataAppliedValues.length ||\n    filters.some(filter =>\n      checkIsMissingRequiredValue(\n        filter,\n        dataMaskSelected?.[filter?.id]?.filterState,\n      ),\n    )\n  );\n};\n\nexport const useChartsVerboseMaps = () =>\n  useSelector<RootState, { [chartId: string]: Record<string, string> }>(\n    state => {\n      const { charts, datasources } = state;\n\n      return Object.keys(state.charts).reduce((chartsVerboseMaps, chartId) => {\n        const chartDatasource =\n          datasources[charts[chartId]?.form_data?.datasource];\n        return {\n          ...chartsVerboseMaps,\n          [chartId]: chartDatasource ? chartDatasource.verbose_map : {},\n        };\n      }, {});\n    },\n  );\n\nexport const FILTER_BAR_TEST_ID = 'filter-bar';\nexport const getFilterBarTestId = testWithId(FILTER_BAR_TEST_ID);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}