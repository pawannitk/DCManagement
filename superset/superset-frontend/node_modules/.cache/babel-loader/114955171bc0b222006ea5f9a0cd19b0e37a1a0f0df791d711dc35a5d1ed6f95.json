{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useLayoutEffect } from 'react';\nimport { css, styled, SafeMarkdown } from '@superset-ui/core';\nimport InfoTooltipWithTrigger from './InfoTooltipWithTrigger';\nimport { ColumnTypeLabel } from './ColumnTypeLabel/ColumnTypeLabel';\nimport CertifiedIconWithTooltip from './CertifiedIconWithTooltip';\nimport Tooltip from './Tooltip';\nimport { getMetricTooltipNode } from './labelUtils';\nimport { SQLPopover } from './SQLPopover';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  > svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\nexport function MetricOption({ metric, labelRef, openInNewWindow = false, showFormula = true, showType = false, shouldShowTooltip = true, url = '' }) {\n  const verbose = metric.verbose_name || metric.metric_name || metric.label;\n  const link = url ? ___EmotionJSX(\"a\", { href: url, target: openInNewWindow ? '_blank' : '', rel: \"noreferrer\" },\n  verbose\n  ) : verbose;\n  const label = ___EmotionJSX(\"span\", { className: \"option-label metric-option-label\", css: (theme) => css`\n        margin-right: ${theme.gridUnit}px;\n      `, ref: labelRef },\n  link\n  );\n  const warningMarkdown = metric.warning_markdown || metric.warning_text;\n  const [tooltipText, setTooltipText] = useState(metric.metric_name);\n  useLayoutEffect(() => {\n    setTooltipText(getMetricTooltipNode(metric, labelRef));\n  }, [labelRef, metric]);\n  return ___EmotionJSX(FlexRowContainer, { className: \"metric-option\" },\n  showType && ___EmotionJSX(ColumnTypeLabel, { type: \"expression\" }),\n  shouldShowTooltip ? ___EmotionJSX(Tooltip, { id: \"metric-name-tooltip\", title: tooltipText },\n  label\n  ) : label,\n  showFormula && metric.expression && ___EmotionJSX(SQLPopover, { sqlExpression: metric.expression }),\n  metric.is_certified && ___EmotionJSX(CertifiedIconWithTooltip, { metricName: metric.metric_name, certifiedBy: metric.certified_by, details: metric.certification_details }),\n  warningMarkdown && ___EmotionJSX(InfoTooltipWithTrigger, { className: \"text-warning\", icon: \"warning\", tooltip: ___EmotionJSX(SafeMarkdown, { source: warningMarkdown }), label: `warn-${metric.metric_name}`, iconsStyle: { marginLeft: 0 } })\n  );\n}__signature__(MetricOption, \"useState{[tooltipText, setTooltipText](metric.metric_name)}\\nuseLayoutEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FlexRowContainer, \"FlexRowContainer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/MetricOption.tsx\");reactHotLoader.register(MetricOption, \"MetricOption\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/MetricOption.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useState","useLayoutEffect","css","styled","SafeMarkdown","InfoTooltipWithTrigger","ColumnTypeLabel","CertifiedIconWithTooltip","Tooltip","getMetricTooltipNode","SQLPopover","jsx","___EmotionJSX","FlexRowContainer","div","theme","gridUnit","MetricOption","metric","labelRef","openInNewWindow","showFormula","showType","shouldShowTooltip","url","verbose","verbose_name","metric_name","label","link","href","target","rel","className","ref","warningMarkdown","warning_markdown","warning_text","tooltipText","setTooltipText","type","id","title","expression","sqlExpression","is_certified","metricName","certifiedBy","certified_by","details","certification_details","icon","tooltip","source","iconsStyle","marginLeft","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/MetricOption.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, ReactNode, useLayoutEffect } from 'react';\nimport {\n  css,\n  styled,\n  Metric,\n  SafeMarkdown,\n  SupersetTheme,\n} from '@superset-ui/core';\nimport InfoTooltipWithTrigger from './InfoTooltipWithTrigger';\nimport { ColumnTypeLabel } from './ColumnTypeLabel/ColumnTypeLabel';\nimport CertifiedIconWithTooltip from './CertifiedIconWithTooltip';\nimport Tooltip from './Tooltip';\nimport { getMetricTooltipNode } from './labelUtils';\nimport { SQLPopover } from './SQLPopover';\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  > svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nexport interface MetricOptionProps {\n  metric: Omit<Metric, 'id'> & { label?: string };\n  openInNewWindow?: boolean;\n  showFormula?: boolean;\n  showType?: boolean;\n  url?: string;\n  labelRef?: React.RefObject<any>;\n  shouldShowTooltip?: boolean;\n}\n\nexport function MetricOption({\n  metric,\n  labelRef,\n  openInNewWindow = false,\n  showFormula = true,\n  showType = false,\n  shouldShowTooltip = true,\n  url = '',\n}: MetricOptionProps) {\n  const verbose = metric.verbose_name || metric.metric_name || metric.label;\n  const link = url ? (\n    <a href={url} target={openInNewWindow ? '_blank' : ''} rel=\"noreferrer\">\n      {verbose}\n    </a>\n  ) : (\n    verbose\n  );\n\n  const label = (\n    <span\n      className=\"option-label metric-option-label\"\n      css={(theme: SupersetTheme) => css`\n        margin-right: ${theme.gridUnit}px;\n      `}\n      ref={labelRef}\n    >\n      {link}\n    </span>\n  );\n\n  const warningMarkdown = metric.warning_markdown || metric.warning_text;\n\n  const [tooltipText, setTooltipText] = useState<ReactNode>(metric.metric_name);\n\n  useLayoutEffect(() => {\n    setTooltipText(getMetricTooltipNode(metric, labelRef));\n  }, [labelRef, metric]);\n\n  return (\n    <FlexRowContainer className=\"metric-option\">\n      {showType && <ColumnTypeLabel type=\"expression\" />}\n      {shouldShowTooltip ? (\n        <Tooltip id=\"metric-name-tooltip\" title={tooltipText}>\n          {label}\n        </Tooltip>\n      ) : (\n        label\n      )}\n      {showFormula && metric.expression && (\n        <SQLPopover sqlExpression={metric.expression} />\n      )}\n      {metric.is_certified && (\n        <CertifiedIconWithTooltip\n          metricName={metric.metric_name}\n          certifiedBy={metric.certified_by}\n          details={metric.certification_details}\n        />\n      )}\n      {warningMarkdown && (\n        <InfoTooltipWithTrigger\n          className=\"text-warning\"\n          icon=\"warning\"\n          tooltip={<SafeMarkdown source={warningMarkdown} />}\n          label={`warn-${metric.metric_name}`}\n          iconsStyle={{ marginLeft: 0 }}\n        />\n      )}\n    </FlexRowContainer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}