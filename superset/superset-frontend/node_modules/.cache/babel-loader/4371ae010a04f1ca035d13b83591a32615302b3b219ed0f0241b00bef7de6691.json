{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { css, styled, t } from '@superset-ui/core';\nimport { Input, TextArea } from 'src/components/Input';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { URL_PARAMS } from 'src/constants';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport { CopyButton } from './DataTableControl';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst CopyButtonEmbedCode = styled(CopyButton)`\n  && {\n    margin: 0 0 ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EmbedCodeContent = ({ formData, addDangerToast }) => {\n  const [height, setHeight] = useState('400');\n  const [width, setWidth] = useState('600');\n  const [url, setUrl] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleInputChange = useCallback((e) => {\n    const { value, name } = e.currentTarget;\n    if (name === 'width') {\n      setWidth(value);\n    }\n    if (name === 'height') {\n      setHeight(value);\n    }\n  }, []);\n\n  const updateUrl = useCallback(() => {\n    setUrl('');\n    getChartPermalink(formData).\n    then((url) => {\n      setUrl(url);\n      setErrorMessage('');\n    }).\n    catch(() => {\n      setErrorMessage(t('Error'));\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    });\n  }, [addDangerToast, formData]);\n\n  useEffect(() => {\n    updateUrl();\n  }, []);\n\n  const html = useMemo(() => {\n    if (!url) return '';\n    const srcLink = `${url}?${URL_PARAMS.standalone.name}=1&height=${height}`;\n    return (\n      '<iframe\\n' +\n      `  width=\"${width}\"\\n` +\n      `  height=\"${height}\"\\n` +\n      '  seamless\\n' +\n      '  frameBorder=\"0\"\\n' +\n      '  scrolling=\"no\"\\n' +\n      `  src=\"${srcLink}\"\\n` +\n      '>\\n' +\n      '</iframe>');\n\n  }, [height, url, width]);\n\n  const text = errorMessage || html || t('Generating link, please wait..');\n  return (\n    ___EmotionJSX(\"div\", { id: \"embed-code-popover\", \"data-test\": \"embed-code-popover\" },\n    ___EmotionJSX(\"div\", {\n      css: css`\n          display: flex;\n          flex-direction: column;\n        ` },\n\n    ___EmotionJSX(CopyToClipboard, {\n      shouldShowText: false,\n      text: html,\n      copyNode:\n      ___EmotionJSX(CopyButtonEmbedCode, { buttonSize: \"xsmall\" },\n      ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\" })\n      ) }\n\n    ),\n    ___EmotionJSX(TextArea, {\n      \"data-test\": \"embed-code-textarea\",\n      name: \"embedCode\",\n      disabled: !html,\n      value: text,\n      rows: \"4\",\n      readOnly: true,\n      css: (theme) => css`\n            resize: vertical;\n            padding: ${theme.gridUnit * 2}px;\n            font-size: ${theme.typography.sizes.s}px;\n            border-radius: 4px;\n            background-color: ${theme.colors.secondary.light5};\n          ` }\n    )\n    ),\n    ___EmotionJSX(\"div\", {\n      css: (theme) => css`\n          display: flex;\n          margin-top: ${theme.gridUnit * 4}px;\n          & > div {\n            margin-right: ${theme.gridUnit * 2}px;\n          }\n          & > div:last-of-type {\n            margin-right: 0;\n            margin-left: ${theme.gridUnit * 2}px;\n          }\n        ` },\n\n    ___EmotionJSX(\"div\", null,\n    ___EmotionJSX(\"label\", { htmlFor: \"embed-height\" }, t('Chart height')),\n    ___EmotionJSX(Input, {\n      type: \"text\",\n      defaultValue: height,\n      name: \"height\",\n      onChange: handleInputChange }\n    )\n    ),\n    ___EmotionJSX(\"div\", null,\n    ___EmotionJSX(\"label\", { htmlFor: \"embed-width\" }, t('Chart width')),\n    ___EmotionJSX(Input, {\n      type: \"text\",\n      defaultValue: width,\n      name: \"width\",\n      onChange: handleInputChange,\n      id: \"embed-width\" }\n    )\n    )\n    )\n    ));\n\n};__signature__(EmbedCodeContent, \"useState{[height, setHeight]('400')}\\nuseState{[width, setWidth]('600')}\\nuseState{[url, setUrl]('')}\\nuseState{[errorMessage, setErrorMessage]('')}\\nuseCallback{handleInputChange}\\nuseCallback{updateUrl}\\nuseEffect{}\\nuseMemo{html}\");const _default =\n\nEmbedCodeContent;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(CopyButtonEmbedCode, \"CopyButtonEmbedCode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/EmbedCodeContent.jsx\");reactHotLoader.register(EmbedCodeContent, \"EmbedCodeContent\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/EmbedCodeContent.jsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/EmbedCodeContent.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","css","styled","t","Input","TextArea","CopyToClipboard","URL_PARAMS","getChartPermalink","CopyButton","jsx","___EmotionJSX","CopyButtonEmbedCode","theme","gridUnit","EmbedCodeContent","formData","addDangerToast","height","setHeight","width","setWidth","url","setUrl","errorMessage","setErrorMessage","handleInputChange","e","value","name","currentTarget","updateUrl","then","catch","html","srcLink","standalone","text","id","shouldShowText","copyNode","buttonSize","className","disabled","rows","readOnly","typography","sizes","s","colors","secondary","light5","htmlFor","type","defaultValue","onChange","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/EmbedCodeContent.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { css, styled, t } from '@superset-ui/core';\nimport { Input, TextArea } from 'src/components/Input';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { URL_PARAMS } from 'src/constants';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport { CopyButton } from './DataTableControl';\n\nconst CopyButtonEmbedCode = styled(CopyButton)`\n  && {\n    margin: 0 0 ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EmbedCodeContent = ({ formData, addDangerToast }) => {\n  const [height, setHeight] = useState('400');\n  const [width, setWidth] = useState('600');\n  const [url, setUrl] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleInputChange = useCallback(e => {\n    const { value, name } = e.currentTarget;\n    if (name === 'width') {\n      setWidth(value);\n    }\n    if (name === 'height') {\n      setHeight(value);\n    }\n  }, []);\n\n  const updateUrl = useCallback(() => {\n    setUrl('');\n    getChartPermalink(formData)\n      .then(url => {\n        setUrl(url);\n        setErrorMessage('');\n      })\n      .catch(() => {\n        setErrorMessage(t('Error'));\n        addDangerToast(t('Sorry, something went wrong. Try again later.'));\n      });\n  }, [addDangerToast, formData]);\n\n  useEffect(() => {\n    updateUrl();\n  }, []);\n\n  const html = useMemo(() => {\n    if (!url) return '';\n    const srcLink = `${url}?${URL_PARAMS.standalone.name}=1&height=${height}`;\n    return (\n      '<iframe\\n' +\n      `  width=\"${width}\"\\n` +\n      `  height=\"${height}\"\\n` +\n      '  seamless\\n' +\n      '  frameBorder=\"0\"\\n' +\n      '  scrolling=\"no\"\\n' +\n      `  src=\"${srcLink}\"\\n` +\n      '>\\n' +\n      '</iframe>'\n    );\n  }, [height, url, width]);\n\n  const text = errorMessage || html || t('Generating link, please wait..');\n  return (\n    <div id=\"embed-code-popover\" data-test=\"embed-code-popover\">\n      <div\n        css={css`\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        <CopyToClipboard\n          shouldShowText={false}\n          text={html}\n          copyNode={\n            <CopyButtonEmbedCode buttonSize=\"xsmall\">\n              <i className=\"fa fa-clipboard\" />\n            </CopyButtonEmbedCode>\n          }\n        />\n        <TextArea\n          data-test=\"embed-code-textarea\"\n          name=\"embedCode\"\n          disabled={!html}\n          value={text}\n          rows=\"4\"\n          readOnly\n          css={theme => css`\n            resize: vertical;\n            padding: ${theme.gridUnit * 2}px;\n            font-size: ${theme.typography.sizes.s}px;\n            border-radius: 4px;\n            background-color: ${theme.colors.secondary.light5};\n          `}\n        />\n      </div>\n      <div\n        css={theme => css`\n          display: flex;\n          margin-top: ${theme.gridUnit * 4}px;\n          & > div {\n            margin-right: ${theme.gridUnit * 2}px;\n          }\n          & > div:last-of-type {\n            margin-right: 0;\n            margin-left: ${theme.gridUnit * 2}px;\n          }\n        `}\n      >\n        <div>\n          <label htmlFor=\"embed-height\">{t('Chart height')}</label>\n          <Input\n            type=\"text\"\n            defaultValue={height}\n            name=\"height\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"embed-width\">{t('Chart width')}</label>\n          <Input\n            type=\"text\"\n            defaultValue={width}\n            name=\"width\"\n            onChange={handleInputChange}\n            id=\"embed-width\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EmbedCodeContent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}