{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useLayoutEffect, useMemo, useState } from 'react';\nimport { extent as d3Extent, max as d3Max } from 'd3-array';\nimport { FaSort } from '@react-icons/all-files/fa/FaSort';\nimport { FaSortDown as FaSortDesc } from '@react-icons/all-files/fa/FaSortDown';\nimport { FaSortUp as FaSortAsc } from '@react-icons/all-files/fa/FaSortUp';\nimport cx from 'classnames';\nimport { DTTM_ALIAS, ensureIsArray, GenericDataType, getSelectedText, getTimeFormatterForGranularity, styled, css, t, tn } from '@superset-ui/core';\nimport DataTable from './DataTable';\nimport Styles from './Styles';\nimport { formatColumnValue } from './utils/formatValue';\nimport { PAGE_SIZE_OPTIONS } from './consts';\nimport { updateExternalFormData } from './DataTable/utils/externalAPIs';\nimport getScrollBarSize from './DataTable/utils/getScrollBarSize';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst ACTION_KEYS = {\n  enter: 'Enter',\n  spacebar: 'Spacebar',\n  space: ' '\n};\n/**\n * Return sortType based on data type\n */\nfunction getSortTypeByDataType(dataType) {\n  if (dataType === GenericDataType.Temporal) {\n    return 'datetime';\n  }\n  if (dataType === GenericDataType.String) {\n    return 'alphanumeric';\n  }\n  return 'basic';\n}\n/**\n * Cell background width calculation for horizontal bar chart\n */\nfunction cellWidth({ value, valueRange, alignPositiveNegative }) {\n  const [minValue, maxValue] = valueRange;\n  if (alignPositiveNegative) {\n    const perc = Math.abs(Math.round(value / maxValue * 100));\n    return perc;\n  }\n  const posExtent = Math.abs(Math.max(maxValue, 0));\n  const negExtent = Math.abs(Math.min(minValue, 0));\n  const tot = posExtent + negExtent;\n  const perc2 = Math.round(Math.abs(value) / tot * 100);\n  return perc2;\n}\n/**\n * Cell left margin (offset) calculation for horizontal bar chart elements\n * when alignPositiveNegative is not set\n */\nfunction cellOffset({ value, valueRange, alignPositiveNegative }) {\n  if (alignPositiveNegative) {\n    return 0;\n  }\n  const [minValue, maxValue] = valueRange;\n  const posExtent = Math.abs(Math.max(maxValue, 0));\n  const negExtent = Math.abs(Math.min(minValue, 0));\n  const tot = posExtent + negExtent;\n  return Math.round(Math.min(negExtent + value, negExtent) / tot * 100);\n}\n/**\n * Cell background color calculation for horizontal bar chart\n */\nfunction cellBackground({ value, colorPositiveNegative = false }) {\n  const r = colorPositiveNegative && value < 0 ? 150 : 0;\n  return `rgba(${r},0,0,0.2)`;\n}\nfunction SortIcon({ column }) {\n  const { isSorted, isSortedDesc } = column;\n  let sortIcon = ___EmotionJSX(FaSort, null);\n  if (isSorted) {\n    sortIcon = isSortedDesc ? ___EmotionJSX(FaSortDesc, null) : ___EmotionJSX(FaSortAsc, null);\n  }\n  return sortIcon;\n}\nfunction SearchInput({ count, value, onChange }) {\n  return ___EmotionJSX(\"span\", { className: \"dt-global-filter\" },\n  t('Search'), ' ',\n  ___EmotionJSX(\"input\", { className: \"form-control input-sm\", placeholder: tn('search.num_records', count), value: value, \"aria-label\": t('Search %s records', count), onChange: onChange })\n  );\n}\nfunction SelectPageSize({ options, current, onChange }) {\n  return ___EmotionJSX(\"span\", { className: \"dt-select-page-size form-inline\" },\n  t('page_size.show'), ' ',\n  ___EmotionJSX(\"select\", { className: \"form-control input-sm\", value: current, onBlur: () => {}, onChange: (e) => {\n      onChange(Number(e.target.value));\n    } },\n  options.map((option) => {\n    const [size, text] = Array.isArray(option) ?\n    option :\n    [option, option];\n    return ___EmotionJSX(\"option\", { key: size, value: size },\n    text\n    );\n  })\n  ), ' ',\n  t('page_size.entries')\n  );\n}\nconst getNoResultsMessage = (filter) => filter ? t('No matching records found') : t('No records found');var _ref = process.env.NODE_ENV === \"production\" ? { name: \"tvoj80\", styles: \"display:inline-flex;align-items:flex-end\" } : { name: \"1f5n49p-Header\", styles: \"display:inline-flex;align-items:flex-end;label:Header;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9wbHVnaW5zL3BsdWdpbi1jaGFydC10YWJsZS9zcmMvVGFibGVDaGFydC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK1kyQyIsImZpbGUiOiIvaG9tZS9wYXdhbmsvRG9jdW1lbnRzL2RjaW0vc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvcGx1Z2lucy9wbHVnaW4tY2hhcnQtdGFibGUvc3JjL1RhYmxlQ2hhcnQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VMYXlvdXRFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlLCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGV4dGVudCBhcyBkM0V4dGVudCwgbWF4IGFzIGQzTWF4IH0gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IHsgRmFTb3J0IH0gZnJvbSAnQHJlYWN0LWljb25zL2FsbC1maWxlcy9mYS9GYVNvcnQnO1xuaW1wb3J0IHsgRmFTb3J0RG93biBhcyBGYVNvcnREZXNjIH0gZnJvbSAnQHJlYWN0LWljb25zL2FsbC1maWxlcy9mYS9GYVNvcnREb3duJztcbmltcG9ydCB7IEZhU29ydFVwIGFzIEZhU29ydEFzYyB9IGZyb20gJ0ByZWFjdC1pY29ucy9hbGwtZmlsZXMvZmEvRmFTb3J0VXAnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgRFRUTV9BTElBUywgZW5zdXJlSXNBcnJheSwgR2VuZXJpY0RhdGFUeXBlLCBnZXRTZWxlY3RlZFRleHQsIGdldFRpbWVGb3JtYXR0ZXJGb3JHcmFudWxhcml0eSwgc3R5bGVkLCBjc3MsIHQsIHRuLCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBEYXRhVGFibGUgZnJvbSAnLi9EYXRhVGFibGUnO1xuaW1wb3J0IFN0eWxlcyBmcm9tICcuL1N0eWxlcyc7XG5pbXBvcnQgeyBmb3JtYXRDb2x1bW5WYWx1ZSB9IGZyb20gJy4vdXRpbHMvZm9ybWF0VmFsdWUnO1xuaW1wb3J0IHsgUEFHRV9TSVpFX09QVElPTlMgfSBmcm9tICcuL2NvbnN0cyc7XG5pbXBvcnQgeyB1cGRhdGVFeHRlcm5hbEZvcm1EYXRhIH0gZnJvbSAnLi9EYXRhVGFibGUvdXRpbHMvZXh0ZXJuYWxBUElzJztcbmltcG9ydCBnZXRTY3JvbGxCYXJTaXplIGZyb20gJy4vRGF0YVRhYmxlL3V0aWxzL2dldFNjcm9sbEJhclNpemUnO1xuY29uc3QgQUNUSU9OX0tFWVMgPSB7XG4gICAgZW50ZXI6ICdFbnRlcicsXG4gICAgc3BhY2ViYXI6ICdTcGFjZWJhcicsXG4gICAgc3BhY2U6ICcgJyxcbn07XG4vKipcbiAqIFJldHVybiBzb3J0VHlwZSBiYXNlZCBvbiBkYXRhIHR5cGVcbiAqL1xuZnVuY3Rpb24gZ2V0U29ydFR5cGVCeURhdGFUeXBlKGRhdGFUeXBlKSB7XG4gICAgaWYgKGRhdGFUeXBlID09PSBHZW5lcmljRGF0YVR5cGUuVGVtcG9yYWwpIHtcbiAgICAgICAgcmV0dXJuICdkYXRldGltZSc7XG4gICAgfVxuICAgIGlmIChkYXRhVHlwZSA9PT0gR2VuZXJpY0RhdGFUeXBlLlN0cmluZykge1xuICAgICAgICByZXR1cm4gJ2FscGhhbnVtZXJpYyc7XG4gICAgfVxuICAgIHJldHVybiAnYmFzaWMnO1xufVxuLyoqXG4gKiBDZWxsIGJhY2tncm91bmQgd2lkdGggY2FsY3VsYXRpb24gZm9yIGhvcml6b250YWwgYmFyIGNoYXJ0XG4gKi9cbmZ1bmN0aW9uIGNlbGxXaWR0aCh7IHZhbHVlLCB2YWx1ZVJhbmdlLCBhbGlnblBvc2l0aXZlTmVnYXRpdmUsIH0pIHtcbiAgICBjb25zdCBbbWluVmFsdWUsIG1heFZhbHVlXSA9IHZhbHVlUmFuZ2U7XG4gICAgaWYgKGFsaWduUG9zaXRpdmVOZWdhdGl2ZSkge1xuICAgICAgICBjb25zdCBwZXJjID0gTWF0aC5hYnMoTWF0aC5yb3VuZCgodmFsdWUgLyBtYXhWYWx1ZSkgKiAxMDApKTtcbiAgICAgICAgcmV0dXJuIHBlcmM7XG4gICAgfVxuICAgIGNvbnN0IHBvc0V4dGVudCA9IE1hdGguYWJzKE1hdGgubWF4KG1heFZhbHVlLCAwKSk7XG4gICAgY29uc3QgbmVnRXh0ZW50ID0gTWF0aC5hYnMoTWF0aC5taW4obWluVmFsdWUsIDApKTtcbiAgICBjb25zdCB0b3QgPSBwb3NFeHRlbnQgKyBuZWdFeHRlbnQ7XG4gICAgY29uc3QgcGVyYzIgPSBNYXRoLnJvdW5kKChNYXRoLmFicyh2YWx1ZSkgLyB0b3QpICogMTAwKTtcbiAgICByZXR1cm4gcGVyYzI7XG59XG4vKipcbiAqIENlbGwgbGVmdCBtYXJnaW4gKG9mZnNldCkgY2FsY3VsYXRpb24gZm9yIGhvcml6b250YWwgYmFyIGNoYXJ0IGVsZW1lbnRzXG4gKiB3aGVuIGFsaWduUG9zaXRpdmVOZWdhdGl2ZSBpcyBub3Qgc2V0XG4gKi9cbmZ1bmN0aW9uIGNlbGxPZmZzZXQoeyB2YWx1ZSwgdmFsdWVSYW5nZSwgYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlLCB9KSB7XG4gICAgaWYgKGFsaWduUG9zaXRpdmVOZWdhdGl2ZSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3QgW21pblZhbHVlLCBtYXhWYWx1ZV0gPSB2YWx1ZVJhbmdlO1xuICAgIGNvbnN0IHBvc0V4dGVudCA9IE1hdGguYWJzKE1hdGgubWF4KG1heFZhbHVlLCAwKSk7XG4gICAgY29uc3QgbmVnRXh0ZW50ID0gTWF0aC5hYnMoTWF0aC5taW4obWluVmFsdWUsIDApKTtcbiAgICBjb25zdCB0b3QgPSBwb3NFeHRlbnQgKyBuZWdFeHRlbnQ7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoKE1hdGgubWluKG5lZ0V4dGVudCArIHZhbHVlLCBuZWdFeHRlbnQpIC8gdG90KSAqIDEwMCk7XG59XG4vKipcbiAqIENlbGwgYmFja2dyb3VuZCBjb2xvciBjYWxjdWxhdGlvbiBmb3IgaG9yaXpvbnRhbCBiYXIgY2hhcnRcbiAqL1xuZnVuY3Rpb24gY2VsbEJhY2tncm91bmQoeyB2YWx1ZSwgY29sb3JQb3NpdGl2ZU5lZ2F0aXZlID0gZmFsc2UsIH0pIHtcbiAgICBjb25zdCByID0gY29sb3JQb3NpdGl2ZU5lZ2F0aXZlICYmIHZhbHVlIDwgMCA/IDE1MCA6IDA7XG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sMCwwLDAuMilgO1xufVxuZnVuY3Rpb24gU29ydEljb24oeyBjb2x1bW4gfSkge1xuICAgIGNvbnN0IHsgaXNTb3J0ZWQsIGlzU29ydGVkRGVzYyB9ID0gY29sdW1uO1xuICAgIGxldCBzb3J0SWNvbiA9IDxGYVNvcnQgLz47XG4gICAgaWYgKGlzU29ydGVkKSB7XG4gICAgICAgIHNvcnRJY29uID0gaXNTb3J0ZWREZXNjID8gPEZhU29ydERlc2MgLz4gOiA8RmFTb3J0QXNjIC8+O1xuICAgIH1cbiAgICByZXR1cm4gc29ydEljb247XG59XG5mdW5jdGlvbiBTZWFyY2hJbnB1dCh7IGNvdW50LCB2YWx1ZSwgb25DaGFuZ2UgfSkge1xuICAgIHJldHVybiAoPHNwYW4gY2xhc3NOYW1lPVwiZHQtZ2xvYmFsLWZpbHRlclwiPlxuICAgICAge3QoJ1NlYXJjaCcpfXsnICd9XG4gICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sIGlucHV0LXNtXCIgcGxhY2Vob2xkZXI9e3RuKCdzZWFyY2gubnVtX3JlY29yZHMnLCBjb3VudCl9IHZhbHVlPXt2YWx1ZX0gYXJpYS1sYWJlbD17dCgnU2VhcmNoICVzIHJlY29yZHMnLCBjb3VudCl9IG9uQ2hhbmdlPXtvbkNoYW5nZX0vPlxuICAgIDwvc3Bhbj4pO1xufVxuZnVuY3Rpb24gU2VsZWN0UGFnZVNpemUoeyBvcHRpb25zLCBjdXJyZW50LCBvbkNoYW5nZSwgfSkge1xuICAgIHJldHVybiAoPHNwYW4gY2xhc3NOYW1lPVwiZHQtc2VsZWN0LXBhZ2Utc2l6ZSBmb3JtLWlubGluZVwiPlxuICAgICAge3QoJ3BhZ2Vfc2l6ZS5zaG93Jyl9eycgJ31cbiAgICAgIDxzZWxlY3QgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sIGlucHV0LXNtXCIgdmFsdWU9e2N1cnJlbnR9IG9uQmx1cj17KCkgPT4geyB9fSBvbkNoYW5nZT17ZSA9PiB7XG4gICAgICAgICAgICBvbkNoYW5nZShOdW1iZXIoZS50YXJnZXQudmFsdWUpKTtcbiAgICAgICAgfX0+XG4gICAgICAgIHtvcHRpb25zLm1hcChvcHRpb24gPT4ge1xuICAgICAgICAgICAgY29uc3QgW3NpemUsIHRleHRdID0gQXJyYXkuaXNBcnJheShvcHRpb24pXG4gICAgICAgICAgICAgICAgPyBvcHRpb25cbiAgICAgICAgICAgICAgICA6IFtvcHRpb24sIG9wdGlvbl07XG4gICAgICAgICAgICByZXR1cm4gKDxvcHRpb24ga2V5PXtzaXplfSB2YWx1ZT17c2l6ZX0+XG4gICAgICAgICAgICAgIHt0ZXh0fVxuICAgICAgICAgICAgPC9vcHRpb24+KTtcbiAgICAgICAgfSl9XG4gICAgICA8L3NlbGVjdD57JyAnfVxuICAgICAge3QoJ3BhZ2Vfc2l6ZS5lbnRyaWVzJyl9XG4gICAgPC9zcGFuPik7XG59XG5jb25zdCBnZXROb1Jlc3VsdHNNZXNzYWdlID0gKGZpbHRlcikgPT4gZmlsdGVyID8gdCgnTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCcpIDogdCgnTm8gcmVjb3JkcyBmb3VuZCcpO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGFibGVDaGFydChwcm9wcykge1xuICAgIGNvbnN0IHsgdGltZUdyYWluLCBoZWlnaHQsIHdpZHRoLCBkYXRhLCB0b3RhbHMsIGlzUmF3UmVjb3Jkcywgcm93Q291bnQgPSAwLCBjb2x1bW5zOiBjb2x1bW5zTWV0YSwgYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlOiBkZWZhdWx0QWxpZ25QTiA9IGZhbHNlLCBjb2xvclBvc2l0aXZlTmVnYXRpdmU6IGRlZmF1bHRDb2xvclBOID0gZmFsc2UsIGluY2x1ZGVTZWFyY2ggPSBmYWxzZSwgcGFnZVNpemUgPSAwLCBzZXJ2ZXJQYWdpbmF0aW9uID0gZmFsc2UsIHNlcnZlclBhZ2luYXRpb25EYXRhLCBzZXREYXRhTWFzaywgc2hvd0NlbGxCYXJzID0gdHJ1ZSwgc29ydERlc2MgPSBmYWxzZSwgZmlsdGVycywgc3RpY2t5ID0gdHJ1ZSwgLy8gd2hldGhlciB0byB1c2Ugc3RpY2t5IGhlYWRlclxuICAgIGNvbHVtbkNvbG9yRm9ybWF0dGVycywgYWxsb3dSZWFycmFuZ2VDb2x1bW5zID0gZmFsc2UsIGFsbG93UmVuZGVySHRtbCA9IHRydWUsIG9uQ29udGV4dE1lbnUsIGVtaXRDcm9zc0ZpbHRlcnMsIH0gPSBwcm9wcztcbiAgICBjb25zdCB0aW1lc3RhbXBGb3JtYXR0ZXIgPSB1c2VDYWxsYmFjayh2YWx1ZSA9PiBnZXRUaW1lRm9ybWF0dGVyRm9yR3JhbnVsYXJpdHkodGltZUdyYWluKSh2YWx1ZSksIFt0aW1lR3JhaW5dKTtcbiAgICBjb25zdCBbdGFibGVTaXplLCBzZXRUYWJsZVNpemVdID0gdXNlU3RhdGUoe1xuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiAwLFxuICAgIH0pO1xuICAgIC8vIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBjb2x1bW4gb3JkZXIgY2hhbmdlZCwgc28gdGhhdCBjb2x1bW4gd2lkdGhzIGNhbiB0b29cbiAgICBjb25zdCBbY29sdW1uT3JkZXJUb2dnbGUsIHNldENvbHVtbk9yZGVyVG9nZ2xlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICAvLyBvbmx5IHRha2UgcmVsZXZhbnQgcGFnZSBzaXplIG9wdGlvbnNcbiAgICBjb25zdCBwYWdlU2l6ZU9wdGlvbnMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgY29uc3QgZ2V0U2VydmVyUGFnaW5hdGlvbiA9IChuKSA9PiBuIDw9IHJvd0NvdW50O1xuICAgICAgICByZXR1cm4gUEFHRV9TSVpFX09QVElPTlMuZmlsdGVyKChbbl0pID0+IHNlcnZlclBhZ2luYXRpb24gPyBnZXRTZXJ2ZXJQYWdpbmF0aW9uKG4pIDogbiA8PSAyICogZGF0YS5sZW5ndGgpO1xuICAgIH0sIFtkYXRhLmxlbmd0aCwgcm93Q291bnQsIHNlcnZlclBhZ2luYXRpb25dKTtcbiAgICBjb25zdCBnZXRWYWx1ZVJhbmdlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gZ2V0VmFsdWVSYW5nZShrZXksIGFsaWduUG9zaXRpdmVOZWdhdGl2ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGE/LlswXT8uW2tleV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjb25zdCBudW1zID0gZGF0YS5tYXAocm93ID0+IHJvd1trZXldKTtcbiAgICAgICAgICAgIHJldHVybiAoYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlXG4gICAgICAgICAgICAgICAgPyBbMCwgZDNNYXgobnVtcy5tYXAoTWF0aC5hYnMpKV1cbiAgICAgICAgICAgICAgICA6IGQzRXh0ZW50KG51bXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LCBbZGF0YV0pO1xuICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSB7XG4gICAgICAgIHJldHVybiAhIWZpbHRlcnMgJiYgZmlsdGVyc1trZXldPy5pbmNsdWRlcyh2YWwpO1xuICAgIH0sIFtmaWx0ZXJzXSk7XG4gICAgY29uc3QgZ2V0Q3Jvc3NGaWx0ZXJEYXRhTWFzayA9IChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIGxldCB1cGRhdGVkRmlsdGVycyA9IHsgLi4uKGZpbHRlcnMgfHwge30pIH07XG4gICAgICAgIGlmIChmaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRGaWx0ZXJzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVkRmlsdGVycyA9IHtcbiAgICAgICAgICAgICAgICBba2V5XTogW3ZhbHVlXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodXBkYXRlZEZpbHRlcnNba2V5XSkgJiZcbiAgICAgICAgICAgIHVwZGF0ZWRGaWx0ZXJzW2tleV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlZEZpbHRlcnNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBncm91cEJ5ID0gT2JqZWN0LmtleXModXBkYXRlZEZpbHRlcnMpO1xuICAgICAgICBjb25zdCBncm91cEJ5VmFsdWVzID0gT2JqZWN0LnZhbHVlcyh1cGRhdGVkRmlsdGVycyk7XG4gICAgICAgIGNvbnN0IGxhYmVsRWxlbWVudHMgPSBbXTtcbiAgICAgICAgZ3JvdXBCeS5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc1RpbWVzdGFtcCA9IGNvbCA9PT0gRFRUTV9BTElBUztcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclZhbHVlcyA9IGVuc3VyZUlzQXJyYXkodXBkYXRlZEZpbHRlcnM/Lltjb2xdKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVMYWJlbHMgPSBmaWx0ZXJWYWx1ZXMubWFwKHZhbHVlID0+IGlzVGltZXN0YW1wID8gdGltZXN0YW1wRm9ybWF0dGVyKHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnRzLnB1c2goYCR7dmFsdWVMYWJlbHMuam9pbignLCAnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhTWFzazoge1xuICAgICAgICAgICAgICAgIGV4dHJhRm9ybURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyczogZ3JvdXBCeS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ3JvdXBCeS5tYXAoY29sID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBlbnN1cmVJc0FycmF5KHVwZGF0ZWRGaWx0ZXJzPy5bY29sXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJUyBOVUxMJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAnSU4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHZhbC5tYXAoZWwgPT4gZWwgaW5zdGFuY2VvZiBEYXRlID8gZWwuZ2V0VGltZSgpIDogZWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFpbjogY29sID09PSBEVFRNX0FMSUFTID8gdGltZUdyYWluIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbHRlclN0YXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbEVsZW1lbnRzLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBncm91cEJ5VmFsdWVzLmxlbmd0aCA/IGdyb3VwQnlWYWx1ZXMgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzOiB1cGRhdGVkRmlsdGVycyAmJiBPYmplY3Qua2V5cyh1cGRhdGVkRmlsdGVycykubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHVwZGF0ZWRGaWx0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0N1cnJlbnRWYWx1ZVNlbGVjdGVkOiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsdWUpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRmlsdGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gdG9nZ2xlRmlsdGVyKGtleSwgdmFsKSB7XG4gICAgICAgIGlmICghZW1pdENyb3NzRmlsdGVycykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldERhdGFNYXNrKGdldENyb3NzRmlsdGVyRGF0YU1hc2soa2V5LCB2YWwpLmRhdGFNYXNrKTtcbiAgICB9LCBbZW1pdENyb3NzRmlsdGVycywgZ2V0Q3Jvc3NGaWx0ZXJEYXRhTWFzaywgc2V0RGF0YU1hc2tdKTtcbiAgICBjb25zdCBnZXRTaGFyZWRTdHlsZSA9IChjb2x1bW4pID0+IHtcbiAgICAgICAgY29uc3QgeyBpc051bWVyaWMsIGNvbmZpZyA9IHt9IH0gPSBjb2x1bW47XG4gICAgICAgIGNvbnN0IHRleHRBbGlnbiA9IGNvbmZpZy5ob3Jpem9udGFsQWxpZ25cbiAgICAgICAgICAgID8gY29uZmlnLmhvcml6b250YWxBbGlnblxuICAgICAgICAgICAgOiBpc051bWVyaWNcbiAgICAgICAgICAgICAgICA/ICdyaWdodCdcbiAgICAgICAgICAgICAgICA6ICdsZWZ0JztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHRBbGlnbixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUNvbnRleHRNZW51ID0gb25Db250ZXh0TWVudSAmJiAhaXNSYXdSZWNvcmRzXG4gICAgICAgID8gKHZhbHVlLCBjZWxsUG9pbnQsIGNsaWVudFgsIGNsaWVudFkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRyaWxsVG9EZXRhaWxGaWx0ZXJzID0gW107XG4gICAgICAgICAgICBjb2x1bW5zTWV0YS5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2wuaXNNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YVJlY29yZFZhbHVlID0gdmFsdWVbY29sLmtleV07XG4gICAgICAgICAgICAgICAgICAgIGRyaWxsVG9EZXRhaWxGaWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sOiBjb2wua2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICc9PScsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWw6IGRhdGFSZWNvcmRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbDogZm9ybWF0Q29sdW1uVmFsdWUoY29sLCBkYXRhUmVjb3JkVmFsdWUpWzFdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9uQ29udGV4dE1lbnUoY2xpZW50WCwgY2xpZW50WSwge1xuICAgICAgICAgICAgICAgIGRyaWxsVG9EZXRhaWw6IGRyaWxsVG9EZXRhaWxGaWx0ZXJzLFxuICAgICAgICAgICAgICAgIGNyb3NzRmlsdGVyOiBjZWxsUG9pbnQuaXNNZXRyaWNcbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRDcm9zc0ZpbHRlckRhdGFNYXNrKGNlbGxQb2ludC5rZXksIGNlbGxQb2ludC52YWx1ZSksXG4gICAgICAgICAgICAgICAgZHJpbGxCeTogY2VsbFBvaW50LmlzTWV0cmljXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sOiBjZWxsUG9pbnQua2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogJz09JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiBjZWxsUG9pbnQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cGJ5RmllbGROYW1lOiAnZ3JvdXBieScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBnZXRDb2x1bW5Db25maWdzID0gdXNlQ2FsbGJhY2soKGNvbHVtbiwgaSkgPT4ge1xuICAgICAgICBjb25zdCB7IGtleSwgbGFiZWwsIGlzTnVtZXJpYywgZGF0YVR5cGUsIGlzTWV0cmljLCBpc1BlcmNlbnRNZXRyaWMsIGNvbmZpZyA9IHt9LCB9ID0gY29sdW1uO1xuICAgICAgICBjb25zdCBjb2x1bW5XaWR0aCA9IE51bWJlci5pc05hTihOdW1iZXIoY29uZmlnLmNvbHVtbldpZHRoKSlcbiAgICAgICAgICAgID8gY29uZmlnLmNvbHVtbldpZHRoXG4gICAgICAgICAgICA6IE51bWJlcihjb25maWcuY29sdW1uV2lkdGgpO1xuICAgICAgICAvLyBpbmxpbmUgc3R5bGUgZm9yIGJvdGggdGggYW5kIHRkIGNlbGxcbiAgICAgICAgY29uc3Qgc2hhcmVkU3R5bGUgPSBnZXRTaGFyZWRTdHlsZShjb2x1bW4pO1xuICAgICAgICBjb25zdCBhbGlnblBvc2l0aXZlTmVnYXRpdmUgPSBjb25maWcuYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gZGVmYXVsdEFsaWduUE5cbiAgICAgICAgICAgIDogY29uZmlnLmFsaWduUG9zaXRpdmVOZWdhdGl2ZTtcbiAgICAgICAgY29uc3QgY29sb3JQb3NpdGl2ZU5lZ2F0aXZlID0gY29uZmlnLmNvbG9yUG9zaXRpdmVOZWdhdGl2ZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGRlZmF1bHRDb2xvclBOXG4gICAgICAgICAgICA6IGNvbmZpZy5jb2xvclBvc2l0aXZlTmVnYXRpdmU7XG4gICAgICAgIGNvbnN0IHsgdHJ1bmNhdGVMb25nQ2VsbHMgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgaGFzQ29sdW1uQ29sb3JGb3JtYXR0ZXJzID0gaXNOdW1lcmljICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGNvbHVtbkNvbG9yRm9ybWF0dGVycykgJiZcbiAgICAgICAgICAgIGNvbHVtbkNvbG9yRm9ybWF0dGVycy5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCB2YWx1ZVJhbmdlID0gIWhhc0NvbHVtbkNvbG9yRm9ybWF0dGVycyAmJlxuICAgICAgICAgICAgKGNvbmZpZy5zaG93Q2VsbEJhcnMgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gc2hvd0NlbGxCYXJzXG4gICAgICAgICAgICAgICAgOiBjb25maWcuc2hvd0NlbGxCYXJzKSAmJlxuICAgICAgICAgICAgKGlzTWV0cmljIHx8IGlzUmF3UmVjb3JkcyB8fCBpc1BlcmNlbnRNZXRyaWMpICYmXG4gICAgICAgICAgICBnZXRWYWx1ZVJhbmdlKGtleSwgYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlKTtcbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9ICcnO1xuICAgICAgICBpZiAoZW1pdENyb3NzRmlsdGVycyAmJiAhaXNNZXRyaWMpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIGR0LWlzLWZpbHRlcic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBTdHJpbmcoaSksXG4gICAgICAgICAgICAvLyBtdXN0IHVzZSBjdXN0b20gYWNjZXNzb3IgdG8gYWxsb3cgYC5gIGluIGNvbHVtbiBuYW1lc1xuICAgICAgICAgICAgLy8gdHlwaW5nIGlzIGluY29ycmVjdCBpbiBjdXJyZW50IHZlcnNpb24gb2YgYEB0eXBlcy9yZWFjdC10YWJsZWBcbiAgICAgICAgICAgIC8vIHNvIHdlIGFzayBUUyBub3QgdG8gY2hlY2suXG4gICAgICAgICAgICBhY2Nlc3NvcjogKChkYXR1bSkgPT4gZGF0dW1ba2V5XSksXG4gICAgICAgICAgICBDZWxsOiAoeyB2YWx1ZSwgcm93IH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbaXNIdG1sLCB0ZXh0XSA9IGZvcm1hdENvbHVtblZhbHVlKGNvbHVtbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBpc0h0bWwgJiYgYWxsb3dSZW5kZXJIdG1sID8geyBfX2h0bWw6IHRleHQgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgIGlmIChoYXNDb2x1bW5Db2xvckZvcm1hdHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uQ29sb3JGb3JtYXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZvcm1hdHRlciA9PiBmb3JtYXR0ZXIuY29sdW1uID09PSBjb2x1bW4ua2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZm9ybWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlclJlc3VsdCA9IHZhbHVlIHx8IHZhbHVlID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBmb3JtYXR0ZXIuZ2V0Q29sb3JGcm9tVmFsdWUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXR0ZXJSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmb3JtYXR0ZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBTdHlsZWRDZWxsID0gc3R5bGVkLnRkIGBcbiAgICAgICAgICAgIHRleHQtYWxpZ246ICR7c2hhcmVkU3R5bGUudGV4dEFsaWdufTtcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiAke3ZhbHVlIGluc3RhbmNlb2YgRGF0ZSA/ICdub3dyYXAnIDogdW5kZWZpbmVkfTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICR7YmFja2dyb3VuZENvbG9yIHx8IHVuZGVmaW5lZH07XG4gICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsQmFyU3R5bGVzID0gY3NzIGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgJHt2YWx1ZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICB3aWR0aDogJHtgJHtjZWxsV2lkdGgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduUG9zaXRpdmVOZWdhdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgfSl9JWB9O1xuICAgICAgICAgICAgICAgIGxlZnQ6ICR7YCR7Y2VsbE9mZnNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25Qb3NpdGl2ZU5lZ2F0aXZlLFxuICAgICAgICAgICAgICAgICAgICB9KX0lYH07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtjZWxsQmFja2dyb3VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBvc2l0aXZlTmVnYXRpdmUsXG4gICAgICAgICAgICAgICAgICAgIH0pfTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IGBoZWFkZXItJHtjb2x1bW4ua2V5fWAsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyByYXcgbnVtYmVyIGluIHRpdGxlIGluIGNhc2Ugb2YgbnVtZXJpYyB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBTdHJpbmcodmFsdWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBlbWl0Q3Jvc3NGaWx0ZXJzICYmICF2YWx1ZVJhbmdlICYmICFpc01ldHJpY1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgc2VsZWN0aW5nIHRleHQgaW4gYSBjZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRTZWxlY3RlZFRleHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVGaWx0ZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29udGV4dE1lbnU6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlQ29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb250ZXh0TWVudShyb3cub3JpZ2luYWwsIHsga2V5LCB2YWx1ZSwgaXNNZXRyaWMgfSwgZS5uYXRpdmVFdmVudC5jbGllbnRYLCBlLm5hdGl2ZUV2ZW50LmNsaWVudFkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID09IG51bGwgPyAnZHQtaXMtbnVsbCcgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWx1ZSkgPyAnIGR0LWlzLWFjdGl2ZS1maWx0ZXInIDogJycsXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleDogMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChodG1sKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cnVuY2F0ZUxvbmdDZWxscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWRhbmdlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8U3R5bGVkQ2VsbCB7Li4uY2VsbFByb3BzfT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHQtdHJ1bmNhdGUtY2VsbFwiIHN0eWxlPXtjb2x1bW5XaWR0aCA/IHsgd2lkdGg6IGNvbHVtbldpZHRoIH0gOiB1bmRlZmluZWR9IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXtodG1sfS8+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRDZWxsPik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWRhbmdlclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFN0eWxlZENlbGwgey4uLmNlbGxQcm9wc30gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e2h0bWx9Lz47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIGNlbGxQcm9wcyByZW5kZXJzIHRleHRDb250ZW50IGFscmVhZHksIHRoZW4gd2UgZG9uJ3QgaGF2ZSB0b1xuICAgICAgICAgICAgICAgIC8vIHJlbmRlciBgQ2VsbGAuIFRoaXMgc2F2ZXMgc29tZSB0aW1lIGZvciBsYXJnZSB0YWJsZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8U3R5bGVkQ2VsbCB7Li4uY2VsbFByb3BzfT5cbiAgICAgICAgICAgICAge3ZhbHVlUmFuZ2UgJiYgKDxkaXYgXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBmb2xsb3dpbmcgY2xhc3NlcyBhcmUgYWRkZWQgdG8gc3VwcG9ydCBjdXN0b20gQ1NTIHN0eWxpbmcgKi9cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnY2VsbC1iYXInLCB2YWx1ZSAmJiB2YWx1ZSA8IDAgPyAnbmVnYXRpdmUnIDogJ3Bvc2l0aXZlJyl9IGNzcz17Y2VsbEJhclN0eWxlc30gcm9sZT1cInByZXNlbnRhdGlvblwiLz4pfVxuICAgICAgICAgICAgICB7dHJ1bmNhdGVMb25nQ2VsbHMgPyAoPGRpdiBjbGFzc05hbWU9XCJkdC10cnVuY2F0ZS1jZWxsXCIgc3R5bGU9e2NvbHVtbldpZHRoID8geyB3aWR0aDogY29sdW1uV2lkdGggfSA6IHVuZGVmaW5lZH0+XG4gICAgICAgICAgICAgICAgICB7dGV4dH1cbiAgICAgICAgICAgICAgICA8L2Rpdj4pIDogKHRleHQpfVxuICAgICAgICAgICAgPC9TdHlsZWRDZWxsPik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSGVhZGVyOiAoeyBjb2x1bW46IGNvbCwgb25DbGljaywgc3R5bGUsIG9uRHJhZ1N0YXJ0LCBvbkRyb3AgfSkgPT4gKDx0aCBpZD17YGhlYWRlci0ke2NvbHVtbi5rZXl9YH0gdGl0bGU9e3QoJ1NoaWZ0ICsgQ2xpY2sgdG8gc29ydCBieSBtdWx0aXBsZSBjb2x1bW5zJyl9IGNsYXNzTmFtZT17W2NsYXNzTmFtZSwgY29sLmlzU29ydGVkID8gJ2lzLXNvcnRlZCcgOiAnJ10uam9pbignICcpfSBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAuLi5zaGFyZWRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICAgICAgfX0gb25LZXlEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcm9ncmFtYXRpY2FsbHkgc29ydCBjb2x1bW4gb24ga2V5cHJlc3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoQUNUSU9OX0tFWVMpLmluY2x1ZGVzKGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnRvZ2dsZVNvcnRCeSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX0gcm9sZT1cImNvbHVtbmhlYWRlciBidXR0b25cIiBvbkNsaWNrPXtvbkNsaWNrfSBkYXRhLWNvbHVtbi1uYW1lPXtjb2wuaWR9IHsuLi4oYWxsb3dSZWFycmFuZ2VDb2x1bW5zICYmIHtcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICBvbkRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICBvbkRyYWdPdmVyOiBlID0+IGUucHJldmVudERlZmF1bHQoKSxcbiAgICAgICAgICAgICAgICBvbkRyYWdFbnRlcjogZSA9PiBlLnByZXZlbnREZWZhdWx0KCksXG4gICAgICAgICAgICAgICAgb25Ecm9wLFxuICAgICAgICAgICAgfSl9IHRhYkluZGV4PXswfT5cbiAgICAgICAgICAgIHsvKiBjYW4ndCB1c2UgYGNvbHVtbldpZHRoICYmYCBiZWNhdXNlIGl0IG1heSBhbHNvIGJlIHplcm8gKi99XG4gICAgICAgICAgICB7Y29uZmlnLmNvbHVtbldpZHRoID8gKFxuICAgICAgICAgICAgICAgIC8vIGNvbHVtbiB3aWR0aCBoaW50XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbHVtbldpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwLjAxLFxuICAgICAgICAgICAgICAgICAgICB9fS8+KSA6IG51bGx9XG4gICAgICAgICAgICA8ZGl2IGRhdGEtY29sdW1uLW5hbWU9e2NvbC5pZH0gY3NzPXt7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtZmxleCcsXG4gICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdmbGV4LWVuZCcsXG4gICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgIDxzcGFuIGRhdGEtY29sdW1uLW5hbWU9e2NvbC5pZH0+e2xhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPFNvcnRJY29uIGNvbHVtbj17Y29sfS8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L3RoPiksXG4gICAgICAgICAgICBGb290ZXI6IHRvdGFscyA/IChpID09PSAwID8gKDx0aD57dCgnVG90YWxzJyl9PC90aD4pIDogKDx0ZCBzdHlsZT17c2hhcmVkU3R5bGV9PlxuICAgICAgICAgICAgICA8c3Ryb25nPntmb3JtYXRDb2x1bW5WYWx1ZShjb2x1bW4sIHRvdGFsc1trZXldKVsxXX08L3N0cm9uZz5cbiAgICAgICAgICAgIDwvdGQ+KSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzb3J0RGVzY0ZpcnN0OiBzb3J0RGVzYyxcbiAgICAgICAgICAgIHNvcnRUeXBlOiBnZXRTb3J0VHlwZUJ5RGF0YVR5cGUoZGF0YVR5cGUpLFxuICAgICAgICB9O1xuICAgIH0sIFtcbiAgICAgICAgZGVmYXVsdEFsaWduUE4sXG4gICAgICAgIGRlZmF1bHRDb2xvclBOLFxuICAgICAgICBlbWl0Q3Jvc3NGaWx0ZXJzLFxuICAgICAgICBnZXRWYWx1ZVJhbmdlLFxuICAgICAgICBpc0FjdGl2ZUZpbHRlclZhbHVlLFxuICAgICAgICBpc1Jhd1JlY29yZHMsXG4gICAgICAgIHNob3dDZWxsQmFycyxcbiAgICAgICAgc29ydERlc2MsXG4gICAgICAgIHRvZ2dsZUZpbHRlcixcbiAgICAgICAgdG90YWxzLFxuICAgICAgICBjb2x1bW5Db2xvckZvcm1hdHRlcnMsXG4gICAgICAgIGNvbHVtbk9yZGVyVG9nZ2xlLFxuICAgIF0pO1xuICAgIGNvbnN0IGNvbHVtbnMgPSB1c2VNZW1vKCgpID0+IGNvbHVtbnNNZXRhLm1hcChnZXRDb2x1bW5Db25maWdzKSwgW2NvbHVtbnNNZXRhLCBnZXRDb2x1bW5Db25maWdzXSk7XG4gICAgY29uc3QgaGFuZGxlU2VydmVyUGFnaW5hdGlvbkNoYW5nZSA9IHVzZUNhbGxiYWNrKChwYWdlTnVtYmVyLCBwYWdlU2l6ZSkgPT4ge1xuICAgICAgICB1cGRhdGVFeHRlcm5hbEZvcm1EYXRhKHNldERhdGFNYXNrLCBwYWdlTnVtYmVyLCBwYWdlU2l6ZSk7XG4gICAgfSwgW3NldERhdGFNYXNrXSk7XG4gICAgY29uc3QgaGFuZGxlU2l6ZUNoYW5nZSA9IHVzZUNhbGxiYWNrKCh7IHdpZHRoLCBoZWlnaHQgfSkgPT4ge1xuICAgICAgICBzZXRUYWJsZVNpemUoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIH0sIFtdKTtcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBBZnRlciBpbml0aWFsIGxvYWQgdGhlIHRhYmxlIHNob3VsZCByZXNpemUgb25seSB3aGVuIHRoZSBuZXcgc2l6ZXNcbiAgICAgICAgLy8gQXJlIG5vdCBvbmx5IHNjcm9sbGJhciB1cGRhdGVzLCBvdGhlcndpc2UsIHRoZSB0YWJsZSB3b3VsZCB0d2ljdGhcbiAgICAgICAgY29uc3Qgc2Nyb2xsQmFyU2l6ZSA9IGdldFNjcm9sbEJhclNpemUoKTtcbiAgICAgICAgY29uc3QgeyB3aWR0aDogdGFibGVXaWR0aCwgaGVpZ2h0OiB0YWJsZUhlaWdodCB9ID0gdGFibGVTaXplO1xuICAgICAgICAvLyBUYWJsZSBpcyBpbmNyZWFzaW5nIGl0cyBvcmlnaW5hbCBzaXplXG4gICAgICAgIGlmICh3aWR0aCAtIHRhYmxlV2lkdGggPiBzY3JvbGxCYXJTaXplIHx8XG4gICAgICAgICAgICBoZWlnaHQgLSB0YWJsZUhlaWdodCA+IHNjcm9sbEJhclNpemUpIHtcbiAgICAgICAgICAgIGhhbmRsZVNpemVDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCAtIHNjcm9sbEJhclNpemUsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgLSBzY3JvbGxCYXJTaXplLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFibGVXaWR0aCAtIHdpZHRoID4gc2Nyb2xsQmFyU2l6ZSB8fFxuICAgICAgICAgICAgdGFibGVIZWlnaHQgLSBoZWlnaHQgPiBzY3JvbGxCYXJTaXplKSB7XG4gICAgICAgICAgICAvLyBUYWJsZSBpcyBkZWNyZWFzaW5nIGl0cyBvcmlnaW5hbCBzaXplXG4gICAgICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFt3aWR0aCwgaGVpZ2h0LCBoYW5kbGVTaXplQ2hhbmdlLCB0YWJsZVNpemVdKTtcbiAgICBjb25zdCB7IHdpZHRoOiB3aWR0aEZyb21TdGF0ZSwgaGVpZ2h0OiBoZWlnaHRGcm9tU3RhdGUgfSA9IHRhYmxlU2l6ZTtcbiAgICByZXR1cm4gKDxTdHlsZXM+XG4gICAgICA8RGF0YVRhYmxlIGNvbHVtbnM9e2NvbHVtbnN9IGRhdGE9e2RhdGF9IHJvd0NvdW50PXtyb3dDb3VudH0gdGFibGVDbGFzc05hbWU9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZFwiIHBhZ2VTaXplPXtwYWdlU2l6ZX0gc2VydmVyUGFnaW5hdGlvbkRhdGE9e3NlcnZlclBhZ2luYXRpb25EYXRhfSBwYWdlU2l6ZU9wdGlvbnM9e3BhZ2VTaXplT3B0aW9uc30gd2lkdGg9e3dpZHRoRnJvbVN0YXRlfSBoZWlnaHQ9e2hlaWdodEZyb21TdGF0ZX0gc2VydmVyUGFnaW5hdGlvbj17c2VydmVyUGFnaW5hdGlvbn0gb25TZXJ2ZXJQYWdpbmF0aW9uQ2hhbmdlPXtoYW5kbGVTZXJ2ZXJQYWdpbmF0aW9uQ2hhbmdlfSBvbkNvbHVtbk9yZGVyQ2hhbmdlPXsoKSA9PiBzZXRDb2x1bW5PcmRlclRvZ2dsZSghY29sdW1uT3JkZXJUb2dnbGUpfSBcbiAgICAvLyA5IHBhZ2UgaXRlbXMgaW4gPiAzNDBweCB3b3JrcyB3ZWxsIGV2ZW4gZm9yIDEwMCsgcGFnZXNcbiAgICBtYXhQYWdlSXRlbUNvdW50PXt3aWR0aCA+IDM0MCA/IDkgOiA3fSBub1Jlc3VsdHM9e2dldE5vUmVzdWx0c01lc3NhZ2V9IHNlYXJjaElucHV0PXtpbmNsdWRlU2VhcmNoICYmIFNlYXJjaElucHV0fSBzZWxlY3RQYWdlU2l6ZT17cGFnZVNpemUgIT09IG51bGwgJiYgU2VsZWN0UGFnZVNpemV9IFxuICAgIC8vIG5vdCBpbiB1c2UgaW4gU3VwZXJzZXQsIGJ1dCBuZWVkZWQgZm9yIHVuaXQgdGVzdHNcbiAgICBzdGlja3k9e3N0aWNreX0vPlxuICAgIDwvU3R5bGVzPik7XG59XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nexport default function TableChart(props) {\n  const { timeGrain, height, width, data, totals, isRawRecords, rowCount = 0, columns: columnsMeta, alignPositiveNegative: defaultAlignPN = false, colorPositiveNegative: defaultColorPN = false, includeSearch = false, pageSize = 0, serverPagination = false, serverPaginationData, setDataMask, showCellBars = true, sortDesc = false, filters, sticky = true, // whether to use sticky header\n    columnColorFormatters, allowRearrangeColumns = false, allowRenderHtml = true, onContextMenu, emitCrossFilters } = props;\n  const timestampFormatter = useCallback((value) => getTimeFormatterForGranularity(timeGrain)(value), [timeGrain]);\n  const [tableSize, setTableSize] = useState({\n    width: 0,\n    height: 0\n  });\n  // keep track of whether column order changed, so that column widths can too\n  const [columnOrderToggle, setColumnOrderToggle] = useState(false);\n  // only take relevant page size options\n  const pageSizeOptions = useMemo(() => {\n    const getServerPagination = (n) => n <= rowCount;\n    return PAGE_SIZE_OPTIONS.filter(([n]) => serverPagination ? getServerPagination(n) : n <= 2 * data.length);\n  }, [data.length, rowCount, serverPagination]);\n  const getValueRange = useCallback(function getValueRange(key, alignPositiveNegative) {var _data$;\n    if (typeof (data == null ? void 0 : (_data$ = data[0]) == null ? void 0 : _data$[key]) === 'number') {\n      const nums = data.map((row) => row[key]);\n      return alignPositiveNegative ?\n      [0, d3Max(nums.map(Math.abs))] :\n      d3Extent(nums);\n    }\n    return null;\n  }, [data]);\n  const isActiveFilterValue = useCallback(function isActiveFilterValue(key, val) {var _filters$key;\n    return !!filters && ((_filters$key = filters[key]) == null ? void 0 : _filters$key.includes(val));\n  }, [filters]);\n  const getCrossFilterDataMask = (key, value) => {\n    let updatedFilters = { ...(filters || {}) };\n    if (filters && isActiveFilterValue(key, value)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [value]\n      };\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    const groupBy = Object.keys(updatedFilters);\n    const groupByValues = Object.values(updatedFilters);\n    const labelElements = [];\n    groupBy.forEach((col) => {var _updatedFilters;\n      const isTimestamp = col === DTTM_ALIAS;\n      const filterValues = ensureIsArray((_updatedFilters = updatedFilters) == null ? void 0 : _updatedFilters[col]);\n      if (filterValues.length) {\n        const valueLabels = filterValues.map((value) => isTimestamp ? timestampFormatter(value) : value);\n        labelElements.push(`${valueLabels.join(', ')}`);\n      }\n    });\n    return {\n      dataMask: {\n        extraFormData: {\n          filters: groupBy.length === 0 ?\n          [] :\n          groupBy.map((col) => {var _updatedFilters2;\n            const val = ensureIsArray((_updatedFilters2 = updatedFilters) == null ? void 0 : _updatedFilters2[col]);\n            if (!val.length)\n            return {\n              col,\n              op: 'IS NULL'\n            };\n            return {\n              col,\n              op: 'IN',\n              val: val.map((el) => el instanceof Date ? el.getTime() : el),\n              grain: col === DTTM_ALIAS ? timeGrain : undefined\n            };\n          })\n        },\n        filterState: {\n          label: labelElements.join(', '),\n          value: groupByValues.length ? groupByValues : null,\n          filters: updatedFilters && Object.keys(updatedFilters).length ?\n          updatedFilters :\n          null\n        }\n      },\n      isCurrentValueSelected: isActiveFilterValue(key, value)\n    };\n  };\n  const toggleFilter = useCallback(function toggleFilter(key, val) {\n    if (!emitCrossFilters) {\n      return;\n    }\n    setDataMask(getCrossFilterDataMask(key, val).dataMask);\n  }, [emitCrossFilters, getCrossFilterDataMask, setDataMask]);\n  const getSharedStyle = (column) => {\n    const { isNumeric, config = {} } = column;\n    const textAlign = config.horizontalAlign ?\n    config.horizontalAlign :\n    isNumeric ?\n    'right' :\n    'left';\n    return {\n      textAlign\n    };\n  };\n  const handleContextMenu = onContextMenu && !isRawRecords ?\n  (value, cellPoint, clientX, clientY) => {\n    const drillToDetailFilters = [];\n    columnsMeta.forEach((col) => {\n      if (!col.isMetric) {\n        const dataRecordValue = value[col.key];\n        drillToDetailFilters.push({\n          col: col.key,\n          op: '==',\n          val: dataRecordValue,\n          formattedVal: formatColumnValue(col, dataRecordValue)[1]\n        });\n      }\n    });\n    onContextMenu(clientX, clientY, {\n      drillToDetail: drillToDetailFilters,\n      crossFilter: cellPoint.isMetric ?\n      undefined :\n      getCrossFilterDataMask(cellPoint.key, cellPoint.value),\n      drillBy: cellPoint.isMetric ?\n      undefined :\n      {\n        filters: [\n        {\n          col: cellPoint.key,\n          op: '==',\n          val: cellPoint.value\n        }],\n\n        groupbyFieldName: 'groupby'\n      }\n    });\n  } :\n  undefined;\n  const getColumnConfigs = useCallback((column, i) => {\n    const { key, label, isNumeric, dataType, isMetric, isPercentMetric, config = {} } = column;\n    const columnWidth = Number.isNaN(Number(config.columnWidth)) ?\n    config.columnWidth :\n    Number(config.columnWidth);\n    // inline style for both th and td cell\n    const sharedStyle = getSharedStyle(column);\n    const alignPositiveNegative = config.alignPositiveNegative === undefined ?\n    defaultAlignPN :\n    config.alignPositiveNegative;\n    const colorPositiveNegative = config.colorPositiveNegative === undefined ?\n    defaultColorPN :\n    config.colorPositiveNegative;\n    const { truncateLongCells } = config;\n    const hasColumnColorFormatters = isNumeric &&\n    Array.isArray(columnColorFormatters) &&\n    columnColorFormatters.length > 0;\n    const valueRange = !hasColumnColorFormatters && (\n    config.showCellBars === undefined ?\n    showCellBars :\n    config.showCellBars) && (\n    isMetric || isRawRecords || isPercentMetric) &&\n    getValueRange(key, alignPositiveNegative);\n    let className = '';\n    if (emitCrossFilters && !isMetric) {\n      className += ' dt-is-filter';\n    }\n    return {\n      id: String(i),\n      // must use custom accessor to allow `.` in column names\n      // typing is incorrect in current version of `@types/react-table`\n      // so we ask TS not to check.\n      accessor: (datum) => datum[key],\n      Cell: ({ value, row }) => {\n        const [isHtml, text] = formatColumnValue(column, value);\n        const html = isHtml && allowRenderHtml ? { __html: text } : undefined;\n        let backgroundColor;\n        if (hasColumnColorFormatters) {\n          columnColorFormatters.\n          filter((formatter) => formatter.column === column.key).\n          forEach((formatter) => {\n            const formatterResult = value || value === 0 ?\n            formatter.getColorFromValue(value) :\n            false;\n            if (formatterResult) {\n              backgroundColor = formatterResult;\n            }\n          });\n        }\n        const StyledCell = styled.td`\n            text-align: ${sharedStyle.textAlign};\n            white-space: ${value instanceof Date ? 'nowrap' : undefined};\n            position: relative;\n            background: ${backgroundColor || undefined};\n          `;\n        const cellBarStyles = css`\n            position: absolute;\n            height: 100%;\n            display: block;\n            top: 0;\n            ${valueRange &&\n        `\n                width: ${`${cellWidth({\n          value: value,\n          valueRange,\n          alignPositiveNegative\n        })}%`};\n                left: ${`${cellOffset({\n          value: value,\n          valueRange,\n          alignPositiveNegative\n        })}%`};\n                background-color: ${cellBackground({\n          value: value,\n          colorPositiveNegative\n        })};\n              `}\n          `;\n        const cellProps = {\n          'aria-labelledby': `header-${column.key}`,\n          role: 'cell',\n          // show raw number in title in case of numeric values\n          title: typeof value === 'number' ? String(value) : undefined,\n          onClick: emitCrossFilters && !valueRange && !isMetric ?\n          () => {\n            // allow selecting text in a cell\n            if (!getSelectedText()) {\n              toggleFilter(key, value);\n            }\n          } :\n          undefined,\n          onContextMenu: (e) => {\n            if (handleContextMenu) {\n              e.preventDefault();\n              e.stopPropagation();\n              handleContextMenu(row.original, { key, value, isMetric }, e.nativeEvent.clientX, e.nativeEvent.clientY);\n            }\n          },\n          className: [\n          className,\n          value == null ? 'dt-is-null' : '',\n          isActiveFilterValue(key, value) ? ' dt-is-active-filter' : ''].\n          join(' '),\n          tabIndex: 0\n        };\n        if (html) {\n          if (truncateLongCells) {\n            // eslint-disable-next-line react/no-danger\n            return ___EmotionJSX(StyledCell, cellProps,\n            ___EmotionJSX(\"div\", { className: \"dt-truncate-cell\", style: columnWidth ? { width: columnWidth } : undefined, dangerouslySetInnerHTML: html })\n            );\n          }\n          // eslint-disable-next-line react/no-danger\n          return ___EmotionJSX(StyledCell, _extends({}, cellProps, { dangerouslySetInnerHTML: html }));\n        }\n        // If cellProps renders textContent already, then we don't have to\n        // render `Cell`. This saves some time for large tables.\n        return ___EmotionJSX(StyledCell, cellProps,\n        valueRange && ___EmotionJSX(\"div\", {\n          /* The following classes are added to support custom CSS styling */\n          className: cx('cell-bar', value && value < 0 ? 'negative' : 'positive'), css: cellBarStyles, role: \"presentation\" }),\n        truncateLongCells ? ___EmotionJSX(\"div\", { className: \"dt-truncate-cell\", style: columnWidth ? { width: columnWidth } : undefined },\n        text\n        ) : text\n        );\n      },\n      Header: ({ column: col, onClick, style, onDragStart, onDrop }) => ___EmotionJSX(\"th\", _extends({ id: `header-${column.key}`, title: t('Shift + Click to sort by multiple columns'), className: [className, col.isSorted ? 'is-sorted' : ''].join(' '), style: {\n          ...sharedStyle,\n          ...style\n        }, onKeyDown: (e) => {\n          // programatically sort column on keypress\n          if (Object.values(ACTION_KEYS).includes(e.key)) {\n            col.toggleSortBy();\n          }\n        }, role: \"columnheader button\", onClick: onClick, \"data-column-name\": col.id }, allowRearrangeColumns && {\n        draggable: 'true',\n        onDragStart,\n        onDragOver: (e) => e.preventDefault(),\n        onDragEnter: (e) => e.preventDefault(),\n        onDrop\n      }, { tabIndex: 0 }),\n\n      config.columnWidth ?\n      // column width hint\n      ___EmotionJSX(\"div\", { style: {\n          width: columnWidth,\n          height: 0.01\n        } }) : null,\n      ___EmotionJSX(\"div\", { \"data-column-name\": col.id, css: _ref },\n\n\n\n      ___EmotionJSX(\"span\", { \"data-column-name\": col.id }, label),\n      ___EmotionJSX(SortIcon, { column: col })\n      )\n      ),\n      Footer: totals ? i === 0 ? ___EmotionJSX(\"th\", null, t('Totals')) : ___EmotionJSX(\"td\", { style: sharedStyle },\n      ___EmotionJSX(\"strong\", null, formatColumnValue(column, totals[key])[1])\n      ) : undefined,\n      sortDescFirst: sortDesc,\n      sortType: getSortTypeByDataType(dataType)\n    };\n  }, [\n  defaultAlignPN,\n  defaultColorPN,\n  emitCrossFilters,\n  getValueRange,\n  isActiveFilterValue,\n  isRawRecords,\n  showCellBars,\n  sortDesc,\n  toggleFilter,\n  totals,\n  columnColorFormatters,\n  columnOrderToggle]\n  );\n  const columns = useMemo(() => columnsMeta.map(getColumnConfigs), [columnsMeta, getColumnConfigs]);\n  const handleServerPaginationChange = useCallback((pageNumber, pageSize) => {\n    updateExternalFormData(setDataMask, pageNumber, pageSize);\n  }, [setDataMask]);\n  const handleSizeChange = useCallback(({ width, height }) => {\n    setTableSize({ width, height });\n  }, []);\n  useLayoutEffect(() => {\n    // After initial load the table should resize only when the new sizes\n    // Are not only scrollbar updates, otherwise, the table would twicth\n    const scrollBarSize = getScrollBarSize();\n    const { width: tableWidth, height: tableHeight } = tableSize;\n    // Table is increasing its original size\n    if (width - tableWidth > scrollBarSize ||\n    height - tableHeight > scrollBarSize) {\n      handleSizeChange({\n        width: width - scrollBarSize,\n        height: height - scrollBarSize\n      });\n    } else\n    if (tableWidth - width > scrollBarSize ||\n    tableHeight - height > scrollBarSize) {\n      // Table is decreasing its original size\n      handleSizeChange({\n        width,\n        height\n      });\n    }\n  }, [width, height, handleSizeChange, tableSize]);\n  const { width: widthFromState, height: heightFromState } = tableSize;\n  return ___EmotionJSX(Styles, null,\n  ___EmotionJSX(DataTable, { columns: columns, data: data, rowCount: rowCount, tableClassName: \"table table-striped table-condensed\", pageSize: pageSize, serverPaginationData: serverPaginationData, pageSizeOptions: pageSizeOptions, width: widthFromState, height: heightFromState, serverPagination: serverPagination, onServerPaginationChange: handleServerPaginationChange, onColumnOrderChange: () => setColumnOrderToggle(!columnOrderToggle)\n    // 9 page items in > 340px works well even for 100+ pages\n    , maxPageItemCount: width > 340 ? 9 : 7, noResults: getNoResultsMessage, searchInput: includeSearch && SearchInput, selectPageSize: pageSize !== null && SelectPageSize\n    // not in use in Superset, but needed for unit tests\n    , sticky: sticky })\n  );\n}__signature__(TableChart, \"useCallback{timestampFormatter}\\nuseState{[tableSize, setTableSize]({\\n        width: 0,\\n        height: 0,\\n    })}\\nuseState{[columnOrderToggle, setColumnOrderToggle](false)}\\nuseMemo{pageSizeOptions}\\nuseCallback{getValueRange}\\nuseCallback{isActiveFilterValue}\\nuseCallback{toggleFilter}\\nuseCallback{getColumnConfigs}\\nuseMemo{columns}\\nuseCallback{handleServerPaginationChange}\\nuseCallback{handleSizeChange}\\nuseLayoutEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ACTION_KEYS, \"ACTION_KEYS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(getSortTypeByDataType, \"getSortTypeByDataType\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(cellWidth, \"cellWidth\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(cellOffset, \"cellOffset\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(cellBackground, \"cellBackground\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(SortIcon, \"SortIcon\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(SearchInput, \"SearchInput\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(SelectPageSize, \"SelectPageSize\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(getNoResultsMessage, \"getNoResultsMessage\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");reactHotLoader.register(TableChart, \"TableChart\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useLayoutEffect","useMemo","useState","extent","d3Extent","max","d3Max","FaSort","FaSortDown","FaSortDesc","FaSortUp","FaSortAsc","cx","DTTM_ALIAS","ensureIsArray","GenericDataType","getSelectedText","getTimeFormatterForGranularity","styled","css","t","tn","DataTable","Styles","formatColumnValue","PAGE_SIZE_OPTIONS","updateExternalFormData","getScrollBarSize","jsx","___EmotionJSX","ACTION_KEYS","enter","spacebar","space","getSortTypeByDataType","dataType","Temporal","String","cellWidth","value","valueRange","alignPositiveNegative","minValue","maxValue","perc","Math","abs","round","posExtent","negExtent","min","tot","perc2","cellOffset","cellBackground","colorPositiveNegative","r","SortIcon","column","isSorted","isSortedDesc","sortIcon","SearchInput","count","onChange","className","placeholder","SelectPageSize","options","current","onBlur","e","Number","target","map","option","size","text","Array","isArray","key","getNoResultsMessage","filter","_ref","process","env","NODE_ENV","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","TableChart","props","timeGrain","height","width","data","totals","isRawRecords","rowCount","columns","columnsMeta","defaultAlignPN","defaultColorPN","includeSearch","pageSize","serverPagination","serverPaginationData","setDataMask","showCellBars","sortDesc","filters","sticky","columnColorFormatters","allowRearrangeColumns","allowRenderHtml","onContextMenu","emitCrossFilters","timestampFormatter","tableSize","setTableSize","columnOrderToggle","setColumnOrderToggle","pageSizeOptions","getServerPagination","n","length","getValueRange","_data$","nums","row","isActiveFilterValue","val","_filters$key","includes","getCrossFilterDataMask","updatedFilters","groupBy","Object","keys","groupByValues","values","labelElements","forEach","col","_updatedFilters","isTimestamp","filterValues","valueLabels","push","join","dataMask","extraFormData","_updatedFilters2","op","el","Date","getTime","grain","undefined","filterState","label","isCurrentValueSelected","toggleFilter","getSharedStyle","isNumeric","config","textAlign","horizontalAlign","handleContextMenu","cellPoint","clientX","clientY","drillToDetailFilters","isMetric","dataRecordValue","formattedVal","drillToDetail","crossFilter","drillBy","groupbyFieldName","getColumnConfigs","i","isPercentMetric","columnWidth","isNaN","sharedStyle","truncateLongCells","hasColumnColorFormatters","id","accessor","datum","Cell","isHtml","html","__html","backgroundColor","formatter","formatterResult","getColorFromValue","StyledCell","td","cellBarStyles","cellProps","role","title","onClick","preventDefault","stopPropagation","original","nativeEvent","tabIndex","style","dangerouslySetInnerHTML","_extends","Header","onDragStart","onDrop","onKeyDown","toggleSortBy","draggable","onDragOver","onDragEnter","Footer","sortDescFirst","sortType","handleServerPaginationChange","pageNumber","handleSizeChange","scrollBarSize","tableWidth","tableHeight","widthFromState","heightFromState","tableClassName","onServerPaginationChange","onColumnOrderChange","maxPageItemCount","noResults","searchInput","selectPageSize","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-table/src/TableChart.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  CSSProperties,\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useState,\n  MouseEvent,\n} from 'react';\nimport {\n  ColumnInstance,\n  ColumnWithLooseAccessor,\n  DefaultSortTypes,\n  Row,\n} from 'react-table';\nimport { extent as d3Extent, max as d3Max } from 'd3-array';\nimport { FaSort } from '@react-icons/all-files/fa/FaSort';\nimport { FaSortDown as FaSortDesc } from '@react-icons/all-files/fa/FaSortDown';\nimport { FaSortUp as FaSortAsc } from '@react-icons/all-files/fa/FaSortUp';\nimport cx from 'classnames';\nimport {\n  DataRecord,\n  DataRecordValue,\n  DTTM_ALIAS,\n  ensureIsArray,\n  GenericDataType,\n  getSelectedText,\n  getTimeFormatterForGranularity,\n  BinaryQueryObjectFilterClause,\n  styled,\n  css,\n  t,\n  tn,\n} from '@superset-ui/core';\n\nimport { DataColumnMeta, TableChartTransformedProps } from './types';\nimport DataTable, {\n  DataTableProps,\n  SearchInputProps,\n  SelectPageSizeRendererProps,\n  SizeOption,\n} from './DataTable';\n\nimport Styles from './Styles';\nimport { formatColumnValue } from './utils/formatValue';\nimport { PAGE_SIZE_OPTIONS } from './consts';\nimport { updateExternalFormData } from './DataTable/utils/externalAPIs';\nimport getScrollBarSize from './DataTable/utils/getScrollBarSize';\n\ntype ValueRange = [number, number];\n\ninterface TableSize {\n  width: number;\n  height: number;\n}\n\nconst ACTION_KEYS = {\n  enter: 'Enter',\n  spacebar: 'Spacebar',\n  space: ' ',\n};\n\n/**\n * Return sortType based on data type\n */\nfunction getSortTypeByDataType(dataType: GenericDataType): DefaultSortTypes {\n  if (dataType === GenericDataType.Temporal) {\n    return 'datetime';\n  }\n  if (dataType === GenericDataType.String) {\n    return 'alphanumeric';\n  }\n  return 'basic';\n}\n\n/**\n * Cell background width calculation for horizontal bar chart\n */\nfunction cellWidth({\n  value,\n  valueRange,\n  alignPositiveNegative,\n}: {\n  value: number;\n  valueRange: ValueRange;\n  alignPositiveNegative: boolean;\n}) {\n  const [minValue, maxValue] = valueRange;\n  if (alignPositiveNegative) {\n    const perc = Math.abs(Math.round((value / maxValue) * 100));\n    return perc;\n  }\n  const posExtent = Math.abs(Math.max(maxValue, 0));\n  const negExtent = Math.abs(Math.min(minValue, 0));\n  const tot = posExtent + negExtent;\n  const perc2 = Math.round((Math.abs(value) / tot) * 100);\n  return perc2;\n}\n\n/**\n * Cell left margin (offset) calculation for horizontal bar chart elements\n * when alignPositiveNegative is not set\n */\nfunction cellOffset({\n  value,\n  valueRange,\n  alignPositiveNegative,\n}: {\n  value: number;\n  valueRange: ValueRange;\n  alignPositiveNegative: boolean;\n}) {\n  if (alignPositiveNegative) {\n    return 0;\n  }\n  const [minValue, maxValue] = valueRange;\n  const posExtent = Math.abs(Math.max(maxValue, 0));\n  const negExtent = Math.abs(Math.min(minValue, 0));\n  const tot = posExtent + negExtent;\n  return Math.round((Math.min(negExtent + value, negExtent) / tot) * 100);\n}\n\n/**\n * Cell background color calculation for horizontal bar chart\n */\nfunction cellBackground({\n  value,\n  colorPositiveNegative = false,\n}: {\n  value: number;\n  colorPositiveNegative: boolean;\n}) {\n  const r = colorPositiveNegative && value < 0 ? 150 : 0;\n  return `rgba(${r},0,0,0.2)`;\n}\n\nfunction SortIcon<D extends object>({ column }: { column: ColumnInstance<D> }) {\n  const { isSorted, isSortedDesc } = column;\n  let sortIcon = <FaSort />;\n  if (isSorted) {\n    sortIcon = isSortedDesc ? <FaSortDesc /> : <FaSortAsc />;\n  }\n  return sortIcon;\n}\n\nfunction SearchInput({ count, value, onChange }: SearchInputProps) {\n  return (\n    <span className=\"dt-global-filter\">\n      {t('Search')}{' '}\n      <input\n        className=\"form-control input-sm\"\n        placeholder={tn('search.num_records', count)}\n        value={value}\n        aria-label={t('Search %s records', count)}\n        onChange={onChange}\n      />\n    </span>\n  );\n}\n\nfunction SelectPageSize({\n  options,\n  current,\n  onChange,\n}: SelectPageSizeRendererProps) {\n  return (\n    <span className=\"dt-select-page-size form-inline\">\n      {t('page_size.show')}{' '}\n      <select\n        className=\"form-control input-sm\"\n        value={current}\n        onBlur={() => {}}\n        onChange={e => {\n          onChange(Number((e.target as HTMLSelectElement).value));\n        }}\n      >\n        {options.map(option => {\n          const [size, text] = Array.isArray(option)\n            ? option\n            : [option, option];\n          return (\n            <option key={size} value={size}>\n              {text}\n            </option>\n          );\n        })}\n      </select>{' '}\n      {t('page_size.entries')}\n    </span>\n  );\n}\n\nconst getNoResultsMessage = (filter: string) =>\n  filter ? t('No matching records found') : t('No records found');\n\nexport default function TableChart<D extends DataRecord = DataRecord>(\n  props: TableChartTransformedProps<D> & {\n    sticky?: DataTableProps<D>['sticky'];\n  },\n) {\n  const {\n    timeGrain,\n    height,\n    width,\n    data,\n    totals,\n    isRawRecords,\n    rowCount = 0,\n    columns: columnsMeta,\n    alignPositiveNegative: defaultAlignPN = false,\n    colorPositiveNegative: defaultColorPN = false,\n    includeSearch = false,\n    pageSize = 0,\n    serverPagination = false,\n    serverPaginationData,\n    setDataMask,\n    showCellBars = true,\n    sortDesc = false,\n    filters,\n    sticky = true, // whether to use sticky header\n    columnColorFormatters,\n    allowRearrangeColumns = false,\n    allowRenderHtml = true,\n    onContextMenu,\n    emitCrossFilters,\n  } = props;\n  const timestampFormatter = useCallback(\n    value => getTimeFormatterForGranularity(timeGrain)(value),\n    [timeGrain],\n  );\n  const [tableSize, setTableSize] = useState<TableSize>({\n    width: 0,\n    height: 0,\n  });\n  // keep track of whether column order changed, so that column widths can too\n  const [columnOrderToggle, setColumnOrderToggle] = useState(false);\n\n  // only take relevant page size options\n  const pageSizeOptions = useMemo(() => {\n    const getServerPagination = (n: number) => n <= rowCount;\n    return PAGE_SIZE_OPTIONS.filter(([n]) =>\n      serverPagination ? getServerPagination(n) : n <= 2 * data.length,\n    ) as SizeOption[];\n  }, [data.length, rowCount, serverPagination]);\n\n  const getValueRange = useCallback(\n    function getValueRange(key: string, alignPositiveNegative: boolean) {\n      if (typeof data?.[0]?.[key] === 'number') {\n        const nums = data.map(row => row[key]) as number[];\n        return (\n          alignPositiveNegative\n            ? [0, d3Max(nums.map(Math.abs))]\n            : d3Extent(nums)\n        ) as ValueRange;\n      }\n      return null;\n    },\n    [data],\n  );\n\n  const isActiveFilterValue = useCallback(\n    function isActiveFilterValue(key: string, val: DataRecordValue) {\n      return !!filters && filters[key]?.includes(val);\n    },\n    [filters],\n  );\n\n  const getCrossFilterDataMask = (key: string, value: DataRecordValue) => {\n    let updatedFilters = { ...(filters || {}) };\n    if (filters && isActiveFilterValue(key, value)) {\n      updatedFilters = {};\n    } else {\n      updatedFilters = {\n        [key]: [value],\n      };\n    }\n    if (\n      Array.isArray(updatedFilters[key]) &&\n      updatedFilters[key].length === 0\n    ) {\n      delete updatedFilters[key];\n    }\n\n    const groupBy = Object.keys(updatedFilters);\n    const groupByValues = Object.values(updatedFilters);\n    const labelElements: string[] = [];\n    groupBy.forEach(col => {\n      const isTimestamp = col === DTTM_ALIAS;\n      const filterValues = ensureIsArray(updatedFilters?.[col]);\n      if (filterValues.length) {\n        const valueLabels = filterValues.map(value =>\n          isTimestamp ? timestampFormatter(value) : value,\n        );\n        labelElements.push(`${valueLabels.join(', ')}`);\n      }\n    });\n\n    return {\n      dataMask: {\n        extraFormData: {\n          filters:\n            groupBy.length === 0\n              ? []\n              : groupBy.map(col => {\n                  const val = ensureIsArray(updatedFilters?.[col]);\n                  if (!val.length)\n                    return {\n                      col,\n                      op: 'IS NULL' as const,\n                    };\n                  return {\n                    col,\n                    op: 'IN' as const,\n                    val: val.map(el =>\n                      el instanceof Date ? el.getTime() : el!,\n                    ),\n                    grain: col === DTTM_ALIAS ? timeGrain : undefined,\n                  };\n                }),\n        },\n        filterState: {\n          label: labelElements.join(', '),\n          value: groupByValues.length ? groupByValues : null,\n          filters:\n            updatedFilters && Object.keys(updatedFilters).length\n              ? updatedFilters\n              : null,\n        },\n      },\n      isCurrentValueSelected: isActiveFilterValue(key, value),\n    };\n  };\n\n  const toggleFilter = useCallback(\n    function toggleFilter(key: string, val: DataRecordValue) {\n      if (!emitCrossFilters) {\n        return;\n      }\n      setDataMask(getCrossFilterDataMask(key, val).dataMask);\n    },\n    [emitCrossFilters, getCrossFilterDataMask, setDataMask],\n  );\n\n  const getSharedStyle = (column: DataColumnMeta): CSSProperties => {\n    const { isNumeric, config = {} } = column;\n    const textAlign = config.horizontalAlign\n      ? config.horizontalAlign\n      : isNumeric\n        ? 'right'\n        : 'left';\n    return {\n      textAlign,\n    };\n  };\n\n  const handleContextMenu =\n    onContextMenu && !isRawRecords\n      ? (\n          value: D,\n          cellPoint: {\n            key: string;\n            value: DataRecordValue;\n            isMetric?: boolean;\n          },\n          clientX: number,\n          clientY: number,\n        ) => {\n          const drillToDetailFilters: BinaryQueryObjectFilterClause[] = [];\n          columnsMeta.forEach(col => {\n            if (!col.isMetric) {\n              const dataRecordValue = value[col.key];\n              drillToDetailFilters.push({\n                col: col.key,\n                op: '==',\n                val: dataRecordValue as string | number | boolean,\n                formattedVal: formatColumnValue(col, dataRecordValue)[1],\n              });\n            }\n          });\n          onContextMenu(clientX, clientY, {\n            drillToDetail: drillToDetailFilters,\n            crossFilter: cellPoint.isMetric\n              ? undefined\n              : getCrossFilterDataMask(cellPoint.key, cellPoint.value),\n            drillBy: cellPoint.isMetric\n              ? undefined\n              : {\n                  filters: [\n                    {\n                      col: cellPoint.key,\n                      op: '==',\n                      val: cellPoint.value as string | number | boolean,\n                    },\n                  ],\n                  groupbyFieldName: 'groupby',\n                },\n          });\n        }\n      : undefined;\n\n  const getColumnConfigs = useCallback(\n    (column: DataColumnMeta, i: number): ColumnWithLooseAccessor<D> => {\n      const {\n        key,\n        label,\n        isNumeric,\n        dataType,\n        isMetric,\n        isPercentMetric,\n        config = {},\n      } = column;\n      const columnWidth = Number.isNaN(Number(config.columnWidth))\n        ? config.columnWidth\n        : Number(config.columnWidth);\n\n      // inline style for both th and td cell\n      const sharedStyle: CSSProperties = getSharedStyle(column);\n\n      const alignPositiveNegative =\n        config.alignPositiveNegative === undefined\n          ? defaultAlignPN\n          : config.alignPositiveNegative;\n      const colorPositiveNegative =\n        config.colorPositiveNegative === undefined\n          ? defaultColorPN\n          : config.colorPositiveNegative;\n\n      const { truncateLongCells } = config;\n\n      const hasColumnColorFormatters =\n        isNumeric &&\n        Array.isArray(columnColorFormatters) &&\n        columnColorFormatters.length > 0;\n\n      const valueRange =\n        !hasColumnColorFormatters &&\n        (config.showCellBars === undefined\n          ? showCellBars\n          : config.showCellBars) &&\n        (isMetric || isRawRecords || isPercentMetric) &&\n        getValueRange(key, alignPositiveNegative);\n\n      let className = '';\n      if (emitCrossFilters && !isMetric) {\n        className += ' dt-is-filter';\n      }\n\n      return {\n        id: String(i), // to allow duplicate column keys\n        // must use custom accessor to allow `.` in column names\n        // typing is incorrect in current version of `@types/react-table`\n        // so we ask TS not to check.\n        accessor: ((datum: D) => datum[key]) as never,\n        Cell: ({ value, row }: { value: DataRecordValue; row: Row<D> }) => {\n          const [isHtml, text] = formatColumnValue(column, value);\n          const html = isHtml && allowRenderHtml ? { __html: text } : undefined;\n\n          let backgroundColor;\n          if (hasColumnColorFormatters) {\n            columnColorFormatters!\n              .filter(formatter => formatter.column === column.key)\n              .forEach(formatter => {\n                const formatterResult =\n                  value || value === 0\n                    ? formatter.getColorFromValue(value as number)\n                    : false;\n                if (formatterResult) {\n                  backgroundColor = formatterResult;\n                }\n              });\n          }\n\n          const StyledCell = styled.td`\n            text-align: ${sharedStyle.textAlign};\n            white-space: ${value instanceof Date ? 'nowrap' : undefined};\n            position: relative;\n            background: ${backgroundColor || undefined};\n          `;\n\n          const cellBarStyles = css`\n            position: absolute;\n            height: 100%;\n            display: block;\n            top: 0;\n            ${valueRange &&\n            `\n                width: ${`${cellWidth({\n                  value: value as number,\n                  valueRange,\n                  alignPositiveNegative,\n                })}%`};\n                left: ${`${cellOffset({\n                  value: value as number,\n                  valueRange,\n                  alignPositiveNegative,\n                })}%`};\n                background-color: ${cellBackground({\n                  value: value as number,\n                  colorPositiveNegative,\n                })};\n              `}\n          `;\n\n          const cellProps = {\n            'aria-labelledby': `header-${column.key}`,\n            role: 'cell',\n            // show raw number in title in case of numeric values\n            title: typeof value === 'number' ? String(value) : undefined,\n            onClick:\n              emitCrossFilters && !valueRange && !isMetric\n                ? () => {\n                    // allow selecting text in a cell\n                    if (!getSelectedText()) {\n                      toggleFilter(key, value);\n                    }\n                  }\n                : undefined,\n            onContextMenu: (e: MouseEvent) => {\n              if (handleContextMenu) {\n                e.preventDefault();\n                e.stopPropagation();\n                handleContextMenu(\n                  row.original,\n                  { key, value, isMetric },\n                  e.nativeEvent.clientX,\n                  e.nativeEvent.clientY,\n                );\n              }\n            },\n            className: [\n              className,\n              value == null ? 'dt-is-null' : '',\n              isActiveFilterValue(key, value) ? ' dt-is-active-filter' : '',\n            ].join(' '),\n            tabIndex: 0,\n          };\n          if (html) {\n            if (truncateLongCells) {\n              // eslint-disable-next-line react/no-danger\n              return (\n                <StyledCell {...cellProps}>\n                  <div\n                    className=\"dt-truncate-cell\"\n                    style={columnWidth ? { width: columnWidth } : undefined}\n                    dangerouslySetInnerHTML={html}\n                  />\n                </StyledCell>\n              );\n            }\n            // eslint-disable-next-line react/no-danger\n            return <StyledCell {...cellProps} dangerouslySetInnerHTML={html} />;\n          }\n          // If cellProps renders textContent already, then we don't have to\n          // render `Cell`. This saves some time for large tables.\n          return (\n            <StyledCell {...cellProps}>\n              {valueRange && (\n                <div\n                  /* The following classes are added to support custom CSS styling */\n                  className={cx(\n                    'cell-bar',\n                    value && value < 0 ? 'negative' : 'positive',\n                  )}\n                  css={cellBarStyles}\n                  role=\"presentation\"\n                />\n              )}\n              {truncateLongCells ? (\n                <div\n                  className=\"dt-truncate-cell\"\n                  style={columnWidth ? { width: columnWidth } : undefined}\n                >\n                  {text}\n                </div>\n              ) : (\n                text\n              )}\n            </StyledCell>\n          );\n        },\n        Header: ({ column: col, onClick, style, onDragStart, onDrop }) => (\n          <th\n            id={`header-${column.key}`}\n            title={t('Shift + Click to sort by multiple columns')}\n            className={[className, col.isSorted ? 'is-sorted' : ''].join(' ')}\n            style={{\n              ...sharedStyle,\n              ...style,\n            }}\n            onKeyDown={(e: React.KeyboardEvent<HTMLElement>) => {\n              // programatically sort column on keypress\n              if (Object.values(ACTION_KEYS).includes(e.key)) {\n                col.toggleSortBy();\n              }\n            }}\n            role=\"columnheader button\"\n            onClick={onClick}\n            data-column-name={col.id}\n            {...(allowRearrangeColumns && {\n              draggable: 'true',\n              onDragStart,\n              onDragOver: e => e.preventDefault(),\n              onDragEnter: e => e.preventDefault(),\n              onDrop,\n            })}\n            tabIndex={0}\n          >\n            {/* can't use `columnWidth &&` because it may also be zero */}\n            {config.columnWidth ? (\n              // column width hint\n              <div\n                style={{\n                  width: columnWidth,\n                  height: 0.01,\n                }}\n              />\n            ) : null}\n            <div\n              data-column-name={col.id}\n              css={{\n                display: 'inline-flex',\n                alignItems: 'flex-end',\n              }}\n            >\n              <span data-column-name={col.id}>{label}</span>\n              <SortIcon column={col} />\n            </div>\n          </th>\n        ),\n        Footer: totals ? (\n          i === 0 ? (\n            <th>{t('Totals')}</th>\n          ) : (\n            <td style={sharedStyle}>\n              <strong>{formatColumnValue(column, totals[key])[1]}</strong>\n            </td>\n          )\n        ) : undefined,\n        sortDescFirst: sortDesc,\n        sortType: getSortTypeByDataType(dataType),\n      };\n    },\n    [\n      defaultAlignPN,\n      defaultColorPN,\n      emitCrossFilters,\n      getValueRange,\n      isActiveFilterValue,\n      isRawRecords,\n      showCellBars,\n      sortDesc,\n      toggleFilter,\n      totals,\n      columnColorFormatters,\n      columnOrderToggle,\n    ],\n  );\n\n  const columns = useMemo(\n    () => columnsMeta.map(getColumnConfigs),\n    [columnsMeta, getColumnConfigs],\n  );\n\n  const handleServerPaginationChange = useCallback(\n    (pageNumber: number, pageSize: number) => {\n      updateExternalFormData(setDataMask, pageNumber, pageSize);\n    },\n    [setDataMask],\n  );\n\n  const handleSizeChange = useCallback(\n    ({ width, height }: { width: number; height: number }) => {\n      setTableSize({ width, height });\n    },\n    [],\n  );\n\n  useLayoutEffect(() => {\n    // After initial load the table should resize only when the new sizes\n    // Are not only scrollbar updates, otherwise, the table would twicth\n    const scrollBarSize = getScrollBarSize();\n    const { width: tableWidth, height: tableHeight } = tableSize;\n    // Table is increasing its original size\n    if (\n      width - tableWidth > scrollBarSize ||\n      height - tableHeight > scrollBarSize\n    ) {\n      handleSizeChange({\n        width: width - scrollBarSize,\n        height: height - scrollBarSize,\n      });\n    } else if (\n      tableWidth - width > scrollBarSize ||\n      tableHeight - height > scrollBarSize\n    ) {\n      // Table is decreasing its original size\n      handleSizeChange({\n        width,\n        height,\n      });\n    }\n  }, [width, height, handleSizeChange, tableSize]);\n\n  const { width: widthFromState, height: heightFromState } = tableSize;\n\n  return (\n    <Styles>\n      <DataTable<D>\n        columns={columns}\n        data={data}\n        rowCount={rowCount}\n        tableClassName=\"table table-striped table-condensed\"\n        pageSize={pageSize}\n        serverPaginationData={serverPaginationData}\n        pageSizeOptions={pageSizeOptions}\n        width={widthFromState}\n        height={heightFromState}\n        serverPagination={serverPagination}\n        onServerPaginationChange={handleServerPaginationChange}\n        onColumnOrderChange={() => setColumnOrderToggle(!columnOrderToggle)}\n        // 9 page items in > 340px works well even for 100+ pages\n        maxPageItemCount={width > 340 ? 9 : 7}\n        noResults={getNoResultsMessage}\n        searchInput={includeSearch && SearchInput}\n        selectPageSize={pageSize !== null && SelectPageSize}\n        // not in use in Superset, but needed for unit tests\n        sticky={sticky}\n      />\n    </Styles>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}