{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport ContourPopoverTrigger from './ContourPopoverTrigger';\nimport ContourOption from './ContourOption';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DEFAULT_CONTOURS = [\n{\n  lowerThreshold: 4,\n  color: { r: 255, g: 0, b: 255, a: 100 },\n  strokeWidth: 1,\n  zIndex: 0\n},\n{\n  lowerThreshold: 5,\n  color: { r: 0, g: 255, b: 0, a: 100 },\n  strokeWidth: 2,\n  zIndex: 1\n},\n{\n  lowerThreshold: 6,\n  upperThreshold: 10,\n  color: { r: 0, g: 0, b: 255, a: 100 },\n  zIndex: 2\n}];\n\nconst NewContourFormatPlaceholder = styled('div')`\n  position: relative;\n  width: calc(100% - ${({ theme }) => theme.gridUnit}px);\n  bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  left: 0;\n`;\nconst ContourControl = ({ onChange, ...props }) => {\n  const [popoverVisible, setPopoverVisible] = useState(false);\n  const [contours, setContours] = useState(props != null && props.value ? props == null ? void 0 : props.value : DEFAULT_CONTOURS);\n  useEffect(() => {\n    // add z-index to contours\n    const newContours = contours.map((contour, index) => ({\n      ...contour,\n      zIndex: (index + 1) * 10\n    }));\n    onChange == null ? void 0 : onChange(newContours);\n  }, [onChange, contours]);\n  const togglePopover = (visible) => {\n    setPopoverVisible(visible);\n  };\n  const handleClickGhostButton = () => {\n    togglePopover(true);\n  };\n  const saveContour = (contour) => {\n    setContours([...contours, contour]);\n    togglePopover(false);\n  };\n  const removeContour = (index) => {\n    const newContours = [...contours];\n    newContours.splice(index, 1);\n    setContours(newContours);\n  };\n  const onShiftContour = (hoverIndex, dragIndex) => {\n    const newContours = [...contours];\n    [newContours[hoverIndex], newContours[dragIndex]] = [\n    newContours[dragIndex],\n    newContours[hoverIndex]];\n\n    setContours(newContours);\n  };\n  const editContour = (contour, index) => {\n    const newContours = [...contours];\n    newContours[index] = contour;\n    setContours(newContours);\n  };\n  const valuesRenderer = () => contours.map((contour, index) => ___EmotionJSX(ContourOption, { key: index, saveContour: (newContour) => editContour(newContour, index), contour: contour, index: index, onClose: removeContour, onShift: onShiftContour }));\n  const ghostButtonText = t('Click to add a contour');\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(DndSelectLabel, _extends({ onDrop: () => {}, canDrop: () => true, valuesRenderer: valuesRenderer, accept: [], ghostButtonText: ghostButtonText, onClickGhostButton: handleClickGhostButton }, props)),\n  ___EmotionJSX(ContourPopoverTrigger, { saveContour: saveContour, isControlled: true, visible: popoverVisible, toggleVisibility: setPopoverVisible },\n  ___EmotionJSX(NewContourFormatPlaceholder, null)\n  )\n  );\n};__signature__(ContourControl, \"useState{[popoverVisible, setPopoverVisible](false)}\\nuseState{[contours, setContours](props?.value ? props?.value : DEFAULT_CONTOURS)}\\nuseEffect{}\");const _default =\nContourControl;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_CONTOURS, \"DEFAULT_CONTOURS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/ContourControl/index.tsx\");reactHotLoader.register(NewContourFormatPlaceholder, \"NewContourFormatPlaceholder\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/ContourControl/index.tsx\");reactHotLoader.register(ContourControl, \"ContourControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/ContourControl/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/ContourControl/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useState","useEffect","styled","t","DndSelectLabel","ContourPopoverTrigger","ContourOption","jsx","___EmotionJSX","DEFAULT_CONTOURS","lowerThreshold","color","r","g","b","a","strokeWidth","zIndex","upperThreshold","NewContourFormatPlaceholder","theme","gridUnit","ContourControl","onChange","props","popoverVisible","setPopoverVisible","contours","setContours","value","newContours","map","contour","index","togglePopover","visible","handleClickGhostButton","saveContour","removeContour","splice","onShiftContour","hoverIndex","dragIndex","editContour","valuesRenderer","key","newContour","onClose","onShift","ghostButtonText","Fragment","_extends","onDrop","canDrop","accept","onClickGhostButton","isControlled","toggleVisibility","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/ContourControl/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport ContourPopoverTrigger from './ContourPopoverTrigger';\nimport ContourOption from './ContourOption';\nimport { ContourType, ContourControlProps } from './types';\n\nconst DEFAULT_CONTOURS: ContourType[] = [\n  {\n    lowerThreshold: 4,\n    color: { r: 255, g: 0, b: 255, a: 100 },\n    strokeWidth: 1,\n    zIndex: 0,\n  },\n  {\n    lowerThreshold: 5,\n    color: { r: 0, g: 255, b: 0, a: 100 },\n    strokeWidth: 2,\n    zIndex: 1,\n  },\n  {\n    lowerThreshold: 6,\n    upperThreshold: 10,\n    color: { r: 0, g: 0, b: 255, a: 100 },\n    zIndex: 2,\n  },\n];\n\nconst NewContourFormatPlaceholder = styled('div')`\n  position: relative;\n  width: calc(100% - ${({ theme }) => theme.gridUnit}px);\n  bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  left: 0;\n`;\n\nconst ContourControl = ({ onChange, ...props }: ContourControlProps) => {\n  const [popoverVisible, setPopoverVisible] = useState(false);\n  const [contours, setContours] = useState<ContourType[]>(\n    props?.value ? props?.value : DEFAULT_CONTOURS,\n  );\n\n  useEffect(() => {\n    // add z-index to contours\n    const newContours = contours.map((contour, index) => ({\n      ...contour,\n      zIndex: (index + 1) * 10,\n    }));\n    onChange?.(newContours);\n  }, [onChange, contours]);\n\n  const togglePopover = (visible: boolean) => {\n    setPopoverVisible(visible);\n  };\n\n  const handleClickGhostButton = () => {\n    togglePopover(true);\n  };\n\n  const saveContour = (contour: ContourType) => {\n    setContours([...contours, contour]);\n    togglePopover(false);\n  };\n\n  const removeContour = (index: number) => {\n    const newContours = [...contours];\n    newContours.splice(index, 1);\n    setContours(newContours);\n  };\n\n  const onShiftContour = (hoverIndex: number, dragIndex: number) => {\n    const newContours = [...contours];\n    [newContours[hoverIndex], newContours[dragIndex]] = [\n      newContours[dragIndex],\n      newContours[hoverIndex],\n    ];\n    setContours(newContours);\n  };\n\n  const editContour = (contour: ContourType, index: number) => {\n    const newContours = [...contours];\n    newContours[index] = contour;\n    setContours(newContours);\n  };\n\n  const valuesRenderer = () =>\n    contours.map((contour, index) => (\n      <ContourOption\n        key={index}\n        saveContour={(newContour: ContourType) =>\n          editContour(newContour, index)\n        }\n        contour={contour}\n        index={index}\n        onClose={removeContour}\n        onShift={onShiftContour}\n      />\n    ));\n\n  const ghostButtonText = t('Click to add a contour');\n\n  return (\n    <>\n      <DndSelectLabel\n        onDrop={() => {}}\n        canDrop={() => true}\n        valuesRenderer={valuesRenderer}\n        accept={[]}\n        ghostButtonText={ghostButtonText}\n        onClickGhostButton={handleClickGhostButton}\n        {...props}\n      />\n      <ContourPopoverTrigger\n        saveContour={saveContour}\n        isControlled\n        visible={popoverVisible}\n        toggleVisibility={setPopoverVisible}\n      >\n        <NewContourFormatPlaceholder />\n      </ContourPopoverTrigger>\n    </>\n  );\n};\n\nexport default ContourControl;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}