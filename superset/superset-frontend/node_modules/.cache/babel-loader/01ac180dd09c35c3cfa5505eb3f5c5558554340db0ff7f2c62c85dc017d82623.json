{"ast":null,"code":"import _isEqual from \"lodash/isEqual\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\n\nimport moment from 'moment';\nimport { parseDttmToDate, css } from '@superset-ui/core';\nimport { DatePicker } from 'antd';\nimport { useSelector } from 'react-redux';\nimport ControlHeader from 'src/explore/components/ControlHeader';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst MOMENT_FORMAT = 'YYYY-MM-DD';\nconst isTimeRangeEqual = (left, right) => _isEqual(left, right);\nexport default function TimeOffsetControls({ onChange, ...props }) {var _currentTimeRangeFilt;\n  const currentTimeRangeFilters = useSelector((state) => state.explore.form_data.adhoc_filters.filter((adhoc_filter) => adhoc_filter.operator === 'TEMPORAL_RANGE'), isTimeRangeEqual);\n  const startDate = (_currentTimeRangeFilt = currentTimeRangeFilters[0]) == null ? void 0 : _currentTimeRangeFilt.comparator.split(' : ')[0];\n  const formatedDate = moment(parseDttmToDate(startDate));\n  const disabledDate = (current) => current && current > formatedDate;\n  return ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(ControlHeader, props),\n  ___EmotionJSX(DatePicker, { css: css`\n          width: 100%;\n        `, onChange: (datetime) => onChange(datetime ? datetime.format(MOMENT_FORMAT) : ''), defaultPickerValue: startDate ? moment(formatedDate).subtract(1, 'day') : undefined, disabledDate: disabledDate, defaultValue: formatedDate })\n  );\n}__signature__(TimeOffsetControls, \"useSelector{currentTimeRangeFilters}\", () => [useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(MOMENT_FORMAT, \"MOMENT_FORMAT\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/TimeOffsetControl.tsx\");reactHotLoader.register(isTimeRangeEqual, \"isTimeRangeEqual\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/TimeOffsetControl.tsx\");reactHotLoader.register(TimeOffsetControls, \"TimeOffsetControls\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/TimeOffsetControl.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","moment","parseDttmToDate","css","DatePicker","useSelector","ControlHeader","jsx","___EmotionJSX","MOMENT_FORMAT","isTimeRangeEqual","left","right","_isEqual","TimeOffsetControls","onChange","props","_currentTimeRangeFilt","currentTimeRangeFilters","state","explore","form_data","adhoc_filters","filter","adhoc_filter","operator","startDate","comparator","split","formatedDate","disabledDate","current","datetime","format","defaultPickerValue","subtract","undefined","defaultValue","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/TimeOffsetControl.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode } from 'react';\nimport { isEqual } from 'lodash';\nimport moment, { Moment } from 'moment';\nimport {\n  parseDttmToDate,\n  BinaryAdhocFilter,\n  SimpleAdhocFilter,\n  css,\n} from '@superset-ui/core';\nimport { DatePicker } from 'antd';\nimport { RangePickerProps } from 'antd/lib/date-picker';\nimport { useSelector } from 'react-redux';\n\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport { RootState } from 'src/views/store';\n\nexport interface TimeOffsetControlsProps {\n  label?: ReactNode;\n  startDate?: string;\n  description?: string;\n  hovered?: boolean;\n  value?: Moment;\n  onChange: (datetime: string) => void;\n}\nconst MOMENT_FORMAT = 'YYYY-MM-DD';\n\nconst isTimeRangeEqual = (\n  left: BinaryAdhocFilter[],\n  right: BinaryAdhocFilter[],\n) => isEqual(left, right);\n\nexport default function TimeOffsetControls({\n  onChange,\n  ...props\n}: TimeOffsetControlsProps) {\n  const currentTimeRangeFilters = useSelector<RootState, BinaryAdhocFilter[]>(\n    state =>\n      state.explore.form_data.adhoc_filters.filter(\n        (adhoc_filter: SimpleAdhocFilter) =>\n          adhoc_filter.operator === 'TEMPORAL_RANGE',\n      ),\n    isTimeRangeEqual,\n  );\n\n  const startDate = currentTimeRangeFilters[0]?.comparator.split(' : ')[0];\n\n  const formatedDate = moment(parseDttmToDate(startDate));\n  const disabledDate: RangePickerProps['disabledDate'] = current =>\n    current && current > formatedDate;\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <DatePicker\n        css={css`\n          width: 100%;\n        `}\n        onChange={(datetime: Moment) =>\n          onChange(datetime ? datetime.format(MOMENT_FORMAT) : '')\n        }\n        defaultPickerValue={\n          startDate ? moment(formatedDate).subtract(1, 'day') : undefined\n        }\n        disabledDate={disabledDate}\n        defaultValue={formatedDate}\n      />\n    </div>\n  );\n}\n"],"mappings":"8UAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAoB,MAAM,OAAO;;AAExC,OAAOC,MAAkB,MAAM,QAAQ;AACvC,SACEC,eAAe,EAGfC,GAAG,QACE,mBAAmB;AAC1B,SAASC,UAAU,QAAQ,MAAM;AAEjC,SAASC,WAAW,QAAQ,aAAa;AAEzC,OAAOC,aAAa,MAAM,sCAAsC,CAAC,SAAAC,GAAA,IAAAC,aAAA;AAWjE,MAAMC,aAAa,GAAG,YAAY;AAElC,MAAMC,gBAAgB,GAAGA,CACvBC,IAAyB,EACzBC,KAA0B,KACvBC,QAAA,CAAQF,IAAI,EAAEC,KAAK,CAAC;AAEzB,eAAc,SAAUE,kBAAkBA,CAAC,EACzCC,QAAQ,EACR,GAAGC,KAAK,EACgB,OAAAC,qBAAA;EACxB,MAAMC,uBAAuB,GAAGb,WAAW,CACzC,CAAAc,KAAK,KACHA,KAAK,CAACC,OAAO,CAACC,SAAS,CAACC,aAAa,CAACC,MAAM,CAC1C,CAACC,YAA+B,KAC9BA,YAAY,CAACC,QAAQ,KAAK,gBAAgB,CAC7C,EACHf,gBAAgB,CACjB;EAED,MAAMgB,SAAS,IAAAT,qBAAA,GAAGC,uBAAuB,CAAC,CAAC,CAAC,qBAA1BD,qBAAA,CAA4BU,UAAU,CAACC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;EAExE,MAAMC,YAAY,GAAG5B,MAAM,CAACC,eAAe,CAACwB,SAAS,CAAC,CAAC;EACvD,MAAMI,YAAY,GAAqCA,CAAAC,OAAO,KAC5DA,OAAO,IAAIA,OAAO,GAAGF,YAAY;EAEnC,OACErB,aAAA;EACEA,aAAA,CAACF,aAAa,EAAKU,KAAM,CACzB;EAAAR,aAAA,CAACJ,UAAU,IACTD,GAAG,EAAEA,GAAG;;SAEN,EACFY,QAAQ,EAAEA,CAACiB,QAAgB,KACzBjB,QAAQ,CAACiB,QAAQ,GAAGA,QAAQ,CAACC,MAAM,CAACxB,aAAa,CAAC,GAAG,EAAE,CACxD,EACDyB,kBAAkB,EAChBR,SAAS,GAAGzB,MAAM,CAAC4B,YAAY,CAAC,CAACM,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,GAAGC,SACvD,EACDN,YAAY,EAAEA,YAAa,EAC3BO,YAAY,EAAER,YAAa;EAE1B,CAAC;AAEV,CAACS,aAAA,CArCuBxB,kBAAkB,iDAIRT,WAAW,sBAAAkC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAL,SAAA,MAAAG,cAAA,WAAAA,cAAA,CAAAG,QAAA,CAXvCjC,aAAa,mIAAA8B,cAAA,CAAAG,QAAA,CAEbhC,gBAAgB,sIAAA6B,cAAA,CAAAG,QAAA,CAKE5B,kBAAkB,gKAAA6B,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAP,SAAA,CAAAO,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}