{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import { ensureIsArray, QueryMode, t } from '@superset-ui/core';\nexport function getQueryMode(controls) {var _controls$query_mode, _controls$all_columns;\n  const mode = controls == null ? void 0 : (_controls$query_mode = controls.query_mode) == null ? void 0 : _controls$query_mode.value;\n  if (mode === QueryMode.Aggregate || mode === QueryMode.Raw) {\n    return mode;\n  }\n  const rawColumns = controls == null ? void 0 : (_controls$all_columns = controls.all_columns) == null ? void 0 : _controls$all_columns.value;\n  const hasRawColumns = rawColumns && rawColumns.length > 0;\n  return hasRawColumns ? QueryMode.Raw : QueryMode.Aggregate;\n}\n/**\n * Visibility check\n */\nexport function isQueryMode(mode) {\n  return ({ controls }) => getQueryMode(controls) === mode;\n}\nexport const isAggMode = isQueryMode(QueryMode.Aggregate);\nexport const isRawMode = isQueryMode(QueryMode.Raw);\nexport const validateAggControlValues = (controls, values) => {\n  const areControlsEmpty = values.every((val) => ensureIsArray(val).length === 0);\n  return areControlsEmpty && isAggMode({ controls }) ?\n  [t('Group By, Metrics or Percentage Metrics must have a value')] :\n  [];\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getQueryMode, \"getQueryMode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts\");reactHotLoader.register(isQueryMode, \"isQueryMode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts\");reactHotLoader.register(isAggMode, \"isAggMode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts\");reactHotLoader.register(isRawMode, \"isRawMode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts\");reactHotLoader.register(validateAggControlValues, \"validateAggControlValues\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ensureIsArray","QueryMode","t","getQueryMode","controls","_controls$query_mode","_controls$all_columns","mode","query_mode","value","Aggregate","Raw","rawColumns","all_columns","hasRawColumns","length","isQueryMode","isAggMode","isRawMode","validateAggControlValues","values","areControlsEmpty","every","val","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-handlebars/src/plugin/controls/shared.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ControlPanelsContainerProps,\n  ControlStateMapping,\n} from '@superset-ui/chart-controls';\nimport {\n  ensureIsArray,\n  QueryFormColumn,\n  QueryMode,\n  t,\n} from '@superset-ui/core';\n\nexport function getQueryMode(controls: ControlStateMapping): QueryMode {\n  const mode = controls?.query_mode?.value;\n  if (mode === QueryMode.Aggregate || mode === QueryMode.Raw) {\n    return mode as QueryMode;\n  }\n  const rawColumns = controls?.all_columns?.value as\n    | QueryFormColumn[]\n    | undefined;\n  const hasRawColumns = rawColumns && rawColumns.length > 0;\n  return hasRawColumns ? QueryMode.Raw : QueryMode.Aggregate;\n}\n\n/**\n * Visibility check\n */\nexport function isQueryMode(mode: QueryMode) {\n  return ({ controls }: Pick<ControlPanelsContainerProps, 'controls'>) =>\n    getQueryMode(controls) === mode;\n}\n\nexport const isAggMode = isQueryMode(QueryMode.Aggregate);\nexport const isRawMode = isQueryMode(QueryMode.Raw);\n\nexport const validateAggControlValues = (\n  controls: ControlStateMapping,\n  values: any[],\n) => {\n  const areControlsEmpty = values.every(val => ensureIsArray(val).length === 0);\n  return areControlsEmpty && isAggMode({ controls })\n    ? [t('Group By, Metrics or Percentage Metrics must have a value')]\n    : [];\n};\n"],"mappings":"uSAsBA,SACEA,aAAa,EAEbC,SAAS,EACTC,CAAC,QACI,mBAAmB;AAE1B,OAAM,SAAUC,YAAYA,CAACC,QAA6B,OAAAC,oBAAA,EAAAC,qBAAA;EACxD,MAAMC,IAAI,GAAGH,QAAQ,qBAAAC,oBAAA,GAARD,QAAQ,CAAEI,UAAU,qBAApBH,oBAAA,CAAsBI,KAAK;EACxC,IAAIF,IAAI,KAAKN,SAAS,CAACS,SAAS,IAAIH,IAAI,KAAKN,SAAS,CAACU,GAAG,EAAE;IAC1D,OAAOJ,IAAiB;;EAE1B,MAAMK,UAAU,GAAGR,QAAQ,qBAAAE,qBAAA,GAARF,QAAQ,CAAES,WAAW,qBAArBP,qBAAA,CAAuBG,KAE7B;EACb,MAAMK,aAAa,GAAGF,UAAU,IAAIA,UAAU,CAACG,MAAM,GAAG,CAAC;EACzD,OAAOD,aAAa,GAAGb,SAAS,CAACU,GAAG,GAAGV,SAAS,CAACS,SAAS;AAC5D;AAEA;;;AAGA,OAAM,SAAUM,WAAWA,CAACT,IAAe;EACzC,OAAO,CAAC,EAAEH,QAAQ,EAAiD,KACjED,YAAY,CAACC,QAAQ,CAAC,KAAKG,IAAI;AACnC;AAEA,OAAO,MAAMU,SAAS,GAAGD,WAAW,CAACf,SAAS,CAACS,SAAS,CAAC;AACzD,OAAO,MAAMQ,SAAS,GAAGF,WAAW,CAACf,SAAS,CAACU,GAAG,CAAC;AAEnD,OAAO,MAAMQ,wBAAwB,GAAGA,CACtCf,QAA6B,EAC7BgB,MAAa,KACX;EACF,MAAMC,gBAAgB,GAAGD,MAAM,CAACE,KAAK,CAAC,CAAAC,GAAG,KAAIvB,aAAa,CAACuB,GAAG,CAAC,CAACR,MAAM,KAAK,CAAC,CAAC;EAC7E,OAAOM,gBAAgB,IAAIJ,SAAS,CAAC,EAAEb,QAAQ,EAAE,CAAC;EAC9C,CAACF,CAAC,CAAC,2DAA2D,CAAC,CAAC;EAChE,EAAE;AACR,CAAC,CAAC,mBAAAsB,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA/BczB,YAAY,0IAAAqB,cAAA,CAAAI,QAAA,CAeZZ,WAAW,yIAAAQ,cAAA,CAAAI,QAAA,CAKdX,SAAS,uIAAAO,cAAA,CAAAI,QAAA,CACTV,SAAS,uIAAAM,cAAA,CAAAI,QAAA,CAETT,wBAAwB,8KAAAU,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}