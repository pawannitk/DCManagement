{"ast":null,"code":"import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\n\nexport const useOverflowDetection = (flexGap) => {\n  const symbolContainerRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const [isOverflowing, setIsOverflowing] = useState(false);\n  useEffect(() => {\n    let obs;\n    const symbolContainerElem = symbolContainerRef.current;\n    const wrapperElem = wrapperRef.current;\n    if (symbolContainerElem && wrapperElem) {\n      const symbolContainerChildrenElems = Array.from(symbolContainerElem.children);\n      obs = new ResizeObserver(_debounce(() => {\n        const totalChildrenWidth = symbolContainerChildrenElems.reduce((acc, element) => {var _element$firstElement, _element$firstElement2;return (\n            // take symbol container's child's scroll width to account for the container growing with display: flex\n            acc + ((_element$firstElement = (_element$firstElement2 = element.firstElementChild) == null ? void 0 : _element$firstElement2.scrollWidth) != null ? _element$firstElement : 0));}, 0);\n        if (totalChildrenWidth +\n        flexGap * Math.max(symbolContainerChildrenElems.length - 1, 0) >\n        wrapperElem.clientWidth) {\n          setIsOverflowing(true);\n        } else\n        {\n          setIsOverflowing(false);\n        }\n      }, 500));\n      obs.observe(document.body);\n      symbolContainerChildrenElems.forEach((elem) => {\n        obs.observe(elem);\n      });\n    }\n    return () => {var _obs;return (_obs = obs) == null ? void 0 : _obs.disconnect();};\n  }, [flexGap]);\n  return { isOverflowing, symbolContainerRef, wrapperRef };\n};__signature__(useOverflowDetection, \"useRef{symbolContainerRef}\\nuseRef{wrapperRef}\\nuseState{[isOverflowing, setIsOverflowing](false)}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(useOverflowDetection, \"useOverflowDetection\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberPeriodOverPeriod/useOverflowDetection.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useRef","useState","useOverflowDetection","flexGap","symbolContainerRef","wrapperRef","isOverflowing","setIsOverflowing","obs","symbolContainerElem","current","wrapperElem","symbolContainerChildrenElems","Array","from","children","ResizeObserver","_debounce","totalChildrenWidth","reduce","acc","element","_element$firstElement","_element$firstElement2","firstElementChild","scrollWidth","Math","max","length","clientWidth","observe","document","body","forEach","elem","_obs","disconnect","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberPeriodOverPeriod/useOverflowDetection.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { debounce } from 'lodash';\n\nexport const useOverflowDetection = (flexGap: number) => {\n  const symbolContainerRef = useRef<HTMLDivElement>(null);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [isOverflowing, setIsOverflowing] = useState(false);\n\n  useEffect(() => {\n    let obs: ResizeObserver;\n    const symbolContainerElem = symbolContainerRef.current;\n    const wrapperElem = wrapperRef.current;\n    if (symbolContainerElem && wrapperElem) {\n      const symbolContainerChildrenElems = Array.from(\n        symbolContainerElem.children,\n      );\n      obs = new ResizeObserver(\n        debounce(() => {\n          const totalChildrenWidth = symbolContainerChildrenElems.reduce(\n            (acc, element) =>\n              // take symbol container's child's scroll width to account for the container growing with display: flex\n              acc + (element.firstElementChild?.scrollWidth ?? 0),\n            0,\n          );\n          if (\n            totalChildrenWidth +\n              flexGap * Math.max(symbolContainerChildrenElems.length - 1, 0) >\n            wrapperElem.clientWidth\n          ) {\n            setIsOverflowing(true);\n          } else {\n            setIsOverflowing(false);\n          }\n        }, 500),\n      );\n      obs.observe(document.body);\n      symbolContainerChildrenElems.forEach(elem => {\n        obs.observe(elem);\n      });\n    }\n    return () => obs?.disconnect();\n  }, [flexGap]);\n\n  return { isOverflowing, symbolContainerRef, wrapperRef };\n};\n"],"mappings":"gVAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;;AAGnD,OAAO,MAAMC,oBAAoB,GAAGA,CAACC,OAAe,KAAI;EACtD,MAAMC,kBAAkB,GAAGJ,MAAM,CAAiB,IAAI,CAAC;EACvD,MAAMK,UAAU,GAAGL,MAAM,CAAiB,IAAI,CAAC;EAC/C,MAAM,CAACM,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EAEzDF,SAAS,CAAC,MAAK;IACb,IAAIS,GAAmB;IACvB,MAAMC,mBAAmB,GAAGL,kBAAkB,CAACM,OAAO;IACtD,MAAMC,WAAW,GAAGN,UAAU,CAACK,OAAO;IACtC,IAAID,mBAAmB,IAAIE,WAAW,EAAE;MACtC,MAAMC,4BAA4B,GAAGC,KAAK,CAACC,IAAI,CAC7CL,mBAAmB,CAACM,QAAQ,CAC7B;MACDP,GAAG,GAAG,IAAIQ,cAAc,CACtBC,SAAA,CAAS,MAAK;QACZ,MAAMC,kBAAkB,GAAGN,4BAA4B,CAACO,MAAM,CAC5D,CAACC,GAAG,EAAEC,OAAO,UAAAC,qBAAA,EAAAC,sBAAA;YACX;YACAH,GAAG,KAAAE,qBAAA,IAAAC,sBAAA,GAAIF,OAAO,CAACG,iBAAiB,qBAAzBD,sBAAA,CAA2BE,WAAW,YAAAH,qBAAA,GAAI,CAAC,CAAC,KACrD,CAAC,CACF;QACD,IACEJ,kBAAkB;QAChBf,OAAO,GAAGuB,IAAI,CAACC,GAAG,CAACf,4BAA4B,CAACgB,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;QAChEjB,WAAW,CAACkB,WAAW,EACvB;UACAtB,gBAAgB,CAAC,IAAI,CAAC;SACvB;QAAM;UACLA,gBAAgB,CAAC,KAAK,CAAC;;MAE3B,CAAC,EAAE,GAAG,CAAC,CACR;MACDC,GAAG,CAACsB,OAAO,CAACC,QAAQ,CAACC,IAAI,CAAC;MAC1BpB,4BAA4B,CAACqB,OAAO,CAAC,CAAAC,IAAI,KAAG;QAC1C1B,GAAG,CAACsB,OAAO,CAACI,IAAI,CAAC;MACnB,CAAC,CAAC;;IAEJ,OAAO,WAAAC,IAAA,SAAAA,IAAA,GAAM3B,GAAG,qBAAH2B,IAAA,CAAKC,UAAU,EAAE;EAChC,CAAC,EAAE,CAACjC,OAAO,CAAC,CAAC;EAEb,OAAO,EAAEG,aAAa,EAAEF,kBAAkB,EAAEC,UAAU,EAAE;AAC1D,CAAC,CAACgC,aAAA,CAzCWnC,oBAAoB,wIAAAoC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAApBxC,oBAAoB,yMAAAyC,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}