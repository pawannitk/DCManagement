{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo } from 'react';\nimport { Tag } from 'antd';\nimport { css, isAdhocColumn, t, useTheme } from '@superset-ui/core';\nimport RowCountLabel from 'src/explore/components/RowCountLabel';\nimport Icons from 'src/components/Icons';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nexport default function TableControls({ filters, setFilters, totalCount, loading, onReload }) {\n  const theme = useTheme();\n  const filterMap = useMemo(() => Object.assign({}, ...filters.map((filter) => ({\n    [isAdhocColumn(filter.col) ?\n    filter.col.label :\n    filter.col]: filter\n  }))), [filters]);\n  const removeFilter = useCallback((colName) => {\n    const updatedFilterMap = { ...filterMap };\n    delete updatedFilterMap[colName];\n    setFilters([...Object.values(updatedFilterMap)]);\n  }, [filterMap, setFilters]);\n  const filterTags = useMemo(() => Object.entries(filterMap).\n  map(([colName, { val, formattedVal }]) => ({\n    colName,\n    val: formattedVal != null ? formattedVal : val\n  })).\n  sort((a, b) => a.colName.localeCompare(b.colName)), [filterMap]);\n  return ___EmotionJSX(\"div\", { css: css`\n        display: flex;\n        justify-content: space-between;\n        padding: ${theme.gridUnit / 2}px 0;\n        margin-bottom: ${theme.gridUnit * 2}px;\n      ` },\n  ___EmotionJSX(\"div\", { css: css`\n          display: flex;\n          flex-wrap: wrap;\n          margin-bottom: -${theme.gridUnit * 4}px;\n        ` },\n  filterTags.map(({ colName, val }) => ___EmotionJSX(Tag, { closable: true, onClose: removeFilter.bind(null, colName), key: colName, css: css`\n              height: ${theme.gridUnit * 6}px;\n              display: flex;\n              align-items: center;\n              padding: ${theme.gridUnit / 2}px ${theme.gridUnit * 2}px;\n              margin-right: ${theme.gridUnit * 4}px;\n              margin-bottom: ${theme.gridUnit * 4}px;\n              line-height: 1.2;\n            `, \"data-test\": \"filter-col\" },\n  ___EmotionJSX(\"span\", { css: css`\n                margin-right: ${theme.gridUnit}px;\n              ` },\n  colName\n  ),\n  ___EmotionJSX(\"strong\", { \"data-test\": \"filter-val\" }, val)\n  ))\n  ),\n  ___EmotionJSX(\"div\", { css: css`\n          display: flex;\n          align-items: center;\n          height: min-content;\n        ` },\n  ___EmotionJSX(RowCountLabel, { loading: loading && !totalCount, rowcount: totalCount }),\n  ___EmotionJSX(Icons.ReloadOutlined, { iconColor: theme.colors.grayscale.light1, iconSize: \"l\", \"aria-label\": t('Reload'), role: \"button\", onClick: onReload })\n  )\n  );\n}__signature__(TableControls, \"useTheme{theme}\\nuseMemo{filterMap}\\nuseCallback{removeFilter}\\nuseMemo{filterTags}\", () => [useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TableControls, \"TableControls\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailTableControls.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useMemo","Tag","css","isAdhocColumn","t","useTheme","RowCountLabel","Icons","jsx","___EmotionJSX","TableControls","filters","setFilters","totalCount","loading","onReload","theme","filterMap","Object","assign","map","filter","col","label","removeFilter","colName","updatedFilterMap","values","filterTags","entries","val","formattedVal","sort","a","b","localeCompare","gridUnit","closable","onClose","bind","key","rowcount","ReloadOutlined","iconColor","colors","grayscale","light1","iconSize","role","onClick","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailTableControls.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useMemo } from 'react';\nimport { Tag } from 'antd';\nimport {\n  BinaryQueryObjectFilterClause,\n  css,\n  isAdhocColumn,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport RowCountLabel from 'src/explore/components/RowCountLabel';\nimport Icons from 'src/components/Icons';\n\nexport default function TableControls({\n  filters,\n  setFilters,\n  totalCount,\n  loading,\n  onReload,\n}: {\n  filters: BinaryQueryObjectFilterClause[];\n  setFilters: (filters: BinaryQueryObjectFilterClause[]) => void;\n  totalCount?: number;\n  loading: boolean;\n  onReload: () => void;\n}) {\n  const theme = useTheme();\n  const filterMap: Record<string, BinaryQueryObjectFilterClause> = useMemo(\n    () =>\n      Object.assign(\n        {},\n        ...filters.map(filter => ({\n          [isAdhocColumn(filter.col)\n            ? (filter.col.label as string)\n            : filter.col]: filter,\n        })),\n      ),\n    [filters],\n  );\n\n  const removeFilter = useCallback(\n    colName => {\n      const updatedFilterMap = { ...filterMap };\n      delete updatedFilterMap[colName];\n      setFilters([...Object.values(updatedFilterMap)]);\n    },\n    [filterMap, setFilters],\n  );\n\n  const filterTags = useMemo(\n    () =>\n      Object.entries(filterMap)\n        .map(([colName, { val, formattedVal }]) => ({\n          colName,\n          val: formattedVal ?? val,\n        }))\n        .sort((a, b) => a.colName.localeCompare(b.colName)),\n    [filterMap],\n  );\n\n  return (\n    <div\n      css={css`\n        display: flex;\n        justify-content: space-between;\n        padding: ${theme.gridUnit / 2}px 0;\n        margin-bottom: ${theme.gridUnit * 2}px;\n      `}\n    >\n      <div\n        css={css`\n          display: flex;\n          flex-wrap: wrap;\n          margin-bottom: -${theme.gridUnit * 4}px;\n        `}\n      >\n        {filterTags.map(({ colName, val }) => (\n          <Tag\n            closable\n            onClose={removeFilter.bind(null, colName)}\n            key={colName}\n            css={css`\n              height: ${theme.gridUnit * 6}px;\n              display: flex;\n              align-items: center;\n              padding: ${theme.gridUnit / 2}px ${theme.gridUnit * 2}px;\n              margin-right: ${theme.gridUnit * 4}px;\n              margin-bottom: ${theme.gridUnit * 4}px;\n              line-height: 1.2;\n            `}\n            data-test=\"filter-col\"\n          >\n            <span\n              css={css`\n                margin-right: ${theme.gridUnit}px;\n              `}\n            >\n              {colName}\n            </span>\n            <strong data-test=\"filter-val\">{val}</strong>\n          </Tag>\n        ))}\n      </div>\n      <div\n        css={css`\n          display: flex;\n          align-items: center;\n          height: min-content;\n        `}\n      >\n        <RowCountLabel loading={loading && !totalCount} rowcount={totalCount} />\n        <Icons.ReloadOutlined\n          iconColor={theme.colors.grayscale.light1}\n          iconSize=\"l\"\n          aria-label={t('Reload')}\n          role=\"button\"\n          onClick={onReload}\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAmBA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AACnD,SAASC,GAAG,QAAQ,MAAM;AAC1B,SAEEC,GAAG,EACHC,aAAa,EACbC,CAAC,EACDC,QAAQ,QACH,mBAAmB;AAC1B,OAAOC,aAAa,MAAM,sCAAsC;AAChE,OAAOC,KAAK,MAAM,sBAAsB,CAAC,SAAAC,GAAA,IAAAC,aAAA;AAEzC,eAAc,SAAUC,aAAaA,CAAC,EACpCC,OAAO,EACPC,UAAU,EACVC,UAAU,EACVC,OAAO,EACPC,QAAQ,EAOT;EACC,MAAMC,KAAK,GAAGX,QAAQ,EAAE;EACxB,MAAMY,SAAS,GAAkDjB,OAAO,CACtE,MACEkB,MAAM,CAACC,MAAM,CACX,EAAE,EACF,GAAGR,OAAO,CAACS,GAAG,CAAC,CAAAC,MAAM,MAAK;IACxB,CAAClB,aAAa,CAACkB,MAAM,CAACC,GAAG,CAAC;IACrBD,MAAM,CAACC,GAAG,CAACC,KAAgB;IAC5BF,MAAM,CAACC,GAAG,GAAGD;GAClB,CAAC,CAAC,CACJ,EACH,CAACV,OAAO,CAAC,CACV;EAED,MAAMa,YAAY,GAAGzB,WAAW,CAC9B,CAAA0B,OAAO,KAAG;IACR,MAAMC,gBAAgB,GAAG,EAAE,GAAGT,SAAS,EAAE;IACzC,OAAOS,gBAAgB,CAACD,OAAO,CAAC;IAChCb,UAAU,CAAC,CAAC,GAAGM,MAAM,CAACS,MAAM,CAACD,gBAAgB,CAAC,CAAC,CAAC;EAClD,CAAC,EACD,CAACT,SAAS,EAAEL,UAAU,CAAC,CACxB;EAED,MAAMgB,UAAU,GAAG5B,OAAO,CACxB,MACEkB,MAAM,CAACW,OAAO,CAACZ,SAAS,CAAC;EACtBG,GAAG,CAAC,CAAC,CAACK,OAAO,EAAE,EAAEK,GAAG,EAAEC,YAAY,EAAE,CAAC,MAAM;IAC1CN,OAAO;IACPK,GAAG,EAAEC,YAAY,WAAZA,YAAY,GAAID;GACtB,CAAC,CAAC;EACFE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACR,OAAO,CAACU,aAAa,CAACD,CAAC,CAACT,OAAO,CAAC,CAAC,EACvD,CAACR,SAAS,CAAC,CACZ;EAED,OACER,aAAA,UACEP,GAAG,EAAEA,GAAG;;;mBAGKc,KAAK,CAACoB,QAAQ,GAAG,CAAC;yBACZpB,KAAK,CAACoB,QAAQ,GAAG,CAAC;OACnC;EAEF3B,aAAA,UACEP,GAAG,EAAEA,GAAG;;;4BAGYc,KAAK,CAACoB,QAAQ,GAAG,CAAC;SACpC;EAEDR,UAAU,CAACR,GAAG,CAAC,CAAC,EAAEK,OAAO,EAAEK,GAAG,EAAE,KAC/BrB,aAAA,CAACR,GAAG,IACFoC,QAAQ,QACRC,OAAO,EAAEd,YAAY,CAACe,IAAI,CAAC,IAAI,EAAEd,OAAO,CAAE,EAC1Ce,GAAG,EAAEf,OAAQ,EACbvB,GAAG,EAAEA,GAAG;wBACIc,KAAK,CAACoB,QAAQ,GAAG,CAAC;;;yBAGjBpB,KAAK,CAACoB,QAAQ,GAAG,CAAC,MAAMpB,KAAK,CAACoB,QAAQ,GAAG,CAAC;8BACrCpB,KAAK,CAACoB,QAAQ,GAAG,CAAC;+BACjBpB,KAAK,CAACoB,QAAQ,GAAG,CAAC;;aAEnC,EACF,aAAU,YAAY;EAEtB3B,aAAA,WACEP,GAAG,EAAEA,GAAG;gCACUc,KAAK,CAACoB,QAAQ;eAC9B;EAEDX;EACG,CACN;EAAAhB,aAAA,aAAQ,aAAU,YAAY,IAAEqB,GAAY;EACzC,CACN;EACE,CACL;EAAArB,aAAA,UACEP,GAAG,EAAEA,GAAG;;;;SAIN;EAEFO,aAAA,CAACH,aAAa,IAACQ,OAAO,EAAEA,OAAO,IAAI,CAACD,UAAW,EAAC4B,QAAQ,EAAE5B,UAAW,GACrE;EAAAJ,aAAA,CAACF,KAAK,CAACmC,cAAc,IACnBC,SAAS,EAAE3B,KAAK,CAAC4B,MAAM,CAACC,SAAS,CAACC,MAAO,EACzCC,QAAQ,EAAC,GAAG,EACZ,cAAY3C,CAAC,CAAC,QAAQ,CAAE,EACxB4C,IAAI,EAAC,QAAQ,EACbC,OAAO,EAAElC,QAAS;EAEjB;EACF,CAAC;AAEV,CAACmC,aAAA,CA5GuBxC,aAAa,gGAarBL,QAAQ,sBAAA8C,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAbA7C,aAAa,mKAAA8C,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}