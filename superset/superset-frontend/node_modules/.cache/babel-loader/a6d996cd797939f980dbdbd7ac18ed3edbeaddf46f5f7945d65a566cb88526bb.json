{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport UntypedJed from 'jed';\nimport logging from '../utils/logging';\nconst DEFAULT_LANGUAGE_PACK = {\n  domain: 'superset',\n  locale_data: {\n    superset: {\n      '': {\n        domain: 'superset',\n        lang: 'en',\n        plural_forms: 'nplurals=2; plural=(n != 1)'\n      }\n    }\n  }\n};\nexport default class Translator {\n\n\n  constructor(config = {}) {this.i18n = void 0;this.locale = void 0;\n    const { languagePack = DEFAULT_LANGUAGE_PACK } = config;\n    this.i18n = new UntypedJed(languagePack);\n    this.locale = this.i18n.options.locale_data.superset[''].lang;\n  }\n  /**\n   * Add additional translations on the fly, used by plugins.\n   */\n  addTranslation(key, texts) {\n    const translations = this.i18n.options.locale_data.superset;\n    if (process.env.WEBPACK_MODE !== 'test' && key in translations) {\n      logging.warn(`Duplicate translation key \"${key}\", will override.`);\n    }\n    translations[key] = texts;\n  }\n  /**\n   * Add a series of translations.\n   */\n  addTranslations(translations) {\n    if (translations && !Array.isArray(translations)) {\n      Object.entries(translations).forEach(([key, vals]) => this.addTranslation(key, vals));\n    } else\n    {\n      logging.warn('Invalid translations');\n    }\n  }\n  addLocaleData(data) {\n    // always fallback to English\n    const translations = (data == null ? void 0 : data[this.locale]) || (data == null ? void 0 : data.en);\n    if (translations) {\n      this.addTranslations(translations);\n    } else\n    {\n      logging.warn('Invalid locale data');\n    }\n  }\n  translate(input, ...args) {\n    return this.i18n.translate(input).fetch(...args);\n  }\n  translateWithNumber(key, ...args) {\n    const [plural, num, ...rest] = args;\n    if (typeof plural === 'number') {\n      return this.i18n.\n      translate(key).\n      ifPlural(plural, key).\n      fetch(plural, num, ...args);\n    }\n    return this.i18n.\n    translate(key).\n    ifPlural(num, plural).\n    fetch(...rest);\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_LANGUAGE_PACK, \"DEFAULT_LANGUAGE_PACK\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/translation/Translator.ts\");reactHotLoader.register(Translator, \"Translator\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/translation/Translator.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["UntypedJed","logging","DEFAULT_LANGUAGE_PACK","domain","locale_data","superset","lang","plural_forms","Translator","constructor","config","i18n","locale","languagePack","options","addTranslation","key","texts","translations","process","env","WEBPACK_MODE","warn","addTranslations","Array","isArray","Object","entries","forEach","vals","addLocaleData","data","en","translate","input","args","fetch","translateWithNumber","plural","num","rest","ifPlural","__reactstandin__regenerateByEval","code","eval","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/translation/Translator.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport UntypedJed from 'jed';\nimport logging from '../utils/logging';\nimport {\n  Jed,\n  TranslatorConfig,\n  Locale,\n  Translations,\n  LocaleData,\n  LanguagePack,\n} from './types';\n\nconst DEFAULT_LANGUAGE_PACK: LanguagePack = {\n  domain: 'superset',\n  locale_data: {\n    superset: {\n      '': {\n        domain: 'superset',\n        lang: 'en',\n        plural_forms: 'nplurals=2; plural=(n != 1)',\n      },\n    },\n  },\n};\n\nexport default class Translator {\n  i18n: Jed;\n\n  locale: Locale;\n\n  constructor(config: TranslatorConfig = {}) {\n    const { languagePack = DEFAULT_LANGUAGE_PACK } = config;\n    this.i18n = new UntypedJed(languagePack) as Jed;\n    this.locale = this.i18n.options.locale_data.superset[''].lang as Locale;\n  }\n\n  /**\n   * Add additional translations on the fly, used by plugins.\n   */\n  addTranslation(key: string, texts: ReadonlyArray<string>) {\n    const translations = this.i18n.options.locale_data.superset;\n    if (process.env.WEBPACK_MODE !== 'test' && key in translations) {\n      logging.warn(`Duplicate translation key \"${key}\", will override.`);\n    }\n    translations[key] = texts;\n  }\n\n  /**\n   * Add a series of translations.\n   */\n  addTranslations(translations: Translations) {\n    if (translations && !Array.isArray(translations)) {\n      Object.entries(translations).forEach(([key, vals]) =>\n        this.addTranslation(key, vals),\n      );\n    } else {\n      logging.warn('Invalid translations');\n    }\n  }\n\n  addLocaleData(data: LocaleData) {\n    // always fallback to English\n    const translations = data?.[this.locale] || data?.en;\n    if (translations) {\n      this.addTranslations(translations);\n    } else {\n      logging.warn('Invalid locale data');\n    }\n  }\n\n  translate(input: string, ...args: unknown[]): string {\n    return this.i18n.translate(input).fetch(...args);\n  }\n\n  translateWithNumber(key: string, ...args: unknown[]): string {\n    const [plural, num, ...rest] = args;\n    if (typeof plural === 'number') {\n      return this.i18n\n        .translate(key)\n        .ifPlural(plural, key)\n        .fetch(plural, num, ...args);\n    }\n    return this.i18n\n      .translate(key)\n      .ifPlural(num as number, plural as string)\n      .fetch(...rest);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}