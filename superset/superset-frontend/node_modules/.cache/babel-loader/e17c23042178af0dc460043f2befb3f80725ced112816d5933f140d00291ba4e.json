{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { css, isFeatureEnabled, FeatureFlag } from '@superset-ui/core';\nimport { useSqlLabInitialState } from 'src/hooks/apiResources/sqlLab';\nimport { resetState } from 'src/SqlLab/actions/sqlLab';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { SqlLabGlobalStyles } from 'src/SqlLab//SqlLabGlobalStyles';\nimport App from 'src/SqlLab/components/App';\nimport Loading from 'src/components/Loading';\nimport EditorAutoSync from 'src/SqlLab/components/EditorAutoSync';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport { LocationProvider } from './LocationContext';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nexport default function SqlLab() {\n  const lastInitializedAt = useSelector((state) => state.sqlLab.queriesLastUpdate || 0);\n  const { data, isLoading, isError, error, fulfilledTimeStamp } = useSqlLabInitialState();\n  const shouldInitialize = lastInitializedAt <= (fulfilledTimeStamp || 0);\n  const dispatch = useDispatch();\n  const initBootstrapData = useEffectEvent((sqlLabInitialState) => {\n    if (shouldInitialize) {\n      dispatch(resetState(sqlLabInitialState));\n    }\n  });\n  useEffect(() => {\n    if (data) {\n      initBootstrapData(data);\n    }\n  }, [data, initBootstrapData]);\n  if (isLoading || shouldInitialize)\n  return ___EmotionJSX(Loading, null);\n  if (isError && error != null && error.message) {\n    dispatch(addDangerToast(error == null ? void 0 : error.message));\n    return null;\n  }\n  return ___EmotionJSX(LocationProvider, null,\n  ___EmotionJSX(\"div\", { css: css`\n          flex: 1 1 auto;\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        ` },\n  ___EmotionJSX(SqlLabGlobalStyles, null),\n  ___EmotionJSX(App, null),\n  isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) && ___EmotionJSX(EditorAutoSync, null)\n  )\n  );\n}__signature__(SqlLab, \"useSelector{lastInitializedAt}\\nuseSqlLabInitialState{{ data, isLoading, isError, error, fulfilledTimeStamp }}\\nuseDispatch{dispatch}\\nuseEffectEvent{initBootstrapData}\\nuseEffect{}\", () => [useSelector, useSqlLabInitialState, useDispatch, useEffectEvent]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(SqlLab, \"SqlLab\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/SqlLab/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","css","isFeatureEnabled","FeatureFlag","useSqlLabInitialState","resetState","addDangerToast","SqlLabGlobalStyles","App","Loading","EditorAutoSync","useEffectEvent","LocationProvider","jsx","___EmotionJSX","SqlLab","lastInitializedAt","state","sqlLab","queriesLastUpdate","data","isLoading","isError","error","fulfilledTimeStamp","shouldInitialize","dispatch","initBootstrapData","sqlLabInitialState","message","SqllabBackendPersistence","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/SqlLab/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { css, isFeatureEnabled, FeatureFlag } from '@superset-ui/core';\nimport { useSqlLabInitialState } from 'src/hooks/apiResources/sqlLab';\nimport type { InitialState } from 'src/hooks/apiResources/sqlLab';\nimport { resetState } from 'src/SqlLab/actions/sqlLab';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport type { SqlLabRootState } from 'src/SqlLab/types';\nimport { SqlLabGlobalStyles } from 'src/SqlLab//SqlLabGlobalStyles';\nimport App from 'src/SqlLab/components/App';\nimport Loading from 'src/components/Loading';\nimport EditorAutoSync from 'src/SqlLab/components/EditorAutoSync';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport { LocationProvider } from './LocationContext';\n\nexport default function SqlLab() {\n  const lastInitializedAt = useSelector<SqlLabRootState, number>(\n    state => state.sqlLab.queriesLastUpdate || 0,\n  );\n  const { data, isLoading, isError, error, fulfilledTimeStamp } =\n    useSqlLabInitialState();\n  const shouldInitialize = lastInitializedAt <= (fulfilledTimeStamp || 0);\n  const dispatch = useDispatch();\n\n  const initBootstrapData = useEffectEvent(\n    (sqlLabInitialState: InitialState) => {\n      if (shouldInitialize) {\n        dispatch(resetState(sqlLabInitialState));\n      }\n    },\n  );\n\n  useEffect(() => {\n    if (data) {\n      initBootstrapData(data);\n    }\n  }, [data, initBootstrapData]);\n\n  if (isLoading || shouldInitialize) return <Loading />;\n\n  if (isError && error?.message) {\n    dispatch(addDangerToast(error?.message));\n    return null;\n  }\n\n  return (\n    <LocationProvider>\n      <div\n        css={css`\n          flex: 1 1 auto;\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        <SqlLabGlobalStyles />\n        <App />\n        {isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) && (\n          <EditorAutoSync />\n        )}\n      </div>\n    </LocationProvider>\n  );\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,GAAG,EAAEC,gBAAgB,EAAEC,WAAW,QAAQ,mBAAmB;AACtE,SAASC,qBAAqB,QAAQ,+BAA+B;AAErE,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,cAAc,QAAQ,sCAAsC;AAErE,SAASC,kBAAkB,QAAQ,gCAAgC;AACnE,OAAOC,GAAG,MAAM,2BAA2B;AAC3C,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,OAAOC,cAAc,MAAM,sCAAsC;AACjE,OAAOC,cAAc,MAAM,0BAA0B;AACrD,SAASC,gBAAgB,QAAQ,mBAAmB,CAAC,SAAAC,GAAA,IAAAC,aAAA;AAErD,eAAc,SAAUC,MAAMA,CAAA;EAC5B,MAAMC,iBAAiB,GAAGhB,WAAW,CACnC,CAAAiB,KAAK,KAAIA,KAAK,CAACC,MAAM,CAACC,iBAAiB,IAAI,CAAC,CAC7C;EACD,MAAM,EAAEC,IAAI,EAAEC,SAAS,EAAEC,OAAO,EAAEC,KAAK,EAAEC,kBAAkB,EAAE,GAC3DpB,qBAAqB,EAAE;EACzB,MAAMqB,gBAAgB,GAAGT,iBAAiB,KAAKQ,kBAAkB,IAAI,CAAC,CAAC;EACvE,MAAME,QAAQ,GAAG3B,WAAW,EAAE;EAE9B,MAAM4B,iBAAiB,GAAGhB,cAAc,CACtC,CAACiB,kBAAgC,KAAI;IACnC,IAAIH,gBAAgB,EAAE;MACpBC,QAAQ,CAACrB,UAAU,CAACuB,kBAAkB,CAAC,CAAC;;EAE5C,CAAC,CACF;EAED9B,SAAS,CAAC,MAAK;IACb,IAAIsB,IAAI,EAAE;MACRO,iBAAiB,CAACP,IAAI,CAAC;;EAE3B,CAAC,EAAE,CAACA,IAAI,EAAEO,iBAAiB,CAAC,CAAC;EAE7B,IAAIN,SAAS,IAAII,gBAAgB;EAAE,OAAOX,aAAA,CAACL,OAAO,OAAG;EAErD,IAAIa,OAAO,IAAIC,KAAK,YAALA,KAAK,CAAEM,OAAO,EAAE;IAC7BH,QAAQ,CAACpB,cAAc,CAACiB,KAAK,oBAALA,KAAK,CAAEM,OAAO,CAAC,CAAC;IACxC,OAAO,IAAI;;EAGb,OACEf,aAAA,CAACF,gBAAgB;EACfE,aAAA,UACEb,GAAG,EAAEA,GAAG;;;;;SAKN;EAEFa,aAAA,CAACP,kBAAkB,OACnB;EAAAO,aAAA,CAACN,GAAG,OACJ;EAACN,gBAAgB,CAACC,WAAW,CAAC2B,wBAAwB,CAAC,IACrDhB,aAAA,CAACJ,cAAc;EAEd;EACW,CAAC;AAEvB,CAACqB,aAAA,CAhDuBhB,MAAM,kMACFf,WAAW,EAInCI,qBAAqB,EAENL,WAAW,EAEFY,cAAc,sBAAAqB,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CATlBrB,MAAM,yHAAAsB,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}