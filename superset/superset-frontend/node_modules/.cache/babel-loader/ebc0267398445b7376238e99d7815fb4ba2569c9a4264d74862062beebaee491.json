{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useCallback } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport TableSelector, { TableOption } from 'src/components/TableSelector';\nimport { emptyStateComponent } from 'src/components/EmptyState';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { LocalStorageKeys, getItem } from 'src/utils/localStorageHelpers';\nimport { DatasetActionType } from 'src/features/datasets/AddDataset/types';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst LeftPanelStyle = styled.div`\n  ${({ theme }) => `\n    padding: ${theme.gridUnit * 4}px;\n    height: 100%;\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    .emptystate {\n      height: auto;\n      margin-top: ${theme.gridUnit * 17.5}px;\n    }\n    .section-title {\n      margin-top: ${theme.gridUnit * 5.5}px;\n      margin-bottom: ${theme.gridUnit * 11}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .table-title {\n      margin-top: ${theme.gridUnit * 11}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .options-list {\n      overflow: auto;\n      position: absolute;\n      bottom: 0;\n      top: ${theme.gridUnit * 92.25}px;\n      left: ${theme.gridUnit * 3.25}px;\n      right: 0;\n\n      .no-scrollbar {\n        margin-right: ${theme.gridUnit * 4}px;\n      }\n\n      .options {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        :hover {\n          background-color: ${theme.colors.grayscale.light4}\n        }\n      }\n\n      .options-highlighted {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        background-color: ${theme.colors.primary.dark1};\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .options, .options-highlighted {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n    }\n    form > span[aria-label=\"refresh\"] {\n      position: absolute;\n      top: ${theme.gridUnit * 69}px;\n      left: ${theme.gridUnit * 42.75}px;\n      font-size: ${theme.gridUnit * 4.25}px;\n    }\n    .table-form {\n      margin-bottom: ${theme.gridUnit * 8}px;\n    }\n    .loading-container {\n      position: absolute;\n      top: ${theme.gridUnit * 89.75}px;\n      left: 0;\n      right: 0;\n      text-align: center;\n      img {\n        width: ${theme.gridUnit * 20}px;\n        margin-bottom: ${theme.gridUnit * 2.5}px;\n      }\n      p {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n`}\n`;\nexport default function LeftPanel({ setDataset, dataset, datasetNames }) {\n  const { addDangerToast } = useToasts();\n  const setDatabase = useCallback((db) => {\n    setDataset({ type: DatasetActionType.SelectDatabase, payload: { db } });\n  }, [setDataset]);\n  const setCatalog = (catalog) => {\n    if (catalog) {\n      setDataset({\n        type: DatasetActionType.SelectCatalog,\n        payload: { name: 'catalog', value: catalog }\n      });\n    }\n  };\n  const setSchema = (schema) => {\n    if (schema) {\n      setDataset({\n        type: DatasetActionType.SelectSchema,\n        payload: { name: 'schema', value: schema }\n      });\n    }\n  };\n  const setTable = (tableName) => {\n    setDataset({\n      type: DatasetActionType.SelectTable,\n      payload: { name: 'table_name', value: tableName }\n    });\n  };\n  useEffect(() => {\n    const currentUserSelectedDb = getItem(LocalStorageKeys.Database, null);\n    if (currentUserSelectedDb) {\n      setDatabase(currentUserSelectedDb);\n    }\n  }, [setDatabase]);\n  const customTableOptionLabelRenderer = useCallback((table) => ___EmotionJSX(TableOption, { table: datasetNames != null && datasetNames.includes(table.value) ?\n    {\n      ...table,\n      extra: {\n        warning_markdown: t('This table already has a dataset')\n      }\n    } :\n    table }), [datasetNames]);\n  return ___EmotionJSX(LeftPanelStyle, null,\n  ___EmotionJSX(TableSelector, _extends({ database: dataset == null ? void 0 : dataset.db, handleError: addDangerToast, emptyState: emptyStateComponent(false), onDbChange: setDatabase, onCatalogChange: setCatalog, onSchemaChange: setSchema, onTableSelectChange: setTable, sqlLabMode: false, customTableOptionLabelRenderer: customTableOptionLabelRenderer }, (dataset == null ? void 0 : dataset.catalog) && { catalog: dataset.catalog }, (dataset == null ? void 0 : dataset.schema) && { schema: dataset.schema }))\n  );\n}__signature__(LeftPanel, \"useToasts{{ addDangerToast }}\\nuseCallback{setDatabase}\\nuseEffect{}\\nuseCallback{customTableOptionLabelRenderer}\", () => [useToasts]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(LeftPanelStyle, \"LeftPanelStyle\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/features/datasets/AddDataset/LeftPanel/index.tsx\");reactHotLoader.register(LeftPanel, \"LeftPanel\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/features/datasets/AddDataset/LeftPanel/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useEffect","useCallback","styled","t","TableSelector","TableOption","emptyStateComponent","useToasts","LocalStorageKeys","getItem","DatasetActionType","jsx","___EmotionJSX","LeftPanelStyle","div","theme","gridUnit","colors","grayscale","light5","typography","weights","bold","borderRadius","light4","primary","dark1","light1","LeftPanel","setDataset","dataset","datasetNames","addDangerToast","setDatabase","db","type","SelectDatabase","payload","setCatalog","catalog","SelectCatalog","name","value","setSchema","schema","SelectSchema","setTable","tableName","SelectTable","currentUserSelectedDb","Database","customTableOptionLabelRenderer","table","includes","extra","warning_markdown","_extends","database","handleError","emptyState","onDbChange","onCatalogChange","onSchemaChange","onTableSelectChange","sqlLabMode","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/features/datasets/AddDataset/LeftPanel/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, SetStateAction, Dispatch, useCallback } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport TableSelector, { TableOption } from 'src/components/TableSelector';\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\nimport { emptyStateComponent } from 'src/components/EmptyState';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { LocalStorageKeys, getItem } from 'src/utils/localStorageHelpers';\nimport {\n  DatasetActionType,\n  DatasetObject,\n} from 'src/features/datasets/AddDataset/types';\nimport { Table } from 'src/hooks/apiResources';\n\ninterface LeftPanelProps {\n  setDataset: Dispatch<SetStateAction<object>>;\n  dataset?: Partial<DatasetObject> | null;\n  datasetNames?: (string | null | undefined)[] | undefined;\n}\n\nconst LeftPanelStyle = styled.div`\n  ${({ theme }) => `\n    padding: ${theme.gridUnit * 4}px;\n    height: 100%;\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    .emptystate {\n      height: auto;\n      margin-top: ${theme.gridUnit * 17.5}px;\n    }\n    .section-title {\n      margin-top: ${theme.gridUnit * 5.5}px;\n      margin-bottom: ${theme.gridUnit * 11}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .table-title {\n      margin-top: ${theme.gridUnit * 11}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .options-list {\n      overflow: auto;\n      position: absolute;\n      bottom: 0;\n      top: ${theme.gridUnit * 92.25}px;\n      left: ${theme.gridUnit * 3.25}px;\n      right: 0;\n\n      .no-scrollbar {\n        margin-right: ${theme.gridUnit * 4}px;\n      }\n\n      .options {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        :hover {\n          background-color: ${theme.colors.grayscale.light4}\n        }\n      }\n\n      .options-highlighted {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        background-color: ${theme.colors.primary.dark1};\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .options, .options-highlighted {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n    }\n    form > span[aria-label=\"refresh\"] {\n      position: absolute;\n      top: ${theme.gridUnit * 69}px;\n      left: ${theme.gridUnit * 42.75}px;\n      font-size: ${theme.gridUnit * 4.25}px;\n    }\n    .table-form {\n      margin-bottom: ${theme.gridUnit * 8}px;\n    }\n    .loading-container {\n      position: absolute;\n      top: ${theme.gridUnit * 89.75}px;\n      left: 0;\n      right: 0;\n      text-align: center;\n      img {\n        width: ${theme.gridUnit * 20}px;\n        margin-bottom: ${theme.gridUnit * 2.5}px;\n      }\n      p {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n`}\n`;\n\nexport default function LeftPanel({\n  setDataset,\n  dataset,\n  datasetNames,\n}: LeftPanelProps) {\n  const { addDangerToast } = useToasts();\n\n  const setDatabase = useCallback(\n    (db: Partial<DatabaseObject>) => {\n      setDataset({ type: DatasetActionType.SelectDatabase, payload: { db } });\n    },\n    [setDataset],\n  );\n  const setCatalog = (catalog: string | null) => {\n    if (catalog) {\n      setDataset({\n        type: DatasetActionType.SelectCatalog,\n        payload: { name: 'catalog', value: catalog },\n      });\n    }\n  };\n  const setSchema = (schema: string) => {\n    if (schema) {\n      setDataset({\n        type: DatasetActionType.SelectSchema,\n        payload: { name: 'schema', value: schema },\n      });\n    }\n  };\n  const setTable = (tableName: string) => {\n    setDataset({\n      type: DatasetActionType.SelectTable,\n      payload: { name: 'table_name', value: tableName },\n    });\n  };\n  useEffect(() => {\n    const currentUserSelectedDb = getItem(\n      LocalStorageKeys.Database,\n      null,\n    ) as DatabaseObject;\n    if (currentUserSelectedDb) {\n      setDatabase(currentUserSelectedDb);\n    }\n  }, [setDatabase]);\n\n  const customTableOptionLabelRenderer = useCallback(\n    (table: Table) => (\n      <TableOption\n        table={\n          datasetNames?.includes(table.value)\n            ? {\n                ...table,\n                extra: {\n                  warning_markdown: t('This table already has a dataset'),\n                },\n              }\n            : table\n        }\n      />\n    ),\n    [datasetNames],\n  );\n\n  return (\n    <LeftPanelStyle>\n      <TableSelector\n        database={dataset?.db}\n        handleError={addDangerToast}\n        emptyState={emptyStateComponent(false)}\n        onDbChange={setDatabase}\n        onCatalogChange={setCatalog}\n        onSchemaChange={setSchema}\n        onTableSelectChange={setTable}\n        sqlLabMode={false}\n        customTableOptionLabelRenderer={customTableOptionLabelRenderer}\n        {...(dataset?.catalog && { catalog: dataset.catalog })}\n        {...(dataset?.schema && { schema: dataset.schema })}\n      />\n    </LeftPanelStyle>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}