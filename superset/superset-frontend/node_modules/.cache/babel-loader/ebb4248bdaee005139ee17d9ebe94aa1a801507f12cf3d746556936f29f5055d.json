{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { getClientErrorObject, t } from '@superset-ui/core';\nimport Popover from 'src/components/Popover';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { getDashboardPermalink } from 'src/utils/urlUtils';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { useSelector } from 'react-redux';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nexport default function URLShortLinkButton({ dashboardId, anchorLinkId, placement = 'right', emailContent = '', emailSubject = '' }) {\n  const [shortUrl, setShortUrl] = useState('');\n  const { addDangerToast } = useToasts();\n  const { dataMask, activeTabs } = useSelector((state) => ({\n    dataMask: state.dataMask,\n    activeTabs: state.dashboardState.activeTabs\n  }));\n  const getCopyUrl = async () => {\n    try {\n      const url = await getDashboardPermalink({\n        dashboardId,\n        dataMask,\n        activeTabs,\n        anchor: anchorLinkId\n      });\n      setShortUrl(url);\n    }\n    catch (error) {\n      if (error) {\n        addDangerToast((await getClientErrorObject(error)).error ||\n        t('Something went wrong.'));\n      }\n    }\n  };\n  const emailBody = `${emailContent}${shortUrl || ''}`;\n  const emailLink = `mailto:?Subject=${emailSubject}%20&Body=${emailBody}`;\n  return ___EmotionJSX(Popover, { trigger: \"click\", placement: placement, content:\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    ___EmotionJSX(\"div\", { id: \"shorturl-popover\", \"data-test\": \"shorturl-popover\", onClick: (e) => {\n        e.stopPropagation();\n      } },\n    ___EmotionJSX(CopyToClipboard, { text: shortUrl, copyNode: ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\", title: t('Copy to clipboard') }) }), \"\\xA0\\xA0\",\n\n    ___EmotionJSX(\"a\", { href: emailLink },\n    ___EmotionJSX(\"i\", { className: \"fa fa-envelope\" })\n    )\n    ) },\n  ___EmotionJSX(\"span\", { className: \"short-link-trigger btn btn-default btn-sm\", tabIndex: -1, role: \"button\", onClick: (e) => {\n      e.stopPropagation();\n      getCopyUrl();\n    } },\n  ___EmotionJSX(\"i\", { className: \"short-link-trigger fa fa-link\" }), \"\\xA0\"\n\n  )\n  );\n}__signature__(URLShortLinkButton, \"useState{[shortUrl, setShortUrl]('')}\\nuseToasts{{ addDangerToast }}\\nuseSelector{{ dataMask, activeTabs }}\", () => [useToasts, useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(URLShortLinkButton, \"URLShortLinkButton\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/URLShortLinkButton/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useState","getClientErrorObject","t","Popover","CopyToClipboard","getDashboardPermalink","useToasts","useSelector","jsx","___EmotionJSX","URLShortLinkButton","dashboardId","anchorLinkId","placement","emailContent","emailSubject","shortUrl","setShortUrl","addDangerToast","dataMask","activeTabs","state","dashboardState","getCopyUrl","url","anchor","error","emailBody","emailLink","trigger","content","id","onClick","e","stopPropagation","text","copyNode","className","title","href","tabIndex","role","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/URLShortLinkButton/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { getClientErrorObject, t } from '@superset-ui/core';\nimport Popover, { PopoverProps } from 'src/components/Popover';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { getDashboardPermalink } from 'src/utils/urlUtils';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'src/dashboard/types';\n\nexport type URLShortLinkButtonProps = {\n  dashboardId: number;\n  anchorLinkId?: string;\n  emailSubject?: string;\n  emailContent?: string;\n  placement?: PopoverProps['placement'];\n};\n\nexport default function URLShortLinkButton({\n  dashboardId,\n  anchorLinkId,\n  placement = 'right',\n  emailContent = '',\n  emailSubject = '',\n}: URLShortLinkButtonProps) {\n  const [shortUrl, setShortUrl] = useState('');\n  const { addDangerToast } = useToasts();\n  const { dataMask, activeTabs } = useSelector((state: RootState) => ({\n    dataMask: state.dataMask,\n    activeTabs: state.dashboardState.activeTabs,\n  }));\n\n  const getCopyUrl = async () => {\n    try {\n      const url = await getDashboardPermalink({\n        dashboardId,\n        dataMask,\n        activeTabs,\n        anchor: anchorLinkId,\n      });\n      setShortUrl(url);\n    } catch (error) {\n      if (error) {\n        addDangerToast(\n          (await getClientErrorObject(error)).error ||\n            t('Something went wrong.'),\n        );\n      }\n    }\n  };\n\n  const emailBody = `${emailContent}${shortUrl || ''}`;\n  const emailLink = `mailto:?Subject=${emailSubject}%20&Body=${emailBody}`;\n\n  return (\n    <Popover\n      trigger=\"click\"\n      placement={placement}\n      content={\n        // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n        <div\n          id=\"shorturl-popover\"\n          data-test=\"shorturl-popover\"\n          onClick={e => {\n            e.stopPropagation();\n          }}\n        >\n          <CopyToClipboard\n            text={shortUrl}\n            copyNode={\n              <i className=\"fa fa-clipboard\" title={t('Copy to clipboard')} />\n            }\n          />\n          &nbsp;&nbsp;\n          <a href={emailLink}>\n            <i className=\"fa fa-envelope\" />\n          </a>\n        </div>\n      }\n    >\n      <span\n        className=\"short-link-trigger btn btn-default btn-sm\"\n        tabIndex={-1}\n        role=\"button\"\n        onClick={e => {\n          e.stopPropagation();\n          getCopyUrl();\n        }}\n      >\n        <i className=\"short-link-trigger fa fa-link\" />\n        &nbsp;\n      </span>\n    </Popover>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}