{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};export const getRelevantDataMask = (dataMask, prop) => Object.values(dataMask).\nfilter((item) => item[prop]).\nreduce((prev, next) => ({ ...prev, [next.id]: prop ? next[prop] : next }), {});\nexport const getAllActiveFilters = ({ chartConfiguration, nativeFilters, dataMask, allSliceIds }) => {\n  const activeFilters = {};\n  // Combine native filters with cross filters, because they have similar logic\n  Object.values(dataMask).forEach(({ id: filterId, extraFormData }) => {var _ref, _ref2, _nativeFilters$filter, _nativeFilters$filter2, _chartConfiguration$f, _chartConfiguration$f2;\n    const scope = (_ref = (_ref2 = (_nativeFilters$filter = nativeFilters == null ? void 0 : (_nativeFilters$filter2 = nativeFilters[filterId]) == null ? void 0 : _nativeFilters$filter2.chartsInScope) != null ? _nativeFilters$filter :\n    chartConfiguration == null ? void 0 : (_chartConfiguration$f = chartConfiguration[filterId]) == null ? void 0 : (_chartConfiguration$f2 = _chartConfiguration$f.crossFilters) == null ? void 0 : _chartConfiguration$f2.chartsInScope) != null ? _ref2 :\n    allSliceIds) != null ? _ref :\n    [];\n    // Iterate over all roots to find all affected charts\n    activeFilters[filterId] = {\n      scope,\n      values: extraFormData\n    };\n  });\n  return activeFilters;\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getRelevantDataMask, \"getRelevantDataMask\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/util/activeAllDashboardFilters.ts\");reactHotLoader.register(getAllActiveFilters, \"getAllActiveFilters\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/util/activeAllDashboardFilters.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["getRelevantDataMask","dataMask","prop","Object","values","filter","item","reduce","prev","next","id","getAllActiveFilters","chartConfiguration","nativeFilters","allSliceIds","activeFilters","forEach","filterId","extraFormData","_ref","_ref2","_nativeFilters$filter","_nativeFilters$filter2","_chartConfiguration$f","_chartConfiguration$f2","scope","chartsInScope","crossFilters","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/util/activeAllDashboardFilters.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  PartialFilters,\n  JsonObject,\n} from '@superset-ui/core';\nimport { ActiveFilters, ChartConfiguration } from '../types';\n\nexport const getRelevantDataMask = (\n  dataMask: DataMaskStateWithId,\n  prop: string,\n): JsonObject | DataMaskStateWithId =>\n  Object.values(dataMask)\n    .filter(item => item[prop])\n    .reduce(\n      (prev, next) => ({ ...prev, [next.id]: prop ? next[prop] : next }),\n      {},\n    );\n\nexport const getAllActiveFilters = ({\n  chartConfiguration,\n  nativeFilters,\n  dataMask,\n  allSliceIds,\n}: {\n  chartConfiguration: ChartConfiguration;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: PartialFilters;\n  allSliceIds: number[];\n}): ActiveFilters => {\n  const activeFilters = {};\n\n  // Combine native filters with cross filters, because they have similar logic\n  Object.values(dataMask).forEach(({ id: filterId, extraFormData }) => {\n    const scope =\n      nativeFilters?.[filterId]?.chartsInScope ??\n      chartConfiguration?.[filterId]?.crossFilters?.chartsInScope ??\n      allSliceIds ??\n      [];\n    // Iterate over all roots to find all affected charts\n    activeFilters[filterId] = {\n      scope,\n      values: extraFormData,\n    };\n  });\n  return activeFilters;\n};\n"],"mappings":"uSAyBA,OAAO,MAAMA,mBAAmB,GAAGA,CACjCC,QAA6B,EAC7BC,IAAY,KAEZC,MAAM,CAACC,MAAM,CAACH,QAAQ,CAAC;AACpBI,MAAM,CAAC,CAAAC,IAAI,KAAIA,IAAI,CAACJ,IAAI,CAAC,CAAC;AAC1BK,MAAM,CACL,CAACC,IAAI,EAAEC,IAAI,MAAM,EAAE,GAAGD,IAAI,EAAE,CAACC,IAAI,CAACC,EAAE,GAAGR,IAAI,GAAGO,IAAI,CAACP,IAAI,CAAC,GAAGO,IAAI,EAAE,CAAC,EAClE,EAAE,CACH;AAEL,OAAO,MAAME,mBAAmB,GAAGA,CAAC,EAClCC,kBAAkB,EAClBC,aAAa,EACbZ,QAAQ,EACRa,WAAW,EAMZ,KAAmB;EAClB,MAAMC,aAAa,GAAG,EAAE;EAExB;EACAZ,MAAM,CAACC,MAAM,CAACH,QAAQ,CAAC,CAACe,OAAO,CAAC,CAAC,EAAEN,EAAE,EAAEO,QAAQ,EAAEC,aAAa,EAAE,KAAI,KAAAC,IAAA,EAAAC,KAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,sBAAA;IAClE,MAAMC,KAAK,IAAAN,IAAA,IAAAC,KAAA,IAAAC,qBAAA,GACTR,aAAa,qBAAAS,sBAAA,GAAbT,aAAa,CAAGI,QAAQ,CAAC,qBAAzBK,sBAAA,CAA2BI,aAAa,YAAAL,qBAAA;IACxCT,kBAAkB,qBAAAW,qBAAA,GAAlBX,kBAAkB,CAAGK,QAAQ,CAAC,sBAAAO,sBAAA,GAA9BD,qBAAA,CAAgCI,YAAY,qBAA5CH,sBAAA,CAA8CE,aAAa,YAAAN,KAAA;IAC3DN,WAAW,YAAAK,IAAA;IACX,EAAE;IACJ;IACAJ,aAAa,CAACE,QAAQ,CAAC,GAAG;MACxBQ,KAAK;MACLrB,MAAM,EAAEc;KACT;EACH,CAAC,CAAC;EACF,OAAOH,aAAa;AACtB,CAAC,CAAC,mBAAAa,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAtCWhC,mBAAmB,mIAAA4B,cAAA,CAAAI,QAAA,CAWnBrB,mBAAmB,2JAAAsB,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}