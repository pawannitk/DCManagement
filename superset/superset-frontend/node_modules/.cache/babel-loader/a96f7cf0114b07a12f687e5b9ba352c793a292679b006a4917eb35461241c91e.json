{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ExtensibleFunction } from '../models';\nimport { getNumberFormatter, NumberFormats } from '../number-format';\nexport const getCurrencySymbol = (currency) => {var _Intl$NumberFormat$fo;return (_Intl$NumberFormat$fo = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency.symbol\n  }).\n  formatToParts(1).\n  find((x) => x.type === 'currency')) == null ? void 0 : _Intl$NumberFormat$fo.value;};\nclass CurrencyFormatter extends ExtensibleFunction {\n\n\n\n  constructor(config) {\n    super((value) => this.format(value));this.d3Format = void 0;this.locale = void 0;this.currency = void 0;\n    this.d3Format = config.d3Format || NumberFormats.SMART_NUMBER;\n    this.currency = config.currency;\n    this.locale = config.locale || 'en-US';\n  }\n  hasValidCurrency() {var _this$currency;\n    return Boolean((_this$currency = this.currency) == null ? void 0 : _this$currency.symbol);\n  }\n  getNormalizedD3Format() {\n    return this.d3Format.replace(/\\$|%/g, '');\n  }\n  format(value) {\n    const formattedValue = getNumberFormatter(this.getNormalizedD3Format())(value);\n    if (!this.hasValidCurrency()) {\n      return formattedValue;\n    }\n    if (this.currency.symbolPosition === 'prefix') {\n      return `${getCurrencySymbol(this.currency)} ${formattedValue}`;\n    }\n    return `${formattedValue} ${getCurrencySymbol(this.currency)}`;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}const _default = CurrencyFormatter;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getCurrencySymbol, \"getCurrencySymbol\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");reactHotLoader.register(CurrencyFormatter, \"CurrencyFormatter\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ExtensibleFunction","getNumberFormatter","NumberFormats","getCurrencySymbol","currency","_Intl$NumberFormat$fo","Intl","NumberFormat","style","symbol","formatToParts","find","x","type","value","CurrencyFormatter","constructor","config","format","d3Format","locale","SMART_NUMBER","hasValidCurrency","_this$currency","Boolean","getNormalizedD3Format","replace","formattedValue","symbolPosition","__reactstandin__regenerateByEval","key","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { ExtensibleFunction } from '../models';\nimport { getNumberFormatter, NumberFormats } from '../number-format';\nimport { Currency } from '../query';\n\ninterface CurrencyFormatterConfig {\n  d3Format?: string;\n  currency: Currency;\n  locale?: string;\n}\n\ninterface CurrencyFormatter {\n  (value: number | null | undefined): string;\n}\n\nexport const getCurrencySymbol = (currency: Partial<Currency>) =>\n  new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency.symbol,\n  })\n    .formatToParts(1)\n    .find(x => x.type === 'currency')?.value;\n\nclass CurrencyFormatter extends ExtensibleFunction {\n  d3Format: string;\n\n  locale: string;\n\n  currency: Currency;\n\n  constructor(config: CurrencyFormatterConfig) {\n    super((value: number) => this.format(value));\n    this.d3Format = config.d3Format || NumberFormats.SMART_NUMBER;\n    this.currency = config.currency;\n    this.locale = config.locale || 'en-US';\n  }\n\n  hasValidCurrency() {\n    return Boolean(this.currency?.symbol);\n  }\n\n  getNormalizedD3Format() {\n    return this.d3Format.replace(/\\$|%/g, '');\n  }\n\n  format(value: number) {\n    const formattedValue = getNumberFormatter(this.getNormalizedD3Format())(\n      value,\n    );\n    if (!this.hasValidCurrency()) {\n      return formattedValue as string;\n    }\n\n    if (this.currency.symbolPosition === 'prefix') {\n      return `${getCurrencySymbol(this.currency)} ${formattedValue}`;\n    }\n    return `${formattedValue} ${getCurrencySymbol(this.currency)}`;\n  }\n}\n\nexport default CurrencyFormatter;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAmBA,SAASA,kBAAkB,QAAQ,WAAW;AAC9C,SAASC,kBAAkB,EAAEC,aAAa,QAAQ,kBAAkB;AAapE,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,QAA2B,UAAAC,qBAAA,SAAAA,qBAAA,GAC3D,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;IAC7BC,KAAK,EAAE,UAAU;IACjBJ,QAAQ,EAAEA,QAAQ,CAACK;GACpB,CAAC;EACCC,aAAa,CAAC,CAAC,CAAC;EAChBC,IAAI,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,IAAI,KAAK,UAAU,CAAC,qBALnCR,qBAAA,CAKqCS,KAAK;AAE5C,MAAMC,iBAAkB,SAAQf,kBAAkB;;;;EAOhDgB,YAAYC,MAA+B;IACzC,KAAK,CAAC,CAACH,KAAa,KAAK,IAAI,CAACI,MAAM,CAACJ,KAAK,CAAC,CAAC,CAAC,KAP/CK,QAAQ,eAERC,MAAM,eAENhB,QAAQ;IAIN,IAAI,CAACe,QAAQ,GAAGF,MAAM,CAACE,QAAQ,IAAIjB,aAAa,CAACmB,YAAY;IAC7D,IAAI,CAACjB,QAAQ,GAAGa,MAAM,CAACb,QAAQ;IAC/B,IAAI,CAACgB,MAAM,GAAGH,MAAM,CAACG,MAAM,IAAI,OAAO;EACxC;EAEAE,gBAAgBA,CAAA,OAAAC,cAAA;IACd,OAAOC,OAAO,EAAAD,cAAA,GAAC,IAAI,CAACnB,QAAQ,qBAAbmB,cAAA,CAAed,MAAM,CAAC;EACvC;EAEAgB,qBAAqBA,CAAA;IACnB,OAAO,IAAI,CAACN,QAAQ,CAACO,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;EAC3C;EAEAR,MAAMA,CAACJ,KAAa;IAClB,MAAMa,cAAc,GAAG1B,kBAAkB,CAAC,IAAI,CAACwB,qBAAqB,EAAE,CAAC,CACrEX,KAAK,CACN;IACD,IAAI,CAAC,IAAI,CAACQ,gBAAgB,EAAE,EAAE;MAC5B,OAAOK,cAAwB;;IAGjC,IAAI,IAAI,CAACvB,QAAQ,CAACwB,cAAc,KAAK,QAAQ,EAAE;MAC7C,OAAO,GAAGzB,iBAAiB,CAAC,IAAI,CAACC,QAAQ,CAAC,IAAIuB,cAAc,EAAE;;IAEhE,OAAO,GAAGA,cAAc,IAAIxB,iBAAiB,CAAC,IAAI,CAACC,QAAQ,CAAC,EAAE;EAChE,CAAC;EAAAyB,iCAAAC,GAAA,EAAAC,IAAA;IAAA,KAAAD,GAAA,IAAAE,IAAA,CAAAD,IAAA,G,CACF,MAAAE,QAAA,GAEclB,iBAAiB,CAAhC,eAAAkB,QAAA,CAAiC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA7CpBnC,iBAAiB,oJAAA+B,cAAA,CAAAI,QAAA,CAQxBvB,iBAAkB,oJAAAmB,cAAA,CAAAI,QAAA,CAAAL,QAAA,kKAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}