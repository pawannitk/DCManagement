{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetApiError } from './types';\n/**\n * Handle API request errors, convert to consistent Superset API error.\n * @param error the catched error from SupersetClient.request(...)\n */\nexport default async function handleError(error) {\n  // already a Superset error\n  if (error instanceof SupersetApiError) {\n    throw error;\n  }\n  // string is the error message itself\n  if (typeof error === 'string') {\n    throw new SupersetApiError({ message: error });\n  }\n  // JS errors, normally happens before request was sent\n  if (error instanceof Error) {\n    throw new SupersetApiError({\n      message: error.message || 'Unknown Error',\n      originalError: error\n    });\n  }\n  let errorJson;\n  let originalError;\n  let errorMessage = 'Unknown Error';\n  let status;\n  let statusText;\n  // catch HTTP errors\n  if (error instanceof Response) {\n    const { status: responseStatus, statusText: responseStatusText } = error;\n    status = responseStatus;\n    statusText = responseStatusText;\n    errorMessage = `${status} ${statusText}`;\n    try {\n      errorJson = await error.json();\n      originalError = errorJson;\n    }\n    catch (error_) {\n      originalError = error;\n    }\n  } else\n  if (error) {\n    errorJson = error;\n  }\n  // when API returns 200 but operation fails (see Python API json_error_response(...))\n  // or when frontend promise rejects with `{ error: ... }`\n  if (errorJson && (\n  'error' in errorJson || 'message' in errorJson || 'errors' in errorJson)) {\n    let err;\n    if ('errors' in errorJson) {var _errorJson$errors;\n      err = ((_errorJson$errors = errorJson.errors) == null ? void 0 : _errorJson$errors[0]) || {};\n    } else\n    if (typeof errorJson.error === 'object') {\n      err = errorJson.error;\n    } else\n    {\n      err = errorJson;\n    }\n    errorMessage =\n    err.message ||\n    err.error ||\n    err.error_type ||\n    errorMessage;\n    throw new SupersetApiError({\n      status,\n      statusText,\n      message: errorMessage,\n      originalError,\n      ...err\n    });\n  }\n  // all unknown error\n  throw new SupersetApiError({\n    status,\n    statusText,\n    message: errorMessage,\n    originalError: error\n  });\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(handleError, \"handleError\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/query/api/v1/handleError.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["SupersetApiError","handleError","error","message","Error","originalError","errorJson","errorMessage","status","statusText","Response","responseStatus","responseStatusText","json","error_","err","_errorJson$errors","errors","error_type","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/query/api/v1/handleError.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  SupersetApiError,\n  SupersetApiErrorPayload,\n  SupersetApiMultiErrorsPayload,\n} from './types';\n\nexport type ErrorInput = string | Error | Response | SupersetApiErrorPayload;\n\n/**\n * Handle API request errors, convert to consistent Superset API error.\n * @param error the catched error from SupersetClient.request(...)\n */\nexport default async function handleError(error: ErrorInput): Promise<never> {\n  // already a Superset error\n  if (error instanceof SupersetApiError) {\n    throw error;\n  }\n  // string is the error message itself\n  if (typeof error === 'string') {\n    throw new SupersetApiError({ message: error });\n  }\n  // JS errors, normally happens before request was sent\n  if (error instanceof Error) {\n    throw new SupersetApiError({\n      message: error.message || 'Unknown Error',\n      originalError: error,\n    });\n  }\n\n  let errorJson;\n  let originalError;\n  let errorMessage = 'Unknown Error';\n  let status: number | undefined;\n  let statusText: string | undefined;\n\n  // catch HTTP errors\n  if (error instanceof Response) {\n    const { status: responseStatus, statusText: responseStatusText } = error;\n    status = responseStatus;\n    statusText = responseStatusText;\n    errorMessage = `${status} ${statusText}`;\n    try {\n      errorJson = (await error.json()) as\n        | SupersetApiErrorPayload\n        | SupersetApiMultiErrorsPayload;\n      originalError = errorJson;\n    } catch (error_) {\n      originalError = error;\n    }\n  } else if (error) {\n    errorJson = error;\n  }\n\n  // when API returns 200 but operation fails (see Python API json_error_response(...))\n  // or when frontend promise rejects with `{ error: ... }`\n  if (\n    errorJson &&\n    ('error' in errorJson || 'message' in errorJson || 'errors' in errorJson)\n  ) {\n    let err;\n    if ('errors' in errorJson) {\n      err = errorJson.errors?.[0] || {};\n    } else if (typeof errorJson.error === 'object') {\n      err = errorJson.error;\n    } else {\n      err = errorJson;\n    }\n    errorMessage =\n      err.message ||\n      (err.error as string | undefined) ||\n      err.error_type ||\n      errorMessage;\n    throw new SupersetApiError({\n      status,\n      statusText,\n      message: errorMessage,\n      originalError,\n      ...err,\n    });\n  }\n  // all unknown error\n  throw new SupersetApiError({\n    status,\n    statusText,\n    message: errorMessage,\n    originalError: error,\n  });\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SACEA,gBAAgB,QAGX,SAAS;AAIhB;;;;AAIA,eAAe,eAAeC,WAAWA,CAACC,KAAiB;EACzD;EACA,IAAIA,KAAK,YAAYF,gBAAgB,EAAE;IACrC,MAAME,KAAK;;EAEb;EACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,MAAM,IAAIF,gBAAgB,CAAC,EAAEG,OAAO,EAAED,KAAK,EAAE,CAAC;;EAEhD;EACA,IAAIA,KAAK,YAAYE,KAAK,EAAE;IAC1B,MAAM,IAAIJ,gBAAgB,CAAC;MACzBG,OAAO,EAAED,KAAK,CAACC,OAAO,IAAI,eAAe;MACzCE,aAAa,EAAEH;KAChB,CAAC;;EAGJ,IAAII,SAAS;EACb,IAAID,aAAa;EACjB,IAAIE,YAAY,GAAG,eAAe;EAClC,IAAIC,MAA0B;EAC9B,IAAIC,UAA8B;EAElC;EACA,IAAIP,KAAK,YAAYQ,QAAQ,EAAE;IAC7B,MAAM,EAAEF,MAAM,EAAEG,cAAc,EAAEF,UAAU,EAAEG,kBAAkB,EAAE,GAAGV,KAAK;IACxEM,MAAM,GAAGG,cAAc;IACvBF,UAAU,GAAGG,kBAAkB;IAC/BL,YAAY,GAAG,GAAGC,MAAM,IAAIC,UAAU,EAAE;IACxC,IAAI;MACFH,SAAS,GAAI,MAAMJ,KAAK,CAACW,IAAI,EAEI;MACjCR,aAAa,GAAGC,SAAS;;IACzB,OAAOQ,MAAM,EAAE;MACfT,aAAa,GAAGH,KAAK;;GAExB;EAAM,IAAIA,KAAK,EAAE;IAChBI,SAAS,GAAGJ,KAAK;;EAGnB;EACA;EACA,IACEI,SAAS;EACR,OAAO,IAAIA,SAAS,IAAI,SAAS,IAAIA,SAAS,IAAI,QAAQ,IAAIA,SAAS,CAAC,EACzE;IACA,IAAIS,GAAG;IACP,IAAI,QAAQ,IAAIT,SAAS,EAAE,KAAAU,iBAAA;MACzBD,GAAG,GAAG,EAAAC,iBAAA,GAAAV,SAAS,CAACW,MAAM,qBAAhBD,iBAAA,CAAmB,CAAC,CAAC,KAAI,EAAE;KAClC;IAAM,IAAI,OAAOV,SAAS,CAACJ,KAAK,KAAK,QAAQ,EAAE;MAC9Ca,GAAG,GAAGT,SAAS,CAACJ,KAAK;KACtB;IAAM;MACLa,GAAG,GAAGT,SAAS;;IAEjBC,YAAY;IACVQ,GAAG,CAACZ,OAAO;IACVY,GAAG,CAACb,KAA4B;IACjCa,GAAG,CAACG,UAAU;IACdX,YAAY;IACd,MAAM,IAAIP,gBAAgB,CAAC;MACzBQ,MAAM;MACNC,UAAU;MACVN,OAAO,EAAEI,YAAY;MACrBF,aAAa;MACb,GAAGU;KACJ,CAAC;;EAEJ;EACA,MAAM,IAAIf,gBAAgB,CAAC;IACzBQ,MAAM;IACNC,UAAU;IACVN,OAAO,EAAEI,YAAY;IACrBF,aAAa,EAAEH;GAChB,CAAC;AACJ,CAAC,mBAAAiB,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA3E6BtB,WAAW,6JAAAuB,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}