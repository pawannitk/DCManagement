{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport { store } from '../views/store';\nimport { getDashboardPermalink as getDashboardPermalinkUtil } from '../utils/urlUtils';\nconst bootstrapData = getBootstrapData();\nconst getScrollSize = () => ({\n  width: document.body.scrollWidth,\n  height: document.body.scrollHeight\n});\nconst getDashboardPermalink = async ({ anchor }) => {var _state$dashboardInfo, _state$dashboardState;\n  const state = store == null ? void 0 : store.getState();\n  const { dashboardId, dataMask, activeTabs } = {\n    dashboardId: (state == null ? void 0 : (_state$dashboardInfo = state.dashboardInfo) == null ? void 0 : _state$dashboardInfo.id) || (bootstrapData == null ? void 0 : bootstrapData.embedded.dashboard_id),\n    dataMask: state == null ? void 0 : state.dataMask,\n    activeTabs: (_state$dashboardState = state.dashboardState) == null ? void 0 : _state$dashboardState.activeTabs\n  };\n  return getDashboardPermalinkUtil({\n    dashboardId,\n    dataMask,\n    activeTabs,\n    anchor\n  });\n};\nconst getActiveTabs = () => {var _store$getState, _store$getState$dashb;return (store == null ? void 0 : (_store$getState = store.getState()) == null ? void 0 : (_store$getState$dashb = _store$getState.dashboardState) == null ? void 0 : _store$getState$dashb.activeTabs) || [];};\nexport const embeddedApi = {\n  getScrollSize,\n  getDashboardPermalink,\n  getActiveTabs\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(bootstrapData, \"bootstrapData\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx\");reactHotLoader.register(getScrollSize, \"getScrollSize\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx\");reactHotLoader.register(getDashboardPermalink, \"getDashboardPermalink\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx\");reactHotLoader.register(getActiveTabs, \"getActiveTabs\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx\");reactHotLoader.register(embeddedApi, \"embeddedApi\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["getBootstrapData","store","getDashboardPermalink","getDashboardPermalinkUtil","bootstrapData","getScrollSize","width","document","body","scrollWidth","height","scrollHeight","anchor","_state$dashboardInfo","_state$dashboardState","state","getState","dashboardId","dataMask","activeTabs","dashboardInfo","id","embedded","dashboard_id","dashboardState","getActiveTabs","_store$getState","_store$getState$dashb","embeddedApi","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/embedded/api.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport { store } from '../views/store';\nimport { getDashboardPermalink as getDashboardPermalinkUtil } from '../utils/urlUtils';\n\nconst bootstrapData = getBootstrapData();\n\ntype Size = {\n  width: number;\n  height: number;\n};\n\ntype EmbeddedSupersetApi = {\n  getScrollSize: () => Size;\n  getDashboardPermalink: ({ anchor }: { anchor: string }) => Promise<string>;\n  getActiveTabs: () => string[];\n};\n\nconst getScrollSize = (): Size => ({\n  width: document.body.scrollWidth,\n  height: document.body.scrollHeight,\n});\n\nconst getDashboardPermalink = async ({\n  anchor,\n}: {\n  anchor: string;\n}): Promise<string> => {\n  const state = store?.getState();\n  const { dashboardId, dataMask, activeTabs } = {\n    dashboardId:\n      state?.dashboardInfo?.id || bootstrapData?.embedded!.dashboard_id,\n    dataMask: state?.dataMask,\n    activeTabs: state.dashboardState?.activeTabs,\n  };\n\n  return getDashboardPermalinkUtil({\n    dashboardId,\n    dataMask,\n    activeTabs,\n    anchor,\n  });\n};\n\nconst getActiveTabs = () => store?.getState()?.dashboardState?.activeTabs || [];\n\nexport const embeddedApi: EmbeddedSupersetApi = {\n  getScrollSize,\n  getDashboardPermalink,\n  getActiveTabs,\n};\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,gBAAgB,MAAM,4BAA4B;AACzD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,qBAAqB,IAAIC,yBAAyB,QAAQ,mBAAmB;AAEtF,MAAMC,aAAa,GAAGJ,gBAAgB,EAAE;AAaxC,MAAMK,aAAa,GAAGA,CAAA,MAAa;EACjCC,KAAK,EAAEC,QAAQ,CAACC,IAAI,CAACC,WAAW;EAChCC,MAAM,EAAEH,QAAQ,CAACC,IAAI,CAACG;CACvB,CAAC;AAEF,MAAMT,qBAAqB,GAAG,MAAAA,CAAO,EACnCU,MAAM,EAGP,KAAqB,KAAAC,oBAAA,EAAAC,qBAAA;EACpB,MAAMC,KAAK,GAAGd,KAAK,oBAALA,KAAK,CAAEe,QAAQ,EAAE;EAC/B,MAAM,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,UAAU,EAAE,GAAG;IAC5CF,WAAW,EACT,CAAAF,KAAK,qBAAAF,oBAAA,GAALE,KAAK,CAAEK,aAAa,qBAApBP,oBAAA,CAAsBQ,EAAE,MAAIjB,aAAa,oBAAbA,aAAa,CAAEkB,QAAS,CAACC,YAAY;IACnEL,QAAQ,EAAEH,KAAK,oBAALA,KAAK,CAAEG,QAAQ;IACzBC,UAAU,GAAAL,qBAAA,GAAEC,KAAK,CAACS,cAAc,qBAApBV,qBAAA,CAAsBK;GACnC;EAED,OAAOhB,yBAAyB,CAAC;IAC/Bc,WAAW;IACXC,QAAQ;IACRC,UAAU;IACVP;GACD,CAAC;AACJ,CAAC;AAED,MAAMa,aAAa,GAAGA,CAAA,UAAAC,eAAA,EAAAC,qBAAA,QAAM,CAAA1B,KAAK,qBAAAyB,eAAA,GAALzB,KAAK,CAAEe,QAAQ,EAAE,sBAAAW,qBAAA,GAAjBD,eAAA,CAAmBF,cAAc,qBAAjCG,qBAAA,CAAmCR,UAAU,KAAI,EAAE;AAE/E,OAAO,MAAMS,WAAW,GAAwB;EAC9CvB,aAAa;EACbH,qBAAqB;EACrBuB;CACD,CAAC,mBAAAI,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA7CI7B,aAAa,kGAAAyB,cAAA,CAAAI,QAAA,CAab5B,aAAa,kGAAAwB,cAAA,CAAAI,QAAA,CAKb/B,qBAAqB,0GAAA2B,cAAA,CAAAI,QAAA,CAqBrBR,aAAa,kGAAAI,cAAA,CAAAI,QAAA,CAENL,WAAW,wHAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}