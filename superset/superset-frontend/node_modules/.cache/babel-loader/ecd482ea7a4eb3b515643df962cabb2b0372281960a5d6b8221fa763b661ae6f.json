{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport copyTextToClipboard from 'src/utils/copy';\nimport { t, logging } from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { getDashboardPermalink } from 'src/utils/urlUtils';\nimport { MenuKeys } from 'src/dashboard/types';\nimport { useSelector } from 'react-redux';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst ShareMenuItems = (props) => {\n  const { copyMenuItemTitle, emailMenuItemTitle, emailSubject, emailBody, addDangerToast, addSuccessToast, dashboardId, dashboardComponentId, copyMenuItemRef, shareByEmailMenuItemRef, selectedKeys, ...rest } = props;\n  const { dataMask, activeTabs } = useSelector((state) => ({\n    dataMask: state.dataMask,\n    activeTabs: state.dashboardState.activeTabs\n  }));\n  async function generateUrl() {\n    return getDashboardPermalink({\n      dashboardId,\n      dataMask,\n      activeTabs,\n      anchor: dashboardComponentId\n    });\n  }\n  async function onCopyLink() {\n    try {\n      await copyTextToClipboard(generateUrl);\n      addSuccessToast(t('Copied to clipboard!'));\n    }\n    catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n  async function onShareByEmail() {\n    try {\n      const encodedBody = encodeURIComponent(`${emailBody}${await generateUrl()}`);\n      const encodedSubject = encodeURIComponent(emailSubject);\n      window.location.href = `mailto:?Subject=${encodedSubject}%20&Body=${encodedBody}`;\n    }\n    catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n  return ___EmotionJSX(Menu, { selectable: false, selectedKeys: selectedKeys, onClick: (e) => e.key === MenuKeys.CopyLink ? onCopyLink() : onShareByEmail() },\n  ___EmotionJSX(Menu.Item, _extends({ key: MenuKeys.CopyLink, ref: copyMenuItemRef }, rest),\n  ___EmotionJSX(\"div\", { role: \"button\", tabIndex: 0 },\n  copyMenuItemTitle\n  )\n  ),\n  ___EmotionJSX(Menu.Item, _extends({ key: MenuKeys.ShareByEmail, ref: shareByEmailMenuItemRef }, rest),\n  ___EmotionJSX(\"div\", { role: \"button\", tabIndex: 0 },\n  emailMenuItemTitle\n  )\n  )\n  );\n};__signature__(ShareMenuItems, \"useSelector{{ dataMask, activeTabs }}\", () => [useSelector]);const _default =\nShareMenuItems;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ShareMenuItems, \"ShareMenuItems\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/menu/ShareMenuItems/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/menu/ShareMenuItems/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","copyTextToClipboard","t","logging","Menu","getDashboardPermalink","MenuKeys","useSelector","jsx","___EmotionJSX","ShareMenuItems","props","copyMenuItemTitle","emailMenuItemTitle","emailSubject","emailBody","addDangerToast","addSuccessToast","dashboardId","dashboardComponentId","copyMenuItemRef","shareByEmailMenuItemRef","selectedKeys","rest","dataMask","activeTabs","state","dashboardState","generateUrl","anchor","onCopyLink","error","onShareByEmail","encodedBody","encodeURIComponent","encodedSubject","window","location","href","selectable","onClick","e","key","CopyLink","Item","_extends","ref","role","tabIndex","ShareByEmail","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/menu/ShareMenuItems/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { RefObject } from 'react';\nimport copyTextToClipboard from 'src/utils/copy';\nimport { t, logging } from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { getDashboardPermalink } from 'src/utils/urlUtils';\nimport { MenuKeys, RootState } from 'src/dashboard/types';\nimport { useSelector } from 'react-redux';\n\ninterface ShareMenuItemProps {\n  url?: string;\n  copyMenuItemTitle: string;\n  emailMenuItemTitle: string;\n  emailSubject: string;\n  emailBody: string;\n  addDangerToast: Function;\n  addSuccessToast: Function;\n  dashboardId: string | number;\n  dashboardComponentId?: string;\n  copyMenuItemRef?: RefObject<any>;\n  shareByEmailMenuItemRef?: RefObject<any>;\n  selectedKeys?: string[];\n}\n\nconst ShareMenuItems = (props: ShareMenuItemProps) => {\n  const {\n    copyMenuItemTitle,\n    emailMenuItemTitle,\n    emailSubject,\n    emailBody,\n    addDangerToast,\n    addSuccessToast,\n    dashboardId,\n    dashboardComponentId,\n    copyMenuItemRef,\n    shareByEmailMenuItemRef,\n    selectedKeys,\n    ...rest\n  } = props;\n  const { dataMask, activeTabs } = useSelector((state: RootState) => ({\n    dataMask: state.dataMask,\n    activeTabs: state.dashboardState.activeTabs,\n  }));\n\n  async function generateUrl() {\n    return getDashboardPermalink({\n      dashboardId,\n      dataMask,\n      activeTabs,\n      anchor: dashboardComponentId,\n    });\n  }\n\n  async function onCopyLink() {\n    try {\n      await copyTextToClipboard(generateUrl);\n      addSuccessToast(t('Copied to clipboard!'));\n    } catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n\n  async function onShareByEmail() {\n    try {\n      const encodedBody = encodeURIComponent(\n        `${emailBody}${await generateUrl()}`,\n      );\n      const encodedSubject = encodeURIComponent(emailSubject);\n      window.location.href = `mailto:?Subject=${encodedSubject}%20&Body=${encodedBody}`;\n    } catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n\n  return (\n    <Menu\n      selectable={false}\n      selectedKeys={selectedKeys}\n      onClick={e =>\n        e.key === MenuKeys.CopyLink ? onCopyLink() : onShareByEmail()\n      }\n    >\n      <Menu.Item key={MenuKeys.CopyLink} ref={copyMenuItemRef} {...rest}>\n        <div role=\"button\" tabIndex={0}>\n          {copyMenuItemTitle}\n        </div>\n      </Menu.Item>\n      <Menu.Item\n        key={MenuKeys.ShareByEmail}\n        ref={shareByEmailMenuItemRef}\n        {...rest}\n      >\n        <div role=\"button\" tabIndex={0}>\n          {emailMenuItemTitle}\n        </div>\n      </Menu.Item>\n    </Menu>\n  );\n};\nexport default ShareMenuItems;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}