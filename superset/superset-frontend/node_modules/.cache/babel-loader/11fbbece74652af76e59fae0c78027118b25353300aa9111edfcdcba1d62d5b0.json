{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { createRef, forwardRef, useImperativeHandle, useMemo } from 'react';\nimport { withTheme } from '@superset-ui/core';\nimport SearchFilter from './Search';\nimport SelectFilter from './Select';\nimport DateRangeFilter from './DateRange';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction UIFilters({ filters, internalFilters = [], updateFilterValue }, ref) {\n  const filterRefs = useMemo(() => Array.from({ length: filters.length }, () => /*#__PURE__*/createRef()), [filters.length]);\n  useImperativeHandle(ref, () => ({\n    clearFilters: () => {\n      filterRefs.forEach((filter) => {var _filter$current;\n        (_filter$current = filter.current) == null ? void 0 : _filter$current.clearFilter == null ? void 0 : _filter$current.clearFilter();\n      });\n    }\n  }));\n  return ___EmotionJSX(React.Fragment, null,\n  filters.map(({ Header, fetchSelects, key, id, input, paginate, selects, toolTipDescription, onFilterUpdate }, index) => {var _internalFilters$inde;\n    const initialValue = internalFilters == null ? void 0 : (_internalFilters$inde = internalFilters[index]) == null ? void 0 : _internalFilters$inde.value;\n    if (input === 'select') {\n      return ___EmotionJSX(SelectFilter, { ref: filterRefs[index], Header: Header, fetchSelects: fetchSelects, initialValue: initialValue, key: key, name: id, onSelect: (option, isClear) => {\n          if (onFilterUpdate) {\n            // Filter change triggers both onChange AND onClear, only want to track onChange\n            if (!isClear) {\n              onFilterUpdate(option);\n            }\n          }\n          updateFilterValue(index, option);\n        }, paginate: paginate, selects: selects });\n    }\n    if (input === 'search' && typeof Header === 'string') {\n      return ___EmotionJSX(SearchFilter, { ref: filterRefs[index], Header: Header, initialValue: initialValue, key: key, name: id, toolTipDescription: toolTipDescription, onSubmit: (value) => {\n          if (onFilterUpdate) {\n            onFilterUpdate(value);\n          }\n          updateFilterValue(index, value);\n        } });\n    }\n    if (input === 'datetime_range') {\n      return ___EmotionJSX(DateRangeFilter, { ref: filterRefs[index], Header: Header, initialValue: initialValue, key: key, name: id, onSubmit: (value) => updateFilterValue(index, value) });\n    }\n    return null;\n  })\n  );\n}__signature__(UIFilters, \"useMemo{filterRefs}\\nuseImperativeHandle{}\", () => [useImperativeHandle]);const _default =\nwithTheme( /*#__PURE__*/forwardRef(UIFilters));export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(UIFilters, \"UIFilters\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ListView/Filters/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ListView/Filters/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","createRef","forwardRef","useImperativeHandle","useMemo","withTheme","SearchFilter","SelectFilter","DateRangeFilter","jsx","___EmotionJSX","UIFilters","filters","internalFilters","updateFilterValue","ref","filterRefs","Array","from","length","clearFilters","forEach","filter","_filter$current","current","clearFilter","Fragment","map","Header","fetchSelects","key","id","input","paginate","selects","toolTipDescription","onFilterUpdate","index","_internalFilters$inde","initialValue","value","name","onSelect","option","isClear","onSubmit","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ListView/Filters/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  createRef,\n  forwardRef,\n  useImperativeHandle,\n  useMemo,\n} from 'react';\nimport { withTheme } from '@superset-ui/core';\n\nimport {\n  FilterValue,\n  Filters,\n  InternalFilter,\n  SelectOption,\n} from 'src/components/ListView/types';\nimport SearchFilter from './Search';\nimport SelectFilter from './Select';\nimport DateRangeFilter from './DateRange';\nimport { FilterHandler } from './Base';\n\ninterface UIFiltersProps {\n  filters: Filters;\n  internalFilters: InternalFilter[];\n  updateFilterValue: (id: number, value: FilterValue['value']) => void;\n}\n\nfunction UIFilters(\n  { filters, internalFilters = [], updateFilterValue }: UIFiltersProps,\n  ref: React.RefObject<{ clearFilters: () => void }>,\n) {\n  const filterRefs = useMemo(\n    () =>\n      Array.from({ length: filters.length }, () => createRef<FilterHandler>()),\n    [filters.length],\n  );\n\n  useImperativeHandle(ref, () => ({\n    clearFilters: () => {\n      filterRefs.forEach((filter: any) => {\n        filter.current?.clearFilter?.();\n      });\n    },\n  }));\n\n  return (\n    <>\n      {filters.map(\n        (\n          {\n            Header,\n            fetchSelects,\n            key,\n            id,\n            input,\n            paginate,\n            selects,\n            toolTipDescription,\n            onFilterUpdate,\n          },\n          index,\n        ) => {\n          const initialValue = internalFilters?.[index]?.value;\n          if (input === 'select') {\n            return (\n              <SelectFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                fetchSelects={fetchSelects}\n                initialValue={initialValue}\n                key={key}\n                name={id}\n                onSelect={(\n                  option: SelectOption | undefined,\n                  isClear?: boolean,\n                ) => {\n                  if (onFilterUpdate) {\n                    // Filter change triggers both onChange AND onClear, only want to track onChange\n                    if (!isClear) {\n                      onFilterUpdate(option);\n                    }\n                  }\n\n                  updateFilterValue(index, option);\n                }}\n                paginate={paginate}\n                selects={selects}\n              />\n            );\n          }\n          if (input === 'search' && typeof Header === 'string') {\n            return (\n              <SearchFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                initialValue={initialValue}\n                key={key}\n                name={id}\n                toolTipDescription={toolTipDescription}\n                onSubmit={(value: string) => {\n                  if (onFilterUpdate) {\n                    onFilterUpdate(value);\n                  }\n\n                  updateFilterValue(index, value);\n                }}\n              />\n            );\n          }\n          if (input === 'datetime_range') {\n            return (\n              <DateRangeFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                initialValue={initialValue}\n                key={key}\n                name={id}\n                onSubmit={value => updateFilterValue(index, value)}\n              />\n            );\n          }\n          return null;\n        },\n      )}\n    </>\n  );\n}\n\nexport default withTheme(forwardRef(UIFilters));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}