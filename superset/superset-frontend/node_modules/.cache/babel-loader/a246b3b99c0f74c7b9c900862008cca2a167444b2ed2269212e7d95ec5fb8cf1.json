{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement } from\n'../ControlPopover/ControlPopover';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => ___EmotionJSX(\"div\", { style: { width: 450, height: 368 } })\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {}\n};\n\nclass AnnotationLayerControl extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError)\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map((anno) =>\n      anno === originalAnnotation ? newAnnotation : anno\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState((prevState) => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible }\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter((anno) => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = (annotation == null ? void 0 : annotation.name) || '_new';\n\n    return (\n      ___EmotionJSX(\"div\", { id: `annotation-pop-${id}`, \"data-test\": \"popover-content\" },\n      ___EmotionJSX(AnnotationLayer, _extends({},\n      annotation, {\n        error: error,\n        colorScheme: this.props.colorScheme,\n        vizType: this.props.vizType,\n        addAnnotationLayer: (newAnnotation) =>\n        this.addAnnotationLayer(annotation, newAnnotation),\n\n        removeAnnotationLayer: () => this.removeAnnotationLayer(annotation),\n        close: () => {\n          this.handleVisibleChange(false, popoverKey);\n          this.setState({ addedAnnotationIndex: null });\n        } })\n      )\n      ));\n\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        ___EmotionJSX(\"i\", {\n          className: \"fa fa-refresh\",\n          style: { color: theme.colors.primary.base },\n          \"aria-hidden\": true }\n        ));\n\n    }\n    if (annotationError[anno.name]) {\n      return (\n        ___EmotionJSX(InfoTooltipWithTrigger, {\n          label: \"validation-errors\",\n          bsStyle: \"danger\",\n          tooltip: annotationError[anno.name] }\n        ));\n\n    }\n    if (!anno.show) {\n      return ___EmotionJSX(\"span\", { style: { color: theme.colors.error.base } }, \" Hidden \");\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) =>\n    ___EmotionJSX(ControlPopover, {\n      key: i,\n      trigger: \"click\",\n      title: t('Edit annotation layer'),\n      css: (theme) => ({\n        '&:hover': {\n          cursor: 'pointer',\n          backgroundColor: theme.colors.grayscale.light4\n        }\n      }),\n      content: this.renderPopover(\n        i,\n        anno,\n        this.props.annotationError[anno.name]\n      ),\n      visible: this.state.popoverVisible[i],\n      onVisibleChange: (visible) => this.handleVisibleChange(visible, i) },\n\n    ___EmotionJSX(CustomListItem, { selectable: true },\n    ___EmotionJSX(\"span\", null, anno.name),\n    ___EmotionJSX(\"span\", { style: { float: 'right' } }, this.renderInfo(anno))\n    )\n    )\n    );\n\n    const addLayerPopoverKey = 'add';\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(List, { bordered: true, css: (theme) => ({ borderRadius: theme.gridUnit }) },\n      annotations,\n      ___EmotionJSX(ControlPopover, {\n        trigger: \"click\",\n        content: this.renderPopover(addLayerPopoverKey, addedAnnotation),\n        title: t('Add annotation layer'),\n        visible: this.state.popoverVisible[addLayerPopoverKey],\n        destroyTooltipOnHide: true,\n        onVisibleChange: (visible) =>\n        this.handleVisibleChange(visible, addLayerPopoverKey) },\n\n\n      ___EmotionJSX(CustomListItem, { selectable: true },\n      ___EmotionJSX(\"i\", {\n        \"data-test\": \"add-annotation-layer-button\",\n        className: \"fa fa-plus\" }\n      ), ' ', \"\\xA0 \",\n      t('Add annotation layer')\n      )\n      )\n      )\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {var _explore$controls, _explore$controls$col;\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: (_explore$controls = explore.controls) == null ? void 0 : (_explore$controls$col = _explore$controls.color_scheme) == null ? void 0 : _explore$controls$col.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: (annotationObj) =>\n    dispatch(runAnnotationQuery(annotationObj))\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);const _default =\n\nconnect(\n  mapStateToProps,\n  mapDispatchToProps\n)(themedAnnotationLayerControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(AnnotationLayerControl, \"AnnotationLayerControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(themedAnnotationLayerControl, \"themedAnnotationLayerControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","List","connect","t","withTheme","InfoTooltipWithTrigger","AsyncEsmComponent","getChartKey","runAnnotationQuery","CustomListItem","ControlPopover","getSectionContainerElement","jsx","___EmotionJSX","AnnotationLayer","style","width","height","propTypes","colorScheme","string","isRequired","annotationError","object","annotationQuery","vizType","validationErrors","array","name","actions","value","arrayOf","onChange","func","refreshAnnotationData","defaultProps","AnnotationLayerControl","PureComponent","constructor","props","state","popoverVisible","addedAnnotationIndex","addAnnotationLayer","bind","removeAnnotationLayer","handleVisibleChange","componentDidMount","preload","UNSAFE_componentWillReceiveProps","nextProps","Object","keys","length","setControlValue","originalAnnotation","newAnnotation","annotations","includes","map","anno","setState","annotation","force","visible","popoverKey","prevState","filter","element","setProperty","renderPopover","error","id","_extends","close","renderInfo","theme","className","color","colors","primary","base","label","bsStyle","tooltip","show","render","addedAnnotation","i","key","trigger","title","css","cursor","backgroundColor","grayscale","light4","content","onVisibleChange","selectable","float","addLayerPopoverKey","bordered","borderRadius","gridUnit","destroyTooltipOnHide","__reactstandin__regenerateByEval","code","eval","mapStateToProps","charts","explore","_explore$controls","_explore$controls$col","chartKey","chart","controls","color_scheme","viz_type","mapDispatchToProps","dispatch","annotationObj","themedAnnotationLayerControl","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement,\n} from '../ControlPopover/ControlPopover';\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => <div style={{ width: 450, height: 368 }} />,\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func,\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {},\n};\n\nclass AnnotationLayerControl extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null,\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError),\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map(anno =>\n        anno === originalAnnotation ? newAnnotation : anno,\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true,\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState(prevState => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter(anno => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = annotation?.name || '_new';\n\n    return (\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\n        <AnnotationLayer\n          {...annotation}\n          error={error}\n          colorScheme={this.props.colorScheme}\n          vizType={this.props.vizType}\n          addAnnotationLayer={newAnnotation =>\n            this.addAnnotationLayer(annotation, newAnnotation)\n          }\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\n          close={() => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        <i\n          className=\"fa fa-refresh\"\n          style={{ color: theme.colors.primary.base }}\n          aria-hidden\n        />\n      );\n    }\n    if (annotationError[anno.name]) {\n      return (\n        <InfoTooltipWithTrigger\n          label=\"validation-errors\"\n          bsStyle=\"danger\"\n          tooltip={annotationError[anno.name]}\n        />\n      );\n    }\n    if (!anno.show) {\n      return <span style={{ color: theme.colors.error.base }}> Hidden </span>;\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) => (\n      <ControlPopover\n        key={i}\n        trigger=\"click\"\n        title={t('Edit annotation layer')}\n        css={theme => ({\n          '&:hover': {\n            cursor: 'pointer',\n            backgroundColor: theme.colors.grayscale.light4,\n          },\n        })}\n        content={this.renderPopover(\n          i,\n          anno,\n          this.props.annotationError[anno.name],\n        )}\n        visible={this.state.popoverVisible[i]}\n        onVisibleChange={visible => this.handleVisibleChange(visible, i)}\n      >\n        <CustomListItem selectable>\n          <span>{anno.name}</span>\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\n        </CustomListItem>\n      </ControlPopover>\n    ));\n\n    const addLayerPopoverKey = 'add';\n    return (\n      <div>\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\n          {annotations}\n          <ControlPopover\n            trigger=\"click\"\n            content={this.renderPopover(addLayerPopoverKey, addedAnnotation)}\n            title={t('Add annotation layer')}\n            visible={this.state.popoverVisible[addLayerPopoverKey]}\n            destroyTooltipOnHide\n            onVisibleChange={visible =>\n              this.handleVisibleChange(visible, addLayerPopoverKey)\n            }\n          >\n            <CustomListItem selectable>\n              <i\n                data-test=\"add-annotation-layer-button\"\n                className=\"fa fa-plus\"\n              />{' '}\n              &nbsp; {t('Add annotation layer')}\n            </CustomListItem>\n          </ControlPopover>\n        </List>\n      </div>\n    );\n  }\n}\n\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: explore.controls?.color_scheme?.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: annotationObj =>\n      dispatch(runAnnotationQuery(annotationObj)),\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(themedAnnotationLayerControl);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}