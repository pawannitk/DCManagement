{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/jsx-sort-default-props */\nimport * as React from 'react';\nimport { t } from '@superset-ui/core';\nimport { createSelector } from 'reselect';\nimport getChartComponentRegistry from '../registries/ChartComponentRegistrySingleton';\nimport getChartTransformPropsRegistry from '../registries/ChartTransformPropsRegistrySingleton';\nimport ChartProps from '../models/ChartProps';\nimport createLoadableRenderer from './createLoadableRenderer';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction IDENTITY(x) {\n  return x;\n}\nconst EMPTY = () => null;\nconst defaultProps = {\n  id: '',\n  className: '',\n  preTransformProps: IDENTITY,\n  overrideTransformProps: undefined,\n  postTransformProps: IDENTITY,\n  onRenderSuccess() {},\n  onRenderFailure() {}\n};\nconst BLANK_CHART_PROPS = new ChartProps();\nexport default class SuperChartCore extends React.PureComponent {constructor(...args) {super(...args);\n    /**\n     * The HTML element that wraps all chart content\n     */this.\n    container = void 0;\n    /**\n     * memoized function so it will not recompute\n     * and return previous value\n     * unless one of\n     * - preTransformProps\n     * - transformProps\n     * - postTransformProps\n     * - chartProps\n     * is changed.\n     */this.\n    processChartProps = createSelector([\n    (input) => input.chartProps,\n    (input) => input.preTransformProps,\n    (input) => input.transformProps,\n    (input) => input.postTransformProps],\n    (chartProps, pre = IDENTITY, transform = IDENTITY, post = IDENTITY) => post(transform(pre(chartProps))));\n    /**\n     * memoized function so it will not recompute\n     * and return previous value\n     * unless one of\n     * - chartType\n     * - overrideTransformProps\n     * is changed.\n     */this.\n    createLoadableRenderer = createSelector([\n    (input) => input.chartType,\n    (input) => input.overrideTransformProps],\n    (chartType, overrideTransformProps) => {\n      if (chartType) {\n        const Renderer = createLoadableRenderer({\n          loader: {\n            Chart: () => getChartComponentRegistry().getAsPromise(chartType),\n            transformProps: overrideTransformProps ?\n            () => Promise.resolve(overrideTransformProps) :\n            () => getChartTransformPropsRegistry().getAsPromise(chartType)\n          },\n          loading: (loadingProps) => this.renderLoading(loadingProps, chartType),\n          render: this.renderChart\n        });\n        // Trigger preloading.\n        Renderer.preload();\n        return Renderer;\n      }\n      return EMPTY;\n    });this.\n\n    renderChart = (loaded, props) => {\n      const { Chart, transformProps } = loaded;\n      const { chartProps, preTransformProps, postTransformProps } = props;\n      return ___EmotionJSX(Chart, this.processChartProps({\n        chartProps,\n        preTransformProps,\n        transformProps,\n        postTransformProps\n      }));\n    };this.\n    renderLoading = (loadingProps, chartType) => {\n      const { error } = loadingProps;\n      if (error) {\n        return ___EmotionJSX(\"div\", { className: \"alert alert-warning\", role: \"alert\" },\n        ___EmotionJSX(\"strong\", null, t('ERROR')), \"\\xA0\",\n        ___EmotionJSX(\"code\", null, \"chartType=\\\"\", chartType, \"\\\"\"), \" \\u2014\",\n        error.toString()\n        );\n      }\n      return null;\n    };this.\n    setRef = (container) => {\n      this.container = container;\n    };}\n  render() {\n    const { id, className, preTransformProps, postTransformProps, chartProps = BLANK_CHART_PROPS, onRenderSuccess, onRenderFailure } = this.props;\n    // Create LoadableRenderer and start preloading\n    // the lazy-loaded Chart components\n    const Renderer = this.createLoadableRenderer(this.props);\n    // Do not render if chartProps is set to null.\n    // but the pre-loading has been started in this.createLoadableRenderer\n    // to prepare for rendering once chartProps becomes available.\n    if (chartProps === null) {\n      return null;\n    }\n    const containerProps = {};\n    if (id) {\n      containerProps.id = id;\n    }\n    if (className) {\n      containerProps.className = className;\n    }\n    return ___EmotionJSX(\"div\", _extends({}, containerProps, { ref: this.setRef }),\n    ___EmotionJSX(Renderer, { preTransformProps: preTransformProps, postTransformProps: postTransformProps, chartProps: chartProps, onRenderSuccess: onRenderSuccess, onRenderFailure: onRenderFailure })\n    );\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}SuperChartCore.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(IDENTITY, \"IDENTITY\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx\");reactHotLoader.register(EMPTY, \"EMPTY\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx\");reactHotLoader.register(BLANK_CHART_PROPS, \"BLANK_CHART_PROPS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx\");reactHotLoader.register(SuperChartCore, \"SuperChartCore\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","t","createSelector","getChartComponentRegistry","getChartTransformPropsRegistry","ChartProps","createLoadableRenderer","jsx","___EmotionJSX","IDENTITY","x","EMPTY","defaultProps","id","className","preTransformProps","overrideTransformProps","undefined","postTransformProps","onRenderSuccess","onRenderFailure","BLANK_CHART_PROPS","SuperChartCore","PureComponent","constructor","args","container","processChartProps","input","chartProps","transformProps","pre","transform","post","chartType","Renderer","loader","Chart","getAsPromise","Promise","resolve","loading","loadingProps","renderLoading","render","renderChart","preload","loaded","props","error","role","toString","setRef","containerProps","_extends","ref","__reactstandin__regenerateByEval","key","code","eval","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-core/src/chart/components/SuperChartCore.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable react/jsx-sort-default-props */\nimport * as React from 'react';\nimport { t } from '@superset-ui/core';\nimport { createSelector } from 'reselect';\nimport getChartComponentRegistry from '../registries/ChartComponentRegistrySingleton';\nimport getChartTransformPropsRegistry from '../registries/ChartTransformPropsRegistrySingleton';\nimport ChartProps from '../models/ChartProps';\nimport createLoadableRenderer from './createLoadableRenderer';\nimport { ChartType } from '../models/ChartPlugin';\nimport {\n  PreTransformProps,\n  TransformProps,\n  PostTransformProps,\n} from '../types/TransformFunction';\nimport { HandlerFunction } from '../types/Base';\n\nfunction IDENTITY<T>(x: T) {\n  return x;\n}\n\nconst EMPTY = () => null;\n\nconst defaultProps = {\n  id: '',\n  className: '',\n  preTransformProps: IDENTITY,\n  overrideTransformProps: undefined,\n  postTransformProps: IDENTITY,\n  onRenderSuccess() {},\n  onRenderFailure() {},\n};\n\ninterface LoadingProps {\n  error: { toString(): string };\n}\n\ninterface LoadedModules {\n  Chart: ChartType;\n  transformProps: TransformProps;\n}\n\ninterface RenderProps {\n  chartProps: ChartProps;\n  preTransformProps?: PreTransformProps;\n  postTransformProps?: PostTransformProps;\n}\n\nconst BLANK_CHART_PROPS = new ChartProps();\n\nexport type Props = {\n  id?: string;\n  className?: string;\n  chartProps?: ChartProps | null;\n  chartType: string;\n  preTransformProps?: PreTransformProps;\n  overrideTransformProps?: TransformProps;\n  postTransformProps?: PostTransformProps;\n  onRenderSuccess?: HandlerFunction;\n  onRenderFailure?: HandlerFunction;\n};\n\nexport default class SuperChartCore extends React.PureComponent<Props, {}> {\n  /**\n   * The HTML element that wraps all chart content\n   */\n  container?: HTMLElement | null;\n\n  /**\n   * memoized function so it will not recompute\n   * and return previous value\n   * unless one of\n   * - preTransformProps\n   * - transformProps\n   * - postTransformProps\n   * - chartProps\n   * is changed.\n   */\n  processChartProps = createSelector(\n    [\n      (input: {\n        chartProps: ChartProps;\n        preTransformProps?: PreTransformProps;\n        transformProps?: TransformProps;\n        postTransformProps?: PostTransformProps;\n      }) => input.chartProps,\n      input => input.preTransformProps,\n      input => input.transformProps,\n      input => input.postTransformProps,\n    ],\n    (chartProps, pre = IDENTITY, transform = IDENTITY, post = IDENTITY) =>\n      post(transform(pre(chartProps))),\n  );\n\n  /**\n   * memoized function so it will not recompute\n   * and return previous value\n   * unless one of\n   * - chartType\n   * - overrideTransformProps\n   * is changed.\n   */\n  private createLoadableRenderer = createSelector(\n    [\n      (input: { chartType: string; overrideTransformProps?: TransformProps }) =>\n        input.chartType,\n      input => input.overrideTransformProps,\n    ],\n    (chartType, overrideTransformProps) => {\n      if (chartType) {\n        const Renderer = createLoadableRenderer({\n          loader: {\n            Chart: () => getChartComponentRegistry().getAsPromise(chartType),\n            transformProps: overrideTransformProps\n              ? () => Promise.resolve(overrideTransformProps)\n              : () => getChartTransformPropsRegistry().getAsPromise(chartType),\n          },\n          loading: (loadingProps: LoadingProps) =>\n            this.renderLoading(loadingProps, chartType),\n          render: this.renderChart,\n        });\n\n        // Trigger preloading.\n        Renderer.preload();\n\n        return Renderer;\n      }\n\n      return EMPTY;\n    },\n  );\n\n  static defaultProps = defaultProps;\n\n  private renderChart = (loaded: LoadedModules, props: RenderProps) => {\n    const { Chart, transformProps } = loaded;\n    const { chartProps, preTransformProps, postTransformProps } = props;\n\n    return (\n      <Chart\n        {...this.processChartProps({\n          chartProps,\n          preTransformProps,\n          transformProps,\n          postTransformProps,\n        })}\n      />\n    );\n  };\n\n  private renderLoading = (loadingProps: LoadingProps, chartType: string) => {\n    const { error } = loadingProps;\n\n    if (error) {\n      return (\n        <div className=\"alert alert-warning\" role=\"alert\">\n          <strong>{t('ERROR')}</strong>&nbsp;\n          <code>chartType=&quot;{chartType}&quot;</code> &mdash;\n          {error.toString()}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  private setRef = (container: HTMLElement | null) => {\n    this.container = container;\n  };\n\n  render() {\n    const {\n      id,\n      className,\n      preTransformProps,\n      postTransformProps,\n      chartProps = BLANK_CHART_PROPS,\n      onRenderSuccess,\n      onRenderFailure,\n    } = this.props;\n\n    // Create LoadableRenderer and start preloading\n    // the lazy-loaded Chart components\n    const Renderer = this.createLoadableRenderer(this.props);\n\n    // Do not render if chartProps is set to null.\n    // but the pre-loading has been started in this.createLoadableRenderer\n    // to prepare for rendering once chartProps becomes available.\n    if (chartProps === null) {\n      return null;\n    }\n\n    const containerProps: {\n      id?: string;\n      className?: string;\n    } = {};\n    if (id) {\n      containerProps.id = id;\n    }\n    if (className) {\n      containerProps.className = className;\n    }\n\n    return (\n      <div {...containerProps} ref={this.setRef}>\n        <Renderer\n          preTransformProps={preTransformProps}\n          postTransformProps={postTransformProps}\n          chartProps={chartProps}\n          onRenderSuccess={onRenderSuccess}\n          onRenderFailure={onRenderFailure}\n        />\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}