{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled, useTheme } from '@superset-ui/core';\n\nimport { removeDataPreview, removeTables, addDangerToast, syncTable } from 'src/SqlLab/actions/sqlLab';\nimport { useTableExtendedMetadataQuery, useTableMetadataQuery } from 'src/hooks/apiResources';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport ColumnElement from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${(props) => props.hovered ? 1 : 0};\n`;\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${({ theme }) => css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `}\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1hs1mx1\", styles: \"padding-top:6px\" } : { name: \"14hmmm7-metadata\", styles: \"padding-top:6px;label:metadata;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvVGFibGVFbGVtZW50L2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxT2tJIiwiZmlsZSI6Ii9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvVGFibGVFbGVtZW50L2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBDb2xsYXBzZSBmcm9tICdzcmMvY29tcG9uZW50cy9Db2xsYXBzZSc7XG5pbXBvcnQgQ2FyZCBmcm9tICdzcmMvY29tcG9uZW50cy9DYXJkJztcbmltcG9ydCBCdXR0b25Hcm91cCBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b25Hcm91cCc7XG5pbXBvcnQgeyBjc3MsIHQsIHN0eWxlZCwgdXNlVGhlbWUgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZW1vdmVEYXRhUHJldmlldywgcmVtb3ZlVGFibGVzLCBhZGREYW5nZXJUb2FzdCwgc3luY1RhYmxlLCB9IGZyb20gJ3NyYy9TcWxMYWIvYWN0aW9ucy9zcWxMYWInO1xuaW1wb3J0IHsgdXNlVGFibGVFeHRlbmRlZE1ldGFkYXRhUXVlcnksIHVzZVRhYmxlTWV0YWRhdGFRdWVyeSwgfSBmcm9tICdzcmMvaG9va3MvYXBpUmVzb3VyY2VzJztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Ub29sdGlwJztcbmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkJztcbmltcG9ydCB7IEljb25Ub29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvblRvb2x0aXAnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbFRyaWdnZXInO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgdXNlRWZmZWN0RXZlbnQgZnJvbSAnc3JjL2hvb2tzL3VzZUVmZmVjdEV2ZW50JztcbmltcG9ydCBDb2x1bW5FbGVtZW50IGZyb20gJy4uL0NvbHVtbkVsZW1lbnQnO1xuaW1wb3J0IFNob3dTUUwgZnJvbSAnLi4vU2hvd1NRTCc7XG5jb25zdCBTdHlsZWRTcGFuID0gc3R5bGVkLnNwYW4gYFxuICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX07XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsyfTtcbiAgfVxuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuY29uc3QgRmFkZSA9IHN0eWxlZC5kaXYgYFxuICB0cmFuc2l0aW9uOiBhbGwgJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50cmFuc2l0aW9uVGltaW5nfXM7XG4gIG9wYWNpdHk6ICR7KHByb3BzKSA9PiAocHJvcHMuaG92ZXJlZCA/IDEgOiAwKX07XG5gO1xuY29uc3QgU3R5bGVkQ29sbGFwc2VQYW5lbCA9IHN0eWxlZChDb2xsYXBzZS5QYW5lbCkgYFxuICAkeyh7IHRoZW1lIH0pID0+IGNzcyBgXG4gICAgJiB7XG4gICAgICAud3MtZWwtY29udHJvbHMge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7LXRoZW1lLmdyaWRVbml0fXB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgICAgIC50YWJsZS1uYW1lIHtcbiAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMubH1weDtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlci1yaWdodC1zaWRlIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0ICogOH1weDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBUYWJsZUVsZW1lbnQgPSAoeyB0YWJsZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IHsgZGJJZCwgY2F0YWxvZywgc2NoZW1hLCBuYW1lLCBleHBhbmRlZCB9ID0gdGFibGU7XG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICAgIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcbiAgICBjb25zdCB7IGRhdGE6IHRhYmxlTWV0YWRhdGEsIGlzU3VjY2VzczogaXNNZXRhZGF0YVN1Y2Nlc3MsIGlzTG9hZGluZzogaXNNZXRhZGF0YUxvYWRpbmcsIGlzRXJyb3I6IGhhc01ldGFkYXRhRXJyb3IsIH0gPSB1c2VUYWJsZU1ldGFkYXRhUXVlcnkoe1xuICAgICAgICBkYklkLFxuICAgICAgICBjYXRhbG9nLFxuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHRhYmxlOiBuYW1lLFxuICAgIH0sIHsgc2tpcDogIWV4cGFuZGVkIH0pO1xuICAgIGNvbnN0IHsgZGF0YTogdGFibGVFeHRlbmRlZE1ldGFkYXRhLCBpc1N1Y2Nlc3M6IGlzRXh0cmFNZXRhZGF0YVN1Y2Nlc3MsIGlzTG9hZGluZzogaXNFeHRyYU1ldGFkYXRhTG9hZGluZywgaXNFcnJvcjogaGFzRXh0ZW5kZWRNZXRhZGF0YUVycm9yLCB9ID0gdXNlVGFibGVFeHRlbmRlZE1ldGFkYXRhUXVlcnkoe1xuICAgICAgICBkYklkLFxuICAgICAgICBjYXRhbG9nLFxuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHRhYmxlOiBuYW1lLFxuICAgIH0sIHsgc2tpcDogIWV4cGFuZGVkIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChoYXNNZXRhZGF0YUVycm9yIHx8IGhhc0V4dGVuZGVkTWV0YWRhdGFFcnJvcikge1xuICAgICAgICAgICAgZGlzcGF0Y2goYWRkRGFuZ2VyVG9hc3QodCgnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGFibGUgbWV0YWRhdGEnKSkpO1xuICAgICAgICB9XG4gICAgfSwgW2hhc01ldGFkYXRhRXJyb3IsIGhhc0V4dGVuZGVkTWV0YWRhdGFFcnJvciwgZGlzcGF0Y2hdKTtcbiAgICBjb25zdCB0YWJsZURhdGEgPSB7XG4gICAgICAgIC4uLnRhYmxlTWV0YWRhdGEsXG4gICAgICAgIC4uLnRhYmxlRXh0ZW5kZWRNZXRhZGF0YSxcbiAgICB9O1xuICAgIC8vIFRPRE86IG1pZ3JhdGUgc3luY1RhYmxlIGxvZ2ljIGJ5IFNJUC05M1xuICAgIGNvbnN0IHN5bmNUYWJsZU1ldGFkYXRhID0gdXNlRWZmZWN0RXZlbnQoKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemVkIH0gPSB0YWJsZTtcbiAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goc3luY1RhYmxlKHRhYmxlLCB0YWJsZURhdGEpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChpc01ldGFkYXRhU3VjY2VzcyAmJiBpc0V4dHJhTWV0YWRhdGFTdWNjZXNzKSB7XG4gICAgICAgICAgICBzeW5jVGFibGVNZXRhZGF0YSgpO1xuICAgICAgICB9XG4gICAgfSwgW2lzTWV0YWRhdGFTdWNjZXNzLCBpc0V4dHJhTWV0YWRhdGFTdWNjZXNzLCBzeW5jVGFibGVNZXRhZGF0YV0pO1xuICAgIGNvbnN0IFtzb3J0Q29sdW1ucywgc2V0U29ydENvbHVtbnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtob3ZlcmVkLCBzZXRIb3ZlcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCB0YWJsZU5hbWVSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3Qgc2V0SG92ZXIgPSAoaG92ZXJlZCkgPT4ge1xuICAgICAgICBkZWJvdW5jZSgoKSA9PiBzZXRIb3ZlcmVkKGhvdmVyZWQpLCAxMDApKCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYWJsZSA9ICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2gocmVtb3ZlRGF0YVByZXZpZXcodGFibGUpKTtcbiAgICAgICAgZGlzcGF0Y2gocmVtb3ZlVGFibGVzKFt0YWJsZV0pKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVNvcnRDb2x1bW5zID0gKCkgPT4ge1xuICAgICAgICBzZXRTb3J0Q29sdW1ucyhwcmV2U3RhdGUgPT4gIXByZXZTdGF0ZSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJXZWxsID0gKCkgPT4ge1xuICAgICAgICBsZXQgcGFydGl0aW9ucztcbiAgICAgICAgbGV0IG1ldGFkYXRhO1xuICAgICAgICBpZiAodGFibGVEYXRhLnBhcnRpdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCBwYXJ0aXRpb25RdWVyeTtcbiAgICAgICAgICAgIGxldCBwYXJ0aXRpb25DbGlwQm9hcmQ7XG4gICAgICAgICAgICBpZiAodGFibGVEYXRhLnBhcnRpdGlvbnMucGFydGl0aW9uUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAoeyBwYXJ0aXRpb25RdWVyeSB9ID0gdGFibGVEYXRhLnBhcnRpdGlvbnMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdCgnQ29weSBwYXJ0aXRpb24gcXVlcnkgdG8gY2xpcGJvYXJkJyk7XG4gICAgICAgICAgICAgICAgcGFydGl0aW9uQ2xpcEJvYXJkID0gKDxDb3B5VG9DbGlwYm9hcmQgdGV4dD17cGFydGl0aW9uUXVlcnl9IHNob3VsZFNob3dUZXh0PXtmYWxzZX0gdG9vbHRpcFRleHQ9e3R0fSBjb3B5Tm9kZT17PGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xpcGJvYXJkXCIvPn0vPik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsYXRlc3QgPSBPYmplY3QuZW50cmllcyh0YWJsZURhdGEucGFydGl0aW9ucz8ubGF0ZXN0IHx8IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fT0ke3ZhbHVlfWApXG4gICAgICAgICAgICAgICAgLmpvaW4oJy8nKTtcbiAgICAgICAgICAgIHBhcnRpdGlvbnMgPSAoPGRpdj5cbiAgICAgICAgICA8c21hbGw+XG4gICAgICAgICAgICB7dCgnbGF0ZXN0IHBhcnRpdGlvbjonKX0ge2xhdGVzdH1cbiAgICAgICAgICA8L3NtYWxsPnsnICd9XG4gICAgICAgICAge3BhcnRpdGlvbkNsaXBCb2FyZH1cbiAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFibGVEYXRhLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA9IE9iamVjdC5lbnRyaWVzKHRhYmxlRGF0YS5tZXRhZGF0YSkubWFwKChba2V5LCB2YWx1ZV0pID0+ICg8ZGl2PlxuICAgICAgICAgIDxzbWFsbD5cbiAgICAgICAgICAgIDxzdHJvbmc+e2tleX06PC9zdHJvbmc+IHt2YWx1ZX1cbiAgICAgICAgICA8L3NtYWxsPlxuICAgICAgICA8L2Rpdj4pKTtcbiAgICAgICAgICAgIGlmICghbWV0YWRhdGE/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIGhpZGUgbWV0YWRhdGEgY2FyZCB2aWV3XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJ0aXRpb25zKSB7XG4gICAgICAgICAgICAvLyBoaWRlIHBhcnRpdGlvbiBjYXJkIHZpZXdcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoPENhcmQgc2l6ZT1cInNtYWxsXCI+XG4gICAgICAgIHtwYXJ0aXRpb25zfVxuICAgICAgICB7bWV0YWRhdGF9XG4gICAgICA8L0NhcmQ+KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckNvbnRyb2xzID0gKCkgPT4ge1xuICAgICAgICBsZXQga2V5TGluaztcbiAgICAgICAgY29uc3QgS0VZU19GT1JfVEFCTEVfVEVYVCA9IHQoJ0tleXMgZm9yIHRhYmxlJyk7XG4gICAgICAgIGlmICh0YWJsZURhdGE/LmluZGV4ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAga2V5TGluayA9ICg8TW9kYWxUcmlnZ2VyIG1vZGFsVGl0bGU9e2Ake0tFWVNfRk9SX1RBQkxFX1RFWFR9ICR7bmFtZX1gfSBtb2RhbEJvZHk9e3RhYmxlRGF0YS5pbmRleGVzLm1hcCgoaXgsIGkpID0+ICg8cHJlIGtleT17aX0+e0pTT04uc3RyaW5naWZ5KGl4LCBudWxsLCAnICAnKX08L3ByZT4pKX0gdHJpZ2dlck5vZGU9ezxJY29uVG9vbHRpcCBjbGFzc05hbWU9XCJmYSBmYS1rZXkgcHVsbC1sZWZ0IG0tbC0yXCIgdG9vbHRpcD17dCgnVmlldyBrZXlzICYgaW5kZXhlcyAoJXMpJywgdGFibGVEYXRhLmluZGV4ZXMubGVuZ3RoKX0vPn0vPik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICg8QnV0dG9uR3JvdXAgY3NzPXtjc3MgYFxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgY29sdW1uLWdhcDogJHt0aGVtZS5ncmlkVW5pdCAqIDEuNX1weDtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7dGhlbWUuZ3JpZFVuaXR9cHg7XG4gICAgICAgICAgJiBzcGFuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIHdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICAgICAgICB9XG4gICAgICAgIGB9PlxuICAgICAgICB7a2V5TGlua31cbiAgICAgICAgPEljb25Ub29sdGlwIGNsYXNzTmFtZT17YGZhIGZhLXNvcnQtJHtzb3J0Q29sdW1ucyA/ICdudW1lcmljJyA6ICdhbHBoYSd9LWFzYyBgICtcbiAgICAgICAgICAgICAgICAncHVsbC1sZWZ0IHNvcnQtY29scyBtLWwtMiBwb2ludGVyJ30gb25DbGljaz17dG9nZ2xlU29ydENvbHVtbnN9IHRvb2x0aXA9e3NvcnRDb2x1bW5zXG4gICAgICAgICAgICAgICAgPyB0KCdPcmlnaW5hbCB0YWJsZSBjb2x1bW4gb3JkZXInKVxuICAgICAgICAgICAgICAgIDogdCgnU29ydCBjb2x1bW5zIGFscGhhYmV0aWNhbGx5Jyl9Lz5cbiAgICAgICAge3RhYmxlRGF0YS5zZWxlY3RTdGFyICYmICg8Q29weVRvQ2xpcGJvYXJkIGNvcHlOb2RlPXs8SWNvblRvb2x0aXAgYXJpYS1sYWJlbD1cIkNvcHlcIiB0b29sdGlwPXt0KCdDb3B5IFNFTEVDVCBzdGF0ZW1lbnQgdG8gdGhlIGNsaXBib2FyZCcpfT5cbiAgICAgICAgICAgICAgICA8aSBhcmlhLWhpZGRlbiBjbGFzc05hbWU9XCJmYSBmYS1jbGlwYm9hcmQgcHVsbC1sZWZ0IG0tbC0yXCIvPlxuICAgICAgICAgICAgICA8L0ljb25Ub29sdGlwPn0gdGV4dD17dGFibGVEYXRhLnNlbGVjdFN0YXJ9IHNob3VsZFNob3dUZXh0PXtmYWxzZX0vPil9XG4gICAgICAgIHt0YWJsZURhdGEudmlldyAmJiAoPFNob3dTUUwgc3FsPXt0YWJsZURhdGEudmlld30gdG9vbHRpcFRleHQ9e3QoJ1Nob3cgQ1JFQVRFIFZJRVcgc3RhdGVtZW50Jyl9IHRpdGxlPXt0KCdDUkVBVEUgVklFVyBzdGF0ZW1lbnQnKX0vPil9XG4gICAgICAgIDxJY29uVG9vbHRpcCBjbGFzc05hbWU9XCJmYSBmYS10aW1lcyB0YWJsZS1yZW1vdmUgcHVsbC1sZWZ0IG0tbC0yIHBvaW50ZXJcIiBvbkNsaWNrPXtyZW1vdmVUYWJsZX0gdG9vbHRpcD17dCgnUmVtb3ZlIHRhYmxlIHByZXZpZXcnKX0vPlxuICAgICAgPC9CdXR0b25Hcm91cD4pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVySGVhZGVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFibGVOYW1lUmVmLmN1cnJlbnQ7XG4gICAgICAgIGxldCB0cmlnZ2VyID0gW107XG4gICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQub2Zmc2V0V2lkdGggPCBlbGVtZW50LnNjcm9sbFdpZHRoKSB7XG4gICAgICAgICAgICB0cmlnZ2VyID0gWydob3ZlciddO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoPGRpdiBkYXRhLXRlc3Q9XCJ0YWJsZS1lbGVtZW50LWhlYWRlci1jb250YWluZXJcIiBjbGFzc05hbWU9XCJjbGVhcmZpeCBoZWFkZXItY29udGFpbmVyXCIgb25Nb3VzZUVudGVyPXsoKSA9PiBzZXRIb3Zlcih0cnVlKX0gb25Nb3VzZUxlYXZlPXsoKSA9PiBzZXRIb3ZlcihmYWxzZSl9PlxuICAgICAgICA8VG9vbHRpcCBpZD1cImNvcHktdG8tY2xpcGJvYXJkLXRvb2x0aXBcIiBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fSB0aXRsZT17bmFtZX0gdHJpZ2dlcj17dHJpZ2dlcn0+XG4gICAgICAgICAgPFN0eWxlZFNwYW4gZGF0YS10ZXN0PVwiY29sbGFwc2VcIiByZWY9e3RhYmxlTmFtZVJlZn0gY2xhc3NOYW1lPVwidGFibGUtbmFtZVwiPlxuICAgICAgICAgICAgPHN0cm9uZz57bmFtZX08L3N0cm9uZz5cbiAgICAgICAgICA8L1N0eWxlZFNwYW4+XG4gICAgICAgIDwvVG9vbHRpcD5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1bGwtcmlnaHQgaGVhZGVyLXJpZ2h0LXNpZGVcIj5cbiAgICAgICAgICB7aXNNZXRhZGF0YUxvYWRpbmcgfHwgaXNFeHRyYU1ldGFkYXRhTG9hZGluZyA/ICg8TG9hZGluZyBwb3NpdGlvbj1cImlubGluZVwiLz4pIDogKDxGYWRlIGRhdGEtdGVzdD1cImZhZGVcIiBob3ZlcmVkPXtob3ZlcmVkfSBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PlxuICAgICAgICAgICAgICB7cmVuZGVyQ29udHJvbHMoKX1cbiAgICAgICAgICAgIDwvRmFkZT4pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2Pik7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2R5ID0gKCkgPT4ge1xuICAgICAgICBsZXQgY29scztcbiAgICAgICAgaWYgKHRhYmxlRGF0YS5jb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2xzID0gdGFibGVEYXRhLmNvbHVtbnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmIChzb3J0Q29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xBID0gYS5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEIgPSBiLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbEEgPCBjb2xCID8gLTEgOiBjb2xBID4gY29sQiA/IDEgOiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gKDxkaXYgZGF0YS10ZXN0PVwidGFibGUtZWxlbWVudFwiIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXIodHJ1ZSl9IG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SG92ZXIoZmFsc2UpfSBjc3M9e3sgcGFkZGluZ1RvcDogNiB9fT5cbiAgICAgICAge3JlbmRlcldlbGwoKX1cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7Y29scz8ubWFwKGNvbCA9PiA8Q29sdW1uRWxlbWVudCBjb2x1bW49e2NvbH0ga2V5PXtjb2wubmFtZX0vPil9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+KTtcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuICg8U3R5bGVkQ29sbGFwc2VQYW5lbCB7Li4ucHJvcHN9IGtleT17dGFibGUuaWR9IGhlYWRlcj17cmVuZGVySGVhZGVyKCl9IGNsYXNzTmFtZT1cIlRhYmxlRWxlbWVudFwiIGZvcmNlUmVuZGVyPlxuICAgICAge3JlbmRlckJvZHkoKX1cbiAgICA8L1N0eWxlZENvbGxhcHNlUGFuZWw+KTtcbn07XG5leHBvcnQgZGVmYXVsdCBUYWJsZUVsZW1lbnQ7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nconst TableElement = ({ table, ...props }) => {\n  const { dbId, catalog, schema, name, expanded } = table;\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const { data: tableMetadata, isSuccess: isMetadataSuccess, isLoading: isMetadataLoading, isError: hasMetadataError } = useTableMetadataQuery({\n    dbId,\n    catalog,\n    schema,\n    table: name\n  }, { skip: !expanded });\n  const { data: tableExtendedMetadata, isSuccess: isExtraMetadataSuccess, isLoading: isExtraMetadataLoading, isError: hasExtendedMetadataError } = useTableExtendedMetadataQuery({\n    dbId,\n    catalog,\n    schema,\n    table: name\n  }, { skip: !expanded });\n  useEffect(() => {\n    if (hasMetadataError || hasExtendedMetadataError) {\n      dispatch(addDangerToast(t('An error occurred while fetching table metadata')));\n    }\n  }, [hasMetadataError, hasExtendedMetadataError, dispatch]);\n  const tableData = {\n    ...tableMetadata,\n    ...tableExtendedMetadata\n  };\n  // TODO: migrate syncTable logic by SIP-93\n  const syncTableMetadata = useEffectEvent(() => {\n    const { initialized } = table;\n    if (!initialized) {\n      dispatch(syncTable(table, tableData));\n    }\n  });\n  useEffect(() => {\n    if (isMetadataSuccess && isExtraMetadataSuccess) {\n      syncTableMetadata();\n    }\n  }, [isMetadataSuccess, isExtraMetadataSuccess, syncTableMetadata]);\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef(null);\n  const setHover = (hovered) => {\n    _debounce(() => setHovered(hovered), 100)();\n  };\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n  const toggleSortColumns = () => {\n    setSortColumns((prevState) => !prevState);\n  };\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (tableData.partitions) {var _tableData$partitions;\n      let partitionQuery;\n      let partitionClipBoard;\n      if (tableData.partitions.partitionQuery) {\n        ({ partitionQuery } = tableData.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = ___EmotionJSX(CopyToClipboard, { text: partitionQuery, shouldShowText: false, tooltipText: tt, copyNode: ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\" }) });\n      }\n      const latest = Object.entries(((_tableData$partitions = tableData.partitions) == null ? void 0 : _tableData$partitions.latest) || []).\n      map(([key, value]) => `${key}=${value}`).\n      join('/');\n      partitions = ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"small\", null,\n      t('latest partition:'), \" \", latest\n      ), ' ',\n      partitionClipBoard\n      );\n    }\n    if (tableData.metadata) {var _metadata;\n      metadata = Object.entries(tableData.metadata).map(([key, value]) => ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"small\", null,\n      ___EmotionJSX(\"strong\", null, key, \":\"), \" \", value\n      )\n      ));\n      if (!((_metadata = metadata) != null && _metadata.length)) {\n        // hide metadata card view\n        return null;\n      }\n    }\n    if (!partitions) {\n      // hide partition card view\n      return null;\n    }\n    return ___EmotionJSX(Card, { size: \"small\" },\n    partitions,\n    metadata\n    );\n  };\n  const renderControls = () => {var _tableData$indexes;\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (tableData != null && (_tableData$indexes = tableData.indexes) != null && _tableData$indexes.length) {\n      keyLink = ___EmotionJSX(ModalTrigger, { modalTitle: `${KEYS_FOR_TABLE_TEXT} ${name}`, modalBody: tableData.indexes.map((ix, i) => ___EmotionJSX(\"pre\", { key: i }, JSON.stringify(ix, null, '  '))), triggerNode: ___EmotionJSX(IconTooltip, { className: \"fa fa-key pull-left m-l-2\", tooltip: t('View keys & indexes (%s)', tableData.indexes.length) }) });\n    }\n    return ___EmotionJSX(ButtonGroup, { css: css`\n          display: flex;\n          column-gap: ${theme.gridUnit * 1.5}px;\n          margin-right: ${theme.gridUnit}px;\n          & span {\n            display: flex;\n            justify-content: center;\n            width: ${theme.gridUnit * 4}px;\n          }\n        ` },\n    keyLink,\n    ___EmotionJSX(IconTooltip, { className: `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n      'pull-left sort-cols m-l-2 pointer', onClick: toggleSortColumns, tooltip: sortColumns ?\n      t('Original table column order') :\n      t('Sort columns alphabetically') }),\n    tableData.selectStar && ___EmotionJSX(CopyToClipboard, { copyNode: ___EmotionJSX(IconTooltip, { \"aria-label\": \"Copy\", tooltip: t('Copy SELECT statement to the clipboard') },\n      ___EmotionJSX(\"i\", { \"aria-hidden\": true, className: \"fa fa-clipboard pull-left m-l-2\" })\n      ), text: tableData.selectStar, shouldShowText: false }),\n    tableData.view && ___EmotionJSX(ShowSQL, { sql: tableData.view, tooltipText: t('Show CREATE VIEW statement'), title: t('CREATE VIEW statement') }),\n    ___EmotionJSX(IconTooltip, { className: \"fa fa-times table-remove pull-left m-l-2 pointer\", onClick: removeTable, tooltip: t('Remove table preview') })\n    );\n  };\n  const renderHeader = () => {\n    const element = tableNameRef.current;\n    let trigger = [];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n    return ___EmotionJSX(\"div\", { \"data-test\": \"table-element-header-container\", className: \"clearfix header-container\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false) },\n    ___EmotionJSX(Tooltip, { id: \"copy-to-clipboard-tooltip\", style: { cursor: 'pointer' }, title: name, trigger: trigger },\n    ___EmotionJSX(StyledSpan, { \"data-test\": \"collapse\", ref: tableNameRef, className: \"table-name\" },\n    ___EmotionJSX(\"strong\", null, name)\n    )\n    ),\n\n    ___EmotionJSX(\"div\", { className: \"pull-right header-right-side\" },\n    isMetadataLoading || isExtraMetadataLoading ? ___EmotionJSX(Loading, { position: \"inline\" }) : ___EmotionJSX(Fade, { \"data-test\": \"fade\", hovered: hovered, onClick: (e) => e.stopPropagation() },\n    renderControls()\n    )\n    )\n    );\n  };\n  const renderBody = () => {var _cols;\n    let cols;\n    if (tableData.columns) {\n      cols = tableData.columns.slice();\n      if (sortColumns) {\n        cols.sort((a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n    const metadata = ___EmotionJSX(\"div\", { \"data-test\": \"table-element\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false), css: _ref },\n    renderWell(),\n    ___EmotionJSX(\"div\", null, (_cols =\n    cols) == null ? void 0 : _cols.map((col) => ___EmotionJSX(ColumnElement, { column: col, key: col.name }))\n    )\n    );\n    return metadata;\n  };\n  return ___EmotionJSX(StyledCollapsePanel, _extends({}, props, { key: table.id, header: renderHeader(), className: \"TableElement\", forceRender: true }),\n  renderBody()\n  );\n};__signature__(TableElement, \"useTheme{theme}\\nuseDispatch{dispatch}\\nuseTableMetadataQuery{{ data: tableMetadata, isSuccess: isMetadataSuccess, isLoading: isMetadataLoading, isError: hasMetadataError, }}\\nuseTableExtendedMetadataQuery{{ data: tableExtendedMetadata, isSuccess: isExtraMetadataSuccess, isLoading: isExtraMetadataLoading, isError: hasExtendedMetadataError, }}\\nuseEffect{}\\nuseEffectEvent{syncTableMetadata}\\nuseEffect{}\\nuseState{[sortColumns, setSortColumns](false)}\\nuseState{[hovered, setHovered](false)}\\nuseRef{tableNameRef}\", () => [useTheme, useDispatch, useTableMetadataQuery, useTableExtendedMetadataQuery, useEffectEvent]);const _default =\nTableElement;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledSpan, \"StyledSpan\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(Fade, \"Fade\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(StyledCollapsePanel, \"StyledCollapsePanel\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(TableElement, \"TableElement\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useState","useRef","useEffect","useDispatch","Collapse","Card","ButtonGroup","css","t","styled","useTheme","removeDataPreview","removeTables","addDangerToast","syncTable","useTableExtendedMetadataQuery","useTableMetadataQuery","Tooltip","CopyToClipboard","IconTooltip","ModalTrigger","Loading","useEffectEvent","ColumnElement","ShowSQL","jsx","___EmotionJSX","StyledSpan","span","theme","colors","primary","dark1","dark2","Fade","div","transitionTiming","props","hovered","StyledCollapsePanel","Panel","gridUnit","typography","sizes","l","_ref","process","env","NODE_ENV","name","styles","map","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","TableElement","table","dbId","catalog","schema","expanded","dispatch","data","tableMetadata","isSuccess","isMetadataSuccess","isLoading","isMetadataLoading","isError","hasMetadataError","skip","tableExtendedMetadata","isExtraMetadataSuccess","isExtraMetadataLoading","hasExtendedMetadataError","tableData","syncTableMetadata","initialized","sortColumns","setSortColumns","setHovered","tableNameRef","setHover","_debounce","removeTable","toggleSortColumns","prevState","renderWell","partitions","metadata","_tableData$partitions","partitionQuery","partitionClipBoard","tt","text","shouldShowText","tooltipText","copyNode","className","latest","Object","entries","key","value","join","_metadata","length","size","renderControls","_tableData$indexes","keyLink","KEYS_FOR_TABLE_TEXT","indexes","modalTitle","modalBody","ix","i","JSON","stringify","triggerNode","tooltip","onClick","selectStar","view","sql","title","renderHeader","element","current","trigger","offsetWidth","scrollWidth","onMouseEnter","onMouseLeave","id","style","cursor","ref","position","e","stopPropagation","renderBody","_cols","cols","columns","slice","sort","a","b","colA","toUpperCase","colB","col","column","_extends","header","forceRender","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport type { Table } from 'src/SqlLab/types';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled, useTheme } from '@superset-ui/core';\nimport { debounce } from 'lodash';\n\nimport {\n  removeDataPreview,\n  removeTables,\n  addDangerToast,\n  syncTable,\n} from 'src/SqlLab/actions/sqlLab';\nimport {\n  useTableExtendedMetadataQuery,\n  useTableMetadataQuery,\n} from 'src/hooks/apiResources';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport ColumnElement, { ColumnKeyTypeType } from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';\n\nexport interface Column {\n  name: string;\n  keys?: { type: ColumnKeyTypeType }[];\n  type: string;\n}\n\nexport interface TableElementProps {\n  table: Table;\n}\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${(props: { hovered: boolean }) => (props.hovered ? 1 : 0)};\n`;\n\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${({ theme }) => css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst TableElement = ({ table, ...props }: TableElementProps) => {\n  const { dbId, catalog, schema, name, expanded } = table;\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const {\n    data: tableMetadata,\n    isSuccess: isMetadataSuccess,\n    isLoading: isMetadataLoading,\n    isError: hasMetadataError,\n  } = useTableMetadataQuery(\n    {\n      dbId,\n      catalog,\n      schema,\n      table: name,\n    },\n    { skip: !expanded },\n  );\n  const {\n    data: tableExtendedMetadata,\n    isSuccess: isExtraMetadataSuccess,\n    isLoading: isExtraMetadataLoading,\n    isError: hasExtendedMetadataError,\n  } = useTableExtendedMetadataQuery(\n    {\n      dbId,\n      catalog,\n      schema,\n      table: name,\n    },\n    { skip: !expanded },\n  );\n\n  useEffect(() => {\n    if (hasMetadataError || hasExtendedMetadataError) {\n      dispatch(\n        addDangerToast(t('An error occurred while fetching table metadata')),\n      );\n    }\n  }, [hasMetadataError, hasExtendedMetadataError, dispatch]);\n\n  const tableData = {\n    ...tableMetadata,\n    ...tableExtendedMetadata,\n  };\n\n  // TODO: migrate syncTable logic by SIP-93\n  const syncTableMetadata = useEffectEvent(() => {\n    const { initialized } = table;\n    if (!initialized) {\n      dispatch(syncTable(table, tableData));\n    }\n  });\n\n  useEffect(() => {\n    if (isMetadataSuccess && isExtraMetadataSuccess) {\n      syncTableMetadata();\n    }\n  }, [isMetadataSuccess, isExtraMetadataSuccess, syncTableMetadata]);\n\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef<HTMLInputElement>(null);\n\n  const setHover = (hovered: boolean) => {\n    debounce(() => setHovered(hovered), 100)();\n  };\n\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n\n  const toggleSortColumns = () => {\n    setSortColumns(prevState => !prevState);\n  };\n\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (tableData.partitions) {\n      let partitionQuery;\n      let partitionClipBoard;\n      if (tableData.partitions.partitionQuery) {\n        ({ partitionQuery } = tableData.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = (\n          <CopyToClipboard\n            text={partitionQuery}\n            shouldShowText={false}\n            tooltipText={tt}\n            copyNode={<i className=\"fa fa-clipboard\" />}\n          />\n        );\n      }\n      const latest = Object.entries(tableData.partitions?.latest || [])\n        .map(([key, value]) => `${key}=${value}`)\n        .join('/');\n\n      partitions = (\n        <div>\n          <small>\n            {t('latest partition:')} {latest}\n          </small>{' '}\n          {partitionClipBoard}\n        </div>\n      );\n    }\n\n    if (tableData.metadata) {\n      metadata = Object.entries(tableData.metadata).map(([key, value]) => (\n        <div>\n          <small>\n            <strong>{key}:</strong> {value}\n          </small>\n        </div>\n      ));\n      if (!metadata?.length) {\n        // hide metadata card view\n        return null;\n      }\n    }\n\n    if (!partitions) {\n      // hide partition card view\n      return null;\n    }\n\n    return (\n      <Card size=\"small\">\n        {partitions}\n        {metadata}\n      </Card>\n    );\n  };\n\n  const renderControls = () => {\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (tableData?.indexes?.length) {\n      keyLink = (\n        <ModalTrigger\n          modalTitle={`${KEYS_FOR_TABLE_TEXT} ${name}`}\n          modalBody={tableData.indexes.map((ix, i) => (\n            <pre key={i}>{JSON.stringify(ix, null, '  ')}</pre>\n          ))}\n          triggerNode={\n            <IconTooltip\n              className=\"fa fa-key pull-left m-l-2\"\n              tooltip={t('View keys & indexes (%s)', tableData.indexes.length)}\n            />\n          }\n        />\n      );\n    }\n    return (\n      <ButtonGroup\n        css={css`\n          display: flex;\n          column-gap: ${theme.gridUnit * 1.5}px;\n          margin-right: ${theme.gridUnit}px;\n          & span {\n            display: flex;\n            justify-content: center;\n            width: ${theme.gridUnit * 4}px;\n          }\n        `}\n      >\n        {keyLink}\n        <IconTooltip\n          className={\n            `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n            'pull-left sort-cols m-l-2 pointer'\n          }\n          onClick={toggleSortColumns}\n          tooltip={\n            sortColumns\n              ? t('Original table column order')\n              : t('Sort columns alphabetically')\n          }\n        />\n        {tableData.selectStar && (\n          <CopyToClipboard\n            copyNode={\n              <IconTooltip\n                aria-label=\"Copy\"\n                tooltip={t('Copy SELECT statement to the clipboard')}\n              >\n                <i aria-hidden className=\"fa fa-clipboard pull-left m-l-2\" />\n              </IconTooltip>\n            }\n            text={tableData.selectStar}\n            shouldShowText={false}\n          />\n        )}\n        {tableData.view && (\n          <ShowSQL\n            sql={tableData.view}\n            tooltipText={t('Show CREATE VIEW statement')}\n            title={t('CREATE VIEW statement')}\n          />\n        )}\n        <IconTooltip\n          className=\"fa fa-times table-remove pull-left m-l-2 pointer\"\n          onClick={removeTable}\n          tooltip={t('Remove table preview')}\n        />\n      </ButtonGroup>\n    );\n  };\n\n  const renderHeader = () => {\n    const element: HTMLInputElement | null = tableNameRef.current;\n    let trigger: string[] = [];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n\n    return (\n      <div\n        data-test=\"table-element-header-container\"\n        className=\"clearfix header-container\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n      >\n        <Tooltip\n          id=\"copy-to-clipboard-tooltip\"\n          style={{ cursor: 'pointer' }}\n          title={name}\n          trigger={trigger}\n        >\n          <StyledSpan\n            data-test=\"collapse\"\n            ref={tableNameRef}\n            className=\"table-name\"\n          >\n            <strong>{name}</strong>\n          </StyledSpan>\n        </Tooltip>\n\n        <div className=\"pull-right header-right-side\">\n          {isMetadataLoading || isExtraMetadataLoading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <Fade\n              data-test=\"fade\"\n              hovered={hovered}\n              onClick={e => e.stopPropagation()}\n            >\n              {renderControls()}\n            </Fade>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderBody = () => {\n    let cols;\n    if (tableData.columns) {\n      cols = tableData.columns.slice();\n      if (sortColumns) {\n        cols.sort((a: Column, b: Column) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n\n    const metadata = (\n      <div\n        data-test=\"table-element\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        css={{ paddingTop: 6 }}\n      >\n        {renderWell()}\n        <div>\n          {cols?.map(col => <ColumnElement column={col} key={col.name} />)}\n        </div>\n      </div>\n    );\n    return metadata;\n  };\n\n  return (\n    <StyledCollapsePanel\n      {...props}\n      key={table.id}\n      header={renderHeader()}\n      className=\"TableElement\"\n      forceRender\n    >\n      {renderBody()}\n    </StyledCollapsePanel>\n  );\n};\n\nexport default TableElement;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}