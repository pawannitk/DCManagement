{"ast":null,"code":"import _parseInt from \"lodash/parseInt\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { InputNumber } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\n\nimport ControlHeader from 'src/explore/components/ControlHeader';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledDiv = styled.div`\n  display: flex;\n`;\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\nconst parseNumber = (value) => {\n  if (value === null ||\n  value === undefined ||\n  typeof value === 'string' && Number.isNaN(_parseInt(value))) {\n    return null;\n  }\n  return Number(value);\n};\nexport default function BoundsControl({ onChange = () => {}, value = [null, null], ...props }) {\n  const [minMax, setMinMax] = useState([\n  parseNumber(value[0]),\n  parseNumber(value[1])]\n  );\n  const min = value[0];\n  const max = value[1];\n  const debouncedOnChange = useRef(_debounce(onChange, 300)).current;\n  const update = (mm) => {\n    setMinMax(mm);\n    debouncedOnChange([\n    mm[0] === undefined ? null : mm[0],\n    mm[1] === undefined ? null : mm[1]]\n    );\n  };\n  useEffect(() => {\n    setMinMax([parseNumber(min), parseNumber(max)]);\n  }, [min, max]);\n  const onMinChange = (value) => {\n    update([parseNumber(value), minMax[1]]);\n  };\n  const onMaxChange = (value) => {\n    update([minMax[0], parseNumber(value)]);\n  };\n  return ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(ControlHeader, props),\n  ___EmotionJSX(StyledDiv, null,\n  ___EmotionJSX(MinInput, { \"data-test\": \"min-bound\", placeholder: t('Min')\n    // emit (string | number | undefined)\n    , onChange: onMinChange\n    // accept (number | undefined)\n    , value: minMax[0] === null ? undefined : minMax[0] }),\n  ___EmotionJSX(MaxInput, { \"data-test\": \"max-bound\", placeholder: t('Max')\n    // emit (number | string | undefined)\n    , onChange: onMaxChange\n    // accept (number | undefined)\n    , value: minMax[1] === null ? undefined : minMax[1] })\n  )\n  );\n}__signature__(BoundsControl, \"useState{[minMax, setMinMax]([\\n        parseNumber(value[0]),\\n        parseNumber(value[1]),\\n    ])}\\nuseRef{}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledDiv, \"StyledDiv\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(MinInput, \"MinInput\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(MaxInput, \"MaxInput\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(parseNumber, \"parseNumber\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(BoundsControl, \"BoundsControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useEffect","useRef","useState","InputNumber","t","styled","ControlHeader","jsx","___EmotionJSX","StyledDiv","div","MinInput","theme","gridUnit","MaxInput","parseNumber","value","undefined","Number","isNaN","_parseInt","BoundsControl","onChange","props","minMax","setMinMax","min","max","debouncedOnChange","_debounce","current","update","mm","onMinChange","onMaxChange","placeholder","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { InputNumber } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\nimport { debounce, parseInt } from 'lodash';\nimport ControlHeader from 'src/explore/components/ControlHeader';\n\ntype ValueType = (number | null)[];\n\nexport type BoundsControlProps = {\n  onChange?: (value: ValueType) => void;\n  value?: ValueType;\n};\n\nconst StyledDiv = styled.div`\n  display: flex;\n`;\n\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst parseNumber = (value: undefined | number | string | null) => {\n  if (\n    value === null ||\n    value === undefined ||\n    (typeof value === 'string' && Number.isNaN(parseInt(value)))\n  ) {\n    return null;\n  }\n  return Number(value);\n};\n\nexport default function BoundsControl({\n  onChange = () => {},\n  value = [null, null],\n  ...props\n}: BoundsControlProps) {\n  const [minMax, setMinMax] = useState<ValueType>([\n    parseNumber(value[0]),\n    parseNumber(value[1]),\n  ]);\n  const min = value[0];\n  const max = value[1];\n  const debouncedOnChange = useRef(debounce(onChange, 300)).current;\n\n  const update = (mm: ValueType) => {\n    setMinMax(mm);\n    debouncedOnChange([\n      mm[0] === undefined ? null : mm[0],\n      mm[1] === undefined ? null : mm[1],\n    ]);\n  };\n\n  useEffect(() => {\n    setMinMax([parseNumber(min), parseNumber(max)]);\n  }, [min, max]);\n\n  const onMinChange = (value: number | string | undefined) => {\n    update([parseNumber(value), minMax[1]]);\n  };\n\n  const onMaxChange = (value: number | string | undefined) => {\n    update([minMax[0], parseNumber(value)]);\n  };\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <StyledDiv>\n        <MinInput\n          data-test=\"min-bound\"\n          placeholder={t('Min')}\n          // emit (string | number | undefined)\n          onChange={onMinChange}\n          // accept (number | undefined)\n          value={minMax[0] === null ? undefined : minMax[0]}\n        />\n        <MaxInput\n          data-test=\"max-bound\"\n          placeholder={t('Max')}\n          // emit (number | string | undefined)\n          onChange={onMaxChange}\n          // accept (number | undefined)\n          value={minMax[1] === null ? undefined : minMax[1]}\n        />\n      </StyledDiv>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}