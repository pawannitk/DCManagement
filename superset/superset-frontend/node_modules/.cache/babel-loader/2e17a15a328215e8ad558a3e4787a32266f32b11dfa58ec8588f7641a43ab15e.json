{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};export const AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nexport function getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\nexport function getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\nexport function getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\nexport function getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\nexport function getValueFunc(aggregation, accessor, context) {\n  const op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return (pts) => getMin(pts, accessor);\n\n    case AGGREGATION_OPERATION.SUM:\n      return (pts) => getSum(pts, accessor);\n\n    case AGGREGATION_OPERATION.MEAN:\n      return (pts) => getMean(pts, accessor);\n\n    case AGGREGATION_OPERATION.MAX:\n      return (pts) => getMax(pts, accessor);\n\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor, context = {}) {\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n\n  return (pt) => {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nexport function wrapGetValueFunc(getValue, context = {}) {\n  return (pts) => {\n    context.indices = pts.map((pt) => pt.index);\n    return getValue(pts.map((pt) => pt.source), context);\n  };\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AGGREGATION_OPERATION, \"AGGREGATION_OPERATION\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(sumReducer, \"sumReducer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(maxReducer, \"maxReducer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(minReducer, \"minReducer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(getMean, \"getMean\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(getSum, \"getSum\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(getMax, \"getMax\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(getMin, \"getMin\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(getValueFunc, \"getValueFunc\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(wrapAccessor, \"wrapAccessor\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");reactHotLoader.register(wrapGetValueFunc, \"wrapGetValueFunc\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["AGGREGATION_OPERATION","SUM","MEAN","MIN","MAX","sumReducer","accu","cur","maxReducer","minReducer","getMean","pts","accessor","Number","isFinite","length","filtered","map","filter","reduce","getSum","getMax","Infinity","getMin","getValueFunc","aggregation","context","op","wrapAccessor","pt","index","source","wrapGetValueFunc","getValue","indices","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["../../../src/utils/aggregation-operation-utils.js"],"sourcesContent":["// Copyright (c) 2015 - 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nexport const AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nexport function getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\n\nexport function getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\n\nexport function getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\n\nexport function getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\n\n// Function to convert from aggregation/accessor props (like colorAggregation and getColorWeight) to getValue prop (like getColorValue)\nexport function getValueFunc(aggregation, accessor, context) {\n  const op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return pts => getMin(pts, accessor);\n    case AGGREGATION_OPERATION.SUM:\n      return pts => getSum(pts, accessor);\n    case AGGREGATION_OPERATION.MEAN:\n      return pts => getMean(pts, accessor);\n    case AGGREGATION_OPERATION.MAX:\n      return pts => getMax(pts, accessor);\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor, context = {}) {\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n  return pt => {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nexport function wrapGetValueFunc(getValue, context = {}) {\n  return pts => {\n    context.indices = pts.map(pt => pt.index);\n    return getValue(\n      pts.map(pt => pt.source),\n      context\n    );\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}