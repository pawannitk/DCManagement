{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Suspense } from 'react';\nimport { t } from '@superset-ui/core';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport cx from 'classnames';\nimport { useSelector } from 'react-redux';\nimport { Draggable } from '../dnd/DragDroppable';\nimport { COLUMN_TYPE, ROW_TYPE } from '../../util/componentTypes';\nimport WithPopoverMenu from '../menu/WithPopoverMenu';\nimport ResizableContainer from '../resizable/ResizableContainer';\nimport { BACKGROUND_TRANSPARENT, GRID_BASE_UNIT, GRID_MIN_COLUMN_COUNT } from '../../util/constants';\nimport HoverMenu from '../menu/HoverMenu';\nimport DeleteComponentButton from '../DeleteComponentButton';\nimport BackgroundStyleDropdown from '../menu/BackgroundStyleDropdown';\nimport dashboardComponents from '../../../visualizations/presets/dashboardComponents';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DynamicComponent = ({ component, parentComponent, index, depth, handleComponentDrop, editMode, columnWidth, availableColumnCount, onResizeStart, onResizeStop, onResize, deleteComponent, parentId, updateComponents, id }) => {\n  // inherit the size of parent columns\n  const widthMultiple = parentComponent.type === COLUMN_TYPE ?\n  parentComponent.meta.width || GRID_MIN_COLUMN_COUNT :\n  component.meta.width || GRID_MIN_COLUMN_COUNT;\n  const handleDeleteComponent = () => {\n    deleteComponent(id, parentId);\n  };\n  const rowStyle = backgroundStyleOptions.find((opt) => opt.value === (component.meta.background || BACKGROUND_TRANSPARENT));\n  const updateMeta = (metaKey, nextValue) => {\n    updateComponents({\n      [component.id]: {\n        ...component,\n        meta: {\n          ...component.meta,\n          [metaKey]: nextValue\n        }\n      }\n    });\n  };\n  const { Component } = dashboardComponents.get(component.meta.componentKey);\n  const dashboardData = useSelector(({ nativeFilters, dataMask }) => ({\n    nativeFilters,\n    dataMask\n  }));\n  return ___EmotionJSX(Draggable\n  // @ts-ignore\n  , { component: component\n    // @ts-ignore\n    , parentComponent: parentComponent, orientation: parentComponent.type === ROW_TYPE ? 'column' : 'row', index: index, depth: depth, onDrop: handleComponentDrop, editMode: editMode },\n  ({ dragSourceRef }) => ___EmotionJSX(WithPopoverMenu, { menuItems: [\n    ___EmotionJSX(BackgroundStyleDropdown, { id: `${component.id}-background`, value: component.meta.background, onChange: (value) => updateMeta('background', value) })],\n    editMode: editMode },\n  ___EmotionJSX(\"div\", { \"data-test\": `dashboard-${component.componentKey}`, className: cx('dashboard-component', `dashboard-${component.componentKey}`, rowStyle == null ? void 0 : rowStyle.className), id: component.id },\n  ___EmotionJSX(ResizableContainer, { id: component.id, adjustableWidth: parentComponent.type === ROW_TYPE, widthStep: columnWidth, widthMultiple: widthMultiple, heightStep: GRID_BASE_UNIT, adjustableHeight: false, heightMultiple: component.meta.height, minWidthMultiple: GRID_MIN_COLUMN_COUNT, minHeightMultiple: GRID_MIN_COLUMN_COUNT, maxWidthMultiple: availableColumnCount + widthMultiple, onResizeStart: onResizeStart, onResize: onResize, onResizeStop: onResizeStop },\n  ___EmotionJSX(\"div\", { ref: dragSourceRef, className: \"dashboard-component\", \"data-test\": \"dashboard-component-chart-holder\" },\n  editMode && ___EmotionJSX(HoverMenu, { position: \"top\" },\n  ___EmotionJSX(DeleteComponentButton, { onDelete: handleDeleteComponent })\n  ),\n  ___EmotionJSX(Suspense, { fallback: ___EmotionJSX(\"div\", null, t('Loading...')) },\n  ___EmotionJSX(Component, { dashboardData: dashboardData })\n  )\n  )\n  )\n  )\n  )\n  );\n};__signature__(DynamicComponent, \"useSelector{dashboardData}\", () => [useSelector]);const _default =\nDynamicComponent;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DynamicComponent, \"DynamicComponent\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/DynamicComponent.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/DynamicComponent.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","Suspense","t","backgroundStyleOptions","cx","useSelector","Draggable","COLUMN_TYPE","ROW_TYPE","WithPopoverMenu","ResizableContainer","BACKGROUND_TRANSPARENT","GRID_BASE_UNIT","GRID_MIN_COLUMN_COUNT","HoverMenu","DeleteComponentButton","BackgroundStyleDropdown","dashboardComponents","jsx","___EmotionJSX","DynamicComponent","component","parentComponent","index","depth","handleComponentDrop","editMode","columnWidth","availableColumnCount","onResizeStart","onResizeStop","onResize","deleteComponent","parentId","updateComponents","id","widthMultiple","type","meta","width","handleDeleteComponent","rowStyle","find","opt","value","background","updateMeta","metaKey","nextValue","Component","get","componentKey","dashboardData","nativeFilters","dataMask","orientation","onDrop","dragSourceRef","menuItems","onChange","className","adjustableWidth","widthStep","heightStep","adjustableHeight","heightMultiple","height","minWidthMultiple","minHeightMultiple","maxWidthMultiple","ref","position","onDelete","fallback","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/DynamicComponent.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, Suspense } from 'react';\nimport { DashboardComponentMetadata, JsonObject, t } from '@superset-ui/core';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport cx from 'classnames';\nimport { useSelector } from 'react-redux';\nimport { Draggable } from '../dnd/DragDroppable';\nimport { COLUMN_TYPE, ROW_TYPE } from '../../util/componentTypes';\nimport WithPopoverMenu from '../menu/WithPopoverMenu';\nimport ResizableContainer from '../resizable/ResizableContainer';\nimport {\n  BACKGROUND_TRANSPARENT,\n  GRID_BASE_UNIT,\n  GRID_MIN_COLUMN_COUNT,\n} from '../../util/constants';\nimport HoverMenu from '../menu/HoverMenu';\nimport DeleteComponentButton from '../DeleteComponentButton';\nimport BackgroundStyleDropdown from '../menu/BackgroundStyleDropdown';\nimport dashboardComponents from '../../../visualizations/presets/dashboardComponents';\nimport { RootState } from '../../types';\n\ntype FilterSummaryType = {\n  component: JsonObject;\n  parentComponent: JsonObject;\n  index: number;\n  depth: number;\n  handleComponentDrop: (...args: any[]) => any;\n  editMode: boolean;\n  columnWidth: number;\n  availableColumnCount: number;\n  onResizeStart: Function;\n  onResizeStop: Function;\n  onResize: Function;\n  deleteComponent: Function;\n  updateComponents: Function;\n  parentId: number;\n  id: number;\n};\n\nconst DynamicComponent: FC<FilterSummaryType> = ({\n  component,\n  parentComponent,\n  index,\n  depth,\n  handleComponentDrop,\n  editMode,\n  columnWidth,\n  availableColumnCount,\n  onResizeStart,\n  onResizeStop,\n  onResize,\n  deleteComponent,\n  parentId,\n  updateComponents,\n  id,\n}) => {\n  // inherit the size of parent columns\n  const widthMultiple =\n    parentComponent.type === COLUMN_TYPE\n      ? parentComponent.meta.width || GRID_MIN_COLUMN_COUNT\n      : component.meta.width || GRID_MIN_COLUMN_COUNT;\n\n  const handleDeleteComponent = () => {\n    deleteComponent(id, parentId);\n  };\n\n  const rowStyle = backgroundStyleOptions.find(\n    opt => opt.value === (component.meta.background || BACKGROUND_TRANSPARENT),\n  );\n\n  const updateMeta = (metaKey: string, nextValue: string | number) => {\n    updateComponents({\n      [component.id]: {\n        ...component,\n        meta: {\n          ...component.meta,\n          [metaKey]: nextValue,\n        },\n      },\n    });\n  };\n\n  const { Component } = dashboardComponents.get(component.meta.componentKey);\n  const dashboardData = useSelector<RootState, DashboardComponentMetadata>(\n    ({ nativeFilters, dataMask }) => ({\n      nativeFilters,\n      dataMask,\n    }),\n  );\n\n  return (\n    <Draggable\n      // @ts-ignore\n      component={component}\n      // @ts-ignore\n      parentComponent={parentComponent}\n      orientation={parentComponent.type === ROW_TYPE ? 'column' : 'row'}\n      index={index}\n      depth={depth}\n      onDrop={handleComponentDrop}\n      editMode={editMode}\n    >\n      {({ dragSourceRef }) => (\n        <WithPopoverMenu\n          menuItems={[\n            <BackgroundStyleDropdown\n              id={`${component.id}-background`}\n              value={component.meta.background}\n              onChange={value => updateMeta('background', value)}\n            />,\n          ]}\n          editMode={editMode}\n        >\n          <div\n            data-test={`dashboard-${component.componentKey}`}\n            className={cx(\n              'dashboard-component',\n              `dashboard-${component.componentKey}`,\n              rowStyle?.className,\n            )}\n            id={component.id}\n          >\n            <ResizableContainer\n              id={component.id}\n              adjustableWidth={parentComponent.type === ROW_TYPE}\n              widthStep={columnWidth}\n              widthMultiple={widthMultiple}\n              heightStep={GRID_BASE_UNIT}\n              adjustableHeight={false}\n              heightMultiple={component.meta.height}\n              minWidthMultiple={GRID_MIN_COLUMN_COUNT}\n              minHeightMultiple={GRID_MIN_COLUMN_COUNT}\n              maxWidthMultiple={availableColumnCount + widthMultiple}\n              onResizeStart={onResizeStart}\n              onResize={onResize}\n              onResizeStop={onResizeStop}\n            >\n              <div\n                ref={dragSourceRef}\n                className=\"dashboard-component\"\n                data-test=\"dashboard-component-chart-holder\"\n              >\n                {editMode && (\n                  <HoverMenu position=\"top\">\n                    <DeleteComponentButton onDelete={handleDeleteComponent} />\n                  </HoverMenu>\n                )}\n                <Suspense fallback={<div>{t('Loading...')}</div>}>\n                  <Component dashboardData={dashboardData} />\n                </Suspense>\n              </div>\n            </ResizableContainer>\n          </div>\n        </WithPopoverMenu>\n      )}\n    </Draggable>\n  );\n};\nexport default DynamicComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}