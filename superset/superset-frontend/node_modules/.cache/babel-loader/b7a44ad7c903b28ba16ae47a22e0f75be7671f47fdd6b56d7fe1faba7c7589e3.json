{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { projectPosition } from '../../shaderlib/project/project-functions';\nimport { COORDINATE_SYSTEM } from '../../lib/constants';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_ATTENUATION = [0, 0, 1];\nconst DEFAULT_LIGHT_POSITION = [0.0, 0.0, 1.0];\nlet idCount = 0;\nexport class PointLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'point');\n\n    _defineProperty(this, \"position\", void 0);\n\n    _defineProperty(this, \"attenuation\", void 0);\n\n    _defineProperty(this, \"projectedLight\", void 0);\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      position = DEFAULT_LIGHT_POSITION\n    } = props;\n    this.id = props.id || \"point-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'point';\n    this.position = position;\n    this.attenuation = getAttenuation(props);\n    this.projectedLight = { ...this\n    };\n  }\n\n  getProjectedLight({\n    layer\n  }) {\n    const {\n      projectedLight\n    } = this;\n    const viewport = layer.context.viewport;\n    const {\n      coordinateSystem,\n      coordinateOrigin\n    } = layer.props;\n    const position = projectPosition(this.position, {\n      viewport,\n      coordinateSystem,\n      coordinateOrigin,\n      fromCoordinateSystem: viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN,\n      fromCoordinateOrigin: [0, 0, 0]\n    });\n    projectedLight.color = this.color;\n    projectedLight.intensity = this.intensity;\n    projectedLight.position = position;\n    return projectedLight;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n\nfunction getAttenuation(props) {\n  if (props.attenuation) {\n    return props.attenuation;\n  }\n\n  if ('intensity' in props) {\n    return [0, 0, props.intensity || 0];\n  }\n\n  return DEFAULT_ATTENUATION;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_LIGHT_COLOR, \"DEFAULT_LIGHT_COLOR\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(DEFAULT_LIGHT_INTENSITY, \"DEFAULT_LIGHT_INTENSITY\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(DEFAULT_ATTENUATION, \"DEFAULT_ATTENUATION\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(DEFAULT_LIGHT_POSITION, \"DEFAULT_LIGHT_POSITION\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(idCount, \"idCount\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(PointLight, \"PointLight\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");reactHotLoader.register(getAttenuation, \"getAttenuation\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/point-light.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["projectPosition","COORDINATE_SYSTEM","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","DEFAULT_ATTENUATION","DEFAULT_LIGHT_POSITION","idCount","PointLight","constructor","props","_defineProperty","color","intensity","position","id","concat","type","attenuation","getAttenuation","projectedLight","getProjectedLight","layer","viewport","context","coordinateSystem","coordinateOrigin","fromCoordinateSystem","isGeospatial","LNGLAT","CARTESIAN","fromCoordinateOrigin","__reactstandin__regenerateByEval","key","code","eval","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["../../../../src/effects/lighting/point-light.ts"],"sourcesContent":["import {projectPosition} from '../../shaderlib/project/project-functions';\nimport {COORDINATE_SYSTEM} from '../../lib/constants';\n\nimport type Layer from '../../lib/layer';\n\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_ATTENUATION = [0, 0, 1];\nconst DEFAULT_LIGHT_POSITION = [0.0, 0.0, 1.0];\n\nlet idCount = 0;\n\nexport type PointLightOptions = {\n  id?: string;\n  /** Light color, [r, g, b] in the 0-255 range\n   * @default [255, 255, 255]\n   */\n  color?: number[];\n  /** Light intensity, higher number is brighter\n   * @default 1.0\n   */\n  intensity?: number;\n  /** Light position [x, y, z] in the common space\n   * @default [0.0, 0.0, 1.0]\n   */\n  position?: number[];\n  /** Light attenuation\n   * @default [0.0, 0.0, 1.0]\n   */\n  attenuation?: number[];\n};\n\nexport class PointLight {\n  id: string;\n  color: number[];\n  intensity: number;\n  type = 'point';\n  position: number[];\n  attenuation: number[];\n\n  protected projectedLight: PointLight;\n\n  constructor(props: PointLightOptions = {}) {\n    const {color = DEFAULT_LIGHT_COLOR} = props;\n    const {intensity = DEFAULT_LIGHT_INTENSITY} = props;\n    const {position = DEFAULT_LIGHT_POSITION} = props;\n\n    this.id = props.id || `point-${idCount++}`;\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'point';\n    this.position = position;\n    this.attenuation = getAttenuation(props);\n    this.projectedLight = {...this};\n  }\n\n  getProjectedLight({layer}: {layer: Layer}): PointLight {\n    const {projectedLight} = this;\n    const viewport = layer.context.viewport;\n    const {coordinateSystem, coordinateOrigin} = layer.props;\n    const position = projectPosition(this.position, {\n      viewport,\n      coordinateSystem,\n      coordinateOrigin,\n      fromCoordinateSystem: viewport.isGeospatial\n        ? COORDINATE_SYSTEM.LNGLAT\n        : COORDINATE_SYSTEM.CARTESIAN,\n      fromCoordinateOrigin: [0, 0, 0]\n    });\n    projectedLight.color = this.color;\n    projectedLight.intensity = this.intensity;\n    projectedLight.position = position;\n    return projectedLight;\n  }\n}\n\nfunction getAttenuation(props: PointLightOptions): number[] {\n  if (props.attenuation) {\n    return props.attenuation;\n  }\n  if ('intensity' in props) {\n    return [0, 0, props.intensity || 0];\n  }\n  return DEFAULT_ATTENUATION;\n}\n"],"mappings":";AAAA,SAAQA,eAAR,QAA8B,2CAA9B;AACA,SAAQC,iBAAR,QAAgC,qBAAhC;AAIA,MAAMC,mBAAmB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA5B;AACA,MAAMC,uBAAuB,GAAG,GAAhC;AACA,MAAMC,mBAAmB,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA5B;AACA,MAAMC,sBAAsB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA/B;AAEA,IAAIC,OAAO,GAAG,CAAd;AAsBA,OAAO,MAAMC,UAAN,CAAiB;EAUtBC,WAAWA,CAACC,KAAwB,GAAG,EAA5B,EAAgC;IAAAC,eAAA;;IAAAA,eAAA;;IAAAA,eAAA;;IAAAA,eAAA,eANpC,OAMoC;;IAAAA,eAAA;;IAAAA,eAAA;;IAAAA,eAAA;;IACzC,MAAM;MAACC,KAAK,GAAGT;IAAT,IAAgCO,KAAtC;IACA,MAAM;MAACG,SAAS,GAAGT;IAAb,IAAwCM,KAA9C;IACA,MAAM;MAACI,QAAQ,GAAGR;IAAZ,IAAsCI,KAA5C;IAEA,KAAKK,EAAL,GAAUL,KAAK,CAACK,EAAN,aAAAC,MAAA,CAAqBT,OAAO,EAA5B,CAAV;IACA,KAAKK,KAAL,GAAaA,KAAb;IACA,KAAKC,SAAL,GAAiBA,SAAjB;IACA,KAAKI,IAAL,GAAY,OAAZ;IACA,KAAKH,QAAL,GAAgBA,QAAhB;IACA,KAAKI,WAAL,GAAmBC,cAAc,CAACT,KAAD,CAAjC;IACA,KAAKU,cAAL,GAAsB,EAAC,GAAG;IAAJ,CAAtB;EACD;;EAEDC,iBAAiBA,CAAC;IAACC;EAAD,CAAD,EAAsC;IACrD,MAAM;MAACF;IAAD,IAAmB,IAAzB;IACA,MAAMG,QAAQ,GAAGD,KAAK,CAACE,OAAN,CAAcD,QAA/B;IACA,MAAM;MAACE,gBAAD;MAAmBC;IAAnB,IAAuCJ,KAAK,CAACZ,KAAnD;IACA,MAAMI,QAAQ,GAAGb,eAAe,CAAC,KAAKa,QAAN,EAAgB;MAC9CS,QAD8C;MAE9CE,gBAF8C;MAG9CC,gBAH8C;MAI9CC,oBAAoB,EAAEJ,QAAQ,CAACK,YAAT,GAClB1B,iBAAiB,CAAC2B,MADA,GAElB3B,iBAAiB,CAAC4B,SANwB;MAO9CC,oBAAoB,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;IAPwB,CAAhB,CAAhC;IASAX,cAAc,CAACR,KAAf,GAAuB,KAAKA,KAA5B;IACAQ,cAAc,CAACP,SAAf,GAA2B,KAAKA,SAAhC;IACAO,cAAc,CAACN,QAAf,GAA0BA,QAA1B;IACA,OAAOM,cAAP;EACD;EAAAY,iCAAAC,GAAA,EAAAC,IAAA;IAAA,KAAAD,GAAA,IAAAE,IAAA,CAAAD,IAAA,GAzCqB;;AA4CxB,SAASf,cAATA,CAAwBT,KAAxB,EAA4D;EAC1D,IAAIA,KAAK,CAACQ,WAAV,EAAuB;IACrB,OAAOR,KAAK,CAACQ,WAAb;EACD;;EACD,IAAI,eAAeR,KAAnB,EAA0B;IACxB,OAAO,CAAC,CAAD,EAAI,CAAJ,EAAOA,KAAK,CAACG,SAAN,IAAmB,CAA1B,CAAP;EACD;;EACD,OAAOR,mBAAP;AACD,oBAAA+B,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA/EKrC,mBAAmB,0LAAAiC,cAAA,CAAAI,QAAA,CACnBpC,uBAAuB,8LAAAgC,cAAA,CAAAI,QAAA,CACvBnC,mBAAmB,0LAAA+B,cAAA,CAAAI,QAAA,CACnBlC,sBAAsB,6LAAA8B,cAAA,CAAAI,QAAA,CAExBjC,OAAO,8KAAA6B,cAAA,CAAAI,QAAA,CAsBEhC,UAAN,iLAAA4B,cAAA,CAAAI,QAAA,CA4CErB,cAAT,6MAAAsB,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}