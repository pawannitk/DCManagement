{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { css, styled, t } from '@superset-ui/core';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TooltipSectionWrapper = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    flex-direction: column;\n    font-size: ${theme.typography.sizes.s}px;\n    line-height: 1.2;\n\n    &:not(:last-of-type) {\n      margin-bottom: ${theme.gridUnit * 2}px;\n    }\n    &:last-of-type {\n      display: -webkit-box;\n      -webkit-line-clamp: 40;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  `}\n`;\nconst TooltipSectionLabel = styled.span`\n  ${({ theme }) => css`\n    font-weight: ${theme.typography.weights.bold};\n  `}\n`;\nconst TooltipSection = ({ label, text }) => ___EmotionJSX(TooltipSectionWrapper, null,\n___EmotionJSX(TooltipSectionLabel, null, label),\n___EmotionJSX(\"span\", null, text)\n);\nexport const isLabelTruncated = (labelRef) => {var _labelRef$current, _labelRef$current2;return !!((labelRef == null ? void 0 : (_labelRef$current = labelRef.current) == null ? void 0 : _labelRef$current.scrollWidth) > (labelRef == null ? void 0 : (_labelRef$current2 = labelRef.current) == null ? void 0 : _labelRef$current2.clientWidth));};\nexport const getColumnLabelText = (column) => column.verbose_name || column.column_name;\nexport const getColumnTypeTooltipNode = (column) => {\n  if (!column.type) {\n    return null;\n  }\n  return ___EmotionJSX(TooltipSection, { label: t('Column datatype'), text: column.type.toLowerCase() });\n};\nexport const getColumnTooltipNode = (column, labelRef) => {\n  if ((!column.column_name || !column.verbose_name) &&\n  !column.description &&\n  !isLabelTruncated(labelRef)) {\n    return null;\n  }\n  return ___EmotionJSX(React.Fragment, null,\n  column.column_name && ___EmotionJSX(TooltipSection, { label: t('Column name'), text: column.column_name }),\n  column.verbose_name && ___EmotionJSX(TooltipSection, { label: t('Label'), text: column.verbose_name }),\n  column.description && ___EmotionJSX(TooltipSection, { label: t('Description'), text: column.description })\n  );\n};\nexport const getMetricTooltipNode = (metric, labelRef) => {\n  if (!metric.verbose_name &&\n  !metric.description &&\n  !metric.label &&\n  !isLabelTruncated(labelRef)) {\n    return null;\n  }\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(TooltipSection, { label: t('Metric name'), text: metric.metric_name }),\n  (metric.label || metric.verbose_name) && ___EmotionJSX(TooltipSection, { label: t('Label'), text: metric.label || metric.verbose_name }),\n  metric.description && ___EmotionJSX(TooltipSection, { label: t('Description'), text: metric.description })\n  );\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TooltipSectionWrapper, \"TooltipSectionWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(TooltipSectionLabel, \"TooltipSectionLabel\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(TooltipSection, \"TooltipSection\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(isLabelTruncated, \"isLabelTruncated\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(getColumnLabelText, \"getColumnLabelText\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(getColumnTypeTooltipNode, \"getColumnTypeTooltipNode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(getColumnTooltipNode, \"getColumnTooltipNode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");reactHotLoader.register(getMetricTooltipNode, \"getMetricTooltipNode\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","css","styled","t","jsx","___EmotionJSX","TooltipSectionWrapper","div","theme","typography","sizes","s","gridUnit","TooltipSectionLabel","span","weights","bold","TooltipSection","label","text","isLabelTruncated","labelRef","_labelRef$current","_labelRef$current2","current","scrollWidth","clientWidth","getColumnLabelText","column","verbose_name","column_name","getColumnTypeTooltipNode","type","toLowerCase","getColumnTooltipNode","description","Fragment","getMetricTooltipNode","metric","metric_name","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/components/labelUtils.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode } from 'react';\n\nimport { css, styled, t } from '@superset-ui/core';\nimport { ColumnMeta, Metric } from '@superset-ui/chart-controls';\n\nconst TooltipSectionWrapper = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    flex-direction: column;\n    font-size: ${theme.typography.sizes.s}px;\n    line-height: 1.2;\n\n    &:not(:last-of-type) {\n      margin-bottom: ${theme.gridUnit * 2}px;\n    }\n    &:last-of-type {\n      display: -webkit-box;\n      -webkit-line-clamp: 40;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  `}\n`;\n\nconst TooltipSectionLabel = styled.span`\n  ${({ theme }) => css`\n    font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst TooltipSection = ({\n  label,\n  text,\n}: {\n  label: ReactNode;\n  text: ReactNode;\n}) => (\n  <TooltipSectionWrapper>\n    <TooltipSectionLabel>{label}</TooltipSectionLabel>\n    <span>{text}</span>\n  </TooltipSectionWrapper>\n);\n\nexport const isLabelTruncated = (labelRef?: React.RefObject<any>): boolean =>\n  !!(labelRef?.current?.scrollWidth > labelRef?.current?.clientWidth);\n\nexport const getColumnLabelText = (column: ColumnMeta): string =>\n  column.verbose_name || column.column_name;\n\nexport const getColumnTypeTooltipNode = (column: ColumnMeta): ReactNode => {\n  if (!column.type) {\n    return null;\n  }\n\n  return (\n    <TooltipSection\n      label={t('Column datatype')}\n      text={column.type.toLowerCase()}\n    />\n  );\n};\n\nexport const getColumnTooltipNode = (\n  column: ColumnMeta,\n  labelRef?: React.RefObject<any>,\n): ReactNode => {\n  if (\n    (!column.column_name || !column.verbose_name) &&\n    !column.description &&\n    !isLabelTruncated(labelRef)\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      {column.column_name && (\n        <TooltipSection label={t('Column name')} text={column.column_name} />\n      )}\n      {column.verbose_name && (\n        <TooltipSection label={t('Label')} text={column.verbose_name} />\n      )}\n      {column.description && (\n        <TooltipSection label={t('Description')} text={column.description} />\n      )}\n    </>\n  );\n};\n\ntype MetricType = Omit<Metric, 'id'> & { label?: string };\n\nexport const getMetricTooltipNode = (\n  metric: MetricType,\n  labelRef?: React.RefObject<any>,\n): ReactNode => {\n  if (\n    !metric.verbose_name &&\n    !metric.description &&\n    !metric.label &&\n    !isLabelTruncated(labelRef)\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      <TooltipSection label={t('Metric name')} text={metric.metric_name} />\n      {(metric.label || metric.verbose_name) && (\n        <TooltipSection\n          label={t('Label')}\n          text={metric.label || metric.verbose_name}\n        />\n      )}\n      {metric.description && (\n        <TooltipSection label={t('Description')} text={metric.description} />\n      )}\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}