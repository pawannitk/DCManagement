{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useReducer, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDatasetsList from 'src/features/datasets/hooks/useDatasetLists';\nimport Header from 'src/features/datasets/AddDataset/Header';\nimport EditPage from 'src/features/datasets/AddDataset/EditDataset';\nimport DatasetPanel from 'src/features/datasets/AddDataset/DatasetPanel';\nimport LeftPanel from 'src/features/datasets/AddDataset/LeftPanel';\nimport Footer from 'src/features/datasets/AddDataset/Footer';\nimport { DatasetActionType } from 'src/features/datasets/AddDataset/types';\nimport DatasetLayout from 'src/features/datasets/DatasetLayout';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nexport function datasetReducer(state, action) {\n  const trimmedState = {\n    ...(state || {})\n  };\n  switch (action.type) {\n    case DatasetActionType.SelectDatabase:\n      return {\n        ...trimmedState,\n        ...action.payload,\n        catalog: null,\n        schema: null,\n        table_name: null\n      };\n    case DatasetActionType.SelectCatalog:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        schema: null,\n        table_name: null\n      };\n    case DatasetActionType.SelectSchema:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        table_name: null\n      };\n    case DatasetActionType.SelectTable:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value\n      };\n    case DatasetActionType.ChangeDataset:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value\n      };\n    default:\n      return null;\n  }\n}\nconst prevUrl = '/tablemodelview/list/?pageIndex=0&sortColumn=changed_on_delta_humanized&sortOrder=desc';\nexport default function AddDataset() {\n  const [dataset, setDataset] = useReducer(datasetReducer, null);\n  const [hasColumns, setHasColumns] = useState(false);\n  const [editPageIsVisible, setEditPageIsVisible] = useState(false);\n  const { datasets, datasetNames } = useDatasetsList(dataset == null ? void 0 : dataset.db, dataset == null ? void 0 : dataset.schema);\n  const { datasetId: id } = useParams();\n  useEffect(() => {\n    if (!Number.isNaN(parseInt(id, 10))) {\n      setEditPageIsVisible(true);\n    }\n  }, [id]);\n  const HeaderComponent = () => ___EmotionJSX(Header, { setDataset: setDataset, title: dataset == null ? void 0 : dataset.table_name });\n  const LeftPanelComponent = () => ___EmotionJSX(LeftPanel, { setDataset: setDataset, dataset: dataset, datasetNames: datasetNames });\n  const EditPageComponent = () => ___EmotionJSX(EditPage, { id: id });\n  const DatasetPanelComponent = () => {var _dataset$db;return ___EmotionJSX(DatasetPanel, { tableName: dataset == null ? void 0 : dataset.table_name, dbId: dataset == null ? void 0 : (_dataset$db = dataset.db) == null ? void 0 : _dataset$db.id, catalog: dataset == null ? void 0 : dataset.catalog, schema: dataset == null ? void 0 : dataset.schema, setHasColumns: setHasColumns, datasets: datasets });};\n  const FooterComponent = () => ___EmotionJSX(Footer, { url: prevUrl, datasetObject: dataset, hasColumns: hasColumns, datasets: datasetNames });\n  return ___EmotionJSX(DatasetLayout, { header: HeaderComponent(), leftPanel: editPageIsVisible ? null : LeftPanelComponent(), datasetPanel: editPageIsVisible ? EditPageComponent() : DatasetPanelComponent(), footer: FooterComponent() });\n}__signature__(AddDataset, \"useReducer{[dataset, setDataset](null)}\\nuseState{[hasColumns, setHasColumns](false)}\\nuseState{[editPageIsVisible, setEditPageIsVisible](false)}\\nuseDatasetsList{{ datasets, datasetNames }}\\nuseParams{{ datasetId: id }}\\nuseEffect{}\", () => [useDatasetsList, useParams]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(datasetReducer, \"datasetReducer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/DatasetCreation/index.tsx\");reactHotLoader.register(prevUrl, \"prevUrl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/DatasetCreation/index.tsx\");reactHotLoader.register(AddDataset, \"AddDataset\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/DatasetCreation/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useReducer","useEffect","useState","useParams","useDatasetsList","Header","EditPage","DatasetPanel","LeftPanel","Footer","DatasetActionType","DatasetLayout","jsx","___EmotionJSX","datasetReducer","state","action","trimmedState","type","SelectDatabase","payload","catalog","schema","table_name","SelectCatalog","name","value","SelectSchema","SelectTable","ChangeDataset","prevUrl","AddDataset","dataset","setDataset","hasColumns","setHasColumns","editPageIsVisible","setEditPageIsVisible","datasets","datasetNames","db","datasetId","id","Number","isNaN","parseInt","HeaderComponent","title","LeftPanelComponent","EditPageComponent","DatasetPanelComponent","_dataset$db","tableName","dbId","FooterComponent","url","datasetObject","header","leftPanel","datasetPanel","footer","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/pages/DatasetCreation/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useReducer, Reducer, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDatasetsList from 'src/features/datasets/hooks/useDatasetLists';\nimport Header from 'src/features/datasets/AddDataset/Header';\nimport EditPage from 'src/features/datasets/AddDataset/EditDataset';\nimport DatasetPanel from 'src/features/datasets/AddDataset/DatasetPanel';\nimport LeftPanel from 'src/features/datasets/AddDataset/LeftPanel';\nimport Footer from 'src/features/datasets/AddDataset/Footer';\nimport {\n  DatasetActionType,\n  DatasetObject,\n  DSReducerActionType,\n} from 'src/features/datasets/AddDataset/types';\nimport DatasetLayout from 'src/features/datasets/DatasetLayout';\n\ntype Schema = {\n  schema: string;\n};\n\nexport function datasetReducer(\n  state: DatasetObject | null,\n  action: DSReducerActionType,\n): Partial<DatasetObject> | Schema | null {\n  const trimmedState = {\n    ...(state || {}),\n  };\n\n  switch (action.type) {\n    case DatasetActionType.SelectDatabase:\n      return {\n        ...trimmedState,\n        ...action.payload,\n        catalog: null,\n        schema: null,\n        table_name: null,\n      };\n    case DatasetActionType.SelectCatalog:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        schema: null,\n        table_name: null,\n      };\n    case DatasetActionType.SelectSchema:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        table_name: null,\n      };\n    case DatasetActionType.SelectTable:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case DatasetActionType.ChangeDataset:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    default:\n      return null;\n  }\n}\n\nconst prevUrl =\n  '/tablemodelview/list/?pageIndex=0&sortColumn=changed_on_delta_humanized&sortOrder=desc';\n\nexport default function AddDataset() {\n  const [dataset, setDataset] = useReducer<\n    Reducer<Partial<DatasetObject> | null, DSReducerActionType>\n  >(datasetReducer, null);\n  const [hasColumns, setHasColumns] = useState(false);\n  const [editPageIsVisible, setEditPageIsVisible] = useState(false);\n\n  const { datasets, datasetNames } = useDatasetsList(\n    dataset?.db,\n    dataset?.schema,\n  );\n\n  const { datasetId: id } = useParams<{ datasetId: string }>();\n  useEffect(() => {\n    if (!Number.isNaN(parseInt(id, 10))) {\n      setEditPageIsVisible(true);\n    }\n  }, [id]);\n\n  const HeaderComponent = () => (\n    <Header setDataset={setDataset} title={dataset?.table_name} />\n  );\n\n  const LeftPanelComponent = () => (\n    <LeftPanel\n      setDataset={setDataset}\n      dataset={dataset}\n      datasetNames={datasetNames}\n    />\n  );\n\n  const EditPageComponent = () => <EditPage id={id} />;\n\n  const DatasetPanelComponent = () => (\n    <DatasetPanel\n      tableName={dataset?.table_name}\n      dbId={dataset?.db?.id}\n      catalog={dataset?.catalog}\n      schema={dataset?.schema}\n      setHasColumns={setHasColumns}\n      datasets={datasets}\n    />\n  );\n\n  const FooterComponent = () => (\n    <Footer\n      url={prevUrl}\n      datasetObject={dataset}\n      hasColumns={hasColumns}\n      datasets={datasetNames}\n    />\n  );\n\n  return (\n    <DatasetLayout\n      header={HeaderComponent()}\n      leftPanel={editPageIsVisible ? null : LeftPanelComponent()}\n      datasetPanel={\n        editPageIsVisible ? EditPageComponent() : DatasetPanelComponent()\n      }\n      footer={FooterComponent()}\n    />\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}