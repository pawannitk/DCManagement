{"ast":null,"code":"import _isEqual from \"lodash/isEqual\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t, logging } from '@superset-ui/core';\n\nimport { withRouter } from 'react-router-dom';\n\nimport { exportChart, mountExploreUrl } from 'src/explore/exploreUtils';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART } from\n'src/logger/LogUtils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\n\nimport SliceHeader from '../SliceHeader';\nimport MissingChart from '../MissingChart';\nimport { slicePropShape, chartPropShape } from '../../util/propShapes';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  id: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  updateSliceName: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool,\n  handleToggleFullSize: PropTypes.func.isRequired,\n  setControlValue: PropTypes.func,\n\n  // from redux\n  chart: chartPropShape.isRequired,\n  formData: PropTypes.object.isRequired,\n  labelColors: PropTypes.object,\n  sharedLabelColors: PropTypes.object,\n  datasource: PropTypes.object,\n  slice: slicePropShape.isRequired,\n  sliceName: PropTypes.string.isRequired,\n  timeout: PropTypes.number.isRequired,\n  maxRows: PropTypes.number.isRequired,\n  // all active filter fields in dashboard\n  filters: PropTypes.object.isRequired,\n  refreshChart: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  toggleExpandSlice: PropTypes.func.isRequired,\n  changeFilter: PropTypes.func.isRequired,\n  setFocusedFilterField: PropTypes.func.isRequired,\n  unsetFocusedFilterField: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  isCached: PropTypes.bool,\n  supersetCanExplore: PropTypes.bool.isRequired,\n  supersetCanShare: PropTypes.bool.isRequired,\n  supersetCanCSV: PropTypes.bool.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  ownState: PropTypes.object,\n  filterState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool\n};\n\nconst defaultProps = {\n  isCached: false,\n  isComponentVisible: true\n};\n\n// we use state + shouldComponentUpdate() logic to prevent perf-wrecking\n// resizing across all slices on a dashboard on every update\nconst RESIZE_TIMEOUT = 500;\nconst SHOULD_UPDATE_ON_PROP_CHANGES = Object.keys(propTypes).filter(\n  (prop) =>\n  prop !== 'width' && prop !== 'height' && prop !== 'isComponentVisible'\n);\nconst DEFAULT_HEADER_HEIGHT = 22;\n\nconst ChartWrapper = styled.div`\n  overflow: hidden;\n  position: relative;\n\n  &.dashboard-chart--overflowable {\n    overflow: visible;\n  }\n`;\n\nconst ChartOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n`;\n\nconst SliceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n`;\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    logExploreChart = () => {\n      this.props.logEvent(LOG_ACTIONS_EXPLORE_DASHBOARD_CHART, {\n        slice_id: this.props.slice.slice_id,\n        is_cached: this.props.isCached\n      });\n    };this.\n\n    onExploreChart = async (clickEvent) => {\n      const isOpenInNewTab =\n      clickEvent.shiftKey || clickEvent.ctrlKey || clickEvent.metaKey;\n      try {\n        const lastTabId = window.localStorage.getItem('last_tab_id');\n        const nextTabId = lastTabId ?\n        String(Number.parseInt(lastTabId, 10) + 1) :\n        undefined;\n        const key = await postFormData(\n          this.props.datasource.id,\n          this.props.datasource.type,\n          this.props.formData,\n          this.props.slice.slice_id,\n          nextTabId\n        );\n        const url = mountExploreUrl(null, {\n          [URL_PARAMS.formDataKey.name]: key,\n          [URL_PARAMS.sliceId.name]: this.props.slice.slice_id\n        });\n        if (isOpenInNewTab) {\n          window.open(url, '_blank', 'noreferrer');\n        } else {\n          this.props.history.push(url);\n        }\n      } catch (error) {\n        logging.error(error);\n        this.props.addDangerToast(t('An error occurred while opening Explore'));\n      }\n    };this.state = { width: props.width, height: props.height, descriptionHeight: 0 };this.changeFilter = this.changeFilter.bind(this);this.handleFilterMenuOpen = this.handleFilterMenuOpen.bind(this);this.handleFilterMenuClose = this.handleFilterMenuClose.bind(this);this.exportCSV = this.exportCSV.bind(this);this.exportFullCSV = this.exportFullCSV.bind(this);this.exportXLSX = this.exportXLSX.bind(this);this.exportFullXLSX = this.exportFullXLSX.bind(this);this.forceRefresh = this.forceRefresh.bind(this);this.resize = _debounce(this.resize.bind(this), RESIZE_TIMEOUT);this.setDescriptionRef = this.setDescriptionRef.bind(this);this.setHeaderRef = this.setHeaderRef.bind(this);this.getChartHeight = this.getChartHeight.bind(this);this.getDescriptionHeight = this.getDescriptionHeight.bind(this);}shouldComponentUpdate(nextProps, nextState) {var _this$props, _this$props$chart, _nextProps$chart, _this$props2, _this$props2$chart, _nextProps$formData, _this$props$formData, _nextProps$formData2, _this$props$formData2; // this logic mostly pertains to chart resizing. we keep a copy of the dimensions in\n    // state so that we can buffer component size updates and only update on the final call\n    // which improves performance significantly\n    if (nextState.width !== this.state.width || nextState.height !== this.state.height || nextState.descriptionHeight !== this.state.descriptionHeight || !_isEqual(nextProps.datasource, this.props.datasource)) {return true;} // allow chart to update if the status changed and the previous status was loading.\n    if (((_this$props = this.props) == null ? void 0 : (_this$props$chart = _this$props.chart) == null ? void 0 : _this$props$chart.chartStatus) !== (nextProps == null ? void 0 : (_nextProps$chart = nextProps.chart) == null ? void 0 : _nextProps$chart.chartStatus) && ((_this$props2 = this.props) == null ? void 0 : (_this$props2$chart = _this$props2.chart) == null ? void 0 : _this$props2$chart.chartStatus) === 'loading') {return true;} // allow chart update/re-render only if visible:\n    // under selected tab or no tab layout\n    if (nextProps.isComponentVisible) {if (nextProps.chart.triggerQuery) {return true;}if (nextProps.isFullSize !== this.props.isFullSize) {this.resize();return false;}if (nextProps.width !== this.props.width || nextProps.height !== this.props.height || nextProps.width !== this.state.width || nextProps.height !== this.state.height) {this.resize();}for (let i = 0; i < SHOULD_UPDATE_ON_PROP_CHANGES.length; i += 1) {const prop = SHOULD_UPDATE_ON_PROP_CHANGES[i]; // use deep objects equality comparison to prevent\n        // unnecessary updates when objects references change\n        if (!areObjectsEqual(nextProps[prop], this.props[prop])) {return true;}}} else if ( // chart should re-render if color scheme or label color was changed\n    ((_nextProps$formData = nextProps.formData) == null ? void 0 : _nextProps$formData.color_scheme) !== ((_this$props$formData = this.props.formData) == null ? void 0 : _this$props$formData.color_scheme) || !areObjectsEqual((_nextProps$formData2 = nextProps.formData) == null ? void 0 : _nextProps$formData2.label_colors, (_this$props$formData2 = this.props.formData) == null ? void 0 : _this$props$formData2.label_colors)) {return true;} // `cacheBusterProp` is jected by react-hot-loader\n    return this.props.cacheBusterProp !== nextProps.cacheBusterProp;}componentDidMount() {if (this.props.isExpanded) {const descriptionHeight = this.getDescriptionHeight();this.setState({ descriptionHeight });}}componentWillUnmount() {this.resize.cancel();}componentDidUpdate(prevProps) {if (this.props.isExpanded !== prevProps.isExpanded) {const descriptionHeight = this.getDescriptionHeight(); // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ descriptionHeight });}}getDescriptionHeight() {return this.props.isExpanded && this.descriptionRef ? this.descriptionRef.offsetHeight : 0;}getChartHeight() {const headerHeight = this.getHeaderHeight();return Math.max(this.state.height - headerHeight - this.state.descriptionHeight, 20);}getHeaderHeight() {if (this.headerRef) {const computedStyle = getComputedStyle(this.headerRef).getPropertyValue('margin-bottom');const marginBottom = parseInt(computedStyle, 10) || 0;return this.headerRef.offsetHeight + marginBottom;}return DEFAULT_HEADER_HEIGHT;}setDescriptionRef(ref) {this.descriptionRef = ref;}setHeaderRef(ref) {this.headerRef = ref;}resize() {const { width, height } = this.props;this.setState(() => ({ width, height }));}changeFilter(newSelectedValues = {}) {this.props.logEvent(LOG_ACTIONS_CHANGE_DASHBOARD_FILTER, { id: this.props.chart.id, columns: Object.keys(newSelectedValues).filter((key) => newSelectedValues[key] !== null) });this.props.changeFilter(this.props.chart.id, newSelectedValues);}handleFilterMenuOpen(chartId, column) {this.props.setFocusedFilterField(chartId, column);}handleFilterMenuClose(chartId, column) {this.props.unsetFocusedFilterField(chartId, column);}exportFullCSV() {this.exportCSV(true);}exportCSV(isFullCSV = false) {this.exportTable('csv', isFullCSV);}exportXLSX() {this.exportTable('xlsx', false);\n  }\n\n  exportFullXLSX() {\n    this.exportTable('xlsx', true);\n  }\n\n  exportTable(format, isFullCSV) {\n    const logAction =\n    format === 'csv' ?\n    LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART :\n    LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART;\n    this.props.logEvent(logAction, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached\n    });\n    exportChart({\n      formData: isFullCSV ?\n      { ...this.props.formData, row_limit: this.props.maxRows } :\n      this.props.formData,\n      resultType: 'full',\n      resultFormat: format,\n      force: true,\n      ownState: this.props.ownState\n    });\n  }\n\n  forceRefresh() {\n    this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached\n    });\n    return this.props.refreshChart(\n      this.props.chart.id,\n      true,\n      this.props.dashboardId\n    );\n  }\n\n  render() {\n    const {\n      id,\n      componentId,\n      dashboardId,\n      chart,\n      slice,\n      datasource,\n      isExpanded,\n      editMode,\n      filters,\n      formData,\n      labelColors,\n      sharedLabelColors,\n      updateSliceName,\n      sliceName,\n      toggleExpandSlice,\n      timeout,\n      supersetCanExplore,\n      supersetCanShare,\n      supersetCanCSV,\n      addSuccessToast,\n      addDangerToast,\n      ownState,\n      filterState,\n      handleToggleFullSize,\n      isFullSize,\n      setControlValue,\n      postTransformProps,\n      datasetsStatus,\n      isInView,\n      emitCrossFilters,\n      logEvent\n    } = this.props;\n\n    const { width } = this.state;\n    // this prevents throwing in the case that a gridComponent\n    // references a chart that is not associated with the dashboard\n    if (!chart || !slice) {\n      return ___EmotionJSX(MissingChart, { height: this.getChartHeight() });\n    }\n\n    const { queriesResponse, chartUpdateEndTime, chartStatus } = chart;\n    const isLoading = chartStatus === 'loading';\n    // eslint-disable-next-line camelcase\n    const isCached = (queriesResponse == null ? void 0 : queriesResponse.map(({ is_cached }) => is_cached)) || [];\n    const cachedDttm =\n    // eslint-disable-next-line camelcase\n    (queriesResponse == null ? void 0 : queriesResponse.map(({ cached_dttm }) => cached_dttm)) || [];\n    const initialValues = {};\n\n    return (\n      ___EmotionJSX(SliceContainer, {\n        className: \"chart-slice\",\n        \"data-test\": \"chart-grid-component\",\n        \"data-test-chart-id\": id,\n        \"data-test-viz-type\": slice.viz_type,\n        \"data-test-chart-name\": slice.slice_name },\n\n      ___EmotionJSX(SliceHeader, {\n        innerRef: this.setHeaderRef,\n        slice: slice,\n        isExpanded: isExpanded,\n        isCached: isCached,\n        cachedDttm: cachedDttm,\n        updatedDttm: chartUpdateEndTime,\n        toggleExpandSlice: toggleExpandSlice,\n        forceRefresh: this.forceRefresh,\n        editMode: editMode,\n        annotationQuery: chart.annotationQuery,\n        logExploreChart: this.logExploreChart,\n        logEvent: logEvent,\n        onExploreChart: this.onExploreChart,\n        exportCSV: this.exportCSV,\n        exportXLSX: this.exportXLSX,\n        exportFullCSV: this.exportFullCSV,\n        exportFullXLSX: this.exportFullXLSX,\n        updateSliceName: updateSliceName,\n        sliceName: sliceName,\n        supersetCanExplore: supersetCanExplore,\n        supersetCanShare: supersetCanShare,\n        supersetCanCSV: supersetCanCSV,\n        componentId: componentId,\n        dashboardId: dashboardId,\n        filters: filters,\n        addSuccessToast: addSuccessToast,\n        addDangerToast: addDangerToast,\n        handleToggleFullSize: handleToggleFullSize,\n        isFullSize: isFullSize,\n        chartStatus: chart.chartStatus,\n        formData: formData,\n        width: width,\n        height: this.getHeaderHeight() }\n      ),\n\n\n\n\n\n\n\n\n      isExpanded && slice.description_markeddown &&\n      ___EmotionJSX(\"div\", {\n        className: \"slice_description bs-callout bs-callout-default\",\n        ref: this.setDescriptionRef\n        // eslint-disable-next-line react/no-danger\n        , dangerouslySetInnerHTML: { __html: slice.description_markeddown },\n        role: \"complementary\" }\n      ),\n\n\n      ___EmotionJSX(ChartWrapper, {\n        className: cx('dashboard-chart'),\n        \"aria-label\": slice.description },\n\n      isLoading &&\n      ___EmotionJSX(ChartOverlay, {\n        style: {\n          width,\n          height: this.getChartHeight()\n        } }\n      ),\n\n\n      ___EmotionJSX(ChartContainer, {\n        width: width,\n        height: this.getChartHeight(),\n        addFilter: this.changeFilter,\n        onFilterMenuOpen: this.handleFilterMenuOpen,\n        onFilterMenuClose: this.handleFilterMenuClose,\n        annotationData: chart.annotationData,\n        chartAlert: chart.chartAlert,\n        chartId: id,\n        chartStatus: chartStatus,\n        datasource: datasource,\n        dashboardId: dashboardId,\n        initialValues: initialValues,\n        formData: formData,\n        labelColors: labelColors,\n        sharedLabelColors: sharedLabelColors,\n        ownState: ownState,\n        filterState: filterState,\n        queriesResponse: chart.queriesResponse,\n        timeout: timeout,\n        triggerQuery: chart.triggerQuery,\n        vizType: slice.viz_type,\n        setControlValue: setControlValue,\n        postTransformProps: postTransformProps,\n        datasetsStatus: datasetsStatus,\n        isInView: isInView,\n        emitCrossFilters: emitCrossFilters }\n      )\n      )\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;const _default =\n\nwithRouter(Chart);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(RESIZE_TIMEOUT, \"RESIZE_TIMEOUT\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(SHOULD_UPDATE_ON_PROP_CHANGES, \"SHOULD_UPDATE_ON_PROP_CHANGES\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(DEFAULT_HEADER_HEIGHT, \"DEFAULT_HEADER_HEIGHT\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(ChartWrapper, \"ChartWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(ChartOverlay, \"ChartOverlay\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(SliceContainer, \"SliceContainer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(Chart, \"Chart\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["cx","React","PropTypes","styled","t","logging","withRouter","exportChart","mountExploreUrl","ChartContainer","LOG_ACTIONS_CHANGE_DASHBOARD_FILTER","LOG_ACTIONS_EXPLORE_DASHBOARD_CHART","LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART","LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART","LOG_ACTIONS_FORCE_REFRESH_CHART","areObjectsEqual","postFormData","URL_PARAMS","SliceHeader","MissingChart","slicePropShape","chartPropShape","jsx","___EmotionJSX","propTypes","id","number","isRequired","componentId","string","dashboardId","width","height","updateSliceName","func","isComponentVisible","bool","handleToggleFullSize","setControlValue","chart","formData","object","labelColors","sharedLabelColors","datasource","slice","sliceName","timeout","maxRows","filters","refreshChart","logEvent","toggleExpandSlice","changeFilter","setFocusedFilterField","unsetFocusedFilterField","editMode","isExpanded","isCached","supersetCanExplore","supersetCanShare","supersetCanCSV","addSuccessToast","addDangerToast","ownState","filterState","postTransformProps","datasetsStatus","oneOf","isInView","emitCrossFilters","defaultProps","RESIZE_TIMEOUT","SHOULD_UPDATE_ON_PROP_CHANGES","Object","keys","filter","prop","DEFAULT_HEADER_HEIGHT","ChartWrapper","div","ChartOverlay","SliceContainer","Chart","Component","constructor","props","logExploreChart","slice_id","is_cached","onExploreChart","clickEvent","isOpenInNewTab","shiftKey","ctrlKey","metaKey","lastTabId","window","localStorage","getItem","nextTabId","String","Number","parseInt","undefined","key","type","url","formDataKey","name","sliceId","open","history","push","error","state","descriptionHeight","bind","handleFilterMenuOpen","handleFilterMenuClose","exportCSV","exportFullCSV","exportXLSX","exportFullXLSX","forceRefresh","resize","_debounce","setDescriptionRef","setHeaderRef","getChartHeight","getDescriptionHeight","shouldComponentUpdate","nextProps","nextState","_this$props","_this$props$chart","_nextProps$chart","_this$props2","_this$props2$chart","_nextProps$formData","_this$props$formData","_nextProps$formData2","_this$props$formData2","_isEqual","chartStatus","triggerQuery","isFullSize","i","length","color_scheme","label_colors","cacheBusterProp","componentDidMount","setState","componentWillUnmount","cancel","componentDidUpdate","prevProps","descriptionRef","offsetHeight","headerHeight","getHeaderHeight","Math","max","headerRef","computedStyle","getComputedStyle","getPropertyValue","marginBottom","ref","newSelectedValues","columns","chartId","column","isFullCSV","exportTable","format","logAction","row_limit","resultType","resultFormat","force","render","queriesResponse","chartUpdateEndTime","isLoading","map","cachedDttm","cached_dttm","initialValues","className","viz_type","slice_name","innerRef","updatedDttm","annotationQuery","description_markeddown","dangerouslySetInnerHTML","__html","role","description","style","addFilter","onFilterMenuOpen","onFilterMenuClose","annotationData","chartAlert","vizType","__reactstandin__regenerateByEval","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t, logging } from '@superset-ui/core';\nimport { debounce, isEqual } from 'lodash';\nimport { withRouter } from 'react-router-dom';\n\nimport { exportChart, mountExploreUrl } from 'src/explore/exploreUtils';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART,\n} from 'src/logger/LogUtils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\n\nimport SliceHeader from '../SliceHeader';\nimport MissingChart from '../MissingChart';\nimport { slicePropShape, chartPropShape } from '../../util/propShapes';\n\nconst propTypes = {\n  id: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  updateSliceName: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool,\n  handleToggleFullSize: PropTypes.func.isRequired,\n  setControlValue: PropTypes.func,\n\n  // from redux\n  chart: chartPropShape.isRequired,\n  formData: PropTypes.object.isRequired,\n  labelColors: PropTypes.object,\n  sharedLabelColors: PropTypes.object,\n  datasource: PropTypes.object,\n  slice: slicePropShape.isRequired,\n  sliceName: PropTypes.string.isRequired,\n  timeout: PropTypes.number.isRequired,\n  maxRows: PropTypes.number.isRequired,\n  // all active filter fields in dashboard\n  filters: PropTypes.object.isRequired,\n  refreshChart: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  toggleExpandSlice: PropTypes.func.isRequired,\n  changeFilter: PropTypes.func.isRequired,\n  setFocusedFilterField: PropTypes.func.isRequired,\n  unsetFocusedFilterField: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  isCached: PropTypes.bool,\n  supersetCanExplore: PropTypes.bool.isRequired,\n  supersetCanShare: PropTypes.bool.isRequired,\n  supersetCanCSV: PropTypes.bool.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  ownState: PropTypes.object,\n  filterState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst defaultProps = {\n  isCached: false,\n  isComponentVisible: true,\n};\n\n// we use state + shouldComponentUpdate() logic to prevent perf-wrecking\n// resizing across all slices on a dashboard on every update\nconst RESIZE_TIMEOUT = 500;\nconst SHOULD_UPDATE_ON_PROP_CHANGES = Object.keys(propTypes).filter(\n  prop =>\n    prop !== 'width' && prop !== 'height' && prop !== 'isComponentVisible',\n);\nconst DEFAULT_HEADER_HEIGHT = 22;\n\nconst ChartWrapper = styled.div`\n  overflow: hidden;\n  position: relative;\n\n  &.dashboard-chart--overflowable {\n    overflow: visible;\n  }\n`;\n\nconst ChartOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n`;\n\nconst SliceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n`;\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: props.width,\n      height: props.height,\n      descriptionHeight: 0,\n    };\n\n    this.changeFilter = this.changeFilter.bind(this);\n    this.handleFilterMenuOpen = this.handleFilterMenuOpen.bind(this);\n    this.handleFilterMenuClose = this.handleFilterMenuClose.bind(this);\n    this.exportCSV = this.exportCSV.bind(this);\n    this.exportFullCSV = this.exportFullCSV.bind(this);\n    this.exportXLSX = this.exportXLSX.bind(this);\n    this.exportFullXLSX = this.exportFullXLSX.bind(this);\n    this.forceRefresh = this.forceRefresh.bind(this);\n    this.resize = debounce(this.resize.bind(this), RESIZE_TIMEOUT);\n    this.setDescriptionRef = this.setDescriptionRef.bind(this);\n    this.setHeaderRef = this.setHeaderRef.bind(this);\n    this.getChartHeight = this.getChartHeight.bind(this);\n    this.getDescriptionHeight = this.getDescriptionHeight.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // this logic mostly pertains to chart resizing. we keep a copy of the dimensions in\n    // state so that we can buffer component size updates and only update on the final call\n    // which improves performance significantly\n    if (\n      nextState.width !== this.state.width ||\n      nextState.height !== this.state.height ||\n      nextState.descriptionHeight !== this.state.descriptionHeight ||\n      !isEqual(nextProps.datasource, this.props.datasource)\n    ) {\n      return true;\n    }\n\n    // allow chart to update if the status changed and the previous status was loading.\n    if (\n      this.props?.chart?.chartStatus !== nextProps?.chart?.chartStatus &&\n      this.props?.chart?.chartStatus === 'loading'\n    ) {\n      return true;\n    }\n\n    // allow chart update/re-render only if visible:\n    // under selected tab or no tab layout\n    if (nextProps.isComponentVisible) {\n      if (nextProps.chart.triggerQuery) {\n        return true;\n      }\n\n      if (nextProps.isFullSize !== this.props.isFullSize) {\n        this.resize();\n        return false;\n      }\n\n      if (\n        nextProps.width !== this.props.width ||\n        nextProps.height !== this.props.height ||\n        nextProps.width !== this.state.width ||\n        nextProps.height !== this.state.height\n      ) {\n        this.resize();\n      }\n\n      for (let i = 0; i < SHOULD_UPDATE_ON_PROP_CHANGES.length; i += 1) {\n        const prop = SHOULD_UPDATE_ON_PROP_CHANGES[i];\n        // use deep objects equality comparison to prevent\n        // unnecessary updates when objects references change\n        if (!areObjectsEqual(nextProps[prop], this.props[prop])) {\n          return true;\n        }\n      }\n    } else if (\n      // chart should re-render if color scheme or label color was changed\n      nextProps.formData?.color_scheme !== this.props.formData?.color_scheme ||\n      !areObjectsEqual(\n        nextProps.formData?.label_colors,\n        this.props.formData?.label_colors,\n      )\n    ) {\n      return true;\n    }\n\n    // `cacheBusterProp` is jected by react-hot-loader\n    return this.props.cacheBusterProp !== nextProps.cacheBusterProp;\n  }\n\n  componentDidMount() {\n    if (this.props.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  componentWillUnmount() {\n    this.resize.cancel();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isExpanded !== prevProps.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  getDescriptionHeight() {\n    return this.props.isExpanded && this.descriptionRef\n      ? this.descriptionRef.offsetHeight\n      : 0;\n  }\n\n  getChartHeight() {\n    const headerHeight = this.getHeaderHeight();\n    return Math.max(\n      this.state.height - headerHeight - this.state.descriptionHeight,\n      20,\n    );\n  }\n\n  getHeaderHeight() {\n    if (this.headerRef) {\n      const computedStyle = getComputedStyle(this.headerRef).getPropertyValue(\n        'margin-bottom',\n      );\n      const marginBottom = parseInt(computedStyle, 10) || 0;\n      return this.headerRef.offsetHeight + marginBottom;\n    }\n    return DEFAULT_HEADER_HEIGHT;\n  }\n\n  setDescriptionRef(ref) {\n    this.descriptionRef = ref;\n  }\n\n  setHeaderRef(ref) {\n    this.headerRef = ref;\n  }\n\n  resize() {\n    const { width, height } = this.props;\n    this.setState(() => ({ width, height }));\n  }\n\n  changeFilter(newSelectedValues = {}) {\n    this.props.logEvent(LOG_ACTIONS_CHANGE_DASHBOARD_FILTER, {\n      id: this.props.chart.id,\n      columns: Object.keys(newSelectedValues).filter(\n        key => newSelectedValues[key] !== null,\n      ),\n    });\n    this.props.changeFilter(this.props.chart.id, newSelectedValues);\n  }\n\n  handleFilterMenuOpen(chartId, column) {\n    this.props.setFocusedFilterField(chartId, column);\n  }\n\n  handleFilterMenuClose(chartId, column) {\n    this.props.unsetFocusedFilterField(chartId, column);\n  }\n\n  logExploreChart = () => {\n    this.props.logEvent(LOG_ACTIONS_EXPLORE_DASHBOARD_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n  };\n\n  onExploreChart = async clickEvent => {\n    const isOpenInNewTab =\n      clickEvent.shiftKey || clickEvent.ctrlKey || clickEvent.metaKey;\n    try {\n      const lastTabId = window.localStorage.getItem('last_tab_id');\n      const nextTabId = lastTabId\n        ? String(Number.parseInt(lastTabId, 10) + 1)\n        : undefined;\n      const key = await postFormData(\n        this.props.datasource.id,\n        this.props.datasource.type,\n        this.props.formData,\n        this.props.slice.slice_id,\n        nextTabId,\n      );\n      const url = mountExploreUrl(null, {\n        [URL_PARAMS.formDataKey.name]: key,\n        [URL_PARAMS.sliceId.name]: this.props.slice.slice_id,\n      });\n      if (isOpenInNewTab) {\n        window.open(url, '_blank', 'noreferrer');\n      } else {\n        this.props.history.push(url);\n      }\n    } catch (error) {\n      logging.error(error);\n      this.props.addDangerToast(t('An error occurred while opening Explore'));\n    }\n  };\n\n  exportFullCSV() {\n    this.exportCSV(true);\n  }\n\n  exportCSV(isFullCSV = false) {\n    this.exportTable('csv', isFullCSV);\n  }\n\n  exportXLSX() {\n    this.exportTable('xlsx', false);\n  }\n\n  exportFullXLSX() {\n    this.exportTable('xlsx', true);\n  }\n\n  exportTable(format, isFullCSV) {\n    const logAction =\n      format === 'csv'\n        ? LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART\n        : LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART;\n    this.props.logEvent(logAction, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    exportChart({\n      formData: isFullCSV\n        ? { ...this.props.formData, row_limit: this.props.maxRows }\n        : this.props.formData,\n      resultType: 'full',\n      resultFormat: format,\n      force: true,\n      ownState: this.props.ownState,\n    });\n  }\n\n  forceRefresh() {\n    this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    return this.props.refreshChart(\n      this.props.chart.id,\n      true,\n      this.props.dashboardId,\n    );\n  }\n\n  render() {\n    const {\n      id,\n      componentId,\n      dashboardId,\n      chart,\n      slice,\n      datasource,\n      isExpanded,\n      editMode,\n      filters,\n      formData,\n      labelColors,\n      sharedLabelColors,\n      updateSliceName,\n      sliceName,\n      toggleExpandSlice,\n      timeout,\n      supersetCanExplore,\n      supersetCanShare,\n      supersetCanCSV,\n      addSuccessToast,\n      addDangerToast,\n      ownState,\n      filterState,\n      handleToggleFullSize,\n      isFullSize,\n      setControlValue,\n      postTransformProps,\n      datasetsStatus,\n      isInView,\n      emitCrossFilters,\n      logEvent,\n    } = this.props;\n\n    const { width } = this.state;\n    // this prevents throwing in the case that a gridComponent\n    // references a chart that is not associated with the dashboard\n    if (!chart || !slice) {\n      return <MissingChart height={this.getChartHeight()} />;\n    }\n\n    const { queriesResponse, chartUpdateEndTime, chartStatus } = chart;\n    const isLoading = chartStatus === 'loading';\n    // eslint-disable-next-line camelcase\n    const isCached = queriesResponse?.map(({ is_cached }) => is_cached) || [];\n    const cachedDttm =\n      // eslint-disable-next-line camelcase\n      queriesResponse?.map(({ cached_dttm }) => cached_dttm) || [];\n    const initialValues = {};\n\n    return (\n      <SliceContainer\n        className=\"chart-slice\"\n        data-test=\"chart-grid-component\"\n        data-test-chart-id={id}\n        data-test-viz-type={slice.viz_type}\n        data-test-chart-name={slice.slice_name}\n      >\n        <SliceHeader\n          innerRef={this.setHeaderRef}\n          slice={slice}\n          isExpanded={isExpanded}\n          isCached={isCached}\n          cachedDttm={cachedDttm}\n          updatedDttm={chartUpdateEndTime}\n          toggleExpandSlice={toggleExpandSlice}\n          forceRefresh={this.forceRefresh}\n          editMode={editMode}\n          annotationQuery={chart.annotationQuery}\n          logExploreChart={this.logExploreChart}\n          logEvent={logEvent}\n          onExploreChart={this.onExploreChart}\n          exportCSV={this.exportCSV}\n          exportXLSX={this.exportXLSX}\n          exportFullCSV={this.exportFullCSV}\n          exportFullXLSX={this.exportFullXLSX}\n          updateSliceName={updateSliceName}\n          sliceName={sliceName}\n          supersetCanExplore={supersetCanExplore}\n          supersetCanShare={supersetCanShare}\n          supersetCanCSV={supersetCanCSV}\n          componentId={componentId}\n          dashboardId={dashboardId}\n          filters={filters}\n          addSuccessToast={addSuccessToast}\n          addDangerToast={addDangerToast}\n          handleToggleFullSize={handleToggleFullSize}\n          isFullSize={isFullSize}\n          chartStatus={chart.chartStatus}\n          formData={formData}\n          width={width}\n          height={this.getHeaderHeight()}\n        />\n\n        {/*\n          This usage of dangerouslySetInnerHTML is safe since it is being used to render\n          markdown that is sanitized with nh3. See:\n             https://github.com/apache/superset/pull/4390\n          and\n             https://github.com/apache/superset/pull/23862\n        */}\n        {isExpanded && slice.description_markeddown && (\n          <div\n            className=\"slice_description bs-callout bs-callout-default\"\n            ref={this.setDescriptionRef}\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: slice.description_markeddown }}\n            role=\"complementary\"\n          />\n        )}\n\n        <ChartWrapper\n          className={cx('dashboard-chart')}\n          aria-label={slice.description}\n        >\n          {isLoading && (\n            <ChartOverlay\n              style={{\n                width,\n                height: this.getChartHeight(),\n              }}\n            />\n          )}\n\n          <ChartContainer\n            width={width}\n            height={this.getChartHeight()}\n            addFilter={this.changeFilter}\n            onFilterMenuOpen={this.handleFilterMenuOpen}\n            onFilterMenuClose={this.handleFilterMenuClose}\n            annotationData={chart.annotationData}\n            chartAlert={chart.chartAlert}\n            chartId={id}\n            chartStatus={chartStatus}\n            datasource={datasource}\n            dashboardId={dashboardId}\n            initialValues={initialValues}\n            formData={formData}\n            labelColors={labelColors}\n            sharedLabelColors={sharedLabelColors}\n            ownState={ownState}\n            filterState={filterState}\n            queriesResponse={chart.queriesResponse}\n            timeout={timeout}\n            triggerQuery={chart.triggerQuery}\n            vizType={slice.viz_type}\n            setControlValue={setControlValue}\n            postTransformProps={postTransformProps}\n            datasetsStatus={datasetsStatus}\n            isInView={isInView}\n            emitCrossFilters={emitCrossFilters}\n          />\n        </ChartWrapper>\n      </SliceContainer>\n    );\n  }\n}\n\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;\n\nexport default withRouter(Chart);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}