{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  css,\n  isFeatureEnabled,\n  FeatureFlag,\n  styled,\n  t,\n  useTheme } from\n'@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Button from 'src/components/Button';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { exportChart, getChartKey } from 'src/explore/exploreUtils';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport copyTextToClipboard from 'src/utils/copy';\nimport HeaderReportDropDown from 'src/features/reports/ReportModal/HeaderReportDropdown';\nimport { logEvent } from 'src/logger/actions';\nimport {\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_JSON,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV_PIVOTED,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_XLS } from\n'src/logger/LogUtils';\nimport ViewQueryModal from '../controls/ViewQueryModal';\nimport EmbedCodeContent from '../EmbedCodeContent';\nimport DashboardsSubMenu from './DashboardsSubMenu';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst MENU_KEYS = {\n  EDIT_PROPERTIES: 'edit_properties',\n  DASHBOARDS_ADDED_TO: 'dashboards_added_to',\n  DOWNLOAD_SUBMENU: 'download_submenu',\n  EXPORT_TO_CSV: 'export_to_csv',\n  EXPORT_TO_CSV_PIVOTED: 'export_to_csv_pivoted',\n  EXPORT_TO_JSON: 'export_to_json',\n  EXPORT_TO_XLSX: 'export_to_xlsx',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  SHARE_SUBMENU: 'share_submenu',\n  COPY_PERMALINK: 'copy_permalink',\n  EMBED_CODE: 'embed_code',\n  SHARE_BY_EMAIL: 'share_by_email',\n  REPORT_SUBMENU: 'report_submenu',\n  SET_UP_REPORT: 'set_up_report',\n  SET_REPORT_ACTIVE: 'set_report_active',\n  EDIT_REPORT: 'edit_report',\n  DELETE_REPORT: 'delete_report',\n  VIEW_QUERY: 'view_query',\n  RUN_IN_SQL_LAB: 'run_in_sql_lab'\n};\n\nconst VIZ_TYPES_PIVOTABLE = ['pivot_table_v2'];\n\nexport const MenuItemWithCheckboxContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n\n    & svg {\n      width: ${theme.gridUnit * 3}px;\n      height: ${theme.gridUnit * 3}px;\n    }\n\n    & span[role='checkbox'] {\n      display: inline-flex;\n      margin-right: ${theme.gridUnit}px;\n    }\n  `}\n`;\n\nexport const MenuTrigger = styled(Button)`\n  ${({ theme }) => css`\n    width: ${theme.gridUnit * 8}px;\n    height: ${theme.gridUnit * 8}px;\n    padding: 0;\n    border: 1px solid ${theme.colors.primary.dark2};\n\n    &.ant-btn > span.anticon {\n      line-height: 0;\n      transition: inherit;\n    }\n\n    &:hover:not(:focus) > span.anticon {\n      color: ${theme.colors.primary.light1};\n    }\n  `}\n`;\n\nconst iconReset = css`\n  .ant-dropdown-menu-item > & > .anticon:first-child {\n    margin-right: 0;\n    vertical-align: 0;\n  }\n`;\n\nexport const useExploreAdditionalActionsMenu = (\nlatestQueryFormData,\ncanDownloadCSV,\nslice,\nonOpenInEditor,\nonOpenPropertiesModal,\nownState,\ndashboards,\n...rest) =>\n{\n  const theme = useTheme();\n  const { addDangerToast, addSuccessToast } = useToasts();\n  const dispatch = useDispatch();\n  const [showReportSubMenu, setShowReportSubMenu] = useState(null);\n  const [isDropdownVisible, setIsDropdownVisible] = useState(false);\n  const chart = useSelector(\n    (state) => {var _state$charts;return (_state$charts = state.charts) == null ? void 0 : _state$charts[getChartKey(state.explore)];}\n  );\n\n  const { datasource } = latestQueryFormData;\n\n  const shareByEmail = useCallback(async () => {\n    try {\n      const subject = t('Superset Chart');\n      const url = await getChartPermalink(latestQueryFormData);\n      const body = encodeURIComponent(t('%s%s', 'Check out this chart: ', url));\n      window.location.href = `mailto:?Subject=${subject}%20&Body=${body}`;\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, latestQueryFormData]);\n\n  const exportCSV = useCallback(\n    () =>\n    canDownloadCSV ?\n    exportChart({\n      formData: latestQueryFormData,\n      ownState,\n      resultType: 'full',\n      resultFormat: 'csv'\n    }) :\n    null,\n    [canDownloadCSV, latestQueryFormData]\n  );\n\n  const exportCSVPivoted = useCallback(\n    () =>\n    canDownloadCSV ?\n    exportChart({\n      formData: latestQueryFormData,\n      resultType: 'post_processed',\n      resultFormat: 'csv'\n    }) :\n    null,\n    [canDownloadCSV, latestQueryFormData]\n  );\n\n  const exportJson = useCallback(\n    () =>\n    exportChart({\n      formData: latestQueryFormData,\n      resultType: 'results',\n      resultFormat: 'json'\n    }),\n    [latestQueryFormData]\n  );\n\n  const exportExcel = useCallback(\n    () =>\n    exportChart({\n      formData: latestQueryFormData,\n      resultType: 'results',\n      resultFormat: 'xlsx'\n    }),\n    [latestQueryFormData]\n  );\n\n  const copyLink = useCallback(async () => {\n    try {\n      if (!latestQueryFormData) {\n        throw new Error();\n      }\n      await copyTextToClipboard(() => getChartPermalink(latestQueryFormData));\n      addSuccessToast(t('Copied to clipboard!'));\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, addSuccessToast, latestQueryFormData]);\n\n  const handleMenuClick = useCallback(\n    ({ key, domEvent }) => {var _slice$slice_name;\n      switch (key) {\n        case MENU_KEYS.EDIT_PROPERTIES:\n          onOpenPropertiesModal();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV:\n          exportCSV();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV, {\n              chartId: slice == null ? void 0 : slice.slice_id,\n              chartName: slice == null ? void 0 : slice.slice_name\n            })\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV_PIVOTED:\n          exportCSVPivoted();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV_PIVOTED, {\n              chartId: slice == null ? void 0 : slice.slice_id,\n              chartName: slice == null ? void 0 : slice.slice_name\n            })\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_JSON:\n          exportJson();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_JSON, {\n              chartId: slice == null ? void 0 : slice.slice_id,\n              chartName: slice == null ? void 0 : slice.slice_name\n            })\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_XLSX:\n          exportExcel();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_XLS, {\n              chartId: slice == null ? void 0 : slice.slice_id,\n              chartName: slice == null ? void 0 : slice.slice_name\n            })\n          );\n          break;\n        case MENU_KEYS.DOWNLOAD_AS_IMAGE:\n          downloadAsImage(\n            '.panel-body .chart-container',\n            // eslint-disable-next-line camelcase\n            (_slice$slice_name = slice == null ? void 0 : slice.slice_name) != null ? _slice$slice_name : t('New chart'),\n            true\n          )(domEvent);\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE, {\n              chartId: slice == null ? void 0 : slice.slice_id,\n              chartName: slice == null ? void 0 : slice.slice_name\n            })\n          );\n          break;\n        case MENU_KEYS.COPY_PERMALINK:\n          copyLink();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.EMBED_CODE:\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.SHARE_BY_EMAIL:\n          shareByEmail();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.VIEW_QUERY:\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.RUN_IN_SQL_LAB:\n          onOpenInEditor(latestQueryFormData, domEvent.metaKey);\n          setIsDropdownVisible(false);\n          break;\n        default:\n          break;\n      }\n    },\n    [\n    copyLink,\n    exportCSV,\n    exportCSVPivoted,\n    exportJson,\n    latestQueryFormData,\n    onOpenInEditor,\n    onOpenPropertiesModal,\n    shareByEmail,\n    slice == null ? void 0 : slice.slice_name]\n\n  );\n\n  const menu = useMemo(\n    () =>\n    ___EmotionJSX(Menu, _extends({ onClick: handleMenuClick, selectable: false }, rest),\n    ___EmotionJSX(React.Fragment, null,\n    slice &&\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.EDIT_PROPERTIES },\n    t('Edit chart properties')\n    ),\n\n    ___EmotionJSX(Menu.SubMenu, {\n      title: t('On dashboards'),\n      key: MENU_KEYS.DASHBOARDS_ADDED_TO },\n\n    ___EmotionJSX(DashboardsSubMenu, {\n      chartId: slice == null ? void 0 : slice.slice_id,\n      dashboards: dashboards }\n    )\n    ),\n    ___EmotionJSX(Menu.Divider, null)\n    ),\n    ___EmotionJSX(Menu.SubMenu, { title: t('Download'), key: MENU_KEYS.DOWNLOAD_SUBMENU },\n    VIZ_TYPES_PIVOTABLE.includes(latestQueryFormData.viz_type) ?\n    ___EmotionJSX(React.Fragment, null,\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.EXPORT_TO_CSV,\n      icon: ___EmotionJSX(Icons.FileOutlined, { css: iconReset }),\n      disabled: !canDownloadCSV },\n\n    t('Export to original .CSV')\n    ),\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.EXPORT_TO_CSV_PIVOTED,\n      icon: ___EmotionJSX(Icons.FileOutlined, { css: iconReset }),\n      disabled: !canDownloadCSV },\n\n    t('Export to pivoted .CSV')\n    )\n    ) :\n\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.EXPORT_TO_CSV,\n      icon: ___EmotionJSX(Icons.FileOutlined, { css: iconReset }),\n      disabled: !canDownloadCSV },\n\n    t('Export to .CSV')\n    ),\n\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.EXPORT_TO_JSON,\n      icon: ___EmotionJSX(Icons.FileOutlined, { css: iconReset }) },\n\n    t('Export to .JSON')\n    ),\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.DOWNLOAD_AS_IMAGE,\n      icon: ___EmotionJSX(Icons.FileImageOutlined, { css: iconReset }) },\n\n    t('Download as image')\n    ),\n    ___EmotionJSX(Menu.Item, {\n      key: MENU_KEYS.EXPORT_TO_XLSX,\n      icon: ___EmotionJSX(Icons.FileOutlined, { css: iconReset }) },\n\n    t('Export to Excel')\n    )\n    ),\n    ___EmotionJSX(Menu.SubMenu, { title: t('Share'), key: MENU_KEYS.SHARE_SUBMENU },\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.COPY_PERMALINK },\n    t('Copy permalink to clipboard')\n    ),\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.SHARE_BY_EMAIL },\n    t('Share chart by email')\n    ),\n    isFeatureEnabled(FeatureFlag.EmbeddableCharts) ?\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.EMBED_CODE },\n    ___EmotionJSX(ModalTrigger, {\n      triggerNode:\n      ___EmotionJSX(\"span\", { \"data-test\": \"embed-code-button\" }, t('Embed code')),\n\n      modalTitle: t('Embed code'),\n      modalBody:\n      ___EmotionJSX(EmbedCodeContent, {\n        formData: latestQueryFormData,\n        addDangerToast: addDangerToast }\n      ),\n\n      maxWidth: `${theme.gridUnit * 100}px`,\n      destroyOnClose: true,\n      responsive: true }\n    )\n    ) :\n    null\n    ),\n    ___EmotionJSX(Menu.Divider, null),\n    showReportSubMenu ?\n    ___EmotionJSX(React.Fragment, null,\n    ___EmotionJSX(Menu.SubMenu, { title: t('Manage email report') },\n    ___EmotionJSX(HeaderReportDropDown, {\n      chart: chart,\n      setShowReportSubMenu: setShowReportSubMenu,\n      showReportSubMenu: showReportSubMenu,\n      setIsDropdownVisible: setIsDropdownVisible,\n      isDropdownVisible: isDropdownVisible,\n      useTextMenu: true }\n    )\n    ),\n    ___EmotionJSX(Menu.Divider, null)\n    ) :\n\n    ___EmotionJSX(Menu, null,\n    ___EmotionJSX(HeaderReportDropDown, {\n      chart: chart,\n      setShowReportSubMenu: setShowReportSubMenu,\n      setIsDropdownVisible: setIsDropdownVisible,\n      isDropdownVisible: isDropdownVisible,\n      useTextMenu: true }\n    )\n    ),\n\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.VIEW_QUERY },\n    ___EmotionJSX(ModalTrigger, {\n      triggerNode:\n      ___EmotionJSX(\"span\", { \"data-test\": \"view-query-menu-item\" }, t('View query')),\n\n      modalTitle: t('View query'),\n      modalBody:\n      ___EmotionJSX(ViewQueryModal, { latestQueryFormData: latestQueryFormData }),\n\n      draggable: true,\n      resizable: true,\n      responsive: true }\n    )\n    ),\n    datasource &&\n    ___EmotionJSX(Menu.Item, { key: MENU_KEYS.RUN_IN_SQL_LAB },\n    t('Run in SQL Lab')\n    )\n\n    ),\n\n    [\n    addDangerToast,\n    canDownloadCSV,\n    chart,\n    dashboards,\n    handleMenuClick,\n    isDropdownVisible,\n    latestQueryFormData,\n    showReportSubMenu,\n    slice,\n    theme.gridUnit]\n\n  );\n  return [menu, isDropdownVisible, setIsDropdownVisible];\n};__signature__(useExploreAdditionalActionsMenu, \"useTheme{theme}\\nuseToasts{{ addDangerToast, addSuccessToast }}\\nuseDispatch{dispatch}\\nuseState{[showReportSubMenu, setShowReportSubMenu](null)}\\nuseState{[isDropdownVisible, setIsDropdownVisible](false)}\\nuseSelector{chart}\\nuseCallback{shareByEmail}\\nuseCallback{exportCSV}\\nuseCallback{exportCSVPivoted}\\nuseCallback{exportJson}\\nuseCallback{exportExcel}\\nuseCallback{copyLink}\\nuseCallback{handleMenuClick}\\nuseMemo{menu}\", () => [useTheme, useToasts, useDispatch, useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(MENU_KEYS, \"MENU_KEYS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(VIZ_TYPES_PIVOTABLE, \"VIZ_TYPES_PIVOTABLE\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(MenuItemWithCheckboxContainer, \"MenuItemWithCheckboxContainer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(MenuTrigger, \"MenuTrigger\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(iconReset, \"iconReset\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(useExploreAdditionalActionsMenu, \"useExploreAdditionalActionsMenu\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useMemo","useState","useDispatch","useSelector","css","isFeatureEnabled","FeatureFlag","styled","t","useTheme","Icons","Menu","ModalTrigger","Button","useToasts","exportChart","getChartKey","downloadAsImage","getChartPermalink","copyTextToClipboard","HeaderReportDropDown","logEvent","LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE","LOG_ACTIONS_CHART_DOWNLOAD_AS_JSON","LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV","LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV_PIVOTED","LOG_ACTIONS_CHART_DOWNLOAD_AS_XLS","ViewQueryModal","EmbedCodeContent","DashboardsSubMenu","jsx","___EmotionJSX","MENU_KEYS","EDIT_PROPERTIES","DASHBOARDS_ADDED_TO","DOWNLOAD_SUBMENU","EXPORT_TO_CSV","EXPORT_TO_CSV_PIVOTED","EXPORT_TO_JSON","EXPORT_TO_XLSX","DOWNLOAD_AS_IMAGE","SHARE_SUBMENU","COPY_PERMALINK","EMBED_CODE","SHARE_BY_EMAIL","REPORT_SUBMENU","SET_UP_REPORT","SET_REPORT_ACTIVE","EDIT_REPORT","DELETE_REPORT","VIEW_QUERY","RUN_IN_SQL_LAB","VIZ_TYPES_PIVOTABLE","MenuItemWithCheckboxContainer","div","theme","gridUnit","MenuTrigger","colors","primary","dark2","light1","iconReset","useExploreAdditionalActionsMenu","latestQueryFormData","canDownloadCSV","slice","onOpenInEditor","onOpenPropertiesModal","ownState","dashboards","rest","addDangerToast","addSuccessToast","dispatch","showReportSubMenu","setShowReportSubMenu","isDropdownVisible","setIsDropdownVisible","chart","state","_state$charts","charts","explore","datasource","shareByEmail","subject","url","body","encodeURIComponent","window","location","href","error","exportCSV","formData","resultType","resultFormat","exportCSVPivoted","exportJson","exportExcel","copyLink","Error","handleMenuClick","key","domEvent","_slice$slice_name","chartId","slice_id","chartName","slice_name","metaKey","menu","_extends","onClick","selectable","Fragment","Item","SubMenu","title","Divider","includes","viz_type","icon","FileOutlined","disabled","FileImageOutlined","EmbeddableCharts","triggerNode","modalTitle","modalBody","maxWidth","destroyOnClose","responsive","useTextMenu","draggable","resizable","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/useExploreAdditionalActionsMenu/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  css,\n  isFeatureEnabled,\n  FeatureFlag,\n  styled,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Button from 'src/components/Button';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { exportChart, getChartKey } from 'src/explore/exploreUtils';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport copyTextToClipboard from 'src/utils/copy';\nimport HeaderReportDropDown from 'src/features/reports/ReportModal/HeaderReportDropdown';\nimport { logEvent } from 'src/logger/actions';\nimport {\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_JSON,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV_PIVOTED,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_XLS,\n} from 'src/logger/LogUtils';\nimport ViewQueryModal from '../controls/ViewQueryModal';\nimport EmbedCodeContent from '../EmbedCodeContent';\nimport DashboardsSubMenu from './DashboardsSubMenu';\n\nconst MENU_KEYS = {\n  EDIT_PROPERTIES: 'edit_properties',\n  DASHBOARDS_ADDED_TO: 'dashboards_added_to',\n  DOWNLOAD_SUBMENU: 'download_submenu',\n  EXPORT_TO_CSV: 'export_to_csv',\n  EXPORT_TO_CSV_PIVOTED: 'export_to_csv_pivoted',\n  EXPORT_TO_JSON: 'export_to_json',\n  EXPORT_TO_XLSX: 'export_to_xlsx',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  SHARE_SUBMENU: 'share_submenu',\n  COPY_PERMALINK: 'copy_permalink',\n  EMBED_CODE: 'embed_code',\n  SHARE_BY_EMAIL: 'share_by_email',\n  REPORT_SUBMENU: 'report_submenu',\n  SET_UP_REPORT: 'set_up_report',\n  SET_REPORT_ACTIVE: 'set_report_active',\n  EDIT_REPORT: 'edit_report',\n  DELETE_REPORT: 'delete_report',\n  VIEW_QUERY: 'view_query',\n  RUN_IN_SQL_LAB: 'run_in_sql_lab',\n};\n\nconst VIZ_TYPES_PIVOTABLE = ['pivot_table_v2'];\n\nexport const MenuItemWithCheckboxContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n\n    & svg {\n      width: ${theme.gridUnit * 3}px;\n      height: ${theme.gridUnit * 3}px;\n    }\n\n    & span[role='checkbox'] {\n      display: inline-flex;\n      margin-right: ${theme.gridUnit}px;\n    }\n  `}\n`;\n\nexport const MenuTrigger = styled(Button)`\n  ${({ theme }) => css`\n    width: ${theme.gridUnit * 8}px;\n    height: ${theme.gridUnit * 8}px;\n    padding: 0;\n    border: 1px solid ${theme.colors.primary.dark2};\n\n    &.ant-btn > span.anticon {\n      line-height: 0;\n      transition: inherit;\n    }\n\n    &:hover:not(:focus) > span.anticon {\n      color: ${theme.colors.primary.light1};\n    }\n  `}\n`;\n\nconst iconReset = css`\n  .ant-dropdown-menu-item > & > .anticon:first-child {\n    margin-right: 0;\n    vertical-align: 0;\n  }\n`;\n\nexport const useExploreAdditionalActionsMenu = (\n  latestQueryFormData,\n  canDownloadCSV,\n  slice,\n  onOpenInEditor,\n  onOpenPropertiesModal,\n  ownState,\n  dashboards,\n  ...rest\n) => {\n  const theme = useTheme();\n  const { addDangerToast, addSuccessToast } = useToasts();\n  const dispatch = useDispatch();\n  const [showReportSubMenu, setShowReportSubMenu] = useState(null);\n  const [isDropdownVisible, setIsDropdownVisible] = useState(false);\n  const chart = useSelector(\n    state => state.charts?.[getChartKey(state.explore)],\n  );\n\n  const { datasource } = latestQueryFormData;\n\n  const shareByEmail = useCallback(async () => {\n    try {\n      const subject = t('Superset Chart');\n      const url = await getChartPermalink(latestQueryFormData);\n      const body = encodeURIComponent(t('%s%s', 'Check out this chart: ', url));\n      window.location.href = `mailto:?Subject=${subject}%20&Body=${body}`;\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, latestQueryFormData]);\n\n  const exportCSV = useCallback(\n    () =>\n      canDownloadCSV\n        ? exportChart({\n            formData: latestQueryFormData,\n            ownState,\n            resultType: 'full',\n            resultFormat: 'csv',\n          })\n        : null,\n    [canDownloadCSV, latestQueryFormData],\n  );\n\n  const exportCSVPivoted = useCallback(\n    () =>\n      canDownloadCSV\n        ? exportChart({\n            formData: latestQueryFormData,\n            resultType: 'post_processed',\n            resultFormat: 'csv',\n          })\n        : null,\n    [canDownloadCSV, latestQueryFormData],\n  );\n\n  const exportJson = useCallback(\n    () =>\n      exportChart({\n        formData: latestQueryFormData,\n        resultType: 'results',\n        resultFormat: 'json',\n      }),\n    [latestQueryFormData],\n  );\n\n  const exportExcel = useCallback(\n    () =>\n      exportChart({\n        formData: latestQueryFormData,\n        resultType: 'results',\n        resultFormat: 'xlsx',\n      }),\n    [latestQueryFormData],\n  );\n\n  const copyLink = useCallback(async () => {\n    try {\n      if (!latestQueryFormData) {\n        throw new Error();\n      }\n      await copyTextToClipboard(() => getChartPermalink(latestQueryFormData));\n      addSuccessToast(t('Copied to clipboard!'));\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, addSuccessToast, latestQueryFormData]);\n\n  const handleMenuClick = useCallback(\n    ({ key, domEvent }) => {\n      switch (key) {\n        case MENU_KEYS.EDIT_PROPERTIES:\n          onOpenPropertiesModal();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV:\n          exportCSV();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV, {\n              chartId: slice?.slice_id,\n              chartName: slice?.slice_name,\n            }),\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV_PIVOTED:\n          exportCSVPivoted();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_CSV_PIVOTED, {\n              chartId: slice?.slice_id,\n              chartName: slice?.slice_name,\n            }),\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_JSON:\n          exportJson();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_JSON, {\n              chartId: slice?.slice_id,\n              chartName: slice?.slice_name,\n            }),\n          );\n          break;\n        case MENU_KEYS.EXPORT_TO_XLSX:\n          exportExcel();\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_XLS, {\n              chartId: slice?.slice_id,\n              chartName: slice?.slice_name,\n            }),\n          );\n          break;\n        case MENU_KEYS.DOWNLOAD_AS_IMAGE:\n          downloadAsImage(\n            '.panel-body .chart-container',\n            // eslint-disable-next-line camelcase\n            slice?.slice_name ?? t('New chart'),\n            true,\n          )(domEvent);\n          setIsDropdownVisible(false);\n          dispatch(\n            logEvent(LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE, {\n              chartId: slice?.slice_id,\n              chartName: slice?.slice_name,\n            }),\n          );\n          break;\n        case MENU_KEYS.COPY_PERMALINK:\n          copyLink();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.EMBED_CODE:\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.SHARE_BY_EMAIL:\n          shareByEmail();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.VIEW_QUERY:\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.RUN_IN_SQL_LAB:\n          onOpenInEditor(latestQueryFormData, domEvent.metaKey);\n          setIsDropdownVisible(false);\n          break;\n        default:\n          break;\n      }\n    },\n    [\n      copyLink,\n      exportCSV,\n      exportCSVPivoted,\n      exportJson,\n      latestQueryFormData,\n      onOpenInEditor,\n      onOpenPropertiesModal,\n      shareByEmail,\n      slice?.slice_name,\n    ],\n  );\n\n  const menu = useMemo(\n    () => (\n      <Menu onClick={handleMenuClick} selectable={false} {...rest}>\n        <>\n          {slice && (\n            <Menu.Item key={MENU_KEYS.EDIT_PROPERTIES}>\n              {t('Edit chart properties')}\n            </Menu.Item>\n          )}\n          <Menu.SubMenu\n            title={t('On dashboards')}\n            key={MENU_KEYS.DASHBOARDS_ADDED_TO}\n          >\n            <DashboardsSubMenu\n              chartId={slice?.slice_id}\n              dashboards={dashboards}\n            />\n          </Menu.SubMenu>\n          <Menu.Divider />\n        </>\n        <Menu.SubMenu title={t('Download')} key={MENU_KEYS.DOWNLOAD_SUBMENU}>\n          {VIZ_TYPES_PIVOTABLE.includes(latestQueryFormData.viz_type) ? (\n            <>\n              <Menu.Item\n                key={MENU_KEYS.EXPORT_TO_CSV}\n                icon={<Icons.FileOutlined css={iconReset} />}\n                disabled={!canDownloadCSV}\n              >\n                {t('Export to original .CSV')}\n              </Menu.Item>\n              <Menu.Item\n                key={MENU_KEYS.EXPORT_TO_CSV_PIVOTED}\n                icon={<Icons.FileOutlined css={iconReset} />}\n                disabled={!canDownloadCSV}\n              >\n                {t('Export to pivoted .CSV')}\n              </Menu.Item>\n            </>\n          ) : (\n            <Menu.Item\n              key={MENU_KEYS.EXPORT_TO_CSV}\n              icon={<Icons.FileOutlined css={iconReset} />}\n              disabled={!canDownloadCSV}\n            >\n              {t('Export to .CSV')}\n            </Menu.Item>\n          )}\n          <Menu.Item\n            key={MENU_KEYS.EXPORT_TO_JSON}\n            icon={<Icons.FileOutlined css={iconReset} />}\n          >\n            {t('Export to .JSON')}\n          </Menu.Item>\n          <Menu.Item\n            key={MENU_KEYS.DOWNLOAD_AS_IMAGE}\n            icon={<Icons.FileImageOutlined css={iconReset} />}\n          >\n            {t('Download as image')}\n          </Menu.Item>\n          <Menu.Item\n            key={MENU_KEYS.EXPORT_TO_XLSX}\n            icon={<Icons.FileOutlined css={iconReset} />}\n          >\n            {t('Export to Excel')}\n          </Menu.Item>\n        </Menu.SubMenu>\n        <Menu.SubMenu title={t('Share')} key={MENU_KEYS.SHARE_SUBMENU}>\n          <Menu.Item key={MENU_KEYS.COPY_PERMALINK}>\n            {t('Copy permalink to clipboard')}\n          </Menu.Item>\n          <Menu.Item key={MENU_KEYS.SHARE_BY_EMAIL}>\n            {t('Share chart by email')}\n          </Menu.Item>\n          {isFeatureEnabled(FeatureFlag.EmbeddableCharts) ? (\n            <Menu.Item key={MENU_KEYS.EMBED_CODE}>\n              <ModalTrigger\n                triggerNode={\n                  <span data-test=\"embed-code-button\">{t('Embed code')}</span>\n                }\n                modalTitle={t('Embed code')}\n                modalBody={\n                  <EmbedCodeContent\n                    formData={latestQueryFormData}\n                    addDangerToast={addDangerToast}\n                  />\n                }\n                maxWidth={`${theme.gridUnit * 100}px`}\n                destroyOnClose\n                responsive\n              />\n            </Menu.Item>\n          ) : null}\n        </Menu.SubMenu>\n        <Menu.Divider />\n        {showReportSubMenu ? (\n          <>\n            <Menu.SubMenu title={t('Manage email report')}>\n              <HeaderReportDropDown\n                chart={chart}\n                setShowReportSubMenu={setShowReportSubMenu}\n                showReportSubMenu={showReportSubMenu}\n                setIsDropdownVisible={setIsDropdownVisible}\n                isDropdownVisible={isDropdownVisible}\n                useTextMenu\n              />\n            </Menu.SubMenu>\n            <Menu.Divider />\n          </>\n        ) : (\n          <Menu>\n            <HeaderReportDropDown\n              chart={chart}\n              setShowReportSubMenu={setShowReportSubMenu}\n              setIsDropdownVisible={setIsDropdownVisible}\n              isDropdownVisible={isDropdownVisible}\n              useTextMenu\n            />\n          </Menu>\n        )}\n        <Menu.Item key={MENU_KEYS.VIEW_QUERY}>\n          <ModalTrigger\n            triggerNode={\n              <span data-test=\"view-query-menu-item\">{t('View query')}</span>\n            }\n            modalTitle={t('View query')}\n            modalBody={\n              <ViewQueryModal latestQueryFormData={latestQueryFormData} />\n            }\n            draggable\n            resizable\n            responsive\n          />\n        </Menu.Item>\n        {datasource && (\n          <Menu.Item key={MENU_KEYS.RUN_IN_SQL_LAB}>\n            {t('Run in SQL Lab')}\n          </Menu.Item>\n        )}\n      </Menu>\n    ),\n    [\n      addDangerToast,\n      canDownloadCSV,\n      chart,\n      dashboards,\n      handleMenuClick,\n      isDropdownVisible,\n      latestQueryFormData,\n      showReportSubMenu,\n      slice,\n      theme.gridUnit,\n    ],\n  );\n  return [menu, isDropdownVisible, setIsDropdownVisible];\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}