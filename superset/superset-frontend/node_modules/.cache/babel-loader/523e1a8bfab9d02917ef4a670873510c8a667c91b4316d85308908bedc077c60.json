{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport rison from 'rison';\nimport { t, SupersetClient, styled, isFeatureEnabled, FeatureFlag, getClientErrorObject, ensureIsArray } from '@superset-ui/core';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst FormItem = AntdForm.Item;\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1blj7km\", styles: \"margin-top:1em\" } : { name: \"1gtq0eh-PropertiesModal\", styles: \"margin-top:1em;label:PropertiesModal;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL1Byb3BlcnRpZXNNb2RhbC9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNk9pRSIsImZpbGUiOiIvaG9tZS9wYXdhbmsvRG9jdW1lbnRzL2RjaW0vc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwvaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8sIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IE1vZGFsIGZyb20gJ3NyYy9jb21wb25lbnRzL01vZGFsJztcbmltcG9ydCB7IElucHV0LCBUZXh0QXJlYSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0lucHV0JztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCB7IEFzeW5jU2VsZWN0LCBSb3csIENvbCwgQW50ZEZvcm0gfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IHsgdCwgU3VwZXJzZXRDbGllbnQsIHN0eWxlZCwgaXNGZWF0dXJlRW5hYmxlZCwgRmVhdHVyZUZsYWcsIGdldENsaWVudEVycm9yT2JqZWN0LCBlbnN1cmVJc0FycmF5LCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB3aXRoVG9hc3RzIGZyb20gJ3NyYy9jb21wb25lbnRzL01lc3NhZ2VUb2FzdHMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgeyBsb2FkVGFncyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1RhZ3MvdXRpbHMnO1xuaW1wb3J0IHsgZmV0Y2hUYWdzLCBPQkpFQ1RfVFlQRVMgfSBmcm9tICdzcmMvZmVhdHVyZXMvdGFncy90YWdzJztcbmNvbnN0IEZvcm1JdGVtID0gQW50ZEZvcm0uSXRlbTtcbmNvbnN0IFN0eWxlZEZvcm1JdGVtID0gc3R5bGVkKEFudGRGb3JtLkl0ZW0pIGBcbiAgbWFyZ2luLWJvdHRvbTogMDtcbmA7XG5jb25zdCBTdHlsZWRIZWxwQmxvY2sgPSBzdHlsZWQuc3BhbiBgXG4gIG1hcmdpbi1ib3R0b206IDA7XG5gO1xuZnVuY3Rpb24gUHJvcGVydGllc01vZGFsKHsgc2xpY2UsIG9uSGlkZSwgb25TYXZlLCBzaG93LCBhZGRTdWNjZXNzVG9hc3QsIH0pIHtcbiAgICBjb25zdCBbc3VibWl0dGluZywgc2V0U3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2Zvcm1dID0gQW50ZEZvcm0udXNlRm9ybSgpO1xuICAgIC8vIHZhbHVlcyBvZiBmb3JtIGlucHV0c1xuICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKHNsaWNlLnNsaWNlX25hbWUgfHwgJycpO1xuICAgIGNvbnN0IFtzZWxlY3RlZE93bmVycywgc2V0U2VsZWN0ZWRPd25lcnNdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3RhZ3MsIHNldFRhZ3NdID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IHRhZ3NBc1NlbGVjdFZhbHVlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RUYWdzID0gdGFncy5tYXAoKHRhZykgPT4gKHtcbiAgICAgICAgICAgIHZhbHVlOiB0YWcuaWQsXG4gICAgICAgICAgICBsYWJlbDogdGFnLm5hbWUsXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdFRhZ3M7XG4gICAgfSwgW3RhZ3MubGVuZ3RoXSk7XG4gICAgZnVuY3Rpb24gc2hvd0Vycm9yKHsgZXJyb3IsIHN0YXR1c1RleHQsIG1lc3NhZ2UgfSkge1xuICAgICAgICBsZXQgZXJyb3JUZXh0ID0gZXJyb3IgfHwgc3RhdHVzVGV4dCB8fCB0KCdBbiBlcnJvciBoYXMgb2NjdXJyZWQnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09ICdGb3JiaWRkZW4nKSB7XG4gICAgICAgICAgICBlcnJvclRleHQgPSB0KCdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBlZGl0IHRoaXMgY2hhcnQnKTtcbiAgICAgICAgfVxuICAgICAgICBNb2RhbC5lcnJvcih7XG4gICAgICAgICAgICB0aXRsZTogdCgnRXJyb3InKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGVycm9yVGV4dCxcbiAgICAgICAgICAgIG9rQnV0dG9uUHJvcHM6IHsgZGFuZ2VyOiB0cnVlLCBjbGFzc05hbWU6ICdidG4tZGFuZ2VyJyB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZmV0Y2hDaGFydE93bmVycyA9IHVzZUNhbGxiYWNrKGFzeW5jIGZ1bmN0aW9uIGZldGNoQ2hhcnRPd25lcnMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2NoYXJ0LyR7c2xpY2Uuc2xpY2VfaWR9YCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY2hhcnQgPSByZXNwb25zZS5qc29uLnJlc3VsdDtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkT3duZXJzKGNoYXJ0Py5vd25lcnM/Lm1hcCgob3duZXIpID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG93bmVyLmlkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBgJHtvd25lci5maXJzdF9uYW1lfSAke293bmVyLmxhc3RfbmFtZX1gLFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEVycm9yID0gYXdhaXQgZ2V0Q2xpZW50RXJyb3JPYmplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgc2hvd0Vycm9yKGNsaWVudEVycm9yKTtcbiAgICAgICAgfVxuICAgIH0sIFtzbGljZS5zbGljZV9pZF0pO1xuICAgIGNvbnN0IGxvYWRPcHRpb25zID0gdXNlTWVtbygoKSA9PiAoaW5wdXQgPSAnJywgcGFnZSwgcGFnZVNpemUpID0+IHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoe1xuICAgICAgICAgICAgZmlsdGVyOiBpbnB1dCxcbiAgICAgICAgICAgIHBhZ2UsXG4gICAgICAgICAgICBwYWdlX3NpemU6IHBhZ2VTaXplLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvcmVsYXRlZC9vd25lcnM/cT0ke3F1ZXJ5fWAsXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5leHRyYS5hY3RpdmUpXG4gICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS50ZXh0LFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICAgICAgfSkpO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jICh2YWx1ZXMpID0+IHtcbiAgICAgICAgc2V0U3VibWl0dGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgeyBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5LCBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzLCBkZXNjcmlwdGlvbiwgY2FjaGVfdGltZW91dDogY2FjaGVUaW1lb3V0LCB9ID0gdmFsdWVzO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgc2xpY2VfbmFtZTogbmFtZSB8fCBudWxsLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIHx8IG51bGwsXG4gICAgICAgICAgICBjYWNoZV90aW1lb3V0OiBjYWNoZVRpbWVvdXQgfHwgbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfHwgbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWVkQnkgJiYgY2VydGlmaWNhdGlvbkRldGFpbHMgPyBjZXJ0aWZpY2F0aW9uRGV0YWlscyA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZWxlY3RlZE93bmVycykge1xuICAgICAgICAgICAgcGF5bG9hZC5vd25lcnMgPSBzZWxlY3RlZE93bmVycy5tYXAobyA9PiBvLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSkge1xuICAgICAgICAgICAgcGF5bG9hZC50YWdzID0gdGFncy5tYXAodGFnID0+IHRhZy5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LnB1dCh7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2NoYXJ0LyR7c2xpY2Uuc2xpY2VfaWR9YCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSByZWR1eCBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZENoYXJ0ID0ge1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgLi4ucmVzLmpzb24ucmVzdWx0LFxuICAgICAgICAgICAgICAgIHRhZ3MsXG4gICAgICAgICAgICAgICAgaWQ6IHNsaWNlLnNsaWNlX2lkLFxuICAgICAgICAgICAgICAgIG93bmVyczogc2VsZWN0ZWRPd25lcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb25TYXZlKHVwZGF0ZWRDaGFydCk7XG4gICAgICAgICAgICBhZGRTdWNjZXNzVG9hc3QodCgnQ2hhcnQgcHJvcGVydGllcyB1cGRhdGVkJykpO1xuICAgICAgICAgICAgb25IaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHJlcykge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50RXJyb3IgPSBhd2FpdCBnZXRDbGllbnRFcnJvck9iamVjdChyZXMpO1xuICAgICAgICAgICAgc2hvd0Vycm9yKGNsaWVudEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9O1xuICAgIGNvbnN0IG93bmVyc0xhYmVsID0gdCgnT3duZXJzJyk7XG4gICAgLy8gZ2V0IHRoZSBvd25lcnMgb2YgdGhpcyBzbGljZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGZldGNoQ2hhcnRPd25lcnMoKTtcbiAgICB9LCBbZmV0Y2hDaGFydE93bmVyc10pO1xuICAgIC8vIHVwZGF0ZSBuYW1lIGFmdGVyIGl0J3MgY2hhbmdlZCBpbiBhbm90aGVyIG1vZGFsXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0TmFtZShzbGljZS5zbGljZV9uYW1lIHx8ICcnKTtcbiAgICB9LCBbc2xpY2Uuc2xpY2VfbmFtZV0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZldGNoVGFncyh7XG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZTogT0JKRUNUX1RZUEVTLkNIQVJULFxuICAgICAgICAgICAgICAgIG9iamVjdElkOiBzbGljZS5zbGljZV9pZCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlVHlwZXM6IGZhbHNlLFxuICAgICAgICAgICAgfSwgKHRhZ3MpID0+IHNldFRhZ3ModGFncyksIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgW3NsaWNlLnNsaWNlX2lkXSk7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlVGFncyA9ICh0YWdzKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFRhZ3MgPSBlbnN1cmVJc0FycmF5KHRhZ3MpLm1hcChyID0+ICh7XG4gICAgICAgICAgICBpZDogci52YWx1ZSxcbiAgICAgICAgICAgIG5hbWU6IHIubGFiZWwsXG4gICAgICAgIH0pKTtcbiAgICAgICAgc2V0VGFncyhwYXJzZWRUYWdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUNsZWFyVGFncyA9ICgpID0+IHtcbiAgICAgICAgc2V0VGFncyhbXSk7XG4gICAgfTtcbiAgICByZXR1cm4gKDxNb2RhbCBzaG93PXtzaG93fSBvbkhpZGU9e29uSGlkZX0gdGl0bGU9e3QoJ0VkaXQgQ2hhcnQgUHJvcGVydGllcycpfSBmb290ZXI9ezw+XG4gICAgICAgICAgPEJ1dHRvbiBkYXRhLXRlc3Q9XCJwcm9wZXJ0aWVzLW1vZGFsLWNhbmNlbC1idXR0b25cIiBodG1sVHlwZT1cImJ1dHRvblwiIGJ1dHRvblNpemU9XCJzbWFsbFwiIG9uQ2xpY2s9e29uSGlkZX0gY3RhPlxuICAgICAgICAgICAge3QoJ0NhbmNlbCcpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxCdXR0b24gZGF0YS10ZXN0PVwicHJvcGVydGllcy1tb2RhbC1zYXZlLWJ1dHRvblwiIGh0bWxUeXBlPVwic3VibWl0XCIgYnV0dG9uU2l6ZT1cInNtYWxsXCIgYnV0dG9uU3R5bGU9XCJwcmltYXJ5XCIgb25DbGljaz17Zm9ybS5zdWJtaXR9IGRpc2FibGVkPXtzdWJtaXR0aW5nIHx8ICFuYW1lIHx8IHNsaWNlLmlzX21hbmFnZWRfZXh0ZXJuYWxseX0gdG9vbHRpcD17c2xpY2UuaXNfbWFuYWdlZF9leHRlcm5hbGx5XG4gICAgICAgICAgICAgICAgPyB0KFwiVGhpcyBjaGFydCBpcyBtYW5hZ2VkIGV4dGVybmFsbHksIGFuZCBjYW4ndCBiZSBlZGl0ZWQgaW4gU3VwZXJzZXRcIilcbiAgICAgICAgICAgICAgICA6ICcnfSBjdGE+XG4gICAgICAgICAgICB7dCgnU2F2ZScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8Lz59IHJlc3BvbnNpdmUgd3JhcFByb3BzPXt7ICdkYXRhLXRlc3QnOiAncHJvcGVydGllcy1lZGl0LW1vZGFsJyB9fT5cbiAgICAgIDxBbnRkRm9ybSBmb3JtPXtmb3JtfSBvbkZpbmlzaD17b25TdWJtaXR9IGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17e1xuICAgICAgICAgICAgbmFtZTogc2xpY2Uuc2xpY2VfbmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzbGljZS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIGNhY2hlX3RpbWVvdXQ6IHNsaWNlLmNhY2hlX3RpbWVvdXQgIT0gbnVsbCA/IHNsaWNlLmNhY2hlX3RpbWVvdXQgOiAnJyxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogc2xpY2UuY2VydGlmaWVkX2J5IHx8ICcnLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBzbGljZS5jZXJ0aWZpZWRfYnkgJiYgc2xpY2UuY2VydGlmaWNhdGlvbl9kZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBzbGljZS5jZXJ0aWZpY2F0aW9uX2RldGFpbHNcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICB9fT5cbiAgICAgICAgPFJvdyBndXR0ZXI9ezE2fT5cbiAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgIDxoMz57dCgnQmFzaWMgaW5mb3JtYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtIGxhYmVsPXt0KCdOYW1lJyl9IHJlcXVpcmVkPlxuICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD17dCgnTmFtZScpfSBuYW1lPVwibmFtZVwiIGRhdGEtdGVzdD1cInByb3BlcnRpZXMtbW9kYWwtbmFtZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXsoZXZlbnQpID0+IHNldE5hbWUoZXZlbnQudGFyZ2V0LnZhbHVlID8/ICcnKX0vPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfSBuYW1lPVwiZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICA8VGV4dEFyZWEgcm93cz17M30gc3R5bGU9e3sgbWF4V2lkdGg6ICcxMDAlJyB9fS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGRpc3BsYXllZCBhcyB3aWRnZXQgaGVhZGVycyBpbiB0aGUgZGFzaGJvYXJkIHZpZXcuIFN1cHBvcnRzIG1hcmtkb3duLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8aDM+e3QoJ0NlcnRpZmljYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfSBuYW1lPVwiY2VydGlmaWVkX2J5XCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgY2hhcnQuJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX0gbmFtZT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX0vPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dCgnQW55IGFkZGl0aW9uYWwgZGV0YWlsIHRvIHNob3cgaW4gdGhlIGNlcnRpZmljYXRpb24gdG9vbHRpcC4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgPGgzPnt0KCdDb25maWd1cmF0aW9uJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdDYWNoZSB0aW1lb3V0Jyl9IG5hbWU9XCJjYWNoZV90aW1lb3V0XCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9XCJDYWNoZSB0aW1lb3V0XCIvPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dChcIkR1cmF0aW9uIChpbiBzZWNvbmRzKSBvZiB0aGUgY2FjaGluZyB0aW1lb3V0IGZvciB0aGlzIGNoYXJ0LiBTZXQgdG8gLTEgdG8gYnlwYXNzIHRoZSBjYWNoZS4gTm90ZSB0aGlzIGRlZmF1bHRzIHRvIHRoZSBkYXRhc2V0J3MgdGltZW91dCBpZiB1bmRlZmluZWQuXCIpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8aDMgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMWVtJyB9fT57dCgnQWNjZXNzJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbSBsYWJlbD17b3duZXJzTGFiZWx9PlxuICAgICAgICAgICAgICA8QXN5bmNTZWxlY3QgYXJpYUxhYmVsPXtvd25lcnNMYWJlbH0gbW9kZT1cIm11bHRpcGxlXCIgbmFtZT1cIm93bmVyc1wiIHZhbHVlPXtzZWxlY3RlZE93bmVycyB8fCBbXX0gb25DaGFuZ2U9e3NldFNlbGVjdGVkT3duZXJzfSBvcHRpb25zPXtsb2FkT3B0aW9uc30gZGlzYWJsZWQ9eyFzZWxlY3RlZE93bmVyc30gYWxsb3dDbGVhci8+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdBIGxpc3Qgb2YgdXNlcnMgd2hvIGNhbiBhbHRlciB0aGUgY2hhcnQuIFNlYXJjaGFibGUgYnkgbmFtZSBvciB1c2VybmFtZS4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVGFnZ2luZ1N5c3RlbSkgJiYgKDxoMyBjc3M9e3sgbWFyZ2luVG9wOiAnMWVtJyB9fT57dCgnVGFncycpfTwvaDM+KX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRhZ2dpbmdTeXN0ZW0pICYmICg8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgPEFzeW5jU2VsZWN0IGFyaWFMYWJlbD1cIlRhZ3NcIiBtb2RlPVwibXVsdGlwbGVcIiB2YWx1ZT17dGFnc0FzU2VsZWN0VmFsdWVzfSBvcHRpb25zPXtsb2FkVGFnc30gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZVRhZ3N9IG9uQ2xlYXI9e2hhbmRsZUNsZWFyVGFnc30gYWxsb3dDbGVhci8+XG4gICAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICB7dCgnQSBsaXN0IG9mIHRhZ3MgdGhhdCBoYXZlIGJlZW4gYXBwbGllZCB0byB0aGlzIGNoYXJ0LicpfVxuICAgICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgICA8L0Zvcm1JdGVtPil9XG4gICAgICAgICAgPC9Db2w+XG4gICAgICAgIDwvUm93PlxuICAgICAgPC9BbnRkRm9ybT5cbiAgICA8L01vZGFsPik7XG59XG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKFByb3BlcnRpZXNNb2RhbCk7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nfunction PropertiesModal({ slice, onHide, onSave, show, addSuccessToast }) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState(null);\n  const [tags, setTags] = useState([]);\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag) => ({\n      value: tag.id,\n      label: tag.name\n    }));\n    return selectTags;\n  }, [tags.length]);\n  function showError({ error, statusText, message }) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' }\n    });\n  }\n  const fetchChartOwners = useCallback(async function fetchChartOwners() {\n    try {var _chart$owners;\n      const response = await SupersetClient.get({\n        endpoint: `/api/v1/chart/${slice.slice_id}`\n      });\n      const chart = response.json.result;\n      setSelectedOwners(chart == null ? void 0 : (_chart$owners = chart.owners) == null ? void 0 : _chart$owners.map((owner) => ({\n        value: owner.id,\n        label: `${owner.first_name} ${owner.last_name}`\n      })));\n    }\n    catch (response) {\n      const clientError = await getClientErrorObject(response);\n      showError(clientError);\n    }\n  }, [slice.slice_id]);\n  const loadOptions = useMemo(() => (input = '', page, pageSize) => {\n    const query = rison.encode({\n      filter: input,\n      page,\n      page_size: pageSize\n    });\n    return SupersetClient.get({\n      endpoint: `/api/v1/chart/related/owners?q=${query}`\n    }).then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text\n      })),\n      totalCount: response.json.count\n    }));\n  }, []);\n  const onSubmit = async (values) => {\n    setSubmitting(true);\n    const { certified_by: certifiedBy, certification_details: certificationDetails, description, cache_timeout: cacheTimeout } = values;\n    const payload = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details: certifiedBy && certificationDetails ? certificationDetails : null\n    };\n    if (selectedOwners) {\n      payload.owners = selectedOwners.map((o) => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map((tag) => tag.id);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    }\n    catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n  const ownersLabel = t('Owners');\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem))\n    return;\n    try {\n      fetchTags({\n        objectType: OBJECT_TYPES.CHART,\n        objectId: slice.slice_id,\n        includeTypes: false\n      }, (tags) => setTags(tags), (error) => {\n        showError(error);\n      });\n    }\n    catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n  const handleChangeTags = (tags) => {\n    const parsedTags = ensureIsArray(tags).map((r) => ({\n      id: r.value,\n      name: r.label\n    }));\n    setTags(parsedTags);\n  };\n  const handleClearTags = () => {\n    setTags([]);\n  };\n  return ___EmotionJSX(Modal, { show: show, onHide: onHide, title: t('Edit Chart Properties'), footer: ___EmotionJSX(React.Fragment, null,\n    ___EmotionJSX(Button, { \"data-test\": \"properties-modal-cancel-button\", htmlType: \"button\", buttonSize: \"small\", onClick: onHide, cta: true },\n    t('Cancel')\n    ),\n    ___EmotionJSX(Button, { \"data-test\": \"properties-modal-save-button\", htmlType: \"submit\", buttonSize: \"small\", buttonStyle: \"primary\", onClick: form.submit, disabled: submitting || !name || slice.is_managed_externally, tooltip: slice.is_managed_externally ?\n      t(\"This chart is managed externally, and can't be edited in Superset\") :\n      '', cta: true },\n    t('Save')\n    )\n    ), responsive: true, wrapProps: { 'data-test': 'properties-edit-modal' } },\n  ___EmotionJSX(AntdForm, { form: form, onFinish: onSubmit, layout: \"vertical\", initialValues: {\n      name: slice.slice_name || '',\n      description: slice.description || '',\n      cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n      certified_by: slice.certified_by || '',\n      certification_details: slice.certified_by && slice.certification_details ?\n      slice.certification_details :\n      ''\n    } },\n  ___EmotionJSX(Row, { gutter: 16 },\n  ___EmotionJSX(Col, { xs: 24, md: 12 },\n  ___EmotionJSX(\"h3\", null, t('Basic information')),\n  ___EmotionJSX(FormItem, { label: t('Name'), required: true },\n  ___EmotionJSX(Input, { \"aria-label\": t('Name'), name: \"name\", \"data-test\": \"properties-modal-name-input\", type: \"text\", value: name, onChange: (event) => {var _event$target$value;return setName((_event$target$value = event.target.value) != null ? _event$target$value : '');} })\n  ),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Description'), name: \"description\" },\n  ___EmotionJSX(TextArea, { rows: 3, style: { maxWidth: '100%' } })\n  ),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('The description can be displayed as widget headers in the dashboard view. Supports markdown.')\n  )\n  ),\n  ___EmotionJSX(\"h3\", null, t('Certification')),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Certified by'), name: \"certified_by\" },\n  ___EmotionJSX(Input, { \"aria-label\": t('Certified by') })\n  ),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('Person or group that has certified this chart.')\n  )\n  ),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Certification details'), name: \"certification_details\" },\n  ___EmotionJSX(Input, { \"aria-label\": t('Certification details') })\n  ),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('Any additional detail to show in the certification tooltip.')\n  )\n  )\n  ),\n  ___EmotionJSX(Col, { xs: 24, md: 12 },\n  ___EmotionJSX(\"h3\", null, t('Configuration')),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Cache timeout'), name: \"cache_timeout\" },\n  ___EmotionJSX(Input, { \"aria-label\": \"Cache timeout\" })\n  ),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t(\"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\")\n  )\n  ),\n  ___EmotionJSX(\"h3\", { style: { marginTop: '1em' } }, t('Access')),\n  ___EmotionJSX(FormItem, { label: ownersLabel },\n  ___EmotionJSX(AsyncSelect, { ariaLabel: ownersLabel, mode: \"multiple\", name: \"owners\", value: selectedOwners || [], onChange: setSelectedOwners, options: loadOptions, disabled: !selectedOwners, allowClear: true }),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('A list of users who can alter the chart. Searchable by name or username.')\n  )\n  ),\n  isFeatureEnabled(FeatureFlag.TaggingSystem) && ___EmotionJSX(\"h3\", { css: _ref }, t('Tags')),\n  isFeatureEnabled(FeatureFlag.TaggingSystem) && ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(AsyncSelect, { ariaLabel: \"Tags\", mode: \"multiple\", value: tagsAsSelectValues, options: loadTags, onChange: handleChangeTags, onClear: handleClearTags, allowClear: true }),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('A list of tags that have been applied to this chart.')\n  )\n  )\n  )\n  )\n  )\n  );\n}__signature__(PropertiesModal, \"useState{[submitting, setSubmitting](false)}\\nuseForm{[form]}\\nuseState{[name, setName](slice.slice_name || '')}\\nuseState{[selectedOwners, setSelectedOwners](null)}\\nuseState{[tags, setTags]([])}\\nuseMemo{tagsAsSelectValues}\\nuseCallback{fetchChartOwners}\\nuseMemo{loadOptions}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\");const _default =\nwithToasts(PropertiesModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FormItem, \"FormItem\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledFormItem, \"StyledFormItem\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledHelpBlock, \"StyledHelpBlock\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(PropertiesModal, \"PropertiesModal\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useMemo","useState","useCallback","useEffect","Modal","Input","TextArea","Button","AsyncSelect","Row","Col","AntdForm","rison","t","SupersetClient","styled","isFeatureEnabled","FeatureFlag","getClientErrorObject","ensureIsArray","withToasts","loadTags","fetchTags","OBJECT_TYPES","jsx","___EmotionJSX","FormItem","Item","StyledFormItem","StyledHelpBlock","span","_ref","process","env","NODE_ENV","name","styles","map","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","PropertiesModal","slice","onHide","onSave","show","addSuccessToast","submitting","setSubmitting","form","useForm","setName","slice_name","selectedOwners","setSelectedOwners","tags","setTags","tagsAsSelectValues","selectTags","tag","value","id","label","length","showError","error","statusText","message","errorText","title","content","okButtonProps","danger","className","fetchChartOwners","_chart$owners","response","get","endpoint","slice_id","chart","json","result","owners","owner","first_name","last_name","clientError","loadOptions","input","page","pageSize","query","encode","filter","page_size","then","data","item","extra","active","text","totalCount","count","onSubmit","values","certified_by","certifiedBy","certification_details","certificationDetails","description","cache_timeout","cacheTimeout","payload","o","TaggingSystem","res","put","headers","body","JSON","stringify","updatedChart","ownersLabel","objectType","CHART","objectId","includeTypes","handleChangeTags","parsedTags","r","handleClearTags","footer","Fragment","htmlType","buttonSize","onClick","cta","buttonStyle","submit","disabled","is_managed_externally","tooltip","responsive","wrapProps","onFinish","layout","initialValues","gutter","xs","md","required","type","onChange","event","_event$target$value","target","rows","style","maxWidth","marginTop","ariaLabel","mode","options","allowClear","css","onClear","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/PropertiesModal/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport rison from 'rison';\nimport {\n  t,\n  SupersetClient,\n  styled,\n  isFeatureEnabled,\n  FeatureFlag,\n  getClientErrorObject,\n  ensureIsArray,\n} from '@superset-ui/core';\nimport Chart, { Slice } from 'src/types/Chart';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';\nimport TagType from 'src/types/TagType';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  const [tags, setTags] = useState<TagType[]>([]);\n\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag: { id: number; name: string }) => ({\n      value: tag.id,\n      label: tag.name,\n    }));\n    return selectTags;\n  }, [tags.length]);\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result\n            .filter((item: { extra: { active: boolean } }) => item.extra.active)\n            .map((item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            })),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map(tag => tag.id);\n    }\n\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem)) return;\n    try {\n      fetchTags(\n        {\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false,\n        },\n        (tags: TagType[]) => setTags(tags),\n        error => {\n          showError(error);\n        },\n      );\n    } catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n\n  const handleChangeTags = (tags: { label: string; value: number }[]) => {\n    const parsedTags: TagType[] = ensureIsArray(tags).map(r => ({\n      id: r.value,\n      name: r.label,\n    }));\n    setTags(parsedTags);\n  };\n\n  const handleClearTags = () => {\n    setTags([]);\n  };\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title={t('Edit Chart Properties')}\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <AsyncSelect\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <h3 css={{ marginTop: '1em' }}>{t('Tags')}</h3>\n            )}\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <FormItem>\n                <AsyncSelect\n                  ariaLabel=\"Tags\"\n                  mode=\"multiple\"\n                  value={tagsAsSelectValues}\n                  options={loadTags}\n                  onChange={handleChangeTags}\n                  onClear={handleClearTags}\n                  allowClear\n                />\n                <StyledHelpBlock className=\"help-block\">\n                  {t('A list of tags that have been applied to this chart.')}\n                </StyledHelpBlock>\n              </FormItem>\n            )}\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}