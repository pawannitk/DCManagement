{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { css, styled, t, useTheme, NO_TIME_RANGE, useCSSTextTruncation, fetchTimeRange } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport Modal from 'src/components/Modal';\nimport { Divider } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport Select from 'src/components/Select/Select';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useDebouncedEffect } from 'src/explore/exploreUtils';\nimport { SLOW_DEBOUNCE } from 'src/constants';\nimport { noOp } from 'src/utils/common';\nimport ControlPopover from '../ControlPopover/ControlPopover';\nimport { DateFilterTestKey, FRAME_OPTIONS, guessFrame, useDefaultTimeFilter } from './utils';\nimport { CommonFrame, CalendarFrame, CustomFrame, AdvancedFrame, DateLabel } from './components';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledRangeType = styled(Select)`\n  width: 272px;\n`;\nconst ContentStyleWrapper = styled.div`\n  ${({ theme }) => css`\n    .ant-row {\n      margin-top: 8px;\n    }\n\n    .ant-input-number {\n      width: 100%;\n    }\n\n    .ant-picker {\n      padding: 4px 17px 4px;\n      border-radius: 4px;\n      width: 100%;\n    }\n\n    .ant-divider-horizontal {\n      margin: 16px 0;\n    }\n\n    .control-label {\n      font-size: 11px;\n      font-weight: ${theme.typography.weights.medium};\n      color: ${theme.colors.grayscale.light2};\n      line-height: 16px;\n      text-transform: uppercase;\n      margin: 8px 0;\n    }\n\n    .vertical-radio {\n      display: block;\n      height: 40px;\n      line-height: 40px;\n    }\n\n    .section-title {\n      font-style: normal;\n      font-weight: ${theme.typography.weights.bold};\n      font-size: 15px;\n      line-height: 24px;\n      margin-bottom: 8px;\n    }\n\n    .control-anchor-to {\n      margin-top: 16px;\n    }\n\n    .control-anchor-to-datetime {\n      width: 217px;\n    }\n\n    .footer {\n      text-align: right;\n    }\n  `}\n`;\nconst IconWrapper = styled.span`\n  span {\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\n    vertical-align: middle;\n  }\n  .text {\n    vertical-align: middle;\n  }\n  .error {\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n`;\nconst getTooltipTitle = (isLabelTruncated, label, range) => isLabelTruncated ? ___EmotionJSX(\"div\", null,\nlabel && ___EmotionJSX(\"strong\", null, label),\nrange && ___EmotionJSX(\"div\", { css: (theme) => css`\n            margin-top: ${theme.gridUnit}px;\n          ` },\nrange\n)\n) : range || null;\nexport default function DateFilterLabel(props) {var _props$value;\n  const { onChange, onOpenPopover = noOp, onClosePopover = noOp, overlayStyle = 'Popover', isOverflowingFilterBar = false } = props;\n  const defaultTimeFilter = useDefaultTimeFilter();\n  const value = (_props$value = props.value) != null ? _props$value : defaultTimeFilter;\n  const [actualTimeRange, setActualTimeRange] = useState(value);\n  const [show, setShow] = useState(false);\n  const guessedFrame = useMemo(() => guessFrame(value), [value]);\n  const [frame, setFrame] = useState(guessedFrame);\n  const [lastFetchedTimeRange, setLastFetchedTimeRange] = useState(value);\n  const [timeRangeValue, setTimeRangeValue] = useState(value);\n  const [validTimeRange, setValidTimeRange] = useState(false);\n  const [evalResponse, setEvalResponse] = useState(value);\n  const [tooltipTitle, setTooltipTitle] = useState(value);\n  const theme = useTheme();\n  const [labelRef, labelIsTruncated] = useCSSTextTruncation();\n  useEffect(() => {\n    if (value === NO_TIME_RANGE) {\n      setActualTimeRange(NO_TIME_RANGE);\n      setTooltipTitle(null);\n      setValidTimeRange(true);\n      return;\n    }\n    fetchTimeRange(value).then(({ value: actualRange, error }) => {\n      if (error) {\n        setEvalResponse(error || '');\n        setValidTimeRange(false);\n        setTooltipTitle(value || null);\n      } else\n      {\n        /*\n          HRT == human readable text\n          ADR == actual datetime range\n          +--------------+------+----------+--------+----------+-----------+\n          |              | Last | Previous | Custom | Advanced | No Filter |\n          +--------------+------+----------+--------+----------+-----------+\n          | control pill | HRT  | HRT      | ADR    | ADR      |   HRT     |\n          +--------------+------+----------+--------+----------+-----------+\n          | tooltip      | ADR  | ADR      | HRT    | HRT      |   ADR     |\n          +--------------+------+----------+--------+----------+-----------+\n        */\n        if (guessedFrame === 'Common' ||\n        guessedFrame === 'Calendar' ||\n        guessedFrame === 'No filter') {\n          setActualTimeRange(value);\n          setTooltipTitle(getTooltipTitle(labelIsTruncated, value, actualRange));\n        } else\n        {\n          setActualTimeRange(actualRange || '');\n          setTooltipTitle(getTooltipTitle(labelIsTruncated, actualRange, value));\n        }\n        setValidTimeRange(true);\n      }\n      setLastFetchedTimeRange(value);\n      setEvalResponse(actualRange || value);\n    });\n  }, [guessedFrame, labelIsTruncated, labelRef, value]);\n  useDebouncedEffect(() => {\n    if (timeRangeValue === NO_TIME_RANGE) {\n      setEvalResponse(NO_TIME_RANGE);\n      setLastFetchedTimeRange(NO_TIME_RANGE);\n      setValidTimeRange(true);\n      return;\n    }\n    if (lastFetchedTimeRange !== timeRangeValue) {\n      fetchTimeRange(timeRangeValue).then(({ value: actualRange, error }) => {\n        if (error) {\n          setEvalResponse(error || '');\n          setValidTimeRange(false);\n        } else\n        {\n          setEvalResponse(actualRange || '');\n          setValidTimeRange(true);\n        }\n        setLastFetchedTimeRange(timeRangeValue);\n      });\n    }\n  }, SLOW_DEBOUNCE, [timeRangeValue]);\n  function onSave() {\n    onChange(timeRangeValue);\n    setShow(false);\n    onClosePopover();\n  }\n  function onOpen() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(true);\n    onOpenPopover();\n  }\n  function onHide() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(false);\n    onClosePopover();\n  }\n  const toggleOverlay = () => {\n    if (show) {\n      onHide();\n    } else\n    {\n      onOpen();\n    }\n  };\n  function onChangeFrame(value) {\n    if (value === NO_TIME_RANGE) {\n      setTimeRangeValue(NO_TIME_RANGE);\n    }\n    setFrame(value);\n  }\n  const overlayContent = ___EmotionJSX(ContentStyleWrapper, null,\n  ___EmotionJSX(\"div\", { className: \"control-label\" }, t('RANGE TYPE')),\n  ___EmotionJSX(StyledRangeType, { ariaLabel: t('RANGE TYPE'), options: FRAME_OPTIONS, value: frame, onChange: onChangeFrame }),\n  frame !== 'No filter' && ___EmotionJSX(Divider, null),\n  frame === 'Common' && ___EmotionJSX(CommonFrame, { value: timeRangeValue, onChange: setTimeRangeValue }),\n  frame === 'Calendar' && ___EmotionJSX(CalendarFrame, { value: timeRangeValue, onChange: setTimeRangeValue }),\n  frame === 'Advanced' && ___EmotionJSX(AdvancedFrame, { value: timeRangeValue, onChange: setTimeRangeValue }),\n  frame === 'Custom' && ___EmotionJSX(CustomFrame, { value: timeRangeValue, onChange: setTimeRangeValue }),\n  frame === 'No filter' && ___EmotionJSX(\"div\", { \"data-test\": DateFilterTestKey.NoFilter }),\n  ___EmotionJSX(Divider, null),\n  ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(\"div\", { className: \"section-title\" }, t('Actual time range')),\n  validTimeRange && ___EmotionJSX(\"div\", null,\n  evalResponse === 'No filter' ? t('No filter') : evalResponse\n  ),\n  !validTimeRange && ___EmotionJSX(IconWrapper, { className: \"warning\" },\n  ___EmotionJSX(Icons.ErrorSolidSmall, { iconColor: theme.colors.error.base }),\n  ___EmotionJSX(\"span\", { className: \"text error\" }, evalResponse)\n  )\n  ),\n  ___EmotionJSX(Divider, null),\n  ___EmotionJSX(\"div\", { className: \"footer\" },\n  ___EmotionJSX(Button, { buttonStyle: \"secondary\", cta: true, key: \"cancel\", onClick: onHide, \"data-test\": DateFilterTestKey.CancelButton },\n  t('CANCEL')\n  ),\n  ___EmotionJSX(Button, { buttonStyle: \"primary\", cta: true, disabled: !validTimeRange, key: \"apply\", onClick: onSave, \"data-test\": DateFilterTestKey.ApplyButton },\n  t('APPLY')\n  )\n  )\n  );\n  const title = ___EmotionJSX(IconWrapper, null,\n  ___EmotionJSX(Icons.EditAlt, { iconColor: theme.colors.grayscale.base }),\n  ___EmotionJSX(\"span\", { className: \"text\" }, t('Edit time range'))\n  );\n  const popoverContent = ___EmotionJSX(ControlPopover, { placement: \"right\", trigger: \"click\", content: overlayContent, title: title, defaultVisible: show, visible: show, onVisibleChange: toggleOverlay, overlayStyle: { width: '600px' }, getPopupContainer: (triggerNode) => isOverflowingFilterBar ?\n    triggerNode.parentNode :\n    document.body, destroyTooltipOnHide: true },\n  ___EmotionJSX(Tooltip, { placement: \"top\", title: tooltipTitle, getPopupContainer: (trigger) => trigger.parentElement },\n  ___EmotionJSX(DateLabel, { label: actualTimeRange, isActive: show, isPlaceholder: actualTimeRange === NO_TIME_RANGE, \"data-test\": DateFilterTestKey.PopoverOverlay, ref: labelRef })\n  )\n  );\n  const modalContent = ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(Tooltip, { placement: \"top\", title: tooltipTitle, getPopupContainer: (trigger) => trigger.parentElement },\n  ___EmotionJSX(DateLabel, { onClick: toggleOverlay, label: actualTimeRange, isActive: show, isPlaceholder: actualTimeRange === NO_TIME_RANGE, \"data-test\": DateFilterTestKey.ModalOverlay, ref: labelRef })\n  ),\n\n  ___EmotionJSX(Modal, { title: title, show: show, onHide: toggleOverlay, width: \"600px\", hideFooter: true, zIndex: 1030 },\n  overlayContent\n  )\n  );\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(ControlHeader, props),\n  overlayStyle === 'Modal' ? modalContent : popoverContent\n  );\n}__signature__(DateFilterLabel, \"useDefaultTimeFilter{defaultTimeFilter}\\nuseState{[actualTimeRange, setActualTimeRange](value)}\\nuseState{[show, setShow](false)}\\nuseMemo{guessedFrame}\\nuseState{[frame, setFrame](guessedFrame)}\\nuseState{[lastFetchedTimeRange, setLastFetchedTimeRange](value)}\\nuseState{[timeRangeValue, setTimeRangeValue](value)}\\nuseState{[validTimeRange, setValidTimeRange](false)}\\nuseState{[evalResponse, setEvalResponse](value)}\\nuseState{[tooltipTitle, setTooltipTitle](value)}\\nuseTheme{theme}\\nuseCSSTextTruncation{[labelRef, labelIsTruncated]}\\nuseEffect{}\\nuseDebouncedEffect{}\", () => [useDefaultTimeFilter, useTheme, useCSSTextTruncation, useDebouncedEffect]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledRangeType, \"StyledRangeType\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx\");reactHotLoader.register(ContentStyleWrapper, \"ContentStyleWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx\");reactHotLoader.register(IconWrapper, \"IconWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx\");reactHotLoader.register(getTooltipTitle, \"getTooltipTitle\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx\");reactHotLoader.register(DateFilterLabel, \"DateFilterLabel\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useState","useEffect","useMemo","css","styled","t","useTheme","NO_TIME_RANGE","useCSSTextTruncation","fetchTimeRange","Button","ControlHeader","Modal","Divider","Icons","Select","Tooltip","useDebouncedEffect","SLOW_DEBOUNCE","noOp","ControlPopover","DateFilterTestKey","FRAME_OPTIONS","guessFrame","useDefaultTimeFilter","CommonFrame","CalendarFrame","CustomFrame","AdvancedFrame","DateLabel","jsx","___EmotionJSX","StyledRangeType","ContentStyleWrapper","div","theme","typography","weights","medium","colors","grayscale","light2","bold","IconWrapper","span","gridUnit","error","base","getTooltipTitle","isLabelTruncated","label","range","DateFilterLabel","props","_props$value","onChange","onOpenPopover","onClosePopover","overlayStyle","isOverflowingFilterBar","defaultTimeFilter","value","actualTimeRange","setActualTimeRange","show","setShow","guessedFrame","frame","setFrame","lastFetchedTimeRange","setLastFetchedTimeRange","timeRangeValue","setTimeRangeValue","validTimeRange","setValidTimeRange","evalResponse","setEvalResponse","tooltipTitle","setTooltipTitle","labelRef","labelIsTruncated","then","actualRange","onSave","onOpen","onHide","toggleOverlay","onChangeFrame","overlayContent","className","ariaLabel","options","NoFilter","ErrorSolidSmall","iconColor","buttonStyle","cta","key","onClick","CancelButton","disabled","ApplyButton","title","EditAlt","popoverContent","placement","trigger","content","defaultVisible","visible","onVisibleChange","width","getPopupContainer","triggerNode","parentNode","document","body","destroyTooltipOnHide","parentElement","isActive","isPlaceholder","PopoverOverlay","ref","modalContent","Fragment","ModalOverlay","hideFooter","zIndex","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, useState, useEffect, useMemo } from 'react';\nimport {\n  css,\n  styled,\n  t,\n  useTheme,\n  NO_TIME_RANGE,\n  SupersetTheme,\n  useCSSTextTruncation,\n  fetchTimeRange,\n} from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport Modal from 'src/components/Modal';\nimport { Divider } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport Select from 'src/components/Select/Select';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useDebouncedEffect } from 'src/explore/exploreUtils';\nimport { SLOW_DEBOUNCE } from 'src/constants';\nimport { noOp } from 'src/utils/common';\nimport ControlPopover from '../ControlPopover/ControlPopover';\n\nimport { DateFilterControlProps, FrameType } from './types';\nimport {\n  DateFilterTestKey,\n  FRAME_OPTIONS,\n  guessFrame,\n  useDefaultTimeFilter,\n} from './utils';\nimport {\n  CommonFrame,\n  CalendarFrame,\n  CustomFrame,\n  AdvancedFrame,\n  DateLabel,\n} from './components';\n\nconst StyledRangeType = styled(Select)`\n  width: 272px;\n`;\n\nconst ContentStyleWrapper = styled.div`\n  ${({ theme }) => css`\n    .ant-row {\n      margin-top: 8px;\n    }\n\n    .ant-input-number {\n      width: 100%;\n    }\n\n    .ant-picker {\n      padding: 4px 17px 4px;\n      border-radius: 4px;\n      width: 100%;\n    }\n\n    .ant-divider-horizontal {\n      margin: 16px 0;\n    }\n\n    .control-label {\n      font-size: 11px;\n      font-weight: ${theme.typography.weights.medium};\n      color: ${theme.colors.grayscale.light2};\n      line-height: 16px;\n      text-transform: uppercase;\n      margin: 8px 0;\n    }\n\n    .vertical-radio {\n      display: block;\n      height: 40px;\n      line-height: 40px;\n    }\n\n    .section-title {\n      font-style: normal;\n      font-weight: ${theme.typography.weights.bold};\n      font-size: 15px;\n      line-height: 24px;\n      margin-bottom: 8px;\n    }\n\n    .control-anchor-to {\n      margin-top: 16px;\n    }\n\n    .control-anchor-to-datetime {\n      width: 217px;\n    }\n\n    .footer {\n      text-align: right;\n    }\n  `}\n`;\n\nconst IconWrapper = styled.span`\n  span {\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\n    vertical-align: middle;\n  }\n  .text {\n    vertical-align: middle;\n  }\n  .error {\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n`;\n\nconst getTooltipTitle = (\n  isLabelTruncated: boolean,\n  label: string | undefined,\n  range: string | undefined,\n) =>\n  isLabelTruncated ? (\n    <div>\n      {label && <strong>{label}</strong>}\n      {range && (\n        <div\n          css={(theme: SupersetTheme) => css`\n            margin-top: ${theme.gridUnit}px;\n          `}\n        >\n          {range}\n        </div>\n      )}\n    </div>\n  ) : (\n    range || null\n  );\n\nexport default function DateFilterLabel(props: DateFilterControlProps) {\n  const {\n    onChange,\n    onOpenPopover = noOp,\n    onClosePopover = noOp,\n    overlayStyle = 'Popover',\n    isOverflowingFilterBar = false,\n  } = props;\n  const defaultTimeFilter = useDefaultTimeFilter();\n\n  const value = props.value ?? defaultTimeFilter;\n  const [actualTimeRange, setActualTimeRange] = useState<string>(value);\n\n  const [show, setShow] = useState<boolean>(false);\n  const guessedFrame = useMemo(() => guessFrame(value), [value]);\n  const [frame, setFrame] = useState<FrameType>(guessedFrame);\n  const [lastFetchedTimeRange, setLastFetchedTimeRange] = useState(value);\n  const [timeRangeValue, setTimeRangeValue] = useState(value);\n  const [validTimeRange, setValidTimeRange] = useState<boolean>(false);\n  const [evalResponse, setEvalResponse] = useState<string>(value);\n  const [tooltipTitle, setTooltipTitle] = useState<ReactNode | null>(value);\n  const theme = useTheme();\n  const [labelRef, labelIsTruncated] = useCSSTextTruncation<HTMLSpanElement>();\n\n  useEffect(() => {\n    if (value === NO_TIME_RANGE) {\n      setActualTimeRange(NO_TIME_RANGE);\n      setTooltipTitle(null);\n      setValidTimeRange(true);\n      return;\n    }\n    fetchTimeRange(value).then(({ value: actualRange, error }) => {\n      if (error) {\n        setEvalResponse(error || '');\n        setValidTimeRange(false);\n        setTooltipTitle(value || null);\n      } else {\n        /*\n          HRT == human readable text\n          ADR == actual datetime range\n          +--------------+------+----------+--------+----------+-----------+\n          |              | Last | Previous | Custom | Advanced | No Filter |\n          +--------------+------+----------+--------+----------+-----------+\n          | control pill | HRT  | HRT      | ADR    | ADR      |   HRT     |\n          +--------------+------+----------+--------+----------+-----------+\n          | tooltip      | ADR  | ADR      | HRT    | HRT      |   ADR     |\n          +--------------+------+----------+--------+----------+-----------+\n        */\n        if (\n          guessedFrame === 'Common' ||\n          guessedFrame === 'Calendar' ||\n          guessedFrame === 'No filter'\n        ) {\n          setActualTimeRange(value);\n          setTooltipTitle(\n            getTooltipTitle(labelIsTruncated, value, actualRange),\n          );\n        } else {\n          setActualTimeRange(actualRange || '');\n          setTooltipTitle(\n            getTooltipTitle(labelIsTruncated, actualRange, value),\n          );\n        }\n        setValidTimeRange(true);\n      }\n      setLastFetchedTimeRange(value);\n      setEvalResponse(actualRange || value);\n    });\n  }, [guessedFrame, labelIsTruncated, labelRef, value]);\n\n  useDebouncedEffect(\n    () => {\n      if (timeRangeValue === NO_TIME_RANGE) {\n        setEvalResponse(NO_TIME_RANGE);\n        setLastFetchedTimeRange(NO_TIME_RANGE);\n        setValidTimeRange(true);\n        return;\n      }\n      if (lastFetchedTimeRange !== timeRangeValue) {\n        fetchTimeRange(timeRangeValue).then(({ value: actualRange, error }) => {\n          if (error) {\n            setEvalResponse(error || '');\n            setValidTimeRange(false);\n          } else {\n            setEvalResponse(actualRange || '');\n            setValidTimeRange(true);\n          }\n          setLastFetchedTimeRange(timeRangeValue);\n        });\n      }\n    },\n    SLOW_DEBOUNCE,\n    [timeRangeValue],\n  );\n\n  function onSave() {\n    onChange(timeRangeValue);\n    setShow(false);\n    onClosePopover();\n  }\n\n  function onOpen() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(true);\n    onOpenPopover();\n  }\n\n  function onHide() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(false);\n    onClosePopover();\n  }\n\n  const toggleOverlay = () => {\n    if (show) {\n      onHide();\n    } else {\n      onOpen();\n    }\n  };\n\n  function onChangeFrame(value: FrameType) {\n    if (value === NO_TIME_RANGE) {\n      setTimeRangeValue(NO_TIME_RANGE);\n    }\n    setFrame(value);\n  }\n\n  const overlayContent = (\n    <ContentStyleWrapper>\n      <div className=\"control-label\">{t('RANGE TYPE')}</div>\n      <StyledRangeType\n        ariaLabel={t('RANGE TYPE')}\n        options={FRAME_OPTIONS}\n        value={frame}\n        onChange={onChangeFrame}\n      />\n      {frame !== 'No filter' && <Divider />}\n      {frame === 'Common' && (\n        <CommonFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Calendar' && (\n        <CalendarFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Advanced' && (\n        <AdvancedFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Custom' && (\n        <CustomFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'No filter' && <div data-test={DateFilterTestKey.NoFilter} />}\n      <Divider />\n      <div>\n        <div className=\"section-title\">{t('Actual time range')}</div>\n        {validTimeRange && (\n          <div>\n            {evalResponse === 'No filter' ? t('No filter') : evalResponse}\n          </div>\n        )}\n        {!validTimeRange && (\n          <IconWrapper className=\"warning\">\n            <Icons.ErrorSolidSmall iconColor={theme.colors.error.base} />\n            <span className=\"text error\">{evalResponse}</span>\n          </IconWrapper>\n        )}\n      </div>\n      <Divider />\n      <div className=\"footer\">\n        <Button\n          buttonStyle=\"secondary\"\n          cta\n          key=\"cancel\"\n          onClick={onHide}\n          data-test={DateFilterTestKey.CancelButton}\n        >\n          {t('CANCEL')}\n        </Button>\n        <Button\n          buttonStyle=\"primary\"\n          cta\n          disabled={!validTimeRange}\n          key=\"apply\"\n          onClick={onSave}\n          data-test={DateFilterTestKey.ApplyButton}\n        >\n          {t('APPLY')}\n        </Button>\n      </div>\n    </ContentStyleWrapper>\n  );\n\n  const title = (\n    <IconWrapper>\n      <Icons.EditAlt iconColor={theme.colors.grayscale.base} />\n      <span className=\"text\">{t('Edit time range')}</span>\n    </IconWrapper>\n  );\n\n  const popoverContent = (\n    <ControlPopover\n      placement=\"right\"\n      trigger=\"click\"\n      content={overlayContent}\n      title={title}\n      defaultVisible={show}\n      visible={show}\n      onVisibleChange={toggleOverlay}\n      overlayStyle={{ width: '600px' }}\n      getPopupContainer={triggerNode =>\n        isOverflowingFilterBar\n          ? (triggerNode.parentNode as HTMLElement)\n          : document.body\n      }\n      destroyTooltipOnHide\n    >\n      <Tooltip\n        placement=\"top\"\n        title={tooltipTitle}\n        getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n      >\n        <DateLabel\n          label={actualTimeRange}\n          isActive={show}\n          isPlaceholder={actualTimeRange === NO_TIME_RANGE}\n          data-test={DateFilterTestKey.PopoverOverlay}\n          ref={labelRef}\n        />\n      </Tooltip>\n    </ControlPopover>\n  );\n\n  const modalContent = (\n    <>\n      <Tooltip\n        placement=\"top\"\n        title={tooltipTitle}\n        getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n      >\n        <DateLabel\n          onClick={toggleOverlay}\n          label={actualTimeRange}\n          isActive={show}\n          isPlaceholder={actualTimeRange === NO_TIME_RANGE}\n          data-test={DateFilterTestKey.ModalOverlay}\n          ref={labelRef}\n        />\n      </Tooltip>\n      {/* the zIndex value is from trying so that the Modal doesn't overlay the AdhocFilter */}\n      <Modal\n        title={title}\n        show={show}\n        onHide={toggleOverlay}\n        width=\"600px\"\n        hideFooter\n        zIndex={1030}\n      >\n        {overlayContent}\n      </Modal>\n    </>\n  );\n\n  return (\n    <>\n      <ControlHeader {...props} />\n      {overlayStyle === 'Modal' ? modalContent : popoverContent}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}