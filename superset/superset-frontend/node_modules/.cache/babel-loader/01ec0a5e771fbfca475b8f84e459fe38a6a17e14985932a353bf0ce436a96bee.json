{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitationsxw\n * under the License.\n */\nimport { ensureIsArray, getColumnLabel, getMetricLabel } from '@superset-ui/core';\nconst PERCENTILE_REGEX = /(\\d+)\\/(\\d+) percentiles/;\nexport const boxplotOperator = (formData, queryObject) => {\n  const { groupby, whiskerOptions } = formData;\n  if (whiskerOptions) {\n    let whiskerType;\n    let percentiles;\n    const percentileMatch = PERCENTILE_REGEX.exec(whiskerOptions);\n    if (whiskerOptions === 'Tukey' || !whiskerOptions) {\n      whiskerType = 'tukey';\n    } else\n    if (whiskerOptions === 'Min/max (no outliers)') {\n      whiskerType = 'min/max';\n    } else\n    if (percentileMatch) {\n      whiskerType = 'percentile';\n      percentiles = [\n      parseInt(percentileMatch[1], 10),\n      parseInt(percentileMatch[2], 10)];\n\n    } else\n    {\n      throw new Error(`Unsupported whisker type: ${whiskerOptions}`);\n    }\n    return {\n      operation: 'boxplot',\n      options: {\n        whisker_type: whiskerType,\n        percentiles,\n        groupby: ensureIsArray(groupby).map(getColumnLabel),\n        metrics: ensureIsArray(queryObject.metrics).map(getMetricLabel)\n      }\n    };\n  }\n  return undefined;\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PERCENTILE_REGEX, \"PERCENTILE_REGEX\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/operators/boxplotOperator.ts\");reactHotLoader.register(boxplotOperator, \"boxplotOperator\", \"/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/operators/boxplotOperator.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ensureIsArray","getColumnLabel","getMetricLabel","PERCENTILE_REGEX","boxplotOperator","formData","queryObject","groupby","whiskerOptions","whiskerType","percentiles","percentileMatch","exec","parseInt","Error","operation","options","whisker_type","map","metrics","undefined","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/packages/superset-ui-chart-controls/src/operators/boxplotOperator.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitationsxw\n * under the License.\n */\nimport {\n  ensureIsArray,\n  getColumnLabel,\n  getMetricLabel,\n  PostProcessingBoxplot,\n  BoxPlotQueryObjectWhiskerType,\n} from '@superset-ui/core';\nimport { PostProcessingFactory } from './types';\n\nconst PERCENTILE_REGEX = /(\\d+)\\/(\\d+) percentiles/;\n\nexport const boxplotOperator: PostProcessingFactory<PostProcessingBoxplot> = (\n  formData,\n  queryObject,\n) => {\n  const { groupby, whiskerOptions } = formData;\n\n  if (whiskerOptions) {\n    let whiskerType: BoxPlotQueryObjectWhiskerType;\n    let percentiles: [number, number] | undefined;\n    const percentileMatch = PERCENTILE_REGEX.exec(whiskerOptions as string);\n\n    if (whiskerOptions === 'Tukey' || !whiskerOptions) {\n      whiskerType = 'tukey';\n    } else if (whiskerOptions === 'Min/max (no outliers)') {\n      whiskerType = 'min/max';\n    } else if (percentileMatch) {\n      whiskerType = 'percentile';\n      percentiles = [\n        parseInt(percentileMatch[1], 10),\n        parseInt(percentileMatch[2], 10),\n      ];\n    } else {\n      throw new Error(`Unsupported whisker type: ${whiskerOptions}`);\n    }\n\n    return {\n      operation: 'boxplot',\n      options: {\n        whisker_type: whiskerType,\n        percentiles,\n        groupby: ensureIsArray(groupby).map(getColumnLabel),\n        metrics: ensureIsArray(queryObject.metrics).map(getMetricLabel),\n      },\n    };\n  }\n  return undefined;\n};\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SACEA,aAAa,EACbC,cAAc,EACdC,cAAc,QAGT,mBAAmB;AAG1B,MAAMC,gBAAgB,GAAG,0BAA0B;AAEnD,OAAO,MAAMC,eAAe,GAAiDA,CAC3EC,QAAQ,EACRC,WAAW,KACT;EACF,MAAM,EAAEC,OAAO,EAAEC,cAAc,EAAE,GAAGH,QAAQ;EAE5C,IAAIG,cAAc,EAAE;IAClB,IAAIC,WAA0C;IAC9C,IAAIC,WAAyC;IAC7C,MAAMC,eAAe,GAAGR,gBAAgB,CAACS,IAAI,CAACJ,cAAwB,CAAC;IAEvE,IAAIA,cAAc,KAAK,OAAO,IAAI,CAACA,cAAc,EAAE;MACjDC,WAAW,GAAG,OAAO;KACtB;IAAM,IAAID,cAAc,KAAK,uBAAuB,EAAE;MACrDC,WAAW,GAAG,SAAS;KACxB;IAAM,IAAIE,eAAe,EAAE;MAC1BF,WAAW,GAAG,YAAY;MAC1BC,WAAW,GAAG;MACZG,QAAQ,CAACF,eAAe,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAChCE,QAAQ,CAACF,eAAe,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CACjC;;KACF;IAAM;MACL,MAAM,IAAIG,KAAK,CAAC,6BAA6BN,cAAc,EAAE,CAAC;;IAGhE,OAAO;MACLO,SAAS,EAAE,SAAS;MACpBC,OAAO,EAAE;QACPC,YAAY,EAAER,WAAW;QACzBC,WAAW;QACXH,OAAO,EAAEP,aAAa,CAACO,OAAO,CAAC,CAACW,GAAG,CAACjB,cAAc,CAAC;QACnDkB,OAAO,EAAEnB,aAAa,CAACM,WAAW,CAACa,OAAO,CAAC,CAACD,GAAG,CAAChB,cAAc;;KAEjE;;EAEH,OAAOkB,SAAS;AAClB,CAAC,CAAC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAH,SAAA,MAAAC,cAAA,WAAAA,cAAA,CAAAG,QAAA,CAtCIrB,gBAAgB,qJAAAkB,cAAA,CAAAG,QAAA,CAETpB,eAAe,4KAAAqB,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAL,SAAA,CAAAK,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}