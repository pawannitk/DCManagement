{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /* eslint-disable react/sort-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint no-param-reassign: [2, {\"props\": false}] */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { hierarchy } from 'd3-hierarchy';\nimport {\n  getNumberFormatter,\n  getTimeFormatter,\n  CategoricalColorNamespace } from\n'@superset-ui/core';\n\n// Compute dx, dy, x, y for each node and\n// return an array of nodes in breadth-first order\nfunction init(root) {\n  const flat = [];\n  const dy = 1 / (root.height + 1);\n  let prev = null;\n  root.each((n) => {\n    n.y = dy * n.depth;\n    n.dy = dy;\n    if (n.parent) {\n      n.x = prev.depth === n.parent.depth ? 0 : prev.x + prev.dx;\n      n.dx = n.weight / n.parent.sum * n.parent.dx;\n    } else {\n      n.x = 0;\n      n.dx = 1;\n    }\n    prev = n;\n    flat.push(n);\n  });\n\n  return flat;\n}\n\n// Declare PropTypes for recursive data structures\n// https://github.com/facebook/react/issues/5676\n/* eslint-disable-next-line  no-undef */\nconst lazyFunction = (f) => () => f().apply(this, arguments);\nconst leafType = PropTypes.shape({\n  name: PropTypes.string,\n  val: PropTypes.number.isRequired\n});\nconst parentShape = {\n  name: PropTypes.string,\n  val: PropTypes.number.isRequired,\n  children: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n    PropTypes.shape(lazyFunction(() => parentShape)),\n    leafType]\n    )\n  )\n};\nconst nodeType = PropTypes.oneOfType([PropTypes.shape(parentShape), leafType]);\n\nconst propTypes = {\n  data: PropTypes.arrayOf(nodeType), // array of rootNode\n  width: PropTypes.number,\n  height: PropTypes.number,\n  colorScheme: PropTypes.string,\n  dateTimeFormat: PropTypes.string,\n  equalDateSize: PropTypes.bool,\n  levels: PropTypes.arrayOf(PropTypes.string),\n  metrics: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n  ),\n  numberFormat: PropTypes.string,\n  partitionLimit: PropTypes.number,\n  partitionThreshold: PropTypes.number,\n  timeSeriesOption: PropTypes.string,\n  useLogScale: PropTypes.bool,\n  useRichTooltip: PropTypes.bool\n};\n\nfunction getAncestors(d) {\n  const ancestors = [d];\n  let node = d;\n  while (node.parent) {\n    ancestors.push(node.parent);\n    node = node.parent;\n  }\n\n  return ancestors;\n}\n\n// This vis is based on\n// http://mbostock.github.io/d3/talk/20111018/partition.html\nfunction Icicle(element, props) {\n  const {\n    width,\n    height,\n    data,\n    colorScheme,\n    dateTimeFormat,\n    equalDateSize,\n    levels,\n    useLogScale = false,\n    metrics = [],\n    numberFormat,\n    partitionLimit,\n    partitionThreshold,\n    useRichTooltip,\n    timeSeriesOption = 'not_time',\n    sliceId\n  } = props;\n\n  const div = d3.select(element);\n  div.classed('superset-legacy-chart-partition', true);\n\n  // Chart options\n  const chartType = timeSeriesOption;\n  const hasTime = ['adv_anal', 'time_series'].includes(chartType);\n  const format = getNumberFormatter(numberFormat);\n  const timeFormat = getTimeFormatter(dateTimeFormat);\n  const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n\n  div.selectAll('*').remove();\n  const tooltip = div.append('div').classed('partition-tooltip', true);\n\n  function hasDateNode(n) {\n    return metrics.includes(n.data.name) && hasTime;\n  }\n\n  function getCategory(depth) {\n    if (!depth) {\n      return 'Metric';\n    }\n    if (hasTime && depth === 1) {\n      return 'Date';\n    }\n\n    return levels[depth - (hasTime ? 2 : 1)];\n  }\n\n  function drawVis(i, dat) {\n    const datum = dat[i];\n    const w = width;\n    const h = height / data.length;\n    const x = d3.scale.linear().range([0, w]);\n    const y = d3.scale.linear().range([0, h]);\n\n    const viz = div.\n    append('div').\n    attr('class', 'chart').\n    style('width', `${w}px`).\n    style('height', `${h}px`).\n    append('svg:svg').\n    attr('width', w).\n    attr('height', h);\n\n    // Add padding between multiple visualizations\n    if (i !== data.length - 1 && data.length > 1) {\n      viz.style('padding-bottom', '3px');\n    }\n    if (i !== 0 && data.length > 1) {\n      viz.style('padding-top', '3px');\n    }\n\n    const root = hierarchy(datum);\n\n    // node.name is the metric/group name\n    // node.disp is the display value\n    // node.value determines sorting order\n    // node.weight determines partition height\n    // node.sum is the sum of children weights\n    root.eachAfter((n) => {\n      n.disp = n.data.val;\n      n.value = n.disp < 0 ? -n.disp : n.disp;\n      n.weight = n.value;\n      n.name = n.data.name;\n      // If the parent is a metric and we still have\n      // the time column, perform a date-time format\n      if (n.parent && hasDateNode(n.parent)) {\n        // Format timestamp values\n        n.weight = equalDateSize ? 1 : n.value;\n        n.value = n.name;\n        n.name = timeFormat(n.name);\n      }\n      if (useLogScale) n.weight = Math.log(n.weight + 1);\n      n.disp =\n      n.disp && !Number.isNaN(n.disp) && Number.isFinite(n.disp) ?\n      format(n.disp) :\n      '';\n    });\n    // Perform sort by weight\n    root.sort((a, b) => {\n      const v = b.value - a.value;\n      if (v === 0) {\n        return b.name > a.name ? 1 : -1;\n      }\n\n      return v;\n    });\n\n    // Prune data based on partition limit and threshold\n    // both are applied at the same time\n    if (partitionThreshold && partitionThreshold >= 0) {\n      // Compute weight sums as we go\n      root.each((n) => {\n        n.sum = n.children ?\n        n.children.reduce((a, v) => a + v.weight, 0) || 1 :\n        1;\n        if (n.children) {\n          // Dates are not ordered by weight\n          if (hasDateNode(n)) {\n            if (equalDateSize) {\n              return;\n            }\n            const removeIndices = [];\n            // Keep at least one child\n            for (let j = 1; j < n.children.length; j += 1) {\n              if (n.children[j].weight / n.sum < partitionThreshold) {\n                removeIndices.push(j);\n              }\n            }\n            for (let j = removeIndices.length - 1; j >= 0; j -= 1) {\n              n.children.splice(removeIndices[j], 1);\n            }\n          } else {\n            // Find first child that falls below the threshold\n            let j;\n            for (j = 1; j < n.children.length; j += 1) {\n              if (n.children[j].weight / n.sum < partitionThreshold) {\n                break;\n              }\n            }\n            n.children = n.children.slice(0, j);\n          }\n        }\n      });\n    }\n    if (partitionLimit && partitionLimit >= 0) {\n      root.each((n) => {\n        if (n.children && n.children.length > partitionLimit) {\n          if (!hasDateNode(n)) {\n            n.children = n.children.slice(0, partitionLimit);\n          }\n        }\n      });\n    }\n    // Compute final weight sums\n    root.eachAfter((n) => {\n      n.sum = n.children ?\n      n.children.reduce((a, v) => a + v.weight, 0) || 1 :\n      1;\n    });\n\n    function positionAndPopulate(tip, d) {\n      let t = '<table>';\n      if (useRichTooltip) {\n        const nodes = getAncestors(d);\n        nodes.reverse().forEach((n) => {\n          t += '<tbody>';\n          t +=\n          '<tr>' +\n          '<td>' +\n          '<div ' +\n          `style='border: 2px solid transparent;` +\n          `background-color: ${n.color};'` +\n          '></div>' +\n          '</td>' +\n          `<td>${getCategory(n.depth)}</td>` +\n          `<td>${n.name}</td>` +\n          `<td>${n.disp}</td>` +\n          '</tr>';\n        });\n      } else {\n        t +=\n        '<thead><tr><td colspan=\"3\">' +\n        `<strong>${getCategory(d.depth)}</strong>` +\n        '</td></tr></thead><tbody>';\n        t +=\n        '<tr>' +\n        '<td>' +\n        `<div style='border: thin solid grey; background-color: ${d.color};'` +\n        '></div>' +\n        '</td>' +\n        `<td>${d.name}</td>` +\n        `<td>${d.disp}</td>` +\n        '</tr>';\n      }\n      t += '</tbody></table>';\n      const [tipX, tipY] = d3.mouse(element);\n      tip.\n      html(t).\n      style('left', `${tipX + 15}px`).\n      style('top', `${tipY}px`);\n    }\n\n    const nodes = init(root);\n\n    let zoomX = w / root.dx;\n    let zoomY = h / 1;\n\n    // Keep text centered in its division\n    function transform(d) {\n      return `translate(8,${d.dx * zoomY / 2})`;\n    }\n\n    const g = viz.\n    selectAll('g').\n    data(nodes).\n    enter().\n    append('svg:g').\n    attr('transform', (d) => `translate(${x(d.y)},${y(d.x)})`).\n    on('mouseover', (d) => {\n      tooltip.interrupt().transition().duration(100).style('opacity', 0.9);\n      positionAndPopulate(tooltip, d);\n    }).\n    on('mousemove', (d) => {\n      positionAndPopulate(tooltip, d);\n    }).\n    on('mouseout', () => {\n      tooltip.interrupt().transition().duration(250).style('opacity', 0);\n    });\n\n    // When clicking a subdivision, the vis will zoom in to it\n    function click(d) {\n      if (!d.children) {\n        if (d.parent) {\n          // Clicking on the rightmost level should zoom in\n          return click(d.parent);\n        }\n\n        return false;\n      }\n      zoomX = (d.y ? w - 40 : w) / (1 - d.y);\n      zoomY = h / d.dx;\n      x.domain([d.y, 1]).range([d.y ? 40 : 0, w]);\n      y.domain([d.x, d.x + d.dx]);\n\n      const t = g.\n      transition().\n      duration(d3.event.altKey ? 7500 : 750).\n      attr('transform', (nd) => `translate(${x(nd.y)},${y(nd.x)})`);\n\n      t.select('rect').\n      attr('width', d.dy * zoomX).\n      attr('height', (nd) => nd.dx * zoomY);\n\n      t.select('text').\n      attr('transform', transform).\n      style('opacity', (nd) => nd.dx * zoomY > 12 ? 1 : 0);\n\n      d3.event.stopPropagation();\n\n      return true;\n    }\n\n    g.on('click', click);\n\n    g.append('svg:rect').\n    attr('width', root.dy * zoomX).\n    attr('height', (d) => d.dx * zoomY);\n\n    g.append('svg:text').\n    attr('transform', transform).\n    attr('dy', '0.35em').\n    style('opacity', (d) => d.dx * zoomY > 12 ? 1 : 0).\n    text((d) => {\n      if (!d.disp) {\n        return d.name;\n      }\n\n      return `${d.name}: ${d.disp}`;\n    });\n\n    // Apply color scheme\n    g.selectAll('rect').style('fill', (d) => {\n      d.color = colorFn(d.name, sliceId);\n\n      return d.color;\n    });\n  }\n\n  for (let i = 0; i < data.length; i += 1) {\n    drawVis(i, data);\n  }\n}\n\nIcicle.displayName = 'Icicle';\nIcicle.propTypes = propTypes;const _default =\n\nIcicle;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(init, \"init\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(lazyFunction, \"lazyFunction\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(leafType, \"leafType\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(parentShape, \"parentShape\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(nodeType, \"nodeType\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(getAncestors, \"getAncestors\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(Icicle, \"Icicle\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["d3","PropTypes","hierarchy","getNumberFormatter","getTimeFormatter","CategoricalColorNamespace","init","root","flat","dy","height","prev","each","n","y","depth","parent","x","dx","weight","sum","push","lazyFunction","f","apply","arguments","leafType","shape","name","string","val","number","isRequired","parentShape","children","arrayOf","oneOfType","nodeType","propTypes","data","width","colorScheme","dateTimeFormat","equalDateSize","bool","levels","metrics","object","numberFormat","partitionLimit","partitionThreshold","timeSeriesOption","useLogScale","useRichTooltip","getAncestors","d","ancestors","node","Icicle","element","props","sliceId","div","select","classed","chartType","hasTime","includes","format","timeFormat","colorFn","getScale","selectAll","remove","tooltip","append","hasDateNode","getCategory","drawVis","i","dat","datum","w","h","length","scale","linear","range","viz","attr","style","eachAfter","disp","value","Math","log","Number","isNaN","isFinite","sort","a","b","v","reduce","removeIndices","j","splice","slice","positionAndPopulate","tip","t","nodes","reverse","forEach","color","tipX","tipY","mouse","html","zoomX","zoomY","transform","g","enter","on","interrupt","transition","duration","click","domain","event","altKey","nd","stopPropagation","text","displayName","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-plugin-chart-partition/src/Partition.js"],"sourcesContent":["/* eslint-disable react/sort-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint no-param-reassign: [2, {\"props\": false}] */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { hierarchy } from 'd3-hierarchy';\nimport {\n  getNumberFormatter,\n  getTimeFormatter,\n  CategoricalColorNamespace,\n} from '@superset-ui/core';\n\n// Compute dx, dy, x, y for each node and\n// return an array of nodes in breadth-first order\nfunction init(root) {\n  const flat = [];\n  const dy = 1 / (root.height + 1);\n  let prev = null;\n  root.each(n => {\n    n.y = dy * n.depth;\n    n.dy = dy;\n    if (n.parent) {\n      n.x = prev.depth === n.parent.depth ? 0 : prev.x + prev.dx;\n      n.dx = (n.weight / n.parent.sum) * n.parent.dx;\n    } else {\n      n.x = 0;\n      n.dx = 1;\n    }\n    prev = n;\n    flat.push(n);\n  });\n\n  return flat;\n}\n\n// Declare PropTypes for recursive data structures\n// https://github.com/facebook/react/issues/5676\n/* eslint-disable-next-line  no-undef */\nconst lazyFunction = f => () => f().apply(this, arguments);\nconst leafType = PropTypes.shape({\n  name: PropTypes.string,\n  val: PropTypes.number.isRequired,\n});\nconst parentShape = {\n  name: PropTypes.string,\n  val: PropTypes.number.isRequired,\n  children: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.shape(lazyFunction(() => parentShape)),\n      leafType,\n    ]),\n  ),\n};\nconst nodeType = PropTypes.oneOfType([PropTypes.shape(parentShape), leafType]);\n\nconst propTypes = {\n  data: PropTypes.arrayOf(nodeType), // array of rootNode\n  width: PropTypes.number,\n  height: PropTypes.number,\n  colorScheme: PropTypes.string,\n  dateTimeFormat: PropTypes.string,\n  equalDateSize: PropTypes.bool,\n  levels: PropTypes.arrayOf(PropTypes.string),\n  metrics: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  ),\n  numberFormat: PropTypes.string,\n  partitionLimit: PropTypes.number,\n  partitionThreshold: PropTypes.number,\n  timeSeriesOption: PropTypes.string,\n  useLogScale: PropTypes.bool,\n  useRichTooltip: PropTypes.bool,\n};\n\nfunction getAncestors(d) {\n  const ancestors = [d];\n  let node = d;\n  while (node.parent) {\n    ancestors.push(node.parent);\n    node = node.parent;\n  }\n\n  return ancestors;\n}\n\n// This vis is based on\n// http://mbostock.github.io/d3/talk/20111018/partition.html\nfunction Icicle(element, props) {\n  const {\n    width,\n    height,\n    data,\n    colorScheme,\n    dateTimeFormat,\n    equalDateSize,\n    levels,\n    useLogScale = false,\n    metrics = [],\n    numberFormat,\n    partitionLimit,\n    partitionThreshold,\n    useRichTooltip,\n    timeSeriesOption = 'not_time',\n    sliceId,\n  } = props;\n\n  const div = d3.select(element);\n  div.classed('superset-legacy-chart-partition', true);\n\n  // Chart options\n  const chartType = timeSeriesOption;\n  const hasTime = ['adv_anal', 'time_series'].includes(chartType);\n  const format = getNumberFormatter(numberFormat);\n  const timeFormat = getTimeFormatter(dateTimeFormat);\n  const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n\n  div.selectAll('*').remove();\n  const tooltip = div.append('div').classed('partition-tooltip', true);\n\n  function hasDateNode(n) {\n    return metrics.includes(n.data.name) && hasTime;\n  }\n\n  function getCategory(depth) {\n    if (!depth) {\n      return 'Metric';\n    }\n    if (hasTime && depth === 1) {\n      return 'Date';\n    }\n\n    return levels[depth - (hasTime ? 2 : 1)];\n  }\n\n  function drawVis(i, dat) {\n    const datum = dat[i];\n    const w = width;\n    const h = height / data.length;\n    const x = d3.scale.linear().range([0, w]);\n    const y = d3.scale.linear().range([0, h]);\n\n    const viz = div\n      .append('div')\n      .attr('class', 'chart')\n      .style('width', `${w}px`)\n      .style('height', `${h}px`)\n      .append('svg:svg')\n      .attr('width', w)\n      .attr('height', h);\n\n    // Add padding between multiple visualizations\n    if (i !== data.length - 1 && data.length > 1) {\n      viz.style('padding-bottom', '3px');\n    }\n    if (i !== 0 && data.length > 1) {\n      viz.style('padding-top', '3px');\n    }\n\n    const root = hierarchy(datum);\n\n    // node.name is the metric/group name\n    // node.disp is the display value\n    // node.value determines sorting order\n    // node.weight determines partition height\n    // node.sum is the sum of children weights\n    root.eachAfter(n => {\n      n.disp = n.data.val;\n      n.value = n.disp < 0 ? -n.disp : n.disp;\n      n.weight = n.value;\n      n.name = n.data.name;\n      // If the parent is a metric and we still have\n      // the time column, perform a date-time format\n      if (n.parent && hasDateNode(n.parent)) {\n        // Format timestamp values\n        n.weight = equalDateSize ? 1 : n.value;\n        n.value = n.name;\n        n.name = timeFormat(n.name);\n      }\n      if (useLogScale) n.weight = Math.log(n.weight + 1);\n      n.disp =\n        n.disp && !Number.isNaN(n.disp) && Number.isFinite(n.disp)\n          ? format(n.disp)\n          : '';\n    });\n    // Perform sort by weight\n    root.sort((a, b) => {\n      const v = b.value - a.value;\n      if (v === 0) {\n        return b.name > a.name ? 1 : -1;\n      }\n\n      return v;\n    });\n\n    // Prune data based on partition limit and threshold\n    // both are applied at the same time\n    if (partitionThreshold && partitionThreshold >= 0) {\n      // Compute weight sums as we go\n      root.each(n => {\n        n.sum = n.children\n          ? n.children.reduce((a, v) => a + v.weight, 0) || 1\n          : 1;\n        if (n.children) {\n          // Dates are not ordered by weight\n          if (hasDateNode(n)) {\n            if (equalDateSize) {\n              return;\n            }\n            const removeIndices = [];\n            // Keep at least one child\n            for (let j = 1; j < n.children.length; j += 1) {\n              if (n.children[j].weight / n.sum < partitionThreshold) {\n                removeIndices.push(j);\n              }\n            }\n            for (let j = removeIndices.length - 1; j >= 0; j -= 1) {\n              n.children.splice(removeIndices[j], 1);\n            }\n          } else {\n            // Find first child that falls below the threshold\n            let j;\n            for (j = 1; j < n.children.length; j += 1) {\n              if (n.children[j].weight / n.sum < partitionThreshold) {\n                break;\n              }\n            }\n            n.children = n.children.slice(0, j);\n          }\n        }\n      });\n    }\n    if (partitionLimit && partitionLimit >= 0) {\n      root.each(n => {\n        if (n.children && n.children.length > partitionLimit) {\n          if (!hasDateNode(n)) {\n            n.children = n.children.slice(0, partitionLimit);\n          }\n        }\n      });\n    }\n    // Compute final weight sums\n    root.eachAfter(n => {\n      n.sum = n.children\n        ? n.children.reduce((a, v) => a + v.weight, 0) || 1\n        : 1;\n    });\n\n    function positionAndPopulate(tip, d) {\n      let t = '<table>';\n      if (useRichTooltip) {\n        const nodes = getAncestors(d);\n        nodes.reverse().forEach(n => {\n          t += '<tbody>';\n          t +=\n            '<tr>' +\n            '<td>' +\n            '<div ' +\n            `style='border: 2px solid transparent;` +\n            `background-color: ${n.color};'` +\n            '></div>' +\n            '</td>' +\n            `<td>${getCategory(n.depth)}</td>` +\n            `<td>${n.name}</td>` +\n            `<td>${n.disp}</td>` +\n            '</tr>';\n        });\n      } else {\n        t +=\n          '<thead><tr><td colspan=\"3\">' +\n          `<strong>${getCategory(d.depth)}</strong>` +\n          '</td></tr></thead><tbody>';\n        t +=\n          '<tr>' +\n          '<td>' +\n          `<div style='border: thin solid grey; background-color: ${d.color};'` +\n          '></div>' +\n          '</td>' +\n          `<td>${d.name}</td>` +\n          `<td>${d.disp}</td>` +\n          '</tr>';\n      }\n      t += '</tbody></table>';\n      const [tipX, tipY] = d3.mouse(element);\n      tip\n        .html(t)\n        .style('left', `${tipX + 15}px`)\n        .style('top', `${tipY}px`);\n    }\n\n    const nodes = init(root);\n\n    let zoomX = w / root.dx;\n    let zoomY = h / 1;\n\n    // Keep text centered in its division\n    function transform(d) {\n      return `translate(8,${(d.dx * zoomY) / 2})`;\n    }\n\n    const g = viz\n      .selectAll('g')\n      .data(nodes)\n      .enter()\n      .append('svg:g')\n      .attr('transform', d => `translate(${x(d.y)},${y(d.x)})`)\n      .on('mouseover', d => {\n        tooltip.interrupt().transition().duration(100).style('opacity', 0.9);\n        positionAndPopulate(tooltip, d);\n      })\n      .on('mousemove', d => {\n        positionAndPopulate(tooltip, d);\n      })\n      .on('mouseout', () => {\n        tooltip.interrupt().transition().duration(250).style('opacity', 0);\n      });\n\n    // When clicking a subdivision, the vis will zoom in to it\n    function click(d) {\n      if (!d.children) {\n        if (d.parent) {\n          // Clicking on the rightmost level should zoom in\n          return click(d.parent);\n        }\n\n        return false;\n      }\n      zoomX = (d.y ? w - 40 : w) / (1 - d.y);\n      zoomY = h / d.dx;\n      x.domain([d.y, 1]).range([d.y ? 40 : 0, w]);\n      y.domain([d.x, d.x + d.dx]);\n\n      const t = g\n        .transition()\n        .duration(d3.event.altKey ? 7500 : 750)\n        .attr('transform', nd => `translate(${x(nd.y)},${y(nd.x)})`);\n\n      t.select('rect')\n        .attr('width', d.dy * zoomX)\n        .attr('height', nd => nd.dx * zoomY);\n\n      t.select('text')\n        .attr('transform', transform)\n        .style('opacity', nd => (nd.dx * zoomY > 12 ? 1 : 0));\n\n      d3.event.stopPropagation();\n\n      return true;\n    }\n\n    g.on('click', click);\n\n    g.append('svg:rect')\n      .attr('width', root.dy * zoomX)\n      .attr('height', d => d.dx * zoomY);\n\n    g.append('svg:text')\n      .attr('transform', transform)\n      .attr('dy', '0.35em')\n      .style('opacity', d => (d.dx * zoomY > 12 ? 1 : 0))\n      .text(d => {\n        if (!d.disp) {\n          return d.name;\n        }\n\n        return `${d.name}: ${d.disp}`;\n      });\n\n    // Apply color scheme\n    g.selectAll('rect').style('fill', d => {\n      d.color = colorFn(d.name, sliceId);\n\n      return d.color;\n    });\n  }\n\n  for (let i = 0; i < data.length; i += 1) {\n    drawVis(i, data);\n  }\n}\n\nIcicle.displayName = 'Icicle';\nIcicle.propTypes = propTypes;\n\nexport default Icicle;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}