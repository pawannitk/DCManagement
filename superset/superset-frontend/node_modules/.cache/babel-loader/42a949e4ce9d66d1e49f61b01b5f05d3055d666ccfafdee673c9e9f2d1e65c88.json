{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport Alert from 'src/components/Alert';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { FeatureFlag, styled, t, isFeatureEnabled } from '@superset-ui/core';\nimport ResultSet from '../ResultSet';\nimport { LOCALSTORAGE_MAX_QUERY_AGE_MS } from '../../constants';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst EXTRA_HEIGHT_RESULTS = 8; // we need extra height in RESULTS tab. because the height from props was calculated based on PREVIEW tab.\nconst StyledEmptyStateWrapper = styled.div`\n  height: 100%;\n  .ant-empty-image img {\n    margin-right: 28px;\n  }\n\n  p {\n    margin-right: 28px;\n  }\n`;\nconst Results = ({ latestQueryId, height, displayLimit, defaultQueryLimit }) => {\n  const databases = useSelector(({ sqlLab: { databases } }) => databases, shallowEqual);\n  const latestQuery = useSelector(({ sqlLab: { queries } }) => queries[latestQueryId || ''], shallowEqual);\n  if (!latestQuery ||\n  Date.now() - latestQuery.startDttm > LOCALSTORAGE_MAX_QUERY_AGE_MS) {\n    return ___EmotionJSX(StyledEmptyStateWrapper, null,\n    ___EmotionJSX(EmptyStateMedium, { title: t('Run a query to display results'), image: \"document.svg\" })\n    );\n  }\n  if (isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) &&\n  latestQuery.state === 'success' &&\n  !latestQuery.resultsKey &&\n  !latestQuery.results) {\n    return ___EmotionJSX(Alert, { type: \"warning\", message: t('No stored results found, you need to re-run your query') });\n  }\n  return ___EmotionJSX(ResultSet, { search: true, queryId: latestQuery.id, height: height + EXTRA_HEIGHT_RESULTS, database: databases[latestQuery.dbId], displayLimit: displayLimit, defaultQueryLimit: defaultQueryLimit, showSql: true, showSqlInline: true });\n};__signature__(Results, \"useSelector{databases}\\nuseSelector{latestQuery}\", () => [useSelector, useSelector]);const _default =\nResults;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(EXTRA_HEIGHT_RESULTS, \"EXTRA_HEIGHT_RESULTS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(StyledEmptyStateWrapper, \"StyledEmptyStateWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(Results, \"Results\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","shallowEqual","useSelector","Alert","EmptyStateMedium","FeatureFlag","styled","t","isFeatureEnabled","ResultSet","LOCALSTORAGE_MAX_QUERY_AGE_MS","jsx","___EmotionJSX","EXTRA_HEIGHT_RESULTS","StyledEmptyStateWrapper","div","Results","latestQueryId","height","displayLimit","defaultQueryLimit","databases","sqlLab","latestQuery","queries","Date","now","startDttm","title","image","SqllabBackendPersistence","state","resultsKey","results","type","message","search","queryId","id","database","dbId","showSql","showSqlInline","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport Alert from 'src/components/Alert';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { FeatureFlag, styled, t, isFeatureEnabled } from '@superset-ui/core';\n\nimport { SqlLabRootState } from 'src/SqlLab/types';\nimport ResultSet from '../ResultSet';\nimport { LOCALSTORAGE_MAX_QUERY_AGE_MS } from '../../constants';\n\nconst EXTRA_HEIGHT_RESULTS = 8; // we need extra height in RESULTS tab. because the height from props was calculated based on PREVIEW tab.\n\ntype Props = {\n  latestQueryId?: string;\n  height: number;\n  displayLimit: number;\n  defaultQueryLimit: number;\n};\n\nconst StyledEmptyStateWrapper = styled.div`\n  height: 100%;\n  .ant-empty-image img {\n    margin-right: 28px;\n  }\n\n  p {\n    margin-right: 28px;\n  }\n`;\n\nconst Results: React.FC<Props> = ({\n  latestQueryId,\n  height,\n  displayLimit,\n  defaultQueryLimit,\n}) => {\n  const databases = useSelector(\n    ({ sqlLab: { databases } }: SqlLabRootState) => databases,\n    shallowEqual,\n  );\n  const latestQuery = useSelector(\n    ({ sqlLab: { queries } }: SqlLabRootState) => queries[latestQueryId || ''],\n    shallowEqual,\n  );\n\n  if (\n    !latestQuery ||\n    Date.now() - latestQuery.startDttm > LOCALSTORAGE_MAX_QUERY_AGE_MS\n  ) {\n    return (\n      <StyledEmptyStateWrapper>\n        <EmptyStateMedium\n          title={t('Run a query to display results')}\n          image=\"document.svg\"\n        />\n      </StyledEmptyStateWrapper>\n    );\n  }\n\n  if (\n    isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) &&\n    latestQuery.state === 'success' &&\n    !latestQuery.resultsKey &&\n    !latestQuery.results\n  ) {\n    return (\n      <Alert\n        type=\"warning\"\n        message={t('No stored results found, you need to re-run your query')}\n      />\n    );\n  }\n\n  return (\n    <ResultSet\n      search\n      queryId={latestQuery.id}\n      height={height + EXTRA_HEIGHT_RESULTS}\n      database={databases[latestQuery.dbId]}\n      displayLimit={displayLimit}\n      defaultQueryLimit={defaultQueryLimit}\n      showSql\n      showSqlInline\n    />\n  );\n};\n\nexport default Results;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,EAAEC,WAAW,QAAQ,aAAa;AACvD,OAAOC,KAAK,MAAM,sBAAsB;AACxC,SAASC,gBAAgB,QAAQ,2BAA2B;AAC5D,SAASC,WAAW,EAAEC,MAAM,EAAEC,CAAC,EAAEC,gBAAgB,QAAQ,mBAAmB;AAG5E,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,6BAA6B,QAAQ,iBAAiB,CAAC,SAAAC,GAAA,IAAAC,aAAA;AAEhE,MAAMC,oBAAoB,GAAG,CAAC,CAAC,CAAC;AAShC,MAAMC,uBAAuB,GAAGR,MAAM,CAACS,GAAG;;;;;;;;;CASzC;AAED,MAAMC,OAAO,GAAoBA,CAAC,EAChCC,aAAa,EACbC,MAAM,EACNC,YAAY,EACZC,iBAAiB,EAClB,KAAI;EACH,MAAMC,SAAS,GAAGnB,WAAW,CAC3B,CAAC,EAAEoB,MAAM,EAAE,EAAED,SAAS,EAAE,EAAmB,KAAKA,SAAS,EACzDpB,YAAY,CACb;EACD,MAAMsB,WAAW,GAAGrB,WAAW,CAC7B,CAAC,EAAEoB,MAAM,EAAE,EAAEE,OAAO,EAAE,EAAmB,KAAKA,OAAO,CAACP,aAAa,IAAI,EAAE,CAAC,EAC1EhB,YAAY,CACb;EAED,IACE,CAACsB,WAAW;EACZE,IAAI,CAACC,GAAG,EAAE,GAAGH,WAAW,CAACI,SAAS,GAAGjB,6BAA6B,EAClE;IACA,OACEE,aAAA,CAACE,uBAAuB;IACtBF,aAAA,CAACR,gBAAgB,IACfwB,KAAK,EAAErB,CAAC,CAAC,gCAAgC,CAAE,EAC3CsB,KAAK,EAAC,cAAc;IAEC,CAAC;;EAI9B,IACErB,gBAAgB,CAACH,WAAW,CAACyB,wBAAwB,CAAC;EACtDP,WAAW,CAACQ,KAAK,KAAK,SAAS;EAC/B,CAACR,WAAW,CAACS,UAAU;EACvB,CAACT,WAAW,CAACU,OAAO,EACpB;IACA,OACErB,aAAA,CAACT,KAAK,IACJ+B,IAAI,EAAC,SAAS,EACdC,OAAO,EAAE5B,CAAC,CAAC,wDAAwD,CAAE,GACrE;;EAIN,OACEK,aAAA,CAACH,SAAS,IACR2B,MAAM,QACNC,OAAO,EAAEd,WAAW,CAACe,EAAG,EACxBpB,MAAM,EAAEA,MAAM,GAAGL,oBAAqB,EACtC0B,QAAQ,EAAElB,SAAS,CAACE,WAAW,CAACiB,IAAI,CAAE,EACtCrB,YAAY,EAAEA,YAAa,EAC3BC,iBAAiB,EAAEA,iBAAkB,EACrCqB,OAAO,QACPC,aAAa,SACb;AAEN,CAAC,CAACC,aAAA,CAvDI3B,OAAO,6DAMOd,WAAW,EAITA,WAAW,SAAA0C,QAAA;AA+ClB5B,OAAO,CAAtB,eAAA4B,QAAA,CAAuB,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA7EjBpC,oBAAoB,gIAAAgC,cAAA,CAAAI,QAAA,CASpBnC,uBAAuB,mIAAA+B,cAAA,CAAAI,QAAA,CAWvBjC,OAAO,mHAAA6B,cAAA,CAAAI,QAAA,CAAAL,QAAA,2IAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}