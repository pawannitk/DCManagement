{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport { now, fDuration } from 'src/utils/dates';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TimerLabel = styled(Label)`\n  text-align: left;\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n`;\nexport default function Timer({ endTime, isRunning, startTime, status = 'success' }) {\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef();\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n  return ___EmotionJSX(TimerLabel, { type: status, role: \"timer\" },\n  clockStr\n  );\n}__signature__(Timer, \"useState{[clockStr, setClockStr]('00:00:00.00')}\\nuseRef{timer}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TimerLabel, \"TimerLabel\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Timer/index.tsx\");reactHotLoader.register(Timer, \"Timer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Timer/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useEffect","useRef","useState","styled","Label","now","fDuration","jsx","___EmotionJSX","TimerLabel","theme","typography","families","monospace","Timer","endTime","isRunning","startTime","status","clockStr","setClockStr","timer","stopTimer","current","clearInterval","undefined","setInterval","endDttm","type","role","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Timer/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport Label, { Type } from 'src/components/Label';\n\nimport { now, fDuration } from 'src/utils/dates';\n\nexport interface TimerProps {\n  endTime?: number;\n  isRunning: boolean;\n  startTime?: number;\n  status?: Type;\n}\n\nconst TimerLabel = styled(Label)`\n  text-align: left;\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n`;\n\nexport default function Timer({\n  endTime,\n  isRunning,\n  startTime,\n  status = 'success',\n}: TimerProps) {\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef<ReturnType<typeof setInterval>>();\n\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n\n  return (\n    <TimerLabel type={status} role=\"timer\">\n      {clockStr}\n    </TimerLabel>\n  );\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,OAAOC,KAAe,MAAM,sBAAsB;AAElD,SAASC,GAAG,EAAEC,SAAS,QAAQ,iBAAiB,CAAC,SAAAC,GAAA,IAAAC,aAAA;AASjD,MAAMC,UAAU,GAAGN,MAAM,CAACC,KAAK,CAAC;;iBAEf,CAAC,EAAEM,KAAK,EAAE,KAAKA,KAAK,CAACC,UAAU,CAACC,QAAQ,CAACC,SAAS;CAClE;AAED,eAAc,SAAUC,KAAKA,CAAC,EAC5BC,OAAO,EACPC,SAAS,EACTC,SAAS,EACTC,MAAM,GAAG,SAAS,EACP;EACX,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,aAAa,CAAC;EACvD,MAAMmB,KAAK,GAAGpB,MAAM,EAAkC;EAEtDD,SAAS,CAAC,MAAK;IACb,MAAMsB,SAAS,GAAGA,CAAA,KAAK;MACrB,IAAID,KAAK,CAACE,OAAO,EAAE;QACjBC,aAAa,CAACH,KAAK,CAACE,OAAO,CAAC;QAC5BF,KAAK,CAACE,OAAO,GAAGE,SAAS;;IAE7B,CAAC;IAED,IAAIT,SAAS,EAAE;MACbK,KAAK,CAACE,OAAO,GAAGG,WAAW,CAAC,MAAK;QAC/B,IAAIT,SAAS,EAAE;UACb,MAAMU,OAAO,GAAGZ,OAAO,IAAIV,GAAG,EAAE;UAChC,IAAIY,SAAS,GAAGU,OAAO,EAAE;YACvBP,WAAW,CAACd,SAAS,CAACW,SAAS,EAAEU,OAAO,CAAC,CAAC;;UAE5C,IAAI,CAACX,SAAS,EAAE;YACdM,SAAS,EAAE;;;MAGjB,CAAC,EAAE,EAAE,CAAC;;IAER,OAAOA,SAAS;EAClB,CAAC,EAAE,CAACP,OAAO,EAAEC,SAAS,EAAEC,SAAS,CAAC,CAAC;EAEnC,OACET,aAAA,CAACC,UAAU,IAACmB,IAAI,EAAEV,MAAO,EAACW,IAAI,EAAC,OAAO;EACnCV;EACS,CAAC;AAEjB,CAACW,aAAA,CAtCuBhB,KAAK,qGAAAiB,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAR,SAAA,MAAAM,cAAA,WAAAA,cAAA,CAAAG,QAAA,CALvBzB,UAAU,yGAAAsB,cAAA,CAAAG,QAAA,CAKQpB,KAAK,4HAAAqB,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAV,SAAA,CAAAU,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}