{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class LRUCache {\n  constructor(limit = 5) {\n    _defineProperty(this, \"limit\", void 0);\n\n    _defineProperty(this, \"_cache\", {});\n\n    _defineProperty(this, \"_order\", []);\n\n    this.limit = limit;\n  }\n\n  get(key) {\n    const value = this._cache[key];\n\n    if (value) {\n      this._deleteOrder(key);\n\n      this._appendOrder(key);\n    }\n\n    return value;\n  }\n\n  set(key, value) {\n    if (!this._cache[key]) {\n      if (Object.keys(this._cache).length === this.limit) {\n        this.delete(this._order[0]);\n      }\n\n      this._cache[key] = value;\n\n      this._appendOrder(key);\n    } else {\n      this.delete(key);\n      this._cache[key] = value;\n\n      this._appendOrder(key);\n    }\n  }\n\n  delete(key) {\n    const value = this._cache[key];\n\n    if (value) {\n      delete this._cache[key];\n\n      this._deleteOrder(key);\n    }\n  }\n\n  _deleteOrder(key) {\n    const index = this._order.indexOf(key);\n\n    if (index >= 0) {\n      this._order.splice(index, 1);\n    }\n  }\n\n  _appendOrder(key) {\n    this._order.push(key);\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(LRUCache, \"LRUCache\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/layers/dist/esm/text-layer/lru-cache.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["LRUCache","constructor","limit","_defineProperty","get","key","value","_cache","_deleteOrder","_appendOrder","set","Object","keys","length","delete","_order","index","indexOf","splice","push","__reactstandin__regenerateByEval","code","eval","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["../../../src/text-layer/lru-cache.ts"],"sourcesContent":["/**\n * LRU Cache class with limit\n *\n * Update order for each get/set operation\n * Delete oldest when reach given limit\n */\n\nexport default class LRUCache<ValueT> {\n  private limit: number;\n  private _cache: Record<string, ValueT> = {};\n  /** access/update order, first item is oldest, last item is newest */\n  private _order: string[] = [];\n\n  constructor(limit: number = 5) {\n    this.limit = limit;\n  }\n\n  get(key: string): ValueT {\n    const value = this._cache[key];\n    if (value) {\n      // update order\n      this._deleteOrder(key);\n      this._appendOrder(key);\n    }\n    return value;\n  }\n\n  set(key: string, value: ValueT): void {\n    if (!this._cache[key]) {\n      // if reach limit, delete the oldest\n      if (Object.keys(this._cache).length === this.limit) {\n        this.delete(this._order[0]);\n      }\n\n      this._cache[key] = value;\n      this._appendOrder(key);\n    } else {\n      // if found in cache, delete the old one, insert new one to the first of list\n      this.delete(key);\n\n      this._cache[key] = value;\n      this._appendOrder(key);\n    }\n  }\n\n  delete(key: string): void {\n    const value = this._cache[key];\n    if (value) {\n      delete this._cache[key];\n      this._deleteOrder(key);\n    }\n  }\n\n  private _deleteOrder(key: string): void {\n    const index = this._order.indexOf(key);\n    if (index >= 0) {\n      this._order.splice(index, 1);\n    }\n  }\n\n  private _appendOrder(key: string): void {\n    this._order.push(key);\n  }\n}\n"],"mappings":";AAOA,eAAe,MAAMA,QAAN,CAAuB;EAMpCC,WAAWA,CAACC,KAAa,GAAG,CAAjB,EAAoB;IAAAC,eAAA;;IAAAA,eAAA,iBAJU,EAIV;;IAAAA,eAAA,iBAFJ,EAEI;;IAC7B,KAAKD,KAAL,GAAaA,KAAb;EACD;;EAEDE,GAAGA,CAACC,GAAD,EAAsB;IACvB,MAAMC,KAAK,GAAG,KAAKC,MAAL,CAAYF,GAAZ,CAAd;;IACA,IAAIC,KAAJ,EAAW;MAET,KAAKE,YAAL,CAAkBH,GAAlB;;MACA,KAAKI,YAAL,CAAkBJ,GAAlB;IACD;;IACD,OAAOC,KAAP;EACD;;EAEDI,GAAGA,CAACL,GAAD,EAAcC,KAAd,EAAmC;IACpC,IAAI,CAAC,KAAKC,MAAL,CAAYF,GAAZ,CAAL,EAAuB;MAErB,IAAIM,MAAM,CAACC,IAAP,CAAY,KAAKL,MAAjB,EAAyBM,MAAzB,KAAoC,KAAKX,KAA7C,EAAoD;QAClD,KAAKY,MAAL,CAAY,KAAKC,MAAL,CAAY,CAAZ,CAAZ;MACD;;MAED,KAAKR,MAAL,CAAYF,GAAZ,IAAmBC,KAAnB;;MACA,KAAKG,YAAL,CAAkBJ,GAAlB;IACD,CARD,MAQO;MAEL,KAAKS,MAAL,CAAYT,GAAZ;MAEA,KAAKE,MAAL,CAAYF,GAAZ,IAAmBC,KAAnB;;MACA,KAAKG,YAAL,CAAkBJ,GAAlB;IACD;EACF;;EAEDS,MAAMA,CAACT,GAAD,EAAoB;IACxB,MAAMC,KAAK,GAAG,KAAKC,MAAL,CAAYF,GAAZ,CAAd;;IACA,IAAIC,KAAJ,EAAW;MACT,OAAO,KAAKC,MAAL,CAAYF,GAAZ,CAAP;;MACA,KAAKG,YAAL,CAAkBH,GAAlB;IACD;EACF;;EAEOG,YAAYA,CAACH,GAAD,EAAoB;IACtC,MAAMW,KAAK,GAAG,KAAKD,MAAL,CAAYE,OAAZ,CAAoBZ,GAApB,CAAd;;IACA,IAAIW,KAAK,IAAI,CAAb,EAAgB;MACd,KAAKD,MAAL,CAAYG,MAAZ,CAAmBF,KAAnB,EAA0B,CAA1B;IACD;EACF;;EAEOP,YAAYA,CAACJ,GAAD,EAAoB;IACtC,KAAKU,MAAL,CAAYI,IAAZ,CAAiBd,GAAjB;EACD;EAAAe,iCAAAf,GAAA,EAAAgB,IAAA;IAAA,KAAAhB,GAAA,IAAAiB,IAAA,CAAAD,IAAA,GAvDmC,oBAAAE,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAAjB3B,QAAN,iMAAA4B,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}