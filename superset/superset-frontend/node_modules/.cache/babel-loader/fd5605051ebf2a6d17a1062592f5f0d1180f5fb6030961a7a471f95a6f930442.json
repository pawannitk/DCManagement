{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric'\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 }\n};\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n    (props.value ? props.value.type : props.default.type) ||\n    controlTypes.fixed;\n    const value =\n    (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n      this.state.type === controlTypes.fixed ?\n      this.state.fixedValue :\n      this.state.metricValue\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource ?\n    this.props.datasource.columns :\n    null;\n    const metrics = this.props.datasource ?\n    this.props.datasource.metrics :\n    null;\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(Collapse, {\n        ghost: true,\n        css: (theme) => /*#__PURE__*/css(\"&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px \",\n\n\n\n\n        theme.gridUnit * 2, \"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:\",\n\n\n\n\n\n\n\n\n\n\n        theme.gridUnit * 2, \"px;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:FixedOrMetricControl;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0ZpeGVkT3JNZXRyaWNDb250cm9sL2luZGV4LmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5RzJCIiwiZmlsZSI6Ii9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0ZpeGVkT3JNZXRyaWNDb250cm9sL2luZGV4LmpzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgQ29sbGFwc2UgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ29sbGFwc2UnO1xuaW1wb3J0IFRleHRDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dENvbnRyb2wnO1xuaW1wb3J0IE1ldHJpY3NDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvTWV0cmljQ29udHJvbC9NZXRyaWNzQ29udHJvbCc7XG5pbXBvcnQgQ29udHJvbEhlYWRlciBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL0NvbnRyb2xIZWFkZXInO1xuaW1wb3J0IFBvcG92ZXJTZWN0aW9uIGZyb20gJ3NyYy9jb21wb25lbnRzL1BvcG92ZXJTZWN0aW9uJztcblxuY29uc3QgY29udHJvbFR5cGVzID0ge1xuICBmaXhlZDogJ2ZpeCcsXG4gIG1ldHJpYzogJ21ldHJpYycsXG59O1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgdmFsdWU6IFByb3BUeXBlcy5vYmplY3QsXG4gIGlzRmxvYXQ6IFByb3BUeXBlcy5ib29sLFxuICBkYXRhc291cmNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGRlZmF1bHQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnZml4JywgJ21ldHJpYyddKSxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuICB9KSxcbn07XG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgb25DaGFuZ2U6ICgpID0+IHt9LFxuICBkZWZhdWx0OiB7IHR5cGU6IGNvbnRyb2xUeXBlcy5maXhlZCwgdmFsdWU6IDUgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpeGVkT3JNZXRyaWNDb250cm9sIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFR5cGUgPSB0aGlzLnNldFR5cGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEZpeGVkVmFsdWUgPSB0aGlzLnNldEZpeGVkVmFsdWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldE1ldHJpYyA9IHRoaXMuc2V0TWV0cmljLmJpbmQodGhpcyk7XG4gICAgY29uc3QgdHlwZSA9XG4gICAgICAocHJvcHMudmFsdWUgPyBwcm9wcy52YWx1ZS50eXBlIDogcHJvcHMuZGVmYXVsdC50eXBlKSB8fFxuICAgICAgY29udHJvbFR5cGVzLmZpeGVkO1xuICAgIGNvbnN0IHZhbHVlID1cbiAgICAgIChwcm9wcy52YWx1ZSA/IHByb3BzLnZhbHVlLnZhbHVlIDogcHJvcHMuZGVmYXVsdC52YWx1ZSkgfHwgJzEwMCc7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHR5cGUsXG4gICAgICBmaXhlZFZhbHVlOiB0eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWQgPyB2YWx1ZSA6ICcnLFxuICAgICAgbWV0cmljVmFsdWU6IHR5cGUgPT09IGNvbnRyb2xUeXBlcy5tZXRyaWMgPyB2YWx1ZSA6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIG9uQ2hhbmdlKCkge1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgdHlwZTogdGhpcy5zdGF0ZS50eXBlLFxuICAgICAgdmFsdWU6XG4gICAgICAgIHRoaXMuc3RhdGUudHlwZSA9PT0gY29udHJvbFR5cGVzLmZpeGVkXG4gICAgICAgICAgPyB0aGlzLnN0YXRlLmZpeGVkVmFsdWVcbiAgICAgICAgICA6IHRoaXMuc3RhdGUubWV0cmljVmFsdWUsXG4gICAgfSk7XG4gIH1cblxuICBzZXRUeXBlKHR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgdHlwZSB9LCB0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHNldEZpeGVkVmFsdWUoZml4ZWRWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBmaXhlZFZhbHVlIH0sIHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgc2V0TWV0cmljKG1ldHJpY1ZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IG1ldHJpY1ZhbHVlIH0sIHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wcm9wcy52YWx1ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHQ7XG4gICAgY29uc3QgdHlwZSA9IHZhbHVlLnR5cGUgfHwgY29udHJvbFR5cGVzLmZpeGVkO1xuICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLnByb3BzLmRhdGFzb3VyY2VcbiAgICAgID8gdGhpcy5wcm9wcy5kYXRhc291cmNlLmNvbHVtbnNcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5wcm9wcy5kYXRhc291cmNlXG4gICAgICA/IHRoaXMucHJvcHMuZGF0YXNvdXJjZS5tZXRyaWNzXG4gICAgICA6IG51bGw7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxDb250cm9sSGVhZGVyIHsuLi50aGlzLnByb3BzfSAvPlxuICAgICAgICA8Q29sbGFwc2VcbiAgICAgICAgICBnaG9zdFxuICAgICAgICAgIGNzcz17dGhlbWUgPT4gY3NzYFxuICAgICAgICAgICAgJi5hbnQtY29sbGFwc2VcbiAgICAgICAgICAgICAgPiAuYW50LWNvbGxhcHNlLWl0ZW0uYW50LWNvbGxhcHNlLW5vLWFycm93XG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1oZWFkZXIge1xuICAgICAgICAgICAgICBib3JkZXI6IDBweDtcbiAgICAgICAgICAgICAgcGFkZGluZzogMHB4IDBweCAke3RoZW1lLmdyaWRVbml0ICogMn1weCAwcHg7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICYuYW50LWNvbGxhcHNlLWdob3N0XG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1pdGVtXG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1jb250ZW50XG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1jb250ZW50LWJveCB7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcblxuICAgICAgICAgICAgICAmIC53ZWxsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA+XG4gICAgICAgICAgPENvbGxhcHNlLlBhbmVsXG4gICAgICAgICAgICBzaG93QXJyb3c9e2ZhbHNlfVxuICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgPExhYmVsPlxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8c3Bhbj57dGhpcy5zdGF0ZS5maXhlZFZhbHVlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5tZXRyaWMgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPnt0KCdtZXRyaWMnKX06IDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5tZXRyaWNWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlLmxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3ZWxsXCI+XG4gICAgICAgICAgICAgIDxQb3BvdmVyU2VjdGlvblxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdGaXhlZCcpfVxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e3R5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZH1cbiAgICAgICAgICAgICAgICBvblNlbGVjdD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5maXhlZCk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgaXNGbG9hdFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0Rml4ZWRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5maXhlZCk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZml4ZWRWYWx1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1BvcG92ZXJTZWN0aW9uPlxuICAgICAgICAgICAgICA8UG9wb3ZlclNlY3Rpb25cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQmFzZWQgb24gYSBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0eXBlID09PSBjb250cm9sVHlwZXMubWV0cmljfVxuICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoY29udHJvbFR5cGVzLm1ldHJpYyk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxNZXRyaWNzQ29udHJvbFxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm1ldHJpY1wiXG4gICAgICAgICAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICAgICAgICAgICAgc2F2ZWRNZXRyaWNzPXttZXRyaWNzfVxuICAgICAgICAgICAgICAgICAgbXVsdGk9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgb25Gb2N1cz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoY29udHJvbFR5cGVzLm1ldHJpYyk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0TWV0cmljfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubWV0cmljVmFsdWV9XG4gICAgICAgICAgICAgICAgICBkYXRhc291cmNlPXt0aGlzLnByb3BzLmRhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvQ29sbGFwc2UuUGFuZWw+XG4gICAgICAgIDwvQ29sbGFwc2U+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbkZpeGVkT3JNZXRyaWNDb250cm9sLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbkZpeGVkT3JNZXRyaWNDb250cm9sLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbiJdfQ== */\") },\n\n\n\n\n      ___EmotionJSX(Collapse.Panel, {\n        showArrow: false,\n        header:\n        ___EmotionJSX(Label, null,\n        this.state.type === controlTypes.fixed &&\n        ___EmotionJSX(\"span\", null, this.state.fixedValue),\n\n        this.state.type === controlTypes.metric &&\n        ___EmotionJSX(\"span\", null,\n        ___EmotionJSX(\"span\", null, t('metric'), \": \"),\n        ___EmotionJSX(\"strong\", null,\n        this.state.metricValue ?\n        this.state.metricValue.label :\n        null\n        )\n        )\n\n        ) },\n\n\n      ___EmotionJSX(\"div\", { className: \"well\" },\n      ___EmotionJSX(PopoverSection, {\n        title: t('Fixed'),\n        isSelected: type === controlTypes.fixed,\n        onSelect: () => {\n          this.setType(controlTypes.fixed);\n        } },\n\n      ___EmotionJSX(TextControl, {\n        isFloat: true,\n        onChange: this.setFixedValue,\n        onFocus: () => {\n          this.setType(controlTypes.fixed);\n        },\n        value: this.state.fixedValue }\n      )\n      ),\n      ___EmotionJSX(PopoverSection, {\n        title: t('Based on a metric'),\n        isSelected: type === controlTypes.metric,\n        onSelect: () => {\n          this.setType(controlTypes.metric);\n        } },\n\n      ___EmotionJSX(MetricsControl, {\n        name: \"metric\",\n        columns: columns,\n        savedMetrics: metrics,\n        multi: false,\n        onFocus: () => {\n          this.setType(controlTypes.metric);\n        },\n        onChange: this.setMetric,\n        value: this.state.metricValue,\n        datasource: this.props.datasource }\n      )\n      )\n      )\n      )\n      )\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(controlTypes, \"controlTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(FixedOrMetricControl, \"FixedOrMetricControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","css","t","Label","Collapse","TextControl","MetricsControl","ControlHeader","PopoverSection","jsx","___EmotionJSX","controlTypes","fixed","metric","propTypes","onChange","func","value","object","isFloat","bool","datasource","isRequired","default","shape","type","oneOf","oneOfType","string","number","defaultProps","FixedOrMetricControl","Component","constructor","props","bind","setType","setFixedValue","setMetric","state","fixedValue","metricValue","setState","render","columns","metrics","ghost","theme","gridUnit","process","env","NODE_ENV","Panel","showArrow","header","label","className","title","isSelected","onSelect","onFocus","name","savedMetrics","multi","__reactstandin__regenerateByEval","key","code","eval","reactHotLoader","reactHotLoaderGlobal","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric',\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 },\n};\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n      (props.value ? props.value.type : props.default.type) ||\n      controlTypes.fixed;\n    const value =\n      (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null,\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n        this.state.type === controlTypes.fixed\n          ? this.state.fixedValue\n          : this.state.metricValue,\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource\n      ? this.props.datasource.columns\n      : null;\n    const metrics = this.props.datasource\n      ? this.props.datasource.metrics\n      : null;\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Collapse\n          ghost\n          css={theme => css`\n            &.ant-collapse\n              > .ant-collapse-item.ant-collapse-no-arrow\n              > .ant-collapse-header {\n              border: 0px;\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\n              display: inline-block;\n            }\n            &.ant-collapse-ghost\n              > .ant-collapse-item\n              > .ant-collapse-content\n              > .ant-collapse-content-box {\n              padding: 0px;\n\n              & .well {\n                margin-bottom: 0px;\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n          `}\n        >\n          <Collapse.Panel\n            showArrow={false}\n            header={\n              <Label>\n                {this.state.type === controlTypes.fixed && (\n                  <span>{this.state.fixedValue}</span>\n                )}\n                {this.state.type === controlTypes.metric && (\n                  <span>\n                    <span>{t('metric')}: </span>\n                    <strong>\n                      {this.state.metricValue\n                        ? this.state.metricValue.label\n                        : null}\n                    </strong>\n                  </span>\n                )}\n              </Label>\n            }\n          >\n            <div className=\"well\">\n              <PopoverSection\n                title={t('Fixed')}\n                isSelected={type === controlTypes.fixed}\n                onSelect={() => {\n                  this.setType(controlTypes.fixed);\n                }}\n              >\n                <TextControl\n                  isFloat\n                  onChange={this.setFixedValue}\n                  onFocus={() => {\n                    this.setType(controlTypes.fixed);\n                  }}\n                  value={this.state.fixedValue}\n                />\n              </PopoverSection>\n              <PopoverSection\n                title={t('Based on a metric')}\n                isSelected={type === controlTypes.metric}\n                onSelect={() => {\n                  this.setType(controlTypes.metric);\n                }}\n              >\n                <MetricsControl\n                  name=\"metric\"\n                  columns={columns}\n                  savedMetrics={metrics}\n                  multi={false}\n                  onFocus={() => {\n                    this.setType(controlTypes.metric);\n                  }}\n                  onChange={this.setMetric}\n                  value={this.state.metricValue}\n                  datasource={this.props.datasource}\n                />\n              </PopoverSection>\n            </div>\n          </Collapse.Panel>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}