{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { styled, t } from '@superset-ui/core';\nimport { removeQueryEditor, removeAllOtherQueryEditors, queryEditorSetTitle, cloneQueryToNewTab, toggleLeftBar } from 'src/SqlLab/actions/sqlLab';\nimport TabStatusIcon from '../TabStatusIcon';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TabTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TabTitle = styled.span`\n  margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  text-transform: none;\n`;\nconst IconContainer = styled.div`\n  display: inline-block;\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n  text-align: center;\n`;\nconst SqlEditorTabHeader = ({ queryEditor }) => {\n  const qe = useSelector(({ sqlLab: { unsavedQueryEditor } }) => ({\n    ...queryEditor,\n    ...(queryEditor.id === (unsavedQueryEditor == null ? void 0 : unsavedQueryEditor.id) && unsavedQueryEditor)\n  }), shallowEqual);\n  const queryState = useSelector(({ sqlLab }) => {var _sqlLab$queries;return ((_sqlLab$queries = sqlLab.queries[qe.latestQueryId || '']) == null ? void 0 : _sqlLab$queries.state) || '';});\n  const dispatch = useDispatch();\n  const actions = useMemo(() => bindActionCreators({\n    removeQueryEditor,\n    removeAllOtherQueryEditors,\n    queryEditorSetTitle,\n    cloneQueryToNewTab,\n    toggleLeftBar\n  }, dispatch), [dispatch]);\n  function renameTab() {\n    const newTitle = prompt(t('Enter a new title for the tab'));\n    if (newTitle) {\n      actions.queryEditorSetTitle(qe, newTitle, qe.id);\n    }\n  }\n  return ___EmotionJSX(TabTitleWrapper, null,\n  ___EmotionJSX(Dropdown, { trigger: ['click'], overlay: ___EmotionJSX(Menu, { style: { width: 176 } },\n    ___EmotionJSX(Menu.Item, { className: \"close-btn\", key: \"1\", onClick: () => actions.removeQueryEditor(qe), \"data-test\": \"close-tab-menu-option\" },\n    ___EmotionJSX(IconContainer, null,\n    ___EmotionJSX(\"i\", { className: \"fa fa-close\" })\n    ),\n    t('Close tab')\n    ),\n    ___EmotionJSX(Menu.Item, { key: \"2\", onClick: renameTab, \"data-test\": \"rename-tab-menu-option\" },\n    ___EmotionJSX(IconContainer, null,\n    ___EmotionJSX(\"i\", { className: \"fa fa-i-cursor\" })\n    ),\n    t('Rename tab')\n    ),\n    ___EmotionJSX(Menu.Item, { key: \"3\", onClick: () => actions.toggleLeftBar(qe), \"data-test\": \"toggle-menu-option\" },\n    ___EmotionJSX(IconContainer, null,\n    ___EmotionJSX(\"i\", { className: \"fa fa-cogs\" })\n    ),\n    qe.hideLeftBar ? t('Expand tool bar') : t('Hide tool bar')\n    ),\n    ___EmotionJSX(Menu.Item, { key: \"4\", onClick: () => actions.removeAllOtherQueryEditors(qe), \"data-test\": \"close-all-other-menu-option\" },\n    ___EmotionJSX(IconContainer, null,\n    ___EmotionJSX(\"i\", { className: \"fa fa-times-circle-o\" })\n    ),\n    t('Close all other tabs')\n    ),\n    ___EmotionJSX(Menu.Item, { key: \"5\", onClick: () => actions.cloneQueryToNewTab(qe, false), \"data-test\": \"clone-tab-menu-option\" },\n    ___EmotionJSX(IconContainer, null,\n    ___EmotionJSX(\"i\", { className: \"fa fa-files-o\" })\n    ),\n    t('Duplicate tab')\n    )\n    ) }),\n  ___EmotionJSX(TabTitle, null, qe.name), \" \", ___EmotionJSX(TabStatusIcon, { tabState: queryState }), ' '\n  );\n};__signature__(SqlEditorTabHeader, \"useSelector{qe}\\nuseSelector{queryState}\\nuseDispatch{dispatch}\\nuseMemo{actions}\", () => [useSelector, useSelector, useDispatch]);const _default =\nSqlEditorTabHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TabTitleWrapper, \"TabTitleWrapper\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(TabTitle, \"TabTitle\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(IconContainer, \"IconContainer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(SqlEditorTabHeader, \"SqlEditorTabHeader\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useMemo","bindActionCreators","useSelector","useDispatch","shallowEqual","Dropdown","Menu","styled","t","removeQueryEditor","removeAllOtherQueryEditors","queryEditorSetTitle","cloneQueryToNewTab","toggleLeftBar","TabStatusIcon","jsx","___EmotionJSX","TabTitleWrapper","div","TabTitle","span","theme","gridUnit","IconContainer","SqlEditorTabHeader","queryEditor","qe","sqlLab","unsavedQueryEditor","id","queryState","_sqlLab$queries","queries","latestQueryId","state","dispatch","actions","renameTab","newTitle","prompt","trigger","overlay","style","width","Item","className","key","onClick","hideLeftBar","name","tabState","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { styled, t, QueryState } from '@superset-ui/core';\nimport {\n  removeQueryEditor,\n  removeAllOtherQueryEditors,\n  queryEditorSetTitle,\n  cloneQueryToNewTab,\n  toggleLeftBar,\n} from 'src/SqlLab/actions/sqlLab';\nimport { QueryEditor, SqlLabRootState } from 'src/SqlLab/types';\nimport TabStatusIcon from '../TabStatusIcon';\n\nconst TabTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TabTitle = styled.span`\n  margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  text-transform: none;\n`;\n\nconst IconContainer = styled.div`\n  display: inline-block;\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n  text-align: center;\n`;\n\ninterface Props {\n  queryEditor: QueryEditor;\n}\n\nconst SqlEditorTabHeader: React.FC<Props> = ({ queryEditor }) => {\n  const qe = useSelector<SqlLabRootState, QueryEditor>(\n    ({ sqlLab: { unsavedQueryEditor } }) => ({\n      ...queryEditor,\n      ...(queryEditor.id === unsavedQueryEditor?.id && unsavedQueryEditor),\n    }),\n    shallowEqual,\n  );\n  const queryState = useSelector<SqlLabRootState, QueryState>(\n    ({ sqlLab }) => sqlLab.queries[qe.latestQueryId || '']?.state || '',\n  );\n  const dispatch = useDispatch();\n  const actions = useMemo(\n    () =>\n      bindActionCreators(\n        {\n          removeQueryEditor,\n          removeAllOtherQueryEditors,\n          queryEditorSetTitle,\n          cloneQueryToNewTab,\n          toggleLeftBar,\n        },\n        dispatch,\n      ),\n    [dispatch],\n  );\n\n  function renameTab() {\n    const newTitle = prompt(t('Enter a new title for the tab'));\n    if (newTitle) {\n      actions.queryEditorSetTitle(qe, newTitle, qe.id);\n    }\n  }\n\n  return (\n    <TabTitleWrapper>\n      <Dropdown\n        trigger={['click']}\n        overlay={\n          <Menu style={{ width: 176 }}>\n            <Menu.Item\n              className=\"close-btn\"\n              key=\"1\"\n              onClick={() => actions.removeQueryEditor(qe)}\n              data-test=\"close-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-close\" />\n              </IconContainer>\n              {t('Close tab')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"2\"\n              onClick={renameTab}\n              data-test=\"rename-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-i-cursor\" />\n              </IconContainer>\n              {t('Rename tab')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"3\"\n              onClick={() => actions.toggleLeftBar(qe)}\n              data-test=\"toggle-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-cogs\" />\n              </IconContainer>\n              {qe.hideLeftBar ? t('Expand tool bar') : t('Hide tool bar')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"4\"\n              onClick={() => actions.removeAllOtherQueryEditors(qe)}\n              data-test=\"close-all-other-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-times-circle-o\" />\n              </IconContainer>\n              {t('Close all other tabs')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"5\"\n              onClick={() => actions.cloneQueryToNewTab(qe, false)}\n              data-test=\"clone-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-files-o\" />\n              </IconContainer>\n              {t('Duplicate tab')}\n            </Menu.Item>\n          </Menu>\n        }\n      />\n      <TabTitle>{qe.name}</TabTitle> <TabStatusIcon tabState={queryState} />{' '}\n    </TabTitleWrapper>\n  );\n};\n\nexport default SqlEditorTabHeader;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}