{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\n\nimport { css, styled, t, SafeMarkdown } from '@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { MarkdownEditor } from 'src/components/AsyncAceEditor';\n\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport { Draggable } from 'src/dashboard/components/dnd/DragDroppable';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport ResizableContainer from 'src/dashboard/components/resizable/ResizableContainer';\nimport MarkdownModeDropdown from 'src/dashboard/components/menu/MarkdownModeDropdown';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { ROW_TYPE, COLUMN_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\n  GRID_MIN_COLUMN_COUNT,\n  GRID_MIN_ROW_UNITS,\n  GRID_BASE_UNIT } from\n'src/dashboard/util/constants';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // from redux\n  logEvent: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  deleteComponent: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n\n  // HTML sanitization\n  htmlSanitization: PropTypes.bool,\n  htmlSchemaOverrides: PropTypes.object\n};\n\nconst defaultProps = {};\n\n// TODO: localize\nconst MARKDOWN_PLACE_HOLDER = `# ✨Header 1\n## ✨Header 2\n### ✨Header 3\n\n<br />\n\nClick here to learn more about [markdown formatting](https://bit.ly/1dQOfRK)`;\n\nconst MARKDOWN_ERROR_MESSAGE = t('This markdown component has an error.');\n\nconst MarkdownStyles = styled.div`\n  ${({ theme }) => css`\n    &.dashboard-markdown {\n      overflow: hidden;\n\n      h4,\n      h5,\n      h6 {\n        font-weight: ${theme.typography.weights.normal};\n      }\n\n      h5 {\n        color: ${theme.colors.grayscale.base};\n      }\n\n      h6 {\n        font-size: ${theme.typography.sizes.s}px;\n      }\n\n      .dashboard-component-chart-holder {\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      .dashboard--editing & {\n        cursor: move;\n      }\n    }\n  `}\n`;\n\nclass Markdown extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n      markdownSource: props.component.meta.code,\n      editor: null,\n      editorMode: 'preview',\n      undoLength: props.undoLength,\n      redoLength: props.redoLength\n    };\n    this.renderStartTime = Logger.getTimestamp();\n\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleChangeEditorMode = this.handleChangeEditorMode.bind(this);\n    this.handleMarkdownChange = this.handleMarkdownChange.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleResizeStart = this.handleResizeStart.bind(this);\n    this.setEditor = this.setEditor.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      viz_type: 'markdown',\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, state) {\n    const { hasError, editorMode, markdownSource, undoLength, redoLength } =\n    state;\n    const {\n      component: nextComponent,\n      undoLength: nextUndoLength,\n      redoLength: nextRedoLength\n    } = nextProps;\n    // user click undo or redo ?\n    if (nextUndoLength !== undoLength || nextRedoLength !== redoLength) {\n      return {\n        ...state,\n        undoLength: nextUndoLength,\n        redoLength: nextRedoLength,\n        markdownSource: nextComponent.meta.code,\n        hasError: false\n      };\n    }\n    if (\n    !hasError &&\n    editorMode === 'preview' &&\n    nextComponent.meta.code !== markdownSource)\n    {\n      return {\n        ...state,\n        markdownSource: nextComponent.meta.code\n      };\n    }\n\n    return state;\n  }\n\n  static getDerivedStateFromError() {\n    return {\n      hasError: true\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n    this.state.editor && (\n    prevProps.component.meta.width !== this.props.component.meta.width ||\n    prevProps.columnWidth !== this.props.columnWidth))\n    {\n      this.state.editor.resize(true);\n    }\n    // pre-load AceEditor when entering edit mode\n    if (this.props.editMode) {\n      MarkdownEditor.preload();\n    }\n  }\n\n  componentDidCatch() {\n    if (this.state.editor && this.state.editorMode === 'preview') {\n      this.props.addDangerToast(\n        t(\n          'This markdown component has an error. Please revert your recent changes.'\n        )\n      );\n    }\n  }\n\n  setEditor(editor) {\n    editor.getSession().setUseWrapMode(true);\n    this.setState({\n      editor\n    });\n  }\n\n  handleChangeFocus(nextFocus) {\n    const nextFocused = !!nextFocus;\n    const nextEditMode = nextFocused ? 'edit' : 'preview';\n    this.setState(() => ({ isFocused: nextFocused }));\n    this.handleChangeEditorMode(nextEditMode);\n  }\n\n  handleChangeEditorMode(mode) {\n    const nextState = {\n      ...this.state,\n      editorMode: mode\n    };\n    if (mode === 'preview') {\n      this.updateMarkdownContent();\n      nextState.hasError = false;\n    }\n\n    this.setState(nextState);\n  }\n\n  updateMarkdownContent() {\n    const { updateComponents, component } = this.props;\n    if (component.meta.code !== this.state.markdownSource) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            code: this.state.markdownSource\n          }\n        }\n      });\n    }\n  }\n\n  handleMarkdownChange(nextValue) {\n    this.setState({\n      markdownSource: nextValue\n    });\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleResizeStart(e) {\n    const { editorMode } = this.state;\n    const { editMode, onResizeStart } = this.props;\n    const isEditing = editorMode === 'edit';\n    onResizeStart(e);\n    if (editMode && isEditing) {\n      this.updateMarkdownContent();\n    }\n  }\n\n  renderEditMode() {\n    return (\n      ___EmotionJSX(MarkdownEditor, {\n        onChange: this.handleMarkdownChange,\n        width: \"100%\",\n        height: \"100%\",\n        showGutter: false,\n        editorProps: { $blockScrolling: true },\n        value:\n        // this allows \"select all => delete\" to give an empty editor\n        typeof this.state.markdownSource === 'string' ?\n        this.state.markdownSource :\n        MARKDOWN_PLACE_HOLDER,\n\n        readOnly: false,\n        onLoad: this.setEditor,\n        \"data-test\": \"editor\" }\n      ));\n\n  }\n\n  renderPreviewMode() {\n    const { hasError } = this.state;\n\n    return (\n      ___EmotionJSX(SafeMarkdown, {\n        source:\n        hasError ?\n        MARKDOWN_ERROR_MESSAGE :\n        this.state.markdownSource || MARKDOWN_PLACE_HOLDER,\n\n        htmlSanitization: this.props.htmlSanitization,\n        htmlSchemaOverrides: this.props.htmlSchemaOverrides }\n      ));\n\n  }\n\n  render() {\n    const { isFocused, editorMode } = this.state;\n\n    const {\n      component,\n      parentComponent,\n      index,\n      depth,\n      availableColumnCount,\n      columnWidth,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode\n    } = this.props;\n\n    // inherit the size of parent columns\n    const widthMultiple =\n    parentComponent.type === COLUMN_TYPE ?\n    parentComponent.meta.width || GRID_MIN_COLUMN_COUNT :\n    component.meta.width || GRID_MIN_COLUMN_COUNT;\n\n    const isEditing = editorMode === 'edit';\n\n    return (\n      ___EmotionJSX(Draggable, {\n        component: component,\n        parentComponent: parentComponent,\n        orientation: parentComponent.type === ROW_TYPE ? 'column' : 'row',\n        index: index,\n        depth: depth,\n        onDrop: handleComponentDrop,\n        disableDragDrop: isFocused,\n        editMode: editMode },\n\n      ({ dragSourceRef }) =>\n      ___EmotionJSX(WithPopoverMenu, {\n        onChangeFocus: this.handleChangeFocus,\n        menuItems: [\n        ___EmotionJSX(MarkdownModeDropdown, {\n          id: `${component.id}-mode`,\n          value: this.state.editorMode,\n          onChange: this.handleChangeEditorMode }\n        )],\n\n        editMode: editMode },\n\n      ___EmotionJSX(MarkdownStyles, {\n        \"data-test\": \"dashboard-markdown-editor\",\n        className: cx(\n          'dashboard-markdown',\n          isEditing && 'dashboard-markdown--editing'\n        ),\n        id: component.id },\n\n      ___EmotionJSX(ResizableContainer, {\n        id: component.id,\n        adjustableWidth: parentComponent.type === ROW_TYPE,\n        adjustableHeight: true,\n        widthStep: columnWidth,\n        widthMultiple: widthMultiple,\n        heightStep: GRID_BASE_UNIT,\n        heightMultiple: component.meta.height,\n        minWidthMultiple: GRID_MIN_COLUMN_COUNT,\n        minHeightMultiple: GRID_MIN_ROW_UNITS,\n        maxWidthMultiple: availableColumnCount + widthMultiple,\n        onResizeStart: this.handleResizeStart,\n        onResize: onResize,\n        onResizeStop: onResizeStop,\n        editMode: isFocused ? false : editMode },\n\n      ___EmotionJSX(\"div\", {\n        ref: dragSourceRef,\n        className: \"dashboard-component dashboard-component-chart-holder\",\n        \"data-test\": \"dashboard-component-chart-holder\" },\n\n      editMode &&\n      ___EmotionJSX(HoverMenu, { position: \"top\" },\n      ___EmotionJSX(DeleteComponentButton, {\n        onDelete: this.handleDeleteComponent }\n      )\n      ),\n\n      editMode && isEditing ?\n      this.renderEditMode() :\n      this.renderPreviewMode()\n      )\n      )\n      )\n      )\n\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nMarkdown.propTypes = propTypes;\nMarkdown.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    undoLength: state.dashboardLayout.past.length,\n    redoLength: state.dashboardLayout.future.length,\n    htmlSanitization: state.common.conf.HTML_SANITIZATION,\n    htmlSchemaOverrides: state.common.conf.HTML_SANITIZATION_SCHEMA_EXTENSIONS\n  };\n}const _default =\nconnect(mapStateToProps)(Markdown);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(MARKDOWN_PLACE_HOLDER, \"MARKDOWN_PLACE_HOLDER\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(MARKDOWN_ERROR_MESSAGE, \"MARKDOWN_ERROR_MESSAGE\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(MarkdownStyles, \"MarkdownStyles\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(Markdown, \"Markdown\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","connect","cx","css","styled","t","SafeMarkdown","Logger","LOG_ACTIONS_RENDER_CHART","MarkdownEditor","DeleteComponentButton","Draggable","HoverMenu","ResizableContainer","MarkdownModeDropdown","WithPopoverMenu","componentShape","ROW_TYPE","COLUMN_TYPE","GRID_MIN_COLUMN_COUNT","GRID_MIN_ROW_UNITS","GRID_BASE_UNIT","jsx","___EmotionJSX","propTypes","id","string","isRequired","parentId","component","parentComponent","index","number","depth","editMode","bool","logEvent","func","addDangerToast","undoLength","redoLength","availableColumnCount","columnWidth","onResizeStart","onResize","onResizeStop","deleteComponent","handleComponentDrop","updateComponents","htmlSanitization","htmlSchemaOverrides","object","defaultProps","MARKDOWN_PLACE_HOLDER","MARKDOWN_ERROR_MESSAGE","MarkdownStyles","div","theme","typography","weights","normal","colors","grayscale","base","sizes","s","Markdown","PureComponent","constructor","props","state","isFocused","markdownSource","meta","code","editor","editorMode","renderStartTime","getTimestamp","handleChangeFocus","bind","handleChangeEditorMode","handleMarkdownChange","handleDeleteComponent","handleResizeStart","setEditor","componentDidMount","viz_type","start_offset","ts","Date","getTime","duration","getDerivedStateFromProps","nextProps","hasError","nextComponent","nextUndoLength","nextRedoLength","getDerivedStateFromError","componentDidUpdate","prevProps","width","resize","preload","componentDidCatch","getSession","setUseWrapMode","setState","nextFocus","nextFocused","nextEditMode","mode","nextState","updateMarkdownContent","nextValue","e","isEditing","renderEditMode","onChange","height","showGutter","editorProps","$blockScrolling","value","readOnly","onLoad","renderPreviewMode","source","render","widthMultiple","type","orientation","onDrop","disableDragDrop","dragSourceRef","onChangeFocus","menuItems","className","adjustableWidth","adjustableHeight","widthStep","heightStep","heightMultiple","minWidthMultiple","minHeightMultiple","maxWidthMultiple","ref","position","onDelete","__reactstandin__regenerateByEval","key","eval","mapStateToProps","dashboardLayout","past","length","future","common","conf","HTML_SANITIZATION","HTML_SANITIZATION_SCHEMA_EXTENSIONS","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/dashboard/components/gridComponents/Markdown.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\n\nimport { css, styled, t, SafeMarkdown } from '@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { MarkdownEditor } from 'src/components/AsyncAceEditor';\n\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport { Draggable } from 'src/dashboard/components/dnd/DragDroppable';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport ResizableContainer from 'src/dashboard/components/resizable/ResizableContainer';\nimport MarkdownModeDropdown from 'src/dashboard/components/menu/MarkdownModeDropdown';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { ROW_TYPE, COLUMN_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\n  GRID_MIN_COLUMN_COUNT,\n  GRID_MIN_ROW_UNITS,\n  GRID_BASE_UNIT,\n} from 'src/dashboard/util/constants';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // from redux\n  logEvent: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  deleteComponent: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n\n  // HTML sanitization\n  htmlSanitization: PropTypes.bool,\n  htmlSchemaOverrides: PropTypes.object,\n};\n\nconst defaultProps = {};\n\n// TODO: localize\nconst MARKDOWN_PLACE_HOLDER = `# ✨Header 1\n## ✨Header 2\n### ✨Header 3\n\n<br />\n\nClick here to learn more about [markdown formatting](https://bit.ly/1dQOfRK)`;\n\nconst MARKDOWN_ERROR_MESSAGE = t('This markdown component has an error.');\n\nconst MarkdownStyles = styled.div`\n  ${({ theme }) => css`\n    &.dashboard-markdown {\n      overflow: hidden;\n\n      h4,\n      h5,\n      h6 {\n        font-weight: ${theme.typography.weights.normal};\n      }\n\n      h5 {\n        color: ${theme.colors.grayscale.base};\n      }\n\n      h6 {\n        font-size: ${theme.typography.sizes.s}px;\n      }\n\n      .dashboard-component-chart-holder {\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      .dashboard--editing & {\n        cursor: move;\n      }\n    }\n  `}\n`;\n\nclass Markdown extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n      markdownSource: props.component.meta.code,\n      editor: null,\n      editorMode: 'preview',\n      undoLength: props.undoLength,\n      redoLength: props.redoLength,\n    };\n    this.renderStartTime = Logger.getTimestamp();\n\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleChangeEditorMode = this.handleChangeEditorMode.bind(this);\n    this.handleMarkdownChange = this.handleMarkdownChange.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleResizeStart = this.handleResizeStart.bind(this);\n    this.setEditor = this.setEditor.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      viz_type: 'markdown',\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime,\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, state) {\n    const { hasError, editorMode, markdownSource, undoLength, redoLength } =\n      state;\n    const {\n      component: nextComponent,\n      undoLength: nextUndoLength,\n      redoLength: nextRedoLength,\n    } = nextProps;\n    // user click undo or redo ?\n    if (nextUndoLength !== undoLength || nextRedoLength !== redoLength) {\n      return {\n        ...state,\n        undoLength: nextUndoLength,\n        redoLength: nextRedoLength,\n        markdownSource: nextComponent.meta.code,\n        hasError: false,\n      };\n    }\n    if (\n      !hasError &&\n      editorMode === 'preview' &&\n      nextComponent.meta.code !== markdownSource\n    ) {\n      return {\n        ...state,\n        markdownSource: nextComponent.meta.code,\n      };\n    }\n\n    return state;\n  }\n\n  static getDerivedStateFromError() {\n    return {\n      hasError: true,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.state.editor &&\n      (prevProps.component.meta.width !== this.props.component.meta.width ||\n        prevProps.columnWidth !== this.props.columnWidth)\n    ) {\n      this.state.editor.resize(true);\n    }\n    // pre-load AceEditor when entering edit mode\n    if (this.props.editMode) {\n      MarkdownEditor.preload();\n    }\n  }\n\n  componentDidCatch() {\n    if (this.state.editor && this.state.editorMode === 'preview') {\n      this.props.addDangerToast(\n        t(\n          'This markdown component has an error. Please revert your recent changes.',\n        ),\n      );\n    }\n  }\n\n  setEditor(editor) {\n    editor.getSession().setUseWrapMode(true);\n    this.setState({\n      editor,\n    });\n  }\n\n  handleChangeFocus(nextFocus) {\n    const nextFocused = !!nextFocus;\n    const nextEditMode = nextFocused ? 'edit' : 'preview';\n    this.setState(() => ({ isFocused: nextFocused }));\n    this.handleChangeEditorMode(nextEditMode);\n  }\n\n  handleChangeEditorMode(mode) {\n    const nextState = {\n      ...this.state,\n      editorMode: mode,\n    };\n    if (mode === 'preview') {\n      this.updateMarkdownContent();\n      nextState.hasError = false;\n    }\n\n    this.setState(nextState);\n  }\n\n  updateMarkdownContent() {\n    const { updateComponents, component } = this.props;\n    if (component.meta.code !== this.state.markdownSource) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            code: this.state.markdownSource,\n          },\n        },\n      });\n    }\n  }\n\n  handleMarkdownChange(nextValue) {\n    this.setState({\n      markdownSource: nextValue,\n    });\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleResizeStart(e) {\n    const { editorMode } = this.state;\n    const { editMode, onResizeStart } = this.props;\n    const isEditing = editorMode === 'edit';\n    onResizeStart(e);\n    if (editMode && isEditing) {\n      this.updateMarkdownContent();\n    }\n  }\n\n  renderEditMode() {\n    return (\n      <MarkdownEditor\n        onChange={this.handleMarkdownChange}\n        width=\"100%\"\n        height=\"100%\"\n        showGutter={false}\n        editorProps={{ $blockScrolling: true }}\n        value={\n          // this allows \"select all => delete\" to give an empty editor\n          typeof this.state.markdownSource === 'string'\n            ? this.state.markdownSource\n            : MARKDOWN_PLACE_HOLDER\n        }\n        readOnly={false}\n        onLoad={this.setEditor}\n        data-test=\"editor\"\n      />\n    );\n  }\n\n  renderPreviewMode() {\n    const { hasError } = this.state;\n\n    return (\n      <SafeMarkdown\n        source={\n          hasError\n            ? MARKDOWN_ERROR_MESSAGE\n            : this.state.markdownSource || MARKDOWN_PLACE_HOLDER\n        }\n        htmlSanitization={this.props.htmlSanitization}\n        htmlSchemaOverrides={this.props.htmlSchemaOverrides}\n      />\n    );\n  }\n\n  render() {\n    const { isFocused, editorMode } = this.state;\n\n    const {\n      component,\n      parentComponent,\n      index,\n      depth,\n      availableColumnCount,\n      columnWidth,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode,\n    } = this.props;\n\n    // inherit the size of parent columns\n    const widthMultiple =\n      parentComponent.type === COLUMN_TYPE\n        ? parentComponent.meta.width || GRID_MIN_COLUMN_COUNT\n        : component.meta.width || GRID_MIN_COLUMN_COUNT;\n\n    const isEditing = editorMode === 'edit';\n\n    return (\n      <Draggable\n        component={component}\n        parentComponent={parentComponent}\n        orientation={parentComponent.type === ROW_TYPE ? 'column' : 'row'}\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        disableDragDrop={isFocused}\n        editMode={editMode}\n      >\n        {({ dragSourceRef }) => (\n          <WithPopoverMenu\n            onChangeFocus={this.handleChangeFocus}\n            menuItems={[\n              <MarkdownModeDropdown\n                id={`${component.id}-mode`}\n                value={this.state.editorMode}\n                onChange={this.handleChangeEditorMode}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            <MarkdownStyles\n              data-test=\"dashboard-markdown-editor\"\n              className={cx(\n                'dashboard-markdown',\n                isEditing && 'dashboard-markdown--editing',\n              )}\n              id={component.id}\n            >\n              <ResizableContainer\n                id={component.id}\n                adjustableWidth={parentComponent.type === ROW_TYPE}\n                adjustableHeight\n                widthStep={columnWidth}\n                widthMultiple={widthMultiple}\n                heightStep={GRID_BASE_UNIT}\n                heightMultiple={component.meta.height}\n                minWidthMultiple={GRID_MIN_COLUMN_COUNT}\n                minHeightMultiple={GRID_MIN_ROW_UNITS}\n                maxWidthMultiple={availableColumnCount + widthMultiple}\n                onResizeStart={this.handleResizeStart}\n                onResize={onResize}\n                onResizeStop={onResizeStop}\n                editMode={isFocused ? false : editMode}\n              >\n                <div\n                  ref={dragSourceRef}\n                  className=\"dashboard-component dashboard-component-chart-holder\"\n                  data-test=\"dashboard-component-chart-holder\"\n                >\n                  {editMode && (\n                    <HoverMenu position=\"top\">\n                      <DeleteComponentButton\n                        onDelete={this.handleDeleteComponent}\n                      />\n                    </HoverMenu>\n                  )}\n                  {editMode && isEditing\n                    ? this.renderEditMode()\n                    : this.renderPreviewMode()}\n                </div>\n              </ResizableContainer>\n            </MarkdownStyles>\n          </WithPopoverMenu>\n        )}\n      </Draggable>\n    );\n  }\n}\n\nMarkdown.propTypes = propTypes;\nMarkdown.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    undoLength: state.dashboardLayout.past.length,\n    redoLength: state.dashboardLayout.future.length,\n    htmlSanitization: state.common.conf.HTML_SANITIZATION,\n    htmlSchemaOverrides: state.common.conf.HTML_SANITIZATION_SCHEMA_EXTENSIONS,\n  };\n}\nexport default connect(mapStateToProps)(Markdown);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}