{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};export const retainFormDataSuffix = (formData, controlSuffix) => {\n  /*\n   * retain controls by suffix and return a new formData\n   * eg:\n   * > const fd = { metrics: ['foo', 'bar'], metrics_b: ['zee'], limit: 100, ... }\n   * > removeFormDataSuffix(fd, '_b')\n   * { metrics: ['zee'], limit: 100, ... }\n   * */\n  const newFormData = {};\n  Object.entries(formData).\n  sort(([a], [b]) => {\n    // items contained suffix before others\n    const weight_a = a.endsWith(controlSuffix) ? 1 : 0;\n    const weight_b = b.endsWith(controlSuffix) ? 1 : 0;\n    return weight_b - weight_a;\n  }).\n  forEach(([key, value]) => {\n    if (key.endsWith(controlSuffix)) {\n      newFormData[key.slice(0, -controlSuffix.length)] = value;\n    }\n    if (!key.endsWith(controlSuffix) && !(key in newFormData)) {\n      // ignore duplication\n      newFormData[key] = value;\n    }\n  });\n  return newFormData;\n};\nexport const removeFormDataSuffix = (formData, controlSuffix) => {\n  /*\n   * remove unused controls by suffix and return a new formData\n   * eg:\n   * > const fd = { metrics: ['foo', 'bar'], metrics_b: ['zee'], limit: 100, ... }\n   * > removeUnusedFormData(fd, '_b')\n   * { metrics: ['foo', 'bar'], limit: 100, ... }\n   * */\n  const newFormData = {};\n  Object.entries(formData).forEach(([key, value]) => {\n    if (!key.endsWith(controlSuffix)) {\n      newFormData[key] = value;\n    }\n  });\n  return newFormData;\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(retainFormDataSuffix, \"retainFormDataSuffix\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/utils/formDataSuffix.ts\");reactHotLoader.register(removeFormDataSuffix, \"removeFormDataSuffix\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/utils/formDataSuffix.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["retainFormDataSuffix","formData","controlSuffix","newFormData","Object","entries","sort","a","b","weight_a","endsWith","weight_b","forEach","key","value","slice","length","removeFormDataSuffix","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/utils/formDataSuffix.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { QueryFormData } from '@superset-ui/core';\n\nexport const retainFormDataSuffix = (\n  formData: QueryFormData,\n  controlSuffix: string,\n): QueryFormData => {\n  /*\n   * retain controls by suffix and return a new formData\n   * eg:\n   * > const fd = { metrics: ['foo', 'bar'], metrics_b: ['zee'], limit: 100, ... }\n   * > removeFormDataSuffix(fd, '_b')\n   * { metrics: ['zee'], limit: 100, ... }\n   * */\n  const newFormData = {};\n\n  Object.entries(formData)\n    .sort(([a], [b]) => {\n      // items contained suffix before others\n      const weight_a = a.endsWith(controlSuffix) ? 1 : 0;\n      const weight_b = b.endsWith(controlSuffix) ? 1 : 0;\n      return weight_b - weight_a;\n    })\n    .forEach(([key, value]) => {\n      if (key.endsWith(controlSuffix)) {\n        newFormData[key.slice(0, -controlSuffix.length)] = value;\n      }\n\n      if (!key.endsWith(controlSuffix) && !(key in newFormData)) {\n        // ignore duplication\n        newFormData[key] = value;\n      }\n    });\n\n  return newFormData as QueryFormData;\n};\n\nexport const removeFormDataSuffix = (\n  formData: QueryFormData,\n  controlSuffix: string,\n): QueryFormData => {\n  /*\n   * remove unused controls by suffix and return a new formData\n   * eg:\n   * > const fd = { metrics: ['foo', 'bar'], metrics_b: ['zee'], limit: 100, ... }\n   * > removeUnusedFormData(fd, '_b')\n   * { metrics: ['foo', 'bar'], limit: 100, ... }\n   * */\n  const newFormData = {};\n  Object.entries(formData).forEach(([key, value]) => {\n    if (!key.endsWith(controlSuffix)) {\n      newFormData[key] = value;\n    }\n  });\n\n  return newFormData as QueryFormData;\n};\n"],"mappings":"uSAoBA,OAAO,MAAMA,oBAAoB,GAAGA,CAClCC,QAAuB,EACvBC,aAAqB,KACJ;EACjB;;;;;;;EAOA,MAAMC,WAAW,GAAG,EAAE;EAEtBC,MAAM,CAACC,OAAO,CAACJ,QAAQ,CAAC;EACrBK,IAAI,CAAC,CAAC,CAACC,CAAC,CAAC,EAAE,CAACC,CAAC,CAAC,KAAI;IACjB;IACA,MAAMC,QAAQ,GAAGF,CAAC,CAACG,QAAQ,CAACR,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC;IAClD,MAAMS,QAAQ,GAAGH,CAAC,CAACE,QAAQ,CAACR,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC;IAClD,OAAOS,QAAQ,GAAGF,QAAQ;EAC5B,CAAC,CAAC;EACDG,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAI;IACxB,IAAID,GAAG,CAACH,QAAQ,CAACR,aAAa,CAAC,EAAE;MAC/BC,WAAW,CAACU,GAAG,CAACE,KAAK,CAAC,CAAC,EAAE,CAACb,aAAa,CAACc,MAAM,CAAC,CAAC,GAAGF,KAAK;;IAG1D,IAAI,CAACD,GAAG,CAACH,QAAQ,CAACR,aAAa,CAAC,IAAI,EAAEW,GAAG,IAAIV,WAAW,CAAC,EAAE;MACzD;MACAA,WAAW,CAACU,GAAG,CAAC,GAAGC,KAAK;;EAE5B,CAAC,CAAC;EAEJ,OAAOX,WAA4B;AACrC,CAAC;AAED,OAAO,MAAMc,oBAAoB,GAAGA,CAClChB,QAAuB,EACvBC,aAAqB,KACJ;EACjB;;;;;;;EAOA,MAAMC,WAAW,GAAG,EAAE;EACtBC,MAAM,CAACC,OAAO,CAACJ,QAAQ,CAAC,CAACW,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAI;IAChD,IAAI,CAACD,GAAG,CAACH,QAAQ,CAACR,aAAa,CAAC,EAAE;MAChCC,WAAW,CAACU,GAAG,CAAC,GAAGC,KAAK;;EAE5B,CAAC,CAAC;EAEF,OAAOX,WAA4B;AACrC,CAAC,CAAC,mBAAAe,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CArDWtB,oBAAoB,6IAAAkB,cAAA,CAAAI,QAAA,CAkCpBL,oBAAoB,qKAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}