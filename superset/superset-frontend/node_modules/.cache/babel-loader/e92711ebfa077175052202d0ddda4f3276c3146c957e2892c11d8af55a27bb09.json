{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient, logging } from '@superset-ui/core';\nimport parseCookie from 'src/utils/parseCookie';\nimport getBootstrapData from 'src/utils/getBootstrapData';\nconst bootstrapData = getBootstrapData();\nfunction getDefaultConfiguration() {var _window, _window$location, _window2, _window2$location, _window$location2;\n  const csrfNode = document.querySelector('#csrf_token');\n  const csrfToken = csrfNode == null ? void 0 : csrfNode.value;\n  // when using flask-jwt-extended csrf is set in cookies\n  const jwtAccessCsrfCookieName = bootstrapData.common.conf.JWT_ACCESS_CSRF_COOKIE_NAME;\n  const cookieCSRFToken = parseCookie()[jwtAccessCsrfCookieName] || '';\n  return {\n    protocol: ['http:', 'https:'].includes((_window = window) == null ? void 0 : (_window$location = _window.location) == null ? void 0 : _window$location.protocol) ? (_window2 =\n    window) == null ? void 0 : (_window2$location = _window2.location) == null ? void 0 : _window2$location.protocol :\n    undefined,\n    host: ((_window$location2 = window.location) == null ? void 0 : _window$location2.host) || '',\n    csrfToken: csrfToken || cookieCSRFToken\n  };\n}\nexport default function setupClient(customConfig = {}) {\n  SupersetClient.configure({\n    ...getDefaultConfiguration(),\n    ...customConfig\n  }).\n  init().\n  catch((error) => {\n    logging.warn('Error initializing SupersetClient', error);\n  });\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(bootstrapData, \"bootstrapData\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/setup/setupClient.ts\");reactHotLoader.register(getDefaultConfiguration, \"getDefaultConfiguration\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/setup/setupClient.ts\");reactHotLoader.register(setupClient, \"setupClient\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/setup/setupClient.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["SupersetClient","logging","parseCookie","getBootstrapData","bootstrapData","getDefaultConfiguration","_window","_window$location","_window2","_window2$location","_window$location2","csrfNode","document","querySelector","csrfToken","value","jwtAccessCsrfCookieName","common","conf","JWT_ACCESS_CSRF_COOKIE_NAME","cookieCSRFToken","protocol","includes","window","location","undefined","host","setupClient","customConfig","configure","init","catch","error","warn","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/setup/setupClient.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient, logging, ClientConfig } from '@superset-ui/core';\nimport parseCookie from 'src/utils/parseCookie';\nimport getBootstrapData from 'src/utils/getBootstrapData';\n\nconst bootstrapData = getBootstrapData();\n\nfunction getDefaultConfiguration(): ClientConfig {\n  const csrfNode = document.querySelector<HTMLInputElement>('#csrf_token');\n  const csrfToken = csrfNode?.value;\n\n  // when using flask-jwt-extended csrf is set in cookies\n  const jwtAccessCsrfCookieName =\n    bootstrapData.common.conf.JWT_ACCESS_CSRF_COOKIE_NAME;\n  const cookieCSRFToken = parseCookie()[jwtAccessCsrfCookieName] || '';\n\n  return {\n    protocol: ['http:', 'https:'].includes(window?.location?.protocol)\n      ? (window?.location?.protocol as 'http:' | 'https:')\n      : undefined,\n    host: window.location?.host || '',\n    csrfToken: csrfToken || cookieCSRFToken,\n  };\n}\n\nexport default function setupClient(customConfig: Partial<ClientConfig> = {}) {\n  SupersetClient.configure({\n    ...getDefaultConfiguration(),\n    ...customConfig,\n  })\n    .init()\n    .catch(error => {\n      logging.warn('Error initializing SupersetClient', error);\n    });\n}\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,cAAc,EAAEC,OAAO,QAAsB,mBAAmB;AACzE,OAAOC,WAAW,MAAM,uBAAuB;AAC/C,OAAOC,gBAAgB,MAAM,4BAA4B;AAEzD,MAAMC,aAAa,GAAGD,gBAAgB,EAAE;AAExC,SAASE,uBAAuBA,CAAA,OAAAC,OAAA,EAAAC,gBAAA,EAAAC,QAAA,EAAAC,iBAAA,EAAAC,iBAAA;EAC9B,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAa,CAAmB,aAAa,CAAC;EACxE,MAAMC,SAAS,GAAGH,QAAQ,oBAARA,QAAQ,CAAEI,KAAK;EAEjC;EACA,MAAMC,uBAAuB,GAC3BZ,aAAa,CAACa,MAAM,CAACC,IAAI,CAACC,2BAA2B;EACvD,MAAMC,eAAe,GAAGlB,WAAW,EAAE,CAACc,uBAAuB,CAAC,IAAI,EAAE;EAEpE,OAAO;IACLK,QAAQ,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACC,QAAQ,EAAAhB,OAAA,GAACiB,MAAM,sBAAAhB,gBAAA,GAAND,OAAA,CAAQkB,QAAQ,qBAAhBjB,gBAAA,CAAkBc,QAAQ,CAAC,IAAAb,QAAA;IAC7De,MAAM,sBAAAd,iBAAA,GAAND,QAAA,CAAQgB,QAAQ,qBAAhBf,iBAAA,CAAkBY,QAA+B;IAClDI,SAAS;IACbC,IAAI,EAAE,EAAAhB,iBAAA,GAAAa,MAAM,CAACC,QAAQ,qBAAfd,iBAAA,CAAiBgB,IAAI,KAAI,EAAE;IACjCZ,SAAS,EAAEA,SAAS,IAAIM;GACzB;AACH;AAEA,eAAc,SAAUO,WAAWA,CAACC,YAAA,GAAsC,EAAE;EAC1E5B,cAAc,CAAC6B,SAAS,CAAC;IACvB,GAAGxB,uBAAuB,EAAE;IAC5B,GAAGuB;GACJ,CAAC;EACCE,IAAI,EAAE;EACNC,KAAK,CAAC,CAAAC,KAAK,KAAG;IACb/B,OAAO,CAACgC,IAAI,CAAC,mCAAmC,EAAED,KAAK,CAAC;EAC1D,CAAC,CAAC;AACN,CAAC,mBAAAE,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAX,SAAA,MAAAS,cAAA,WAAAA,cAAA,CAAAG,QAAA,CA7BKjC,aAAa,sGAAA8B,cAAA,CAAAG,QAAA,CAEVhC,uBAAuB,gHAAA6B,cAAA,CAAAG,QAAA,CAkBRV,WAAW,4HAAAW,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAb,SAAA,CAAAa,WAAA,IAAAA,WAAA,CAAAC,MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}