{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, NO_TIME_RANGE } from '@superset-ui/core';\nimport React, { useCallback, useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { FilterPluginStyle } from '../common';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TimeFilterStyles = styled(FilterPluginStyle)`\n  display: flex;\n  align-items: center;\n  overflow-x: auto;\n\n  & .ant-tag {\n    margin-right: 0;\n  }\n`;\nconst ControlContainer = styled.div`\n  display: flex;\n  height: 100%;\n  max-width: 100%;\n  width: 100%;\n  & > div,\n  & > div:hover {\n    ${({ validateStatus, theme }) => {var _theme$colors$validat;return validateStatus && `border-color: ${(_theme$colors$validat = theme.colors[validateStatus]) == null ? void 0 : _theme$colors$validat.base}`;}}\n  }\n`;\nexport default function TimeFilterPlugin(props) {var _props$formData;\n  const { setDataMask, setHoveredFilter, unsetHoveredFilter, setFocusedFilter, unsetFocusedFilter, setFilterActive, width, height, filterState, inputRef, isOverflowingFilterBar = false } = props;\n  const handleTimeRangeChange = useCallback((timeRange) => {\n    const isSet = timeRange && timeRange !== NO_TIME_RANGE;\n    setDataMask({\n      extraFormData: isSet ?\n      {\n        time_range: timeRange\n      } :\n      {},\n      filterState: {\n        value: isSet ? timeRange : undefined\n      }\n    });\n  }, [setDataMask]);\n  useEffect(() => {\n    handleTimeRangeChange(filterState.value);\n  }, [filterState.value]);\n  return (_props$formData = props.formData) != null && _props$formData.inView ? ___EmotionJSX(TimeFilterStyles, { width: width, height: height },\n  ___EmotionJSX(ControlContainer, { ref: inputRef, validateStatus: filterState.validateStatus, onFocus: setFocusedFilter, onBlur: unsetFocusedFilter, onMouseEnter: setHoveredFilter, onMouseLeave: unsetHoveredFilter },\n  ___EmotionJSX(DateFilterControl, { value: filterState.value || NO_TIME_RANGE, name: \"time_range\", onChange: handleTimeRangeChange, onOpenPopover: () => setFilterActive(true), onClosePopover: () => {\n      setFilterActive(false);\n      unsetHoveredFilter();\n      unsetFocusedFilter();\n    }, isOverflowingFilterBar: isOverflowingFilterBar })\n  )\n  ) : null;\n}__signature__(TimeFilterPlugin, \"useCallback{handleTimeRangeChange}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TimeFilterStyles, \"TimeFilterStyles\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(ControlContainer, \"ControlContainer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");reactHotLoader.register(TimeFilterPlugin, \"TimeFilterPlugin\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["styled","NO_TIME_RANGE","React","useCallback","useEffect","DateFilterControl","FilterPluginStyle","jsx","___EmotionJSX","TimeFilterStyles","ControlContainer","div","validateStatus","theme","_theme$colors$validat","colors","base","TimeFilterPlugin","props","_props$formData","setDataMask","setHoveredFilter","unsetHoveredFilter","setFocusedFilter","unsetFocusedFilter","setFilterActive","width","height","filterState","inputRef","isOverflowingFilterBar","handleTimeRangeChange","timeRange","isSet","extraFormData","time_range","value","undefined","formData","inView","ref","onFocus","onBlur","onMouseEnter","onMouseLeave","name","onChange","onOpenPopover","onClosePopover","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/filters/components/Time/TimeFilterPlugin.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, NO_TIME_RANGE } from '@superset-ui/core';\nimport React, { useCallback, useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { PluginFilterTimeProps } from './types';\nimport { FilterPluginStyle } from '../common';\n\nconst TimeFilterStyles = styled(FilterPluginStyle)`\n  display: flex;\n  align-items: center;\n  overflow-x: auto;\n\n  & .ant-tag {\n    margin-right: 0;\n  }\n`;\n\nconst ControlContainer = styled.div<{\n  validateStatus?: 'error' | 'warning' | 'info';\n}>`\n  display: flex;\n  height: 100%;\n  max-width: 100%;\n  width: 100%;\n  & > div,\n  & > div:hover {\n    ${({ validateStatus, theme }) =>\n      validateStatus && `border-color: ${theme.colors[validateStatus]?.base}`}\n  }\n`;\n\nexport default function TimeFilterPlugin(props: PluginFilterTimeProps) {\n  const {\n    setDataMask,\n    setHoveredFilter,\n    unsetHoveredFilter,\n    setFocusedFilter,\n    unsetFocusedFilter,\n    setFilterActive,\n    width,\n    height,\n    filterState,\n    inputRef,\n    isOverflowingFilterBar = false,\n  } = props;\n\n  const handleTimeRangeChange = useCallback(\n    (timeRange?: string): void => {\n      const isSet = timeRange && timeRange !== NO_TIME_RANGE;\n      setDataMask({\n        extraFormData: isSet\n          ? {\n              time_range: timeRange,\n            }\n          : {},\n        filterState: {\n          value: isSet ? timeRange : undefined,\n        },\n      });\n    },\n    [setDataMask],\n  );\n\n  useEffect(() => {\n    handleTimeRangeChange(filterState.value);\n  }, [filterState.value]);\n\n  return props.formData?.inView ? (\n    <TimeFilterStyles width={width} height={height}>\n      <ControlContainer\n        ref={inputRef}\n        validateStatus={filterState.validateStatus}\n        onFocus={setFocusedFilter}\n        onBlur={unsetFocusedFilter}\n        onMouseEnter={setHoveredFilter}\n        onMouseLeave={unsetHoveredFilter}\n      >\n        <DateFilterControl\n          value={filterState.value || NO_TIME_RANGE}\n          name=\"time_range\"\n          onChange={handleTimeRangeChange}\n          onOpenPopover={() => setFilterActive(true)}\n          onClosePopover={() => {\n            setFilterActive(false);\n            unsetHoveredFilter();\n            unsetFocusedFilter();\n          }}\n          isOverflowingFilterBar={isOverflowingFilterBar}\n        />\n      </ControlContainer>\n    </TimeFilterStyles>\n  ) : null;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}