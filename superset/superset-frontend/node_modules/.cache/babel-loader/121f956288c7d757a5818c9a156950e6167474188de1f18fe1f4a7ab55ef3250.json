{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from '@math.gl/core';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    const normalizedOpts = Array.isArray(opts) ? {} : opts;\n    normalizedOpts.transitionProps = Array.isArray(transitionProps) ? {\n      compare: transitionProps,\n      required: transitionProps\n    } : transitionProps || {\n      compare: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    };\n    super(normalizedOpts.transitionProps);\n\n    _defineProperty(this, \"opts\", void 0);\n\n    this.opts = normalizedOpts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition && this.opts.makeViewport) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_PROPS, \"DEFAULT_PROPS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js\");reactHotLoader.register(DEFAULT_REQUIRED_PROPS, \"DEFAULT_REQUIRED_PROPS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js\");reactHotLoader.register(LinearInterpolator, \"LinearInterpolator\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["TransitionInterpolator","lerp","DEFAULT_PROPS","DEFAULT_REQUIRED_PROPS","LinearInterpolator","constructor","opts","transitionProps","Array","isArray","normalizedOpts","compare","required","_defineProperty","initializeProps","startProps","endProps","result","makeViewport","around","startViewport","endViewport","aroundPosition","unproject","start","Object","assign","end","project","width","height","interpolateProps","t","propsInTransition","key","_propsToExtract","viewport","panByPosition","__reactstandin__regenerateByEval","code","eval","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["../../../src/transitions/linear-interpolator.ts"],"sourcesContent":["import TransitionInterpolator from './transition-interpolator';\nimport {lerp} from '@math.gl/core';\n\nimport type Viewport from '../viewports/viewport';\n\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\n\ntype PropsWithAnchor = {\n  around?: number[];\n  aroundPosition?: number[];\n  [key: string]: any;\n};\n\n/**\n * Performs linear interpolation of two view states.\n */\nexport default class LinearInterpolator extends TransitionInterpolator {\n  opts: {\n    around?: number[];\n    makeViewport?: (props: Record<string, any>) => Viewport;\n  };\n\n  /**\n   * @param {Object} opts\n   * @param {Array} opts.transitionProps - list of props to apply linear transition to.\n   * @param {Array} opts.around - a screen point to zoom/rotate around.\n   * @param {Function} opts.makeViewport - construct a viewport instance with given props.\n   */\n  constructor(\n    opts:\n      | string[]\n      | {\n          transitionProps?:\n            | string[]\n            | {\n                compare: string[];\n                extract?: string[];\n                required?: string[];\n              };\n          around?: number[];\n          makeViewport?: (props: Record<string, any>) => Viewport;\n        } = {}\n  ) {\n    // Backward compatibility\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n\n    const normalizedOpts = Array.isArray(opts) ? {} : opts;\n    normalizedOpts.transitionProps = Array.isArray(transitionProps)\n      ? {\n          compare: transitionProps,\n          required: transitionProps\n        }\n      : transitionProps || {\n          compare: DEFAULT_PROPS,\n          required: DEFAULT_REQUIRED_PROPS\n        };\n\n    super(normalizedOpts.transitionProps);\n    this.opts = normalizedOpts;\n  }\n\n  initializeProps(\n    startProps: Record<string, any>,\n    endProps: Record<string, any>\n  ): {\n    start: PropsWithAnchor;\n    end: PropsWithAnchor;\n  } {\n    const result = super.initializeProps(startProps, endProps);\n\n    const {makeViewport, around} = this.opts;\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(\n    startProps: PropsWithAnchor,\n    endProps: PropsWithAnchor,\n    t: number\n  ): Record<string, any> {\n    const propsInTransition = {};\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition && this.opts.makeViewport) {\n      // Linear transition should be performed in common space\n      const viewport = this.opts.makeViewport({...endProps, ...propsInTransition});\n      Object.assign(\n        propsInTransition,\n        viewport.panByPosition(\n          endProps.aroundPosition,\n          // anchor point in current screen coordinates\n          lerp(startProps.around as number[], endProps.around as number[], t) as number[]\n        )\n      );\n    }\n    return propsInTransition;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}