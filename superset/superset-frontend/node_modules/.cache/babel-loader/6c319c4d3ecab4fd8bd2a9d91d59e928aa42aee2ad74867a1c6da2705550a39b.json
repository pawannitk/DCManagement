{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport shortid from 'shortid';\nimport { t, withTheme } from '@superset-ui/core';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove } from\n'react-sortable-hoc';\nimport Icons from 'src/components/Icons';\nimport {\n  HeaderContainer,\n  AddIconButton } from\n'src/explore/components/controls/OptionControls';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport controlMap from '..';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired\n};\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: t('Empty collection'),\n  itemGenerator: () => ({ key: shortid.generate() }),\n  keyAccessor: (o) => o.key,\n  value: [],\n  addTooltip: t('Add an item')\n};\nconst SortableListItem = SortableElement(CustomListItem);\nconst SortableList = SortableContainer(List);\nconst SortableDragger = SortableHandle(() =>\n___EmotionJSX(\"i\", {\n  role: \"img\",\n  \"aria-label\": \"drag\",\n  className: \"fa fa-bars text-primary\",\n  style: { cursor: 'ns-resize' } }\n)\n);var _ref = process.env.NODE_ENV === \"production\" ? { name: \"11g6mpt\", styles: \"justify-content:flex-start\" } : { name: \"13cksz1-CollectionControl\", styles: \"justify-content:flex-start;label:CollectionControl;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NvbGxlY3Rpb25Db250cm9sL2luZGV4LmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3SGMiLCJmaWxlIjoiL2hvbWUvcGF3YW5rL0RvY3VtZW50cy9kY2ltL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ29sbGVjdGlvbkNvbnRyb2wvaW5kZXguanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBMaXN0IH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IHNob3J0aWQgZnJvbSAnc2hvcnRpZCc7XG5pbXBvcnQgeyB0LCB3aXRoVGhlbWUgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQge1xuICBTb3J0YWJsZUNvbnRhaW5lcixcbiAgU29ydGFibGVIYW5kbGUsXG4gIFNvcnRhYmxlRWxlbWVudCxcbiAgYXJyYXlNb3ZlLFxufSBmcm9tICdyZWFjdC1zb3J0YWJsZS1ob2MnO1xuaW1wb3J0IEljb25zIGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCB7XG4gIEhlYWRlckNvbnRhaW5lcixcbiAgQWRkSWNvbkJ1dHRvbixcbn0gZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9PcHRpb25Db250cm9scyc7XG5pbXBvcnQgeyBJbmZvVG9vbHRpcFdpdGhUcmlnZ2VyIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NoYXJ0LWNvbnRyb2xzJztcbmltcG9ydCBDb250cm9sSGVhZGVyIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvQ29udHJvbEhlYWRlcic7XG5pbXBvcnQgQ3VzdG9tTGlzdEl0ZW0gZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9DdXN0b21MaXN0SXRlbSc7XG5pbXBvcnQgY29udHJvbE1hcCBmcm9tICcuLic7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZGVzY3JpcHRpb246IFByb3BUeXBlcy5zdHJpbmcsXG4gIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhZGRUb29sdGlwOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBpdGVtR2VuZXJhdG9yOiBQcm9wVHlwZXMuZnVuYyxcbiAga2V5QWNjZXNzb3I6IFByb3BUeXBlcy5mdW5jLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXldKSxcbiAgaXNGbG9hdDogUHJvcFR5cGVzLmJvb2wsXG4gIGlzSW50OiBQcm9wVHlwZXMuYm9vbCxcbiAgY29udHJvbE5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgbGFiZWw6IG51bGwsXG4gIGRlc2NyaXB0aW9uOiBudWxsLFxuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIHBsYWNlaG9sZGVyOiB0KCdFbXB0eSBjb2xsZWN0aW9uJyksXG4gIGl0ZW1HZW5lcmF0b3I6ICgpID0+ICh7IGtleTogc2hvcnRpZC5nZW5lcmF0ZSgpIH0pLFxuICBrZXlBY2Nlc3NvcjogbyA9PiBvLmtleSxcbiAgdmFsdWU6IFtdLFxuICBhZGRUb29sdGlwOiB0KCdBZGQgYW4gaXRlbScpLFxufTtcbmNvbnN0IFNvcnRhYmxlTGlzdEl0ZW0gPSBTb3J0YWJsZUVsZW1lbnQoQ3VzdG9tTGlzdEl0ZW0pO1xuY29uc3QgU29ydGFibGVMaXN0ID0gU29ydGFibGVDb250YWluZXIoTGlzdCk7XG5jb25zdCBTb3J0YWJsZURyYWdnZXIgPSBTb3J0YWJsZUhhbmRsZSgoKSA9PiAoXG4gIDxpXG4gICAgcm9sZT1cImltZ1wiXG4gICAgYXJpYS1sYWJlbD1cImRyYWdcIlxuICAgIGNsYXNzTmFtZT1cImZhIGZhLWJhcnMgdGV4dC1wcmltYXJ5XCJcbiAgICBzdHlsZT17eyBjdXJzb3I6ICducy1yZXNpemUnIH19XG4gIC8+XG4pKTtcblxuY2xhc3MgQ29sbGVjdGlvbkNvbnRyb2wgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQWRkID0gdGhpcy5vbkFkZC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb25DaGFuZ2UoaSwgdmFsdWUpIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IFsuLi50aGlzLnByb3BzLnZhbHVlXTtcbiAgICBuZXdWYWx1ZVtpXSA9IHsgLi4udGhpcy5wcm9wcy52YWx1ZVtpXSwgLi4udmFsdWUgfTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgfVxuXG4gIG9uQWRkKCkge1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy52YWx1ZS5jb25jYXQoW3RoaXMucHJvcHMuaXRlbUdlbmVyYXRvcigpXSkpO1xuICB9XG5cbiAgb25Tb3J0RW5kKHsgb2xkSW5kZXgsIG5ld0luZGV4IH0pIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKGFycmF5TW92ZSh0aGlzLnByb3BzLnZhbHVlLCBvbGRJbmRleCwgbmV3SW5kZXgpKTtcbiAgfVxuXG4gIHJlbW92ZUl0ZW0oaSkge1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy52YWx1ZS5maWx0ZXIoKG8sIGl4KSA9PiBpICE9PSBpeCkpO1xuICB9XG5cbiAgcmVuZGVyTGlzdCgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbXV0ZWRcIj57dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn08L2Rpdj47XG4gICAgfVxuICAgIGNvbnN0IENvbnRyb2wgPSBjb250cm9sTWFwW3RoaXMucHJvcHMuY29udHJvbE5hbWVdO1xuICAgIHJldHVybiAoXG4gICAgICA8U29ydGFibGVMaXN0XG4gICAgICAgIHVzZURyYWdIYW5kbGVcbiAgICAgICAgbG9ja0F4aXM9XCJ5XCJcbiAgICAgICAgb25Tb3J0RW5kPXt0aGlzLm9uU29ydEVuZC5iaW5kKHRoaXMpfVxuICAgICAgICBib3JkZXJlZFxuICAgICAgICBjc3M9e3RoZW1lID0+ICh7XG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5ncmlkVW5pdCxcbiAgICAgICAgfSl9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLnByb3BzLnZhbHVlLm1hcCgobywgaSkgPT4ge1xuICAgICAgICAgIC8vIGxhYmVsIHJlbGV2YW50IG9ubHkgZm9yIGhlYWRlciwgbm90IGhlcmVcbiAgICAgICAgICBjb25zdCB7IGxhYmVsLCAuLi5jb21tb25Qcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNvcnRhYmxlTGlzdEl0ZW1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xlYXJmaXhcIlxuICAgICAgICAgICAgICBjc3M9e3sganVzdGlmeUNvbnRlbnQ6ICdmbGV4LXN0YXJ0JyB9fVxuICAgICAgICAgICAgICBrZXk9e3RoaXMucHJvcHMua2V5QWNjZXNzb3Iobyl9XG4gICAgICAgICAgICAgIGluZGV4PXtpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U29ydGFibGVEcmFnZ2VyIC8+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7XG4gICAgICAgICAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogdGhlbWUuZ3JpZFVuaXQgKiAyLFxuICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHRoZW1lLmdyaWRVbml0ICogMixcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxDb250cm9sXG4gICAgICAgICAgICAgICAgICB7Li4uY29tbW9uUHJvcHN9XG4gICAgICAgICAgICAgICAgICB7Li4ub31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcywgaSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxJbmZvVG9vbHRpcFdpdGhUcmlnZ2VyXG4gICAgICAgICAgICAgICAgaWNvbj1cInRpbWVzXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cInJlbW92ZS1pdGVtXCJcbiAgICAgICAgICAgICAgICB0b29sdGlwPXt0KCdSZW1vdmUgaXRlbScpfVxuICAgICAgICAgICAgICAgIGJzU3R5bGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlbW92ZUl0ZW0uYmluZCh0aGlzLCBpKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvU29ydGFibGVMaXN0SXRlbT5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvU29ydGFibGVMaXN0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3Q9XCJDb2xsZWN0aW9uQ29udHJvbFwiIGNsYXNzTmFtZT1cIkNvbGxlY3Rpb25Db250cm9sXCI+XG4gICAgICAgIDxIZWFkZXJDb250YWluZXI+XG4gICAgICAgICAgPENvbnRyb2xIZWFkZXIgey4uLnRoaXMucHJvcHN9IC8+XG4gICAgICAgICAgPEFkZEljb25CdXR0b24gb25DbGljaz17dGhpcy5vbkFkZH0+XG4gICAgICAgICAgICA8SWNvbnMuUGx1c0xhcmdlXG4gICAgICAgICAgICAgIGljb25TaXplPVwic1wiXG4gICAgICAgICAgICAgIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQWRkSWNvbkJ1dHRvbj5cbiAgICAgICAgPC9IZWFkZXJDb250YWluZXI+XG4gICAgICAgIHt0aGlzLnJlbmRlckxpc3QoKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuQ29sbGVjdGlvbkNvbnRyb2wucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuQ29sbGVjdGlvbkNvbnRyb2wuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVGhlbWUoQ29sbGVjdGlvbkNvbnRyb2wpO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nclass CollectionControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onAdd = this.onAdd.bind(this);\n  }\n\n  onChange(i, value) {\n    const newValue = [...this.props.value];\n    newValue[i] = { ...this.props.value[i], ...value };\n    this.props.onChange(newValue);\n  }\n\n  onAdd() {\n    this.props.onChange(this.props.value.concat([this.props.itemGenerator()]));\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n\n  removeItem(i) {\n    this.props.onChange(this.props.value.filter((o, ix) => i !== ix));\n  }\n\n  renderList() {\n    if (this.props.value.length === 0) {\n      return ___EmotionJSX(\"div\", { className: \"text-muted\" }, this.props.placeholder);\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      ___EmotionJSX(SortableList, {\n        useDragHandle: true,\n        lockAxis: \"y\",\n        onSortEnd: this.onSortEnd.bind(this),\n        bordered: true,\n        css: (theme) => ({\n          borderRadius: theme.gridUnit\n        }) },\n\n      this.props.value.map((o, i) => {\n        // label relevant only for header, not here\n        const { label, ...commonProps } = this.props;\n        return (\n          ___EmotionJSX(SortableListItem, {\n            className: \"clearfix\",\n            css: _ref,\n            key: this.props.keyAccessor(o),\n            index: i },\n\n          ___EmotionJSX(SortableDragger, null),\n          ___EmotionJSX(\"div\", {\n            css: (theme) => ({\n              flex: 1,\n              marginLeft: theme.gridUnit * 2,\n              marginRight: theme.gridUnit * 2\n            }) },\n\n          ___EmotionJSX(Control, _extends({},\n          commonProps,\n          o, {\n            onChange: this.onChange.bind(this, i) })\n          )\n          ),\n          ___EmotionJSX(InfoTooltipWithTrigger, {\n            icon: \"times\",\n            label: \"remove-item\",\n            tooltip: t('Remove item'),\n            bsStyle: \"primary\",\n            onClick: this.removeItem.bind(this, i) }\n          )\n          ));\n\n      })\n      ));\n\n  }\n\n  render() {\n    const { theme } = this.props;\n    return (\n      ___EmotionJSX(\"div\", { \"data-test\": \"CollectionControl\", className: \"CollectionControl\" },\n      ___EmotionJSX(HeaderContainer, null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(AddIconButton, { onClick: this.onAdd },\n      ___EmotionJSX(Icons.PlusLarge, {\n        iconSize: \"s\",\n        iconColor: theme.colors.grayscale.light5 }\n      )\n      )\n      ),\n      this.renderList()\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;const _default =\n\nwithTheme(CollectionControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableListItem, \"SortableListItem\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableList, \"SortableList\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableDragger, \"SortableDragger\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(CollectionControl, \"CollectionControl\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","List","shortid","t","withTheme","SortableContainer","SortableHandle","SortableElement","arrayMove","Icons","HeaderContainer","AddIconButton","InfoTooltipWithTrigger","ControlHeader","CustomListItem","controlMap","jsx","___EmotionJSX","propTypes","name","string","isRequired","label","description","placeholder","addTooltip","itemGenerator","func","keyAccessor","onChange","value","oneOfType","array","isFloat","bool","isInt","controlName","defaultProps","key","generate","o","SortableListItem","SortableList","SortableDragger","role","className","style","cursor","_ref","process","env","NODE_ENV","styles","map","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","CollectionControl","Component","constructor","props","onAdd","bind","i","newValue","concat","onSortEnd","oldIndex","newIndex","removeItem","filter","ix","renderList","length","Control","useDragHandle","lockAxis","bordered","css","theme","borderRadius","gridUnit","commonProps","index","flex","marginLeft","marginRight","_extends","icon","tooltip","bsStyle","onClick","render","PlusLarge","iconSize","iconColor","colors","grayscale","light5","__reactstandin__regenerateByEval","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport shortid from 'shortid';\nimport { t, withTheme } from '@superset-ui/core';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport Icons from 'src/components/Icons';\nimport {\n  HeaderContainer,\n  AddIconButton,\n} from 'src/explore/components/controls/OptionControls';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport controlMap from '..';\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: t('Empty collection'),\n  itemGenerator: () => ({ key: shortid.generate() }),\n  keyAccessor: o => o.key,\n  value: [],\n  addTooltip: t('Add an item'),\n};\nconst SortableListItem = SortableElement(CustomListItem);\nconst SortableList = SortableContainer(List);\nconst SortableDragger = SortableHandle(() => (\n  <i\n    role=\"img\"\n    aria-label=\"drag\"\n    className=\"fa fa-bars text-primary\"\n    style={{ cursor: 'ns-resize' }}\n  />\n));\n\nclass CollectionControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onAdd = this.onAdd.bind(this);\n  }\n\n  onChange(i, value) {\n    const newValue = [...this.props.value];\n    newValue[i] = { ...this.props.value[i], ...value };\n    this.props.onChange(newValue);\n  }\n\n  onAdd() {\n    this.props.onChange(this.props.value.concat([this.props.itemGenerator()]));\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n\n  removeItem(i) {\n    this.props.onChange(this.props.value.filter((o, ix) => i !== ix));\n  }\n\n  renderList() {\n    if (this.props.value.length === 0) {\n      return <div className=\"text-muted\">{this.props.placeholder}</div>;\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      <SortableList\n        useDragHandle\n        lockAxis=\"y\"\n        onSortEnd={this.onSortEnd.bind(this)}\n        bordered\n        css={theme => ({\n          borderRadius: theme.gridUnit,\n        })}\n      >\n        {this.props.value.map((o, i) => {\n          // label relevant only for header, not here\n          const { label, ...commonProps } = this.props;\n          return (\n            <SortableListItem\n              className=\"clearfix\"\n              css={{ justifyContent: 'flex-start' }}\n              key={this.props.keyAccessor(o)}\n              index={i}\n            >\n              <SortableDragger />\n              <div\n                css={theme => ({\n                  flex: 1,\n                  marginLeft: theme.gridUnit * 2,\n                  marginRight: theme.gridUnit * 2,\n                })}\n              >\n                <Control\n                  {...commonProps}\n                  {...o}\n                  onChange={this.onChange.bind(this, i)}\n                />\n              </div>\n              <InfoTooltipWithTrigger\n                icon=\"times\"\n                label=\"remove-item\"\n                tooltip={t('Remove item')}\n                bsStyle=\"primary\"\n                onClick={this.removeItem.bind(this, i)}\n              />\n            </SortableListItem>\n          );\n        })}\n      </SortableList>\n    );\n  }\n\n  render() {\n    const { theme } = this.props;\n    return (\n      <div data-test=\"CollectionControl\" className=\"CollectionControl\">\n        <HeaderContainer>\n          <ControlHeader {...this.props} />\n          <AddIconButton onClick={this.onAdd}>\n            <Icons.PlusLarge\n              iconSize=\"s\"\n              iconColor={theme.colors.grayscale.light5}\n            />\n          </AddIconButton>\n        </HeaderContainer>\n        {this.renderList()}\n      </div>\n    );\n  }\n}\n\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;\n\nexport default withTheme(CollectionControl);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}