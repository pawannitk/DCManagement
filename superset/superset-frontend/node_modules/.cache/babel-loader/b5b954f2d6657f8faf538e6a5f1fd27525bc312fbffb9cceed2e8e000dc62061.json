{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, tn } from '@superset-ui/core';\nimport levenshtein from 'js-levenshtein';\nimport IssueCode from './IssueCode';\nimport ErrorAlert from './ErrorAlert';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst maxDistanceForSuggestion = 2;\nconst findMatches = (undefinedParameters, templateKeys) => {\n  const matches = {};\n  undefinedParameters.forEach((undefinedParameter) => {\n    templateKeys.forEach((templateKey) => {\n      if (levenshtein(undefinedParameter, templateKey) <= maxDistanceForSuggestion) {\n        if (!matches[undefinedParameter]) {\n          matches[undefinedParameter] = [];\n        }\n        matches[undefinedParameter].push(`\"${templateKey}\"`);\n      }\n    });\n  });\n  return matches;\n};\nfunction ParameterErrorMessage({ error, source = 'sqllab', subtitle }) {\n  const { extra = { issue_codes: [] }, level, message } = error;\n  const triggerMessage = tn('This was triggered by:', 'This may be triggered by:', extra.issue_codes.length);\n  const matches = findMatches(extra.undefined_parameters || [], Object.keys(extra.template_parameters || {}));\n  const body = ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(\"p\", null,\n  Object.keys(matches).length > 0 && ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(\"p\", null, t('Did you mean:')),\n  ___EmotionJSX(\"ul\", null,\n  Object.entries(matches).map(([undefinedParameter, templateKeys]) => ___EmotionJSX(\"li\", null,\n  tn('%(suggestion)s instead of \"%(undefinedParameter)s?\"', '%(firstSuggestions)s or %(lastSuggestion)s instead of \"%(undefinedParameter)s\"?', templateKeys.length, {\n    suggestion: templateKeys.join(', '),\n    firstSuggestions: templateKeys.slice(0, -1).join(', '),\n    lastSuggestion: templateKeys[templateKeys.length - 1],\n    undefinedParameter\n  })\n  ))\n  ),\n  ___EmotionJSX(\"br\", null)\n  ),\n  triggerMessage,\n  ___EmotionJSX(\"br\", null),\n  extra.issue_codes.length > 0 &&\n  extra.issue_codes.\n  map((issueCode) => ___EmotionJSX(IssueCode, issueCode)).\n  reduce((prev, curr) => [prev, ___EmotionJSX(\"br\", null), curr])\n  )\n  );\n  const copyText = `${message}\n${triggerMessage}\n${extra.issue_codes.map((issueCode) => issueCode.message).join('\\n')}`;\n  return ___EmotionJSX(ErrorAlert, { title: t('Parameter error'), subtitle: subtitle, level: level, source: source, copyText: copyText, body: body });\n}const _default =\nParameterErrorMessage;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(maxDistanceForSuggestion, \"maxDistanceForSuggestion\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ErrorMessage/ParameterErrorMessage.tsx\");reactHotLoader.register(findMatches, \"findMatches\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ErrorMessage/ParameterErrorMessage.tsx\");reactHotLoader.register(ParameterErrorMessage, \"ParameterErrorMessage\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ErrorMessage/ParameterErrorMessage.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ErrorMessage/ParameterErrorMessage.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","t","tn","levenshtein","IssueCode","ErrorAlert","jsx","___EmotionJSX","maxDistanceForSuggestion","findMatches","undefinedParameters","templateKeys","matches","forEach","undefinedParameter","templateKey","push","ParameterErrorMessage","error","source","subtitle","extra","issue_codes","level","message","triggerMessage","length","undefined_parameters","Object","keys","template_parameters","body","Fragment","entries","map","suggestion","join","firstSuggestions","slice","lastSuggestion","issueCode","reduce","prev","curr","copyText","title","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/components/ErrorMessage/ParameterErrorMessage.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, tn } from '@superset-ui/core';\nimport levenshtein from 'js-levenshtein';\n\nimport { ErrorMessageComponentProps } from './types';\nimport IssueCode from './IssueCode';\nimport ErrorAlert from './ErrorAlert';\n\ninterface ParameterErrorExtra {\n  undefined_parameters?: string[];\n  template_parameters?: object;\n  issue_codes: {\n    code: number;\n    message: string;\n  }[];\n}\n\nconst maxDistanceForSuggestion = 2;\nconst findMatches = (undefinedParameters: string[], templateKeys: string[]) => {\n  const matches: { [undefinedParameter: string]: string[] } = {};\n  undefinedParameters.forEach(undefinedParameter => {\n    templateKeys.forEach(templateKey => {\n      if (\n        levenshtein(undefinedParameter, templateKey) <= maxDistanceForSuggestion\n      ) {\n        if (!matches[undefinedParameter]) {\n          matches[undefinedParameter] = [];\n        }\n        matches[undefinedParameter].push(`\"${templateKey}\"`);\n      }\n    });\n  });\n  return matches;\n};\n\nfunction ParameterErrorMessage({\n  error,\n  source = 'sqllab',\n  subtitle,\n}: ErrorMessageComponentProps<ParameterErrorExtra>) {\n  const { extra = { issue_codes: [] }, level, message } = error;\n\n  const triggerMessage = tn(\n    'This was triggered by:',\n    'This may be triggered by:',\n    extra.issue_codes.length,\n  );\n\n  const matches = findMatches(\n    extra.undefined_parameters || [],\n    Object.keys(extra.template_parameters || {}),\n  );\n\n  const body = (\n    <>\n      <p>\n        {Object.keys(matches).length > 0 && (\n          <>\n            <p>{t('Did you mean:')}</p>\n            <ul>\n              {Object.entries(matches).map(\n                ([undefinedParameter, templateKeys]) => (\n                  <li>\n                    {tn(\n                      '%(suggestion)s instead of \"%(undefinedParameter)s?\"',\n                      '%(firstSuggestions)s or %(lastSuggestion)s instead of \"%(undefinedParameter)s\"?',\n                      templateKeys.length,\n                      {\n                        suggestion: templateKeys.join(', '),\n                        firstSuggestions: templateKeys.slice(0, -1).join(', '),\n                        lastSuggestion: templateKeys[templateKeys.length - 1],\n                        undefinedParameter,\n                      },\n                    )}\n                  </li>\n                ),\n              )}\n            </ul>\n            <br />\n          </>\n        )}\n        {triggerMessage}\n        <br />\n        {extra.issue_codes.length > 0 &&\n          extra.issue_codes\n            .map<React.ReactNode>(issueCode => <IssueCode {...issueCode} />)\n            .reduce((prev, curr) => [prev, <br />, curr])}\n      </p>\n    </>\n  );\n\n  const copyText = `${message}\n${triggerMessage}\n${extra.issue_codes.map(issueCode => issueCode.message).join('\\n')}`;\n\n  return (\n    <ErrorAlert\n      title={t('Parameter error')}\n      subtitle={subtitle}\n      level={level}\n      source={source}\n      copyText={copyText}\n      body={body}\n    />\n  );\n}\n\nexport default ParameterErrorMessage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}