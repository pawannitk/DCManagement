{"ast":null,"code":"import _throttle from \"lodash/throttle\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { POPOVER_INITIAL_HEIGHT, POPOVER_INITIAL_WIDTH } from 'src/explore/constants';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst RESIZE_THROTTLE_MS = 50;\nexport default function useResizeButton(minWidth, minHeight) {\n  const [width, setWidth] = useState(POPOVER_INITIAL_WIDTH);\n  const [height, setHeight] = useState(POPOVER_INITIAL_HEIGHT);\n  const [clientX, setClientX] = useState(0);\n  const [clientY, setClientY] = useState(0);\n  const [dragStartX, setDragStartX] = useState(0);\n  const [dragStartY, setDragStartY] = useState(0);\n  const [dragStartWidth, setDragStartWidth] = useState(width);\n  const [dragStartHeight, setDragStartHeight] = useState(height);\n  const [isDragging, setIsDragging] = useState(false);\n  const onMouseMove = useCallback((ev) => {\n    ev.preventDefault();\n    setClientX(ev.clientX);\n    setClientY(ev.clientY);\n  }, []);\n  const onMouseUp = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n  const onDragDown = useCallback((ev) => {\n    setDragStartX(ev.clientX);\n    setDragStartY(ev.clientY);\n    setIsDragging(true);\n  }, []);\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', onMouseMove);\n    } else\n    {\n      setDragStartWidth(width);\n      setDragStartHeight(height);\n      document.removeEventListener('mousemove', onMouseMove);\n    }\n  }, [onMouseMove, isDragging]);\n  const handleResize = useCallback(_throttle(({ dragStartX, dragStartY, dragStartWidth, dragStartHeight, clientX, clientY, minWidth, minHeight }) => {\n    setWidth(Math.max(dragStartWidth + (clientX - dragStartX), minWidth));\n    setHeight(Math.max(dragStartHeight + (clientY - dragStartY), minHeight));\n  }, RESIZE_THROTTLE_MS), [setHeight, setWidth]);\n  useEffect(() => {\n    if (isDragging) {\n      handleResize({\n        dragStartX,\n        dragStartY,\n        dragStartWidth,\n        dragStartHeight,\n        clientX,\n        clientY,\n        minWidth,\n        minHeight\n      });\n    }\n  }, [\n  isDragging,\n  clientX,\n  clientY,\n  dragStartWidth,\n  dragStartHeight,\n  dragStartX,\n  dragStartY]\n  );\n  useEffect(() => {\n    document.addEventListener('mouseup', onMouseUp);\n    return () => document.removeEventListener('mouseup', onMouseUp);\n  }, [onMouseUp]);\n  return [\n  ___EmotionJSX(\"i\", { role: \"button\", \"aria-label\": \"Resize\", tabIndex: 0, onMouseDown: onDragDown, className: \"fa fa-expand edit-popover-resize text-muted\" }),\n  width,\n  height];\n\n}__signature__(useResizeButton, \"useState{[width, setWidth](POPOVER_INITIAL_WIDTH)}\\nuseState{[height, setHeight](POPOVER_INITIAL_HEIGHT)}\\nuseState{[clientX, setClientX](0)}\\nuseState{[clientY, setClientY](0)}\\nuseState{[dragStartX, setDragStartX](0)}\\nuseState{[dragStartY, setDragStartY](0)}\\nuseState{[dragStartWidth, setDragStartWidth](width)}\\nuseState{[dragStartHeight, setDragStartHeight](height)}\\nuseState{[isDragging, setIsDragging](false)}\\nuseCallback{onMouseMove}\\nuseCallback{onMouseUp}\\nuseCallback{onDragDown}\\nuseEffect{}\\nuseCallback{handleResize}\\nuseEffect{}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(RESIZE_THROTTLE_MS, \"RESIZE_THROTTLE_MS\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DndColumnSelectControl/useResizeButton.tsx\");reactHotLoader.register(useResizeButton, \"useResizeButton\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DndColumnSelectControl/useResizeButton.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useEffect","useState","POPOVER_INITIAL_HEIGHT","POPOVER_INITIAL_WIDTH","jsx","___EmotionJSX","RESIZE_THROTTLE_MS","useResizeButton","minWidth","minHeight","width","setWidth","height","setHeight","clientX","setClientX","clientY","setClientY","dragStartX","setDragStartX","dragStartY","setDragStartY","dragStartWidth","setDragStartWidth","dragStartHeight","setDragStartHeight","isDragging","setIsDragging","onMouseMove","ev","preventDefault","onMouseUp","onDragDown","document","addEventListener","removeEventListener","handleResize","_throttle","Math","max","role","tabIndex","onMouseDown","className","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/explore/components/controls/DndColumnSelectControl/useResizeButton.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { throttle } from 'lodash';\nimport {\n  POPOVER_INITIAL_HEIGHT,\n  POPOVER_INITIAL_WIDTH,\n} from 'src/explore/constants';\n\nconst RESIZE_THROTTLE_MS = 50;\n\nexport default function useResizeButton(\n  minWidth: number,\n  minHeight: number,\n): [JSX.Element, number, number] {\n  const [width, setWidth] = useState(POPOVER_INITIAL_WIDTH);\n  const [height, setHeight] = useState(POPOVER_INITIAL_HEIGHT);\n  const [clientX, setClientX] = useState(0);\n  const [clientY, setClientY] = useState(0);\n  const [dragStartX, setDragStartX] = useState(0);\n  const [dragStartY, setDragStartY] = useState(0);\n  const [dragStartWidth, setDragStartWidth] = useState(width);\n  const [dragStartHeight, setDragStartHeight] = useState(height);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const onMouseMove = useCallback((ev: MouseEvent): void => {\n    ev.preventDefault();\n    setClientX(ev.clientX);\n    setClientY(ev.clientY);\n  }, []);\n\n  const onMouseUp = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n\n  const onDragDown = useCallback((ev: React.MouseEvent): void => {\n    setDragStartX(ev.clientX);\n    setDragStartY(ev.clientY);\n    setIsDragging(true);\n  }, []);\n\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', onMouseMove);\n    } else {\n      setDragStartWidth(width);\n      setDragStartHeight(height);\n      document.removeEventListener('mousemove', onMouseMove);\n    }\n  }, [onMouseMove, isDragging]);\n\n  const handleResize = useCallback(\n    throttle(\n      ({\n        dragStartX,\n        dragStartY,\n        dragStartWidth,\n        dragStartHeight,\n        clientX,\n        clientY,\n        minWidth,\n        minHeight,\n      }: {\n        dragStartX: number;\n        dragStartY: number;\n        dragStartWidth: number;\n        dragStartHeight: number;\n        clientX: number;\n        clientY: number;\n        minWidth: number;\n        minHeight: number;\n      }): void => {\n        setWidth(Math.max(dragStartWidth + (clientX - dragStartX), minWidth));\n        setHeight(\n          Math.max(dragStartHeight + (clientY - dragStartY), minHeight),\n        );\n      },\n      RESIZE_THROTTLE_MS,\n    ),\n    [setHeight, setWidth],\n  );\n\n  useEffect(() => {\n    if (isDragging) {\n      handleResize({\n        dragStartX,\n        dragStartY,\n        dragStartWidth,\n        dragStartHeight,\n        clientX,\n        clientY,\n        minWidth,\n        minHeight,\n      });\n    }\n  }, [\n    isDragging,\n    clientX,\n    clientY,\n    dragStartWidth,\n    dragStartHeight,\n    dragStartX,\n    dragStartY,\n  ]);\n\n  useEffect(() => {\n    document.addEventListener('mouseup', onMouseUp);\n    return () => document.removeEventListener('mouseup', onMouseUp);\n  }, [onMouseUp]);\n\n  return [\n    <i\n      role=\"button\"\n      aria-label=\"Resize\"\n      tabIndex={0}\n      onMouseDown={onDragDown}\n      className=\"fa fa-expand edit-popover-resize text-muted\"\n    />,\n    width,\n    height,\n  ];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}