{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ArcLayer } from 'deck.gl/typed';\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { commonLayerProps } from '../common';\nimport { createCategoricalDeckGLComponent } from '../../factory';\nimport TooltipRow from '../../TooltipRow';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction getPoints(data) {\n  const points = [];\n  data.forEach((d) => {\n    points.push(d.sourcePosition);\n    points.push(d.targetPosition);\n  });\n  return points;\n}\nfunction setTooltipContent(formData) {\n  return (o) => {var _o$object, _o$object$sourcePosit, _o$object2, _o$object2$sourcePosi, _o$object3, _o$object3$targetPosi, _o$object4, _o$object4$targetPosi, _o$object5;return ___EmotionJSX(\"div\", { className: \"deckgl-tooltip\" },\n    ___EmotionJSX(TooltipRow, { label: t('Start (Longitude, Latitude): '), value: `${(_o$object = o.object) == null ? void 0 : (_o$object$sourcePosit = _o$object.sourcePosition) == null ? void 0 : _o$object$sourcePosit[0]}, ${(_o$object2 = o.object) == null ? void 0 : (_o$object2$sourcePosi = _o$object2.sourcePosition) == null ? void 0 : _o$object2$sourcePosi[1]}` }),\n    ___EmotionJSX(TooltipRow, { label: t('End (Longitude, Latitude): '), value: `${(_o$object3 = o.object) == null ? void 0 : (_o$object3$targetPosi = _o$object3.targetPosition) == null ? void 0 : _o$object3$targetPosi[0]}, ${(_o$object4 = o.object) == null ? void 0 : (_o$object4$targetPosi = _o$object4.targetPosition) == null ? void 0 : _o$object4$targetPosi[1]}` }),\n    formData.dimension && ___EmotionJSX(TooltipRow, { label: `${formData == null ? void 0 : formData.dimension}: `, value: `${(_o$object5 = o.object) == null ? void 0 : _o$object5.cat_color}` })\n    );};\n}\nexport function getLayer(fd, payload, onAddFilter, setTooltip) {\n  const data = payload.data.features;\n  const sc = fd.color_picker;\n  const tc = fd.target_color_picker;\n  return new ArcLayer({\n    data,\n    getSourceColor: (d) => d.sourceColor || d.color || [sc.r, sc.g, sc.b, 255 * sc.a],\n    getTargetColor: (d) => d.targetColor || d.color || [tc.r, tc.g, tc.b, 255 * tc.a],\n    id: `path-layer-${fd.slice_id}`,\n    strokeWidth: fd.stroke_width ? fd.stroke_width : 3,\n    ...commonLayerProps(fd, setTooltip, setTooltipContent(fd))\n  });\n}const _default =\ncreateCategoricalDeckGLComponent(getLayer, getPoints);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getPoints, \"getPoints\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(setTooltipContent, \"setTooltipContent\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(getLayer, \"getLayer\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ArcLayer","React","t","commonLayerProps","createCategoricalDeckGLComponent","TooltipRow","jsx","___EmotionJSX","getPoints","data","points","forEach","d","push","sourcePosition","targetPosition","setTooltipContent","formData","o","_o$object","_o$object$sourcePosit","_o$object2","_o$object2$sourcePosi","_o$object3","_o$object3$targetPosi","_o$object4","_o$object4$targetPosi","_o$object5","className","label","value","object","dimension","cat_color","getLayer","fd","payload","onAddFilter","setTooltip","features","sc","color_picker","tc","target_color_picker","getSourceColor","sourceColor","color","r","g","b","a","getTargetColor","targetColor","id","slice_id","strokeWidth","stroke_width","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ArcLayer } from 'deck.gl/typed';\nimport React from 'react';\nimport {\n  HandlerFunction,\n  JsonObject,\n  QueryFormData,\n  t,\n} from '@superset-ui/core';\nimport { commonLayerProps } from '../common';\nimport { createCategoricalDeckGLComponent } from '../../factory';\nimport TooltipRow from '../../TooltipRow';\nimport { TooltipProps } from '../../components/Tooltip';\nimport { Point } from '../../types';\n\nfunction getPoints(data: JsonObject[]) {\n  const points: Point[] = [];\n  data.forEach(d => {\n    points.push(d.sourcePosition);\n    points.push(d.targetPosition);\n  });\n\n  return points;\n}\n\nfunction setTooltipContent(formData: QueryFormData) {\n  return (o: JsonObject) => (\n    <div className=\"deckgl-tooltip\">\n      <TooltipRow\n        label={t('Start (Longitude, Latitude): ')}\n        value={`${o.object?.sourcePosition?.[0]}, ${o.object?.sourcePosition?.[1]}`}\n      />\n      <TooltipRow\n        label={t('End (Longitude, Latitude): ')}\n        value={`${o.object?.targetPosition?.[0]}, ${o.object?.targetPosition?.[1]}`}\n      />\n      {formData.dimension && (\n        <TooltipRow\n          label={`${formData?.dimension}: `}\n          value={`${o.object?.cat_color}`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport function getLayer(\n  fd: QueryFormData,\n  payload: JsonObject,\n  onAddFilter: HandlerFunction,\n  setTooltip: (tooltip: TooltipProps['tooltip']) => void,\n) {\n  const data = payload.data.features;\n  const sc = fd.color_picker;\n  const tc = fd.target_color_picker;\n\n  return new ArcLayer({\n    data,\n    getSourceColor: d =>\n      d.sourceColor || d.color || [sc.r, sc.g, sc.b, 255 * sc.a],\n    getTargetColor: d =>\n      d.targetColor || d.color || [tc.r, tc.g, tc.b, 255 * tc.a],\n    id: `path-layer-${fd.slice_id}` as const,\n    strokeWidth: fd.stroke_width ? fd.stroke_width : 3,\n    ...commonLayerProps(fd, setTooltip, setTooltipContent(fd)),\n  });\n}\n\nexport default createCategoricalDeckGLComponent(getLayer, getPoints);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}