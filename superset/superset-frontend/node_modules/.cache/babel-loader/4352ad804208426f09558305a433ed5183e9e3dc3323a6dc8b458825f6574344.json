{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { css, ensureIsArray, GenericDataType, t, useTheme } from '@superset-ui/core';\nimport { useResizeDetector } from 'react-resize-detector';\nimport Loading from 'src/components/Loading';\nimport BooleanCell from 'src/components/Table/cell-renderers/BooleanCell';\nimport NullCell from 'src/components/Table/cell-renderers/NullCell';\nimport TimeCell from 'src/components/Table/cell-renderers/TimeCell';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { getDatasourceSamples } from 'src/components/Chart/chartAction';\nimport Table, { TableSize } from 'src/components/Table';\nimport HeaderWithRadioGroup from 'src/components/Table/header-renderers/HeaderWithRadioGroup';\nimport { ResourceStatus } from 'src/hooks/apiResources/apiResources';\nimport { useDatasetMetadataBar } from 'src/features/datasets/metadataBar/useDatasetMetadataBar';\nimport TableControls from './DrillDetailTableControls';\nimport { getDrillPayload } from './utils';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst PAGE_SIZE = 50;\n// Must be outside of the main component due to problems in\n// react-resize-detector with conditional rendering\n// https://github.com/maslianok/react-resize-detector/issues/178\nvar _ref = process.env.NODE_ENV === \"production\" ? { name: \"82a6rk\", styles: \"flex:1\" } : { name: \"1715jyj-Resizable\", styles: \"flex:1;label:Resizable;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bhd2Fuay9Eb2N1bWVudHMvZGNpbS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9DaGFydC9EcmlsbERldGFpbC9EcmlsbERldGFpbFBhbmUudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdDMkIiLCJmaWxlIjoiL2hvbWUvcGF3YW5rL0RvY3VtZW50cy9kY2ltL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0NoYXJ0L0RyaWxsRGV0YWlsL0RyaWxsRGV0YWlsUGFuZS50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSwgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IGNzcywgZW5zdXJlSXNBcnJheSwgR2VuZXJpY0RhdGFUeXBlLCB0LCB1c2VUaGVtZSwgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyB1c2VSZXNpemVEZXRlY3RvciB9IGZyb20gJ3JlYWN0LXJlc2l6ZS1kZXRlY3Rvcic7XG5pbXBvcnQgTG9hZGluZyBmcm9tICdzcmMvY29tcG9uZW50cy9Mb2FkaW5nJztcbmltcG9ydCBCb29sZWFuQ2VsbCBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZS9jZWxsLXJlbmRlcmVycy9Cb29sZWFuQ2VsbCc7XG5pbXBvcnQgTnVsbENlbGwgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFibGUvY2VsbC1yZW5kZXJlcnMvTnVsbENlbGwnO1xuaW1wb3J0IFRpbWVDZWxsIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlL2NlbGwtcmVuZGVyZXJzL1RpbWVDZWxsJztcbmltcG9ydCB7IEVtcHR5U3RhdGVNZWRpdW0gfSBmcm9tICdzcmMvY29tcG9uZW50cy9FbXB0eVN0YXRlJztcbmltcG9ydCB7IGdldERhdGFzb3VyY2VTYW1wbGVzIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2hhcnQvY2hhcnRBY3Rpb24nO1xuaW1wb3J0IFRhYmxlLCB7IFRhYmxlU2l6ZSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYmxlJztcbmltcG9ydCBIZWFkZXJXaXRoUmFkaW9Hcm91cCBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZS9oZWFkZXItcmVuZGVyZXJzL0hlYWRlcldpdGhSYWRpb0dyb3VwJztcbmltcG9ydCB7IFJlc291cmNlU3RhdHVzIH0gZnJvbSAnc3JjL2hvb2tzL2FwaVJlc291cmNlcy9hcGlSZXNvdXJjZXMnO1xuaW1wb3J0IHsgdXNlRGF0YXNldE1ldGFkYXRhQmFyIH0gZnJvbSAnc3JjL2ZlYXR1cmVzL2RhdGFzZXRzL21ldGFkYXRhQmFyL3VzZURhdGFzZXRNZXRhZGF0YUJhcic7XG5pbXBvcnQgVGFibGVDb250cm9scyBmcm9tICcuL0RyaWxsRGV0YWlsVGFibGVDb250cm9scyc7XG5pbXBvcnQgeyBnZXREcmlsbFBheWxvYWQgfSBmcm9tICcuL3V0aWxzJztcbmNvbnN0IFBBR0VfU0laRSA9IDUwO1xuLy8gTXVzdCBiZSBvdXRzaWRlIG9mIHRoZSBtYWluIGNvbXBvbmVudCBkdWUgdG8gcHJvYmxlbXMgaW5cbi8vIHJlYWN0LXJlc2l6ZS1kZXRlY3RvciB3aXRoIGNvbmRpdGlvbmFsIHJlbmRlcmluZ1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL21hc2xpYW5vay9yZWFjdC1yZXNpemUtZGV0ZWN0b3IvaXNzdWVzLzE3OFxuZnVuY3Rpb24gUmVzaXphYmxlKHsgY2hpbGRyZW4gfSkge1xuICAgIGNvbnN0IHsgcmVmLCBoZWlnaHQgfSA9IHVzZVJlc2l6ZURldGVjdG9yKCk7XG4gICAgcmV0dXJuICg8ZGl2IHJlZj17cmVmfSBjc3M9e3sgZmxleDogMSB9fT5cbiAgICAgIHtSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIHsgaGVpZ2h0IH0pfVxuICAgIDwvZGl2Pik7XG59XG52YXIgVGltZUZvcm1hdHRpbmc7XG4oZnVuY3Rpb24gKFRpbWVGb3JtYXR0aW5nKSB7XG4gICAgVGltZUZvcm1hdHRpbmdbVGltZUZvcm1hdHRpbmdbXCJPcmlnaW5hbFwiXSA9IDBdID0gXCJPcmlnaW5hbFwiO1xuICAgIFRpbWVGb3JtYXR0aW5nW1RpbWVGb3JtYXR0aW5nW1wiRm9ybWF0dGVkXCJdID0gMV0gPSBcIkZvcm1hdHRlZFwiO1xufSkoVGltZUZvcm1hdHRpbmcgfHwgKFRpbWVGb3JtYXR0aW5nID0ge30pKTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERyaWxsRGV0YWlsUGFuZSh7IGZvcm1EYXRhLCBpbml0aWFsRmlsdGVycywgfSkge1xuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgICBjb25zdCBbcGFnZUluZGV4LCBzZXRQYWdlSW5kZXhdID0gdXNlU3RhdGUoMCk7XG4gICAgY29uc3QgbGFzdFBhZ2VJbmRleCA9IHVzZVJlZihwYWdlSW5kZXgpO1xuICAgIGNvbnN0IFtmaWx0ZXJzLCBzZXRGaWx0ZXJzXSA9IHVzZVN0YXRlKGluaXRpYWxGaWx0ZXJzKTtcbiAgICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtyZXNwb25zZUVycm9yLCBzZXRSZXNwb25zZUVycm9yXSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbcmVzdWx0c1BhZ2VzLCBzZXRSZXN1bHRzUGFnZXNdID0gdXNlU3RhdGUobmV3IE1hcCgpKTtcbiAgICBjb25zdCBbdGltZUZvcm1hdHRpbmcsIHNldFRpbWVGb3JtYXR0aW5nXSA9IHVzZVN0YXRlKHt9KTtcbiAgICBjb25zdCBTQU1QTEVTX1JPV19MSU1JVCA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuY29tbW9uLmNvbmYuU0FNUExFU19ST1dfTElNSVQpO1xuICAgIC8vIEV4dHJhY3QgZGF0YXNvdXJjZSBJRC90eXBlIGZyb20gc3RyaW5nIElEXG4gICAgY29uc3QgW2RhdGFzb3VyY2VJZCwgZGF0YXNvdXJjZVR5cGVdID0gdXNlTWVtbygoKSA9PiBmb3JtRGF0YS5kYXRhc291cmNlLnNwbGl0KCdfXycpLCBbZm9ybURhdGEuZGF0YXNvdXJjZV0pO1xuICAgIGNvbnN0IHsgbWV0YWRhdGFCYXIsIHN0YXR1czogbWV0YWRhdGFCYXJTdGF0dXMgfSA9IHVzZURhdGFzZXRNZXRhZGF0YUJhcih7XG4gICAgICAgIGRhdGFzZXRJZDogZGF0YXNvdXJjZUlkLFxuICAgIH0pO1xuICAgIC8vIEdldCBwYWdlIG9mIHJlc3VsdHNcbiAgICBjb25zdCByZXN1bHRzUGFnZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0UmVzdWx0c1BhZ2UgPSByZXN1bHRzUGFnZXMuZ2V0KHBhZ2VJbmRleCk7XG4gICAgICAgIGlmIChuZXh0UmVzdWx0c1BhZ2UpIHtcbiAgICAgICAgICAgIGxhc3RQYWdlSW5kZXguY3VycmVudCA9IHBhZ2VJbmRleDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0UmVzdWx0c1BhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHNQYWdlcy5nZXQobGFzdFBhZ2VJbmRleC5jdXJyZW50KTtcbiAgICB9LCBbcGFnZUluZGV4LCByZXN1bHRzUGFnZXNdKTtcbiAgICBjb25zdCBtYXBwZWRDb2x1bW5zID0gdXNlTWVtbygoKSA9PiByZXN1bHRzUGFnZT8uY29sTmFtZXMubWFwKChjb2x1bW4sIGluZGV4KSA9PiAoe1xuICAgICAgICBrZXk6IGNvbHVtbixcbiAgICAgICAgZGF0YUluZGV4OiBjb2x1bW4sXG4gICAgICAgIHRpdGxlOiByZXN1bHRzUGFnZT8uY29sVHlwZXNbaW5kZXhdID09PSBHZW5lcmljRGF0YVR5cGUuVGVtcG9yYWwgPyAoPEhlYWRlcldpdGhSYWRpb0dyb3VwIGhlYWRlclRpdGxlPXtjb2x1bW59IGdyb3VwVGl0bGU9e3QoJ0Zvcm1hdHRpbmcnKX0gZ3JvdXBPcHRpb25zPXtbXG4gICAgICAgICAgICAgICAgeyBsYWJlbDogdCgnT3JpZ2luYWwgdmFsdWUnKSwgdmFsdWU6IFRpbWVGb3JtYXR0aW5nLk9yaWdpbmFsIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnRm9ybWF0dGVkIHZhbHVlJyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBUaW1lRm9ybWF0dGluZy5Gb3JtYXR0ZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF19IHZhbHVlPXt0aW1lRm9ybWF0dGluZ1tjb2x1bW5dID09PSBUaW1lRm9ybWF0dGluZy5PcmlnaW5hbFxuICAgICAgICAgICAgICAgID8gVGltZUZvcm1hdHRpbmcuT3JpZ2luYWxcbiAgICAgICAgICAgICAgICA6IFRpbWVGb3JtYXR0aW5nLkZvcm1hdHRlZH0gb25DaGFuZ2U9e3ZhbHVlID0+IHNldFRpbWVGb3JtYXR0aW5nKHN0YXRlID0+ICh7IC4uLnN0YXRlLCBbY29sdW1uXTogdmFsdWUgfSkpfS8+KSA6IChjb2x1bW4pLFxuICAgICAgICByZW5kZXI6IHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPEJvb2xlYW5DZWxsIHZhbHVlPXt2YWx1ZX0vPjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiA8TnVsbENlbGwgLz47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0c1BhZ2U/LmNvbFR5cGVzW2luZGV4XSA9PT0gR2VuZXJpY0RhdGFUeXBlLlRlbXBvcmFsICYmXG4gICAgICAgICAgICAgICAgdGltZUZvcm1hdHRpbmdbY29sdW1uXSAhPT0gVGltZUZvcm1hdHRpbmcuT3JpZ2luYWwgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB2YWx1ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxUaW1lQ2VsbCB2YWx1ZT17dmFsdWV9Lz47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2lkdGg6IDE1MCxcbiAgICB9KSkgfHwgW10sIFtyZXN1bHRzUGFnZT8uY29sTmFtZXMsIHJlc3VsdHNQYWdlPy5jb2xUeXBlcywgdGltZUZvcm1hdHRpbmddKTtcbiAgICBjb25zdCBkYXRhID0gdXNlTWVtbygoKSA9PiByZXN1bHRzUGFnZT8uZGF0YS5tYXAoKHJvdywgaW5kZXgpID0+IHJlc3VsdHNQYWdlPy5jb2xOYW1lcy5yZWR1Y2UoKGFjYywgY3VycikgPT4gKHsgLi4uYWNjLCBbY3Vycl06IHJvd1tjdXJyXSB9KSwge1xuICAgICAgICBrZXk6IGluZGV4LFxuICAgIH0pKSB8fCBbXSwgW3Jlc3VsdHNQYWdlPy5jb2xOYW1lcywgcmVzdWx0c1BhZ2U/LmRhdGFdKTtcbiAgICAvLyBDbGVhciBjYWNoZSBvbiByZWxvYWQgYnV0dG9uIGNsaWNrXG4gICAgY29uc3QgaGFuZGxlUmVsb2FkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRSZXNwb25zZUVycm9yKCcnKTtcbiAgICAgICAgc2V0UmVzdWx0c1BhZ2VzKG5ldyBNYXAoKSk7XG4gICAgICAgIHNldFBhZ2VJbmRleCgwKTtcbiAgICB9LCBbXSk7XG4gICAgLy8gQ2xlYXIgY2FjaGUgYW5kIHJlc2V0IHBhZ2UgaW5kZXggaWYgZmlsdGVycyBjaGFuZ2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRSZXNwb25zZUVycm9yKCcnKTtcbiAgICAgICAgc2V0UmVzdWx0c1BhZ2VzKG5ldyBNYXAoKSk7XG4gICAgICAgIHNldFBhZ2VJbmRleCgwKTtcbiAgICB9LCBbZmlsdGVyc10pO1xuICAgIC8vIFVwZGF0ZSBjYWNoZSBvcmRlciBpZiBwYWdlIGluIGNhY2hlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdHNQYWdlcy5oYXMocGFnZUluZGV4KSAmJlxuICAgICAgICAgICAgWy4uLnJlc3VsdHNQYWdlcy5rZXlzKCldLmF0KC0xKSAhPT0gcGFnZUluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVzdWx0c1BhZ2VzID0gbmV3IE1hcChyZXN1bHRzUGFnZXMpO1xuICAgICAgICAgICAgbmV4dFJlc3VsdHNQYWdlcy5kZWxldGUocGFnZUluZGV4KTtcbiAgICAgICAgICAgIHNldFJlc3VsdHNQYWdlcyhuZXh0UmVzdWx0c1BhZ2VzLnNldChwYWdlSW5kZXgsIHJlc3VsdHNQYWdlcy5nZXQocGFnZUluZGV4KSkpO1xuICAgICAgICB9XG4gICAgfSwgW3BhZ2VJbmRleCwgcmVzdWx0c1BhZ2VzXSk7XG4gICAgLy8gRG93bmxvYWQgcGFnZSBvZiByZXN1bHRzICYgdHJpbSBjYWNoZSBpZiBwYWdlIG5vdCBpbiBjYWNoZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghcmVzcG9uc2VFcnJvciAmJiAhaXNMb2FkaW5nICYmICFyZXN1bHRzUGFnZXMuaGFzKHBhZ2VJbmRleCkpIHtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25QYXlsb2FkID0gZ2V0RHJpbGxQYXlsb2FkKGZvcm1EYXRhLCBmaWx0ZXJzKSA/PyB7fTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlUGFnZUxpbWl0ID0gTWF0aC5jZWlsKFNBTVBMRVNfUk9XX0xJTUlUIC8gUEFHRV9TSVpFKTtcbiAgICAgICAgICAgIGdldERhdGFzb3VyY2VTYW1wbGVzKGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlSWQsIGZhbHNlLCBqc29uUGF5bG9hZCwgUEFHRV9TSVpFLCBwYWdlSW5kZXggKyAxKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBzZXRSZXN1bHRzUGFnZXMobmV3IE1hcChbXG4gICAgICAgICAgICAgICAgICAgIC4uLlsuLi5yZXN1bHRzUGFnZXMuZW50cmllcygpXS5zbGljZSgtY2FjaGVQYWdlTGltaXQgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiByZXNwb25zZS50b3RhbF9jb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbE5hbWVzOiBlbnN1cmVJc0FycmF5KHJlc3BvbnNlLmNvbG5hbWVzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xUeXBlczogZW5zdXJlSXNBcnJheShyZXNwb25zZS5jb2x0eXBlcyksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIF0pKTtcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZUVycm9yKCcnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZUVycm9yKGAke2Vycm9yLm5hbWV9OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbXG4gICAgICAgIFNBTVBMRVNfUk9XX0xJTUlULFxuICAgICAgICBkYXRhc291cmNlSWQsXG4gICAgICAgIGRhdGFzb3VyY2VUeXBlLFxuICAgICAgICBmaWx0ZXJzLFxuICAgICAgICBmb3JtRGF0YSxcbiAgICAgICAgaXNMb2FkaW5nLFxuICAgICAgICBwYWdlSW5kZXgsXG4gICAgICAgIHJlc3BvbnNlRXJyb3IsXG4gICAgICAgIHJlc3VsdHNQYWdlcyxcbiAgICBdKTtcbiAgICBjb25zdCBib290c3RyYXBwaW5nID0gKCFyZXNwb25zZUVycm9yICYmICFyZXN1bHRzUGFnZXMuc2l6ZSkgfHxcbiAgICAgICAgbWV0YWRhdGFCYXJTdGF0dXMgPT09IFJlc291cmNlU3RhdHVzLkxvYWRpbmc7XG4gICAgY29uc3QgYWxsb3dIVE1MID0gZm9ybURhdGEuYWxsb3dfcmVuZGVyX2h0bWwgPz8gdHJ1ZTtcbiAgICBsZXQgdGFibGVDb250ZW50ID0gbnVsbDtcbiAgICBpZiAocmVzcG9uc2VFcnJvcikge1xuICAgICAgICAvLyBSZW5kZXIgZXJyb3IgaWYgcGFnZSBkb3dubG9hZCBmYWlsZWRcbiAgICAgICAgdGFibGVDb250ZW50ID0gKDxwcmUgY3NzPXtjc3MgYFxuICAgICAgICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgICAgICBgfT5cbiAgICAgICAge3Jlc3BvbnNlRXJyb3J9XG4gICAgICA8L3ByZT4pO1xuICAgIH1cbiAgICBlbHNlIGlmIChib290c3RyYXBwaW5nKSB7XG4gICAgICAgIC8vIFJlbmRlciBsb2FkaW5nIGlmIGZpcnN0IHBhZ2UgaGFzbid0IGxvYWRlZFxuICAgICAgICB0YWJsZUNvbnRlbnQgPSA8TG9hZGluZyAvPjtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVzdWx0c1BhZ2U/LnRvdGFsID09PSAwKSB7XG4gICAgICAgIC8vIFJlbmRlciBlbXB0eSBzdGF0ZSBpZiBubyByZXN1bHRzIGFyZSByZXR1cm5lZCBmb3IgcGFnZVxuICAgICAgICBjb25zdCB0aXRsZSA9IHQoJ05vIHJvd3Mgd2VyZSByZXR1cm5lZCBmb3IgdGhpcyBkYXRhc2V0Jyk7XG4gICAgICAgIHRhYmxlQ29udGVudCA9IDxFbXB0eVN0YXRlTWVkaXVtIGltYWdlPVwiZG9jdW1lbnQuc3ZnXCIgdGl0bGU9e3RpdGxlfS8+O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gUmVuZGVyIHRhYmxlIGlmIGF0IGxlYXN0IG9uZSBwYWdlIGhhcyBzdWNjZXNzZnVsbHkgbG9hZGVkXG4gICAgICAgIHRhYmxlQ29udGVudCA9ICg8UmVzaXphYmxlPlxuICAgICAgICA8VGFibGUgZGF0YT17ZGF0YX0gY29sdW1ucz17bWFwcGVkQ29sdW1uc30gc2l6ZT17VGFibGVTaXplLlNtYWxsfSBkZWZhdWx0UGFnZVNpemU9e1BBR0VfU0laRX0gcmVjb3JkQ291bnQ9e3Jlc3VsdHNQYWdlPy50b3RhbH0gdXNlUGFnaW5hdGlvbiBsb2FkaW5nPXtpc0xvYWRpbmd9IG9uQ2hhbmdlPXtwYWdpbmF0aW9uID0+IHNldFBhZ2VJbmRleChwYWdpbmF0aW9uLmN1cnJlbnQgPyBwYWdpbmF0aW9uLmN1cnJlbnQgLSAxIDogMCl9IHJlc2l6YWJsZSB2aXJ0dWFsaXplIGFsbG93SFRNTD17YWxsb3dIVE1MfS8+XG4gICAgICA8L1Jlc2l6YWJsZT4pO1xuICAgIH1cbiAgICByZXR1cm4gKDw+XG4gICAgICB7IWJvb3RzdHJhcHBpbmcgJiYgbWV0YWRhdGFCYXJ9XG4gICAgICB7IWJvb3RzdHJhcHBpbmcgJiYgKDxUYWJsZUNvbnRyb2xzIGZpbHRlcnM9e2ZpbHRlcnN9IHNldEZpbHRlcnM9e3NldEZpbHRlcnN9IHRvdGFsQ291bnQ9e3Jlc3VsdHNQYWdlPy50b3RhbH0gbG9hZGluZz17aXNMb2FkaW5nfSBvblJlbG9hZD17aGFuZGxlUmVsb2FkfS8+KX1cbiAgICAgIHt0YWJsZUNvbnRlbnR9XG4gICAgPC8+KTtcbn1cbiJdfQ== */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };function Resizable({ children }) {\n  const { ref, height } = useResizeDetector();\n  return ___EmotionJSX(\"div\", { ref: ref, css: _ref }, /*#__PURE__*/\n  React.cloneElement(children, { height })\n  );\n}__signature__(Resizable, \"useResizeDetector{{ ref, height }}\", () => [useResizeDetector]);\nvar TimeFormatting;\n(function (TimeFormatting) {\n  TimeFormatting[TimeFormatting[\"Original\"] = 0] = \"Original\";\n  TimeFormatting[TimeFormatting[\"Formatted\"] = 1] = \"Formatted\";\n})(TimeFormatting || (TimeFormatting = {}));\nexport default function DrillDetailPane({ formData, initialFilters }) {var _formData$allow_rende;\n  const theme = useTheme();\n  const [pageIndex, setPageIndex] = useState(0);\n  const lastPageIndex = useRef(pageIndex);\n  const [filters, setFilters] = useState(initialFilters);\n  const [isLoading, setIsLoading] = useState(false);\n  const [responseError, setResponseError] = useState('');\n  const [resultsPages, setResultsPages] = useState(new Map());\n  const [timeFormatting, setTimeFormatting] = useState({});\n  const SAMPLES_ROW_LIMIT = useSelector((state) => state.common.conf.SAMPLES_ROW_LIMIT);\n  // Extract datasource ID/type from string ID\n  const [datasourceId, datasourceType] = useMemo(() => formData.datasource.split('__'), [formData.datasource]);\n  const { metadataBar, status: metadataBarStatus } = useDatasetMetadataBar({\n    datasetId: datasourceId\n  });\n  // Get page of results\n  const resultsPage = useMemo(() => {\n    const nextResultsPage = resultsPages.get(pageIndex);\n    if (nextResultsPage) {\n      lastPageIndex.current = pageIndex;\n      return nextResultsPage;\n    }\n    return resultsPages.get(lastPageIndex.current);\n  }, [pageIndex, resultsPages]);\n  const mappedColumns = useMemo(() => (resultsPage == null ? void 0 : resultsPage.colNames.map((column, index) => ({\n    key: column,\n    dataIndex: column,\n    title: (resultsPage == null ? void 0 : resultsPage.colTypes[index]) === GenericDataType.Temporal ? ___EmotionJSX(HeaderWithRadioGroup, { headerTitle: column, groupTitle: t('Formatting'), groupOptions: [\n      { label: t('Original value'), value: TimeFormatting.Original },\n      {\n        label: t('Formatted value'),\n        value: TimeFormatting.Formatted\n      }],\n      value: timeFormatting[column] === TimeFormatting.Original ?\n      TimeFormatting.Original :\n      TimeFormatting.Formatted, onChange: (value) => setTimeFormatting((state) => ({ ...state, [column]: value })) }) : column,\n    render: (value) => {\n      if (value === true || value === false) {\n        return ___EmotionJSX(BooleanCell, { value: value });\n      }\n      if (value === null) {\n        return ___EmotionJSX(NullCell, null);\n      }\n      if ((resultsPage == null ? void 0 : resultsPage.colTypes[index]) === GenericDataType.Temporal &&\n      timeFormatting[column] !== TimeFormatting.Original && (\n      typeof value === 'number' || value instanceof Date)) {\n        return ___EmotionJSX(TimeCell, { value: value });\n      }\n      return String(value);\n    },\n    width: 150\n  }))) || [], [resultsPage == null ? void 0 : resultsPage.colNames, resultsPage == null ? void 0 : resultsPage.colTypes, timeFormatting]);\n  const data = useMemo(() => (resultsPage == null ? void 0 : resultsPage.data.map((row, index) => resultsPage == null ? void 0 : resultsPage.colNames.reduce((acc, curr) => ({ ...acc, [curr]: row[curr] }), {\n    key: index\n  }))) || [], [resultsPage == null ? void 0 : resultsPage.colNames, resultsPage == null ? void 0 : resultsPage.data]);\n  // Clear cache on reload button click\n  const handleReload = useCallback(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, []);\n  // Clear cache and reset page index if filters change\n  useEffect(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, [filters]);\n  // Update cache order if page in cache\n  useEffect(() => {\n    if (resultsPages.has(pageIndex) &&\n    [...resultsPages.keys()].at(-1) !== pageIndex) {\n      const nextResultsPages = new Map(resultsPages);\n      nextResultsPages.delete(pageIndex);\n      setResultsPages(nextResultsPages.set(pageIndex, resultsPages.get(pageIndex)));\n    }\n  }, [pageIndex, resultsPages]);\n  // Download page of results & trim cache if page not in cache\n  useEffect(() => {\n    if (!responseError && !isLoading && !resultsPages.has(pageIndex)) {var _getDrillPayload;\n      setIsLoading(true);\n      const jsonPayload = (_getDrillPayload = getDrillPayload(formData, filters)) != null ? _getDrillPayload : {};\n      const cachePageLimit = Math.ceil(SAMPLES_ROW_LIMIT / PAGE_SIZE);\n      getDatasourceSamples(datasourceType, datasourceId, false, jsonPayload, PAGE_SIZE, pageIndex + 1).\n      then((response) => {\n        setResultsPages(new Map([\n        ...[...resultsPages.entries()].slice(-cachePageLimit + 1),\n        [\n        pageIndex,\n        {\n          total: response.total_count,\n          data: response.data,\n          colNames: ensureIsArray(response.colnames),\n          colTypes: ensureIsArray(response.coltypes)\n        }]]\n\n        ));\n        setResponseError('');\n      }).\n      catch((error) => {\n        setResponseError(`${error.name}: ${error.message}`);\n      }).\n      finally(() => {\n        setIsLoading(false);\n      });\n    }\n  }, [\n  SAMPLES_ROW_LIMIT,\n  datasourceId,\n  datasourceType,\n  filters,\n  formData,\n  isLoading,\n  pageIndex,\n  responseError,\n  resultsPages]\n  );\n  const bootstrapping = !responseError && !resultsPages.size ||\n  metadataBarStatus === ResourceStatus.Loading;\n  const allowHTML = (_formData$allow_rende = formData.allow_render_html) != null ? _formData$allow_rende : true;\n  let tableContent = null;\n  if (responseError) {\n    // Render error if page download failed\n    tableContent = ___EmotionJSX(\"pre\", { css: css`\n          margin-top: ${theme.gridUnit * 4}px;\n        ` },\n    responseError\n    );\n  } else\n  if (bootstrapping) {\n    // Render loading if first page hasn't loaded\n    tableContent = ___EmotionJSX(Loading, null);\n  } else\n  if ((resultsPage == null ? void 0 : resultsPage.total) === 0) {\n    // Render empty state if no results are returned for page\n    const title = t('No rows were returned for this dataset');\n    tableContent = ___EmotionJSX(EmptyStateMedium, { image: \"document.svg\", title: title });\n  } else\n  {\n    // Render table if at least one page has successfully loaded\n    tableContent = ___EmotionJSX(Resizable, null,\n    ___EmotionJSX(Table, { data: data, columns: mappedColumns, size: TableSize.Small, defaultPageSize: PAGE_SIZE, recordCount: resultsPage == null ? void 0 : resultsPage.total, usePagination: true, loading: isLoading, onChange: (pagination) => setPageIndex(pagination.current ? pagination.current - 1 : 0), resizable: true, virtualize: true, allowHTML: allowHTML })\n    );\n  }\n  return ___EmotionJSX(React.Fragment, null,\n  !bootstrapping && metadataBar,\n  !bootstrapping && ___EmotionJSX(TableControls, { filters: filters, setFilters: setFilters, totalCount: resultsPage == null ? void 0 : resultsPage.total, loading: isLoading, onReload: handleReload }),\n  tableContent\n  );\n}__signature__(DrillDetailPane, \"useTheme{theme}\\nuseState{[pageIndex, setPageIndex](0)}\\nuseRef{lastPageIndex}\\nuseState{[filters, setFilters](initialFilters)}\\nuseState{[isLoading, setIsLoading](false)}\\nuseState{[responseError, setResponseError]('')}\\nuseState{[resultsPages, setResultsPages](new Map())}\\nuseState{[timeFormatting, setTimeFormatting]({})}\\nuseSelector{SAMPLES_ROW_LIMIT}\\nuseMemo{[datasourceId, datasourceType]}\\nuseDatasetMetadataBar{{ metadataBar, status: metadataBarStatus }}\\nuseMemo{resultsPage}\\nuseMemo{mappedColumns}\\nuseMemo{data}\\nuseCallback{handleReload}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useTheme, useSelector, useDatasetMetadataBar]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailPane.tsx\");reactHotLoader.register(Resizable, \"Resizable\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailPane.tsx\");reactHotLoader.register(TimeFormatting, \"TimeFormatting\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailPane.tsx\");reactHotLoader.register(DrillDetailPane, \"DrillDetailPane\", \"/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailPane.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","useSelector","css","ensureIsArray","GenericDataType","t","useTheme","useResizeDetector","Loading","BooleanCell","NullCell","TimeCell","EmptyStateMedium","getDatasourceSamples","Table","TableSize","HeaderWithRadioGroup","ResourceStatus","useDatasetMetadataBar","TableControls","getDrillPayload","jsx","___EmotionJSX","PAGE_SIZE","_ref","process","env","NODE_ENV","name","styles","map","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","Resizable","children","ref","height","cloneElement","__signature__","TimeFormatting","DrillDetailPane","formData","initialFilters","_formData$allow_rende","theme","pageIndex","setPageIndex","lastPageIndex","filters","setFilters","isLoading","setIsLoading","responseError","setResponseError","resultsPages","setResultsPages","Map","timeFormatting","setTimeFormatting","SAMPLES_ROW_LIMIT","state","common","conf","datasourceId","datasourceType","datasource","split","metadataBar","status","metadataBarStatus","datasetId","resultsPage","nextResultsPage","get","current","mappedColumns","colNames","column","index","key","dataIndex","title","colTypes","Temporal","headerTitle","groupTitle","groupOptions","label","value","Original","Formatted","onChange","render","Date","String","width","data","row","reduce","acc","curr","handleReload","has","keys","at","nextResultsPages","delete","set","_getDrillPayload","jsonPayload","cachePageLimit","Math","ceil","then","response","entries","slice","total","total_count","colnames","coltypes","catch","error","message","finally","bootstrapping","size","allowHTML","allow_render_html","tableContent","gridUnit","image","columns","Small","defaultPageSize","recordCount","usePagination","loading","pagination","resizable","virtualize","Fragment","totalCount","onReload","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/home/pawank/Documents/dcim/superset/superset-frontend/src/components/Chart/DrillDetail/DrillDetailPane.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  BinaryQueryObjectFilterClause,\n  css,\n  ensureIsArray,\n  GenericDataType,\n  JsonObject,\n  QueryFormData,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport { useResizeDetector } from 'react-resize-detector';\nimport Loading from 'src/components/Loading';\nimport BooleanCell from 'src/components/Table/cell-renderers/BooleanCell';\nimport NullCell from 'src/components/Table/cell-renderers/NullCell';\nimport TimeCell from 'src/components/Table/cell-renderers/TimeCell';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { getDatasourceSamples } from 'src/components/Chart/chartAction';\nimport Table, { ColumnsType, TableSize } from 'src/components/Table';\nimport HeaderWithRadioGroup from 'src/components/Table/header-renderers/HeaderWithRadioGroup';\nimport { ResourceStatus } from 'src/hooks/apiResources/apiResources';\nimport { useDatasetMetadataBar } from 'src/features/datasets/metadataBar/useDatasetMetadataBar';\nimport TableControls from './DrillDetailTableControls';\nimport { getDrillPayload } from './utils';\nimport { ResultsPage } from './types';\n\nconst PAGE_SIZE = 50;\n\ninterface DataType {\n  [key: string]: any;\n}\n\n// Must be outside of the main component due to problems in\n// react-resize-detector with conditional rendering\n// https://github.com/maslianok/react-resize-detector/issues/178\nfunction Resizable({ children }: { children: ReactElement }) {\n  const { ref, height } = useResizeDetector();\n  return (\n    <div ref={ref} css={{ flex: 1 }}>\n      {React.cloneElement(children, { height })}\n    </div>\n  );\n}\n\nenum TimeFormatting {\n  Original,\n  Formatted,\n}\n\nexport default function DrillDetailPane({\n  formData,\n  initialFilters,\n}: {\n  formData: QueryFormData;\n  initialFilters: BinaryQueryObjectFilterClause[];\n}) {\n  const theme = useTheme();\n  const [pageIndex, setPageIndex] = useState(0);\n  const lastPageIndex = useRef(pageIndex);\n  const [filters, setFilters] = useState(initialFilters);\n  const [isLoading, setIsLoading] = useState(false);\n  const [responseError, setResponseError] = useState('');\n  const [resultsPages, setResultsPages] = useState<Map<number, ResultsPage>>(\n    new Map(),\n  );\n  const [timeFormatting, setTimeFormatting] = useState({});\n\n  const SAMPLES_ROW_LIMIT = useSelector(\n    (state: { common: { conf: JsonObject } }) =>\n      state.common.conf.SAMPLES_ROW_LIMIT,\n  );\n\n  // Extract datasource ID/type from string ID\n  const [datasourceId, datasourceType] = useMemo(\n    () => formData.datasource.split('__'),\n    [formData.datasource],\n  );\n\n  const { metadataBar, status: metadataBarStatus } = useDatasetMetadataBar({\n    datasetId: datasourceId,\n  });\n  // Get page of results\n  const resultsPage = useMemo(() => {\n    const nextResultsPage = resultsPages.get(pageIndex);\n    if (nextResultsPage) {\n      lastPageIndex.current = pageIndex;\n      return nextResultsPage;\n    }\n\n    return resultsPages.get(lastPageIndex.current);\n  }, [pageIndex, resultsPages]);\n\n  const mappedColumns: ColumnsType<DataType> = useMemo(\n    () =>\n      resultsPage?.colNames.map((column, index) => ({\n        key: column,\n        dataIndex: column,\n        title:\n          resultsPage?.colTypes[index] === GenericDataType.Temporal ? (\n            <HeaderWithRadioGroup\n              headerTitle={column}\n              groupTitle={t('Formatting')}\n              groupOptions={[\n                { label: t('Original value'), value: TimeFormatting.Original },\n                {\n                  label: t('Formatted value'),\n                  value: TimeFormatting.Formatted,\n                },\n              ]}\n              value={\n                timeFormatting[column] === TimeFormatting.Original\n                  ? TimeFormatting.Original\n                  : TimeFormatting.Formatted\n              }\n              onChange={value =>\n                setTimeFormatting(state => ({ ...state, [column]: value }))\n              }\n            />\n          ) : (\n            column\n          ),\n        render: value => {\n          if (value === true || value === false) {\n            return <BooleanCell value={value} />;\n          }\n          if (value === null) {\n            return <NullCell />;\n          }\n          if (\n            resultsPage?.colTypes[index] === GenericDataType.Temporal &&\n            timeFormatting[column] !== TimeFormatting.Original &&\n            (typeof value === 'number' || value instanceof Date)\n          ) {\n            return <TimeCell value={value} />;\n          }\n          return String(value);\n        },\n        width: 150,\n      })) || [],\n    [resultsPage?.colNames, resultsPage?.colTypes, timeFormatting],\n  );\n\n  const data: DataType[] = useMemo(\n    () =>\n      resultsPage?.data.map(\n        (row, index) =>\n          resultsPage?.colNames.reduce(\n            (acc, curr) => ({ ...acc, [curr]: row[curr] }),\n            {\n              key: index,\n            },\n          ),\n      ) || [],\n    [resultsPage?.colNames, resultsPage?.data],\n  );\n\n  // Clear cache on reload button click\n  const handleReload = useCallback(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, []);\n\n  // Clear cache and reset page index if filters change\n  useEffect(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, [filters]);\n\n  // Update cache order if page in cache\n  useEffect(() => {\n    if (\n      resultsPages.has(pageIndex) &&\n      [...resultsPages.keys()].at(-1) !== pageIndex\n    ) {\n      const nextResultsPages = new Map(resultsPages);\n      nextResultsPages.delete(pageIndex);\n      setResultsPages(\n        nextResultsPages.set(\n          pageIndex,\n          resultsPages.get(pageIndex) as ResultsPage,\n        ),\n      );\n    }\n  }, [pageIndex, resultsPages]);\n\n  // Download page of results & trim cache if page not in cache\n  useEffect(() => {\n    if (!responseError && !isLoading && !resultsPages.has(pageIndex)) {\n      setIsLoading(true);\n      const jsonPayload = getDrillPayload(formData, filters) ?? {};\n      const cachePageLimit = Math.ceil(SAMPLES_ROW_LIMIT / PAGE_SIZE);\n      getDatasourceSamples(\n        datasourceType,\n        datasourceId,\n        false,\n        jsonPayload,\n        PAGE_SIZE,\n        pageIndex + 1,\n      )\n        .then(response => {\n          setResultsPages(\n            new Map([\n              ...[...resultsPages.entries()].slice(-cachePageLimit + 1),\n              [\n                pageIndex,\n                {\n                  total: response.total_count,\n                  data: response.data,\n                  colNames: ensureIsArray(response.colnames),\n                  colTypes: ensureIsArray(response.coltypes),\n                },\n              ],\n            ]),\n          );\n          setResponseError('');\n        })\n        .catch(error => {\n          setResponseError(`${error.name}: ${error.message}`);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [\n    SAMPLES_ROW_LIMIT,\n    datasourceId,\n    datasourceType,\n    filters,\n    formData,\n    isLoading,\n    pageIndex,\n    responseError,\n    resultsPages,\n  ]);\n\n  const bootstrapping =\n    (!responseError && !resultsPages.size) ||\n    metadataBarStatus === ResourceStatus.Loading;\n\n  const allowHTML = formData.allow_render_html ?? true;\n\n  let tableContent = null;\n  if (responseError) {\n    // Render error if page download failed\n    tableContent = (\n      <pre\n        css={css`\n          margin-top: ${theme.gridUnit * 4}px;\n        `}\n      >\n        {responseError}\n      </pre>\n    );\n  } else if (bootstrapping) {\n    // Render loading if first page hasn't loaded\n    tableContent = <Loading />;\n  } else if (resultsPage?.total === 0) {\n    // Render empty state if no results are returned for page\n    const title = t('No rows were returned for this dataset');\n    tableContent = <EmptyStateMedium image=\"document.svg\" title={title} />;\n  } else {\n    // Render table if at least one page has successfully loaded\n    tableContent = (\n      <Resizable>\n        <Table\n          data={data}\n          columns={mappedColumns}\n          size={TableSize.Small}\n          defaultPageSize={PAGE_SIZE}\n          recordCount={resultsPage?.total}\n          usePagination\n          loading={isLoading}\n          onChange={pagination =>\n            setPageIndex(pagination.current ? pagination.current - 1 : 0)\n          }\n          resizable\n          virtualize\n          allowHTML={allowHTML}\n        />\n      </Resizable>\n    );\n  }\n\n  return (\n    <>\n      {!bootstrapping && metadataBar}\n      {!bootstrapping && (\n        <TableControls\n          filters={filters}\n          setFilters={setFilters}\n          totalCount={resultsPage?.total}\n          loading={isLoading}\n          onReload={handleReload}\n        />\n      )}\n      {tableContent}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}