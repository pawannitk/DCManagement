"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-echarts_src_BigNumber_BigNumberViz_tsx"],{

/***/ "./plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx":
/*!*********************************************************************!*\
  !*** ./plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx ***!
  \*********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/dimension/computeMaxFontSize.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/time-format/formatters/smartDateVerbose.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/color/index.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _components_Echart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Echart */ \"./plugins/plugin-chart-echarts/src/components/Echart.tsx\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\nconst defaultNumberFormatter = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.getNumberFormatter)();\nconst PROPORTION = {\n  // text size: proportion of the chart container sans trendline\n  KICKER: 0.1,\n  HEADER: 0.3,\n  SUBHEADER: 0.125,\n  // trendline size: proportion of the whole chart container\n  TRENDLINE: 0.3\n};\nclass BigNumberVis extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  getClassName() {\n    const { className, showTrendLine, bigNumberFallback } = this.props;\n    const names = `superset-legacy-chart-big-number ${className} ${bigNumberFallback ? 'is-fallback-value' : ''}`;\n    if (showTrendLine)\n    return names;\n    return `${names} no-trendline`;\n  }\n  createTemporaryContainer() {\n    const container = document.createElement('div');\n    container.className = this.getClassName();\n    container.style.position = 'absolute'; // so it won't disrupt page layout\n    container.style.opacity = '0'; // and not visible\n    return container;\n  }\n  renderFallbackWarning() {\n    const { bigNumberFallback, formatTime, showTimestamp } = this.props;\n    if (!formatTime || !bigNumberFallback || showTimestamp)\n    return null;\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"alert alert-warning\", role: \"alert\", title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)(`Last available value seen on %s`, formatTime(bigNumberFallback[0])) },\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Not up to date')\n    );\n  }\n  renderKicker(maxHeight) {\n    const { timestamp, showTimestamp, formatTime, width } = this.props;\n    if (!formatTime ||\n    !showTimestamp ||\n    typeof timestamp === 'string' ||\n    typeof timestamp === 'boolean')\n    return null;\n    const text = timestamp === null ? '' : formatTime(timestamp);\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n      text,\n      maxWidth: width,\n      maxHeight,\n      className: 'kicker',\n      container\n    });\n    container.remove();\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"kicker\", style: {\n        fontSize,\n        height: maxHeight\n      } },\n    text\n    );\n  }\n  renderHeader(maxHeight) {\n    const { bigNumber, headerFormatter, width, colorThresholdFormatters } = this.props;\n    // @ts-ignore\n    const text = bigNumber === null ? (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('No data') : headerFormatter(bigNumber);\n    const hasThresholdColorFormatter = Array.isArray(colorThresholdFormatters) &&\n    colorThresholdFormatters.length > 0;\n    let numberColor;\n    if (hasThresholdColorFormatter) {\n      colorThresholdFormatters.forEach((formatter) => {\n        const formatterResult = bigNumber ?\n        formatter.getColorFromValue(bigNumber) :\n        false;\n        if (formatterResult) {\n          numberColor = formatterResult;\n        }\n      });\n    } else\n    {\n      numberColor = 'black';\n    }\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n      text,\n      maxWidth: width - 8,\n      maxHeight,\n      className: 'header-line',\n      container\n    });\n    container.remove();\n    const onContextMenu = (e) => {\n      if (this.props.onContextMenu) {\n        e.preventDefault();\n        this.props.onContextMenu(e.nativeEvent.clientX, e.nativeEvent.clientY);\n      }\n    };\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"header-line\", style: {\n        fontSize,\n        height: maxHeight,\n        color: numberColor\n      }, onContextMenu: onContextMenu },\n    text\n    );\n  }\n  renderSubheader(maxHeight) {\n    const { bigNumber, subheader, width, bigNumberFallback } = this.props;\n    let fontSize = 0;\n    const NO_DATA_OR_HASNT_LANDED = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('No data after filtering or data is NULL for the latest time record');\n    const NO_DATA = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Try applying different filters or ensuring your datasource has data');\n    let text = subheader;\n    if (bigNumber === null) {\n      text = bigNumberFallback ? NO_DATA : NO_DATA_OR_HASNT_LANDED;\n    }\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      fontSize = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n        text,\n        maxWidth: width,\n        maxHeight,\n        className: 'subheader-line',\n        container\n      });\n      container.remove();\n      return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"subheader-line\", style: {\n          fontSize,\n          height: maxHeight\n        } },\n      text\n      );\n    }\n    return null;\n  }\n  renderTrendline(maxHeight) {\n    const { width, trendLineData, echartOptions, refs } = this.props;\n    // if can't find any non-null values, no point rendering the trendline\n    if (!(trendLineData != null && trendLineData.some((d) => d[1] !== null))) {\n      return null;\n    }\n    const eventHandlers = {\n      contextmenu: (eventParams) => {\n        if (this.props.onContextMenu) {\n          eventParams.event.stop();\n          const { data } = eventParams;\n          if (data) {var _this$props$formData, _this$props$formData2, _this$props$xValueFor, _this$props;\n            const pointerEvent = eventParams.event.event;\n            const drillToDetailFilters = [];\n            drillToDetailFilters.push({\n              col: (_this$props$formData = this.props.formData) == null ? void 0 : _this$props$formData.granularitySqla,\n              grain: (_this$props$formData2 = this.props.formData) == null ? void 0 : _this$props$formData2.timeGrainSqla,\n              op: '==',\n              val: data[0],\n              formattedVal: (_this$props$xValueFor = (_this$props = this.props).xValueFormatter) == null ? void 0 : _this$props$xValueFor.call(_this$props, data[0])\n            });\n            this.props.onContextMenu(pointerEvent.clientX, pointerEvent.clientY, { drillToDetail: drillToDetailFilters });\n          }\n        }\n      }\n    };\n    return echartOptions && (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(_components_Echart__WEBPACK_IMPORTED_MODULE_5__[\"default\"], { refs: refs, width: Math.floor(width), height: maxHeight, echartOptions: echartOptions, eventHandlers: eventHandlers });\n  }\n  render() {\n    const { showTrendLine, height, kickerFontSize, headerFontSize, subheaderFontSize } = this.props;\n    const className = this.getClassName();\n    if (showTrendLine) {\n      const chartHeight = Math.floor(PROPORTION.TRENDLINE * height);\n      const allTextHeight = height - chartHeight;\n      return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: className },\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"text-container\", style: { height: allTextHeight } },\n      this.renderFallbackWarning(),\n      this.renderKicker(Math.ceil((kickerFontSize || 0) * (1 - PROPORTION.TRENDLINE) * height)),\n      this.renderHeader(Math.ceil(headerFontSize * (1 - PROPORTION.TRENDLINE) * height)),\n      this.renderSubheader(Math.ceil(subheaderFontSize * (1 - PROPORTION.TRENDLINE) * height))\n      ),\n      this.renderTrendline(chartHeight)\n      );\n    }\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: className, style: { height } },\n    this.renderFallbackWarning(),\n    this.renderKicker((kickerFontSize || 0) * height),\n    this.renderHeader(Math.ceil(headerFontSize * height)),\n    this.renderSubheader(Math.ceil(subheaderFontSize * height))\n    );\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}BigNumberVis.defaultProps = { className: '', headerFormatter: defaultNumberFormatter, formatTime: _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"], headerFontSize: PROPORTION.HEADER, kickerFontSize: PROPORTION.KICKER, mainColor: _superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.BRAND_COLOR, showTimestamp: false, showTrendLine: false, startYAxisAtZero: true, subheader: '', subheaderFontSize: PROPORTION.SUBHEADER, timeRangeFixed: false };const _default = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__.styled)(BigNumberVis)`\n  ${({ theme }) => `\n    font-family: ${theme.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${theme.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${theme.gridUnit}px;\n        border-radius: ${theme.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      white-space: nowrap;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${theme.opacity.mediumHeavy};\n      }\n    }\n  `}\n`;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(defaultNumberFormatter, \"defaultNumberFormatter\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(PROPORTION, \"PROPORTION\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(BigNumberVis, \"BigNumberVis\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1lY2hhcnRzL3NyYy9CaWdOdW1iZXIvQmlnTnVtYmVyVml6LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQVNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7OztBQWdCQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBT0E7QUFDQTtBQUVBO0FBV0E7QUFFQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7O0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7OztBQUdBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LWVjaGFydHMvc3JjL0JpZ051bWJlci9CaWdOdW1iZXJWaXoudHN4P2U4YzQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0LCB7IE1vdXNlRXZlbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICB0LFxuICBnZXROdW1iZXJGb3JtYXR0ZXIsXG4gIHNtYXJ0RGF0ZVZlcmJvc2VGb3JtYXR0ZXIsXG4gIGNvbXB1dGVNYXhGb250U2l6ZSxcbiAgQlJBTkRfQ09MT1IsXG4gIHN0eWxlZCxcbiAgQmluYXJ5UXVlcnlPYmplY3RGaWx0ZXJDbGF1c2UsXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBFY2hhcnQgZnJvbSAnLi4vY29tcG9uZW50cy9FY2hhcnQnO1xuaW1wb3J0IHsgQmlnTnVtYmVyVml6UHJvcHMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEV2ZW50SGFuZGxlcnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IGRlZmF1bHROdW1iZXJGb3JtYXR0ZXIgPSBnZXROdW1iZXJGb3JtYXR0ZXIoKTtcblxuY29uc3QgUFJPUE9SVElPTiA9IHtcbiAgLy8gdGV4dCBzaXplOiBwcm9wb3J0aW9uIG9mIHRoZSBjaGFydCBjb250YWluZXIgc2FucyB0cmVuZGxpbmVcbiAgS0lDS0VSOiAwLjEsXG4gIEhFQURFUjogMC4zLFxuICBTVUJIRUFERVI6IDAuMTI1LFxuICAvLyB0cmVuZGxpbmUgc2l6ZTogcHJvcG9ydGlvbiBvZiB0aGUgd2hvbGUgY2hhcnQgY29udGFpbmVyXG4gIFRSRU5ETElORTogMC4zLFxufTtcblxuY2xhc3MgQmlnTnVtYmVyVmlzIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxCaWdOdW1iZXJWaXpQcm9wcz4ge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGNsYXNzTmFtZTogJycsXG4gICAgaGVhZGVyRm9ybWF0dGVyOiBkZWZhdWx0TnVtYmVyRm9ybWF0dGVyLFxuICAgIGZvcm1hdFRpbWU6IHNtYXJ0RGF0ZVZlcmJvc2VGb3JtYXR0ZXIsXG4gICAgaGVhZGVyRm9udFNpemU6IFBST1BPUlRJT04uSEVBREVSLFxuICAgIGtpY2tlckZvbnRTaXplOiBQUk9QT1JUSU9OLktJQ0tFUixcbiAgICBtYWluQ29sb3I6IEJSQU5EX0NPTE9SLFxuICAgIHNob3dUaW1lc3RhbXA6IGZhbHNlLFxuICAgIHNob3dUcmVuZExpbmU6IGZhbHNlLFxuICAgIHN0YXJ0WUF4aXNBdFplcm86IHRydWUsXG4gICAgc3ViaGVhZGVyOiAnJyxcbiAgICBzdWJoZWFkZXJGb250U2l6ZTogUFJPUE9SVElPTi5TVUJIRUFERVIsXG4gICAgdGltZVJhbmdlRml4ZWQ6IGZhbHNlLFxuICB9O1xuXG4gIGdldENsYXNzTmFtZSgpIHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgc2hvd1RyZW5kTGluZSwgYmlnTnVtYmVyRmFsbGJhY2sgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgbmFtZXMgPSBgc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LWJpZy1udW1iZXIgJHtjbGFzc05hbWV9ICR7XG4gICAgICBiaWdOdW1iZXJGYWxsYmFjayA/ICdpcy1mYWxsYmFjay12YWx1ZScgOiAnJ1xuICAgIH1gO1xuICAgIGlmIChzaG93VHJlbmRMaW5lKSByZXR1cm4gbmFtZXM7XG4gICAgcmV0dXJuIGAke25hbWVzfSBuby10cmVuZGxpbmVgO1xuICB9XG5cbiAgY3JlYXRlVGVtcG9yYXJ5Q29udGFpbmVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSB0aGlzLmdldENsYXNzTmFtZSgpO1xuICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7IC8vIHNvIGl0IHdvbid0IGRpc3J1cHQgcGFnZSBsYXlvdXRcbiAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJzsgLy8gYW5kIG5vdCB2aXNpYmxlXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHJlbmRlckZhbGxiYWNrV2FybmluZygpIHtcbiAgICBjb25zdCB7IGJpZ051bWJlckZhbGxiYWNrLCBmb3JtYXRUaW1lLCBzaG93VGltZXN0YW1wIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmICghZm9ybWF0VGltZSB8fCAhYmlnTnVtYmVyRmFsbGJhY2sgfHwgc2hvd1RpbWVzdGFtcCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuXG4gICAgICAgIGNsYXNzTmFtZT1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIlxuICAgICAgICByb2xlPVwiYWxlcnRcIlxuICAgICAgICB0aXRsZT17dChcbiAgICAgICAgICBgTGFzdCBhdmFpbGFibGUgdmFsdWUgc2VlbiBvbiAlc2AsXG4gICAgICAgICAgZm9ybWF0VGltZShiaWdOdW1iZXJGYWxsYmFja1swXSksXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIHt0KCdOb3QgdXAgdG8gZGF0ZScpfVxuICAgICAgPC9zcGFuPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJLaWNrZXIobWF4SGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjb25zdCB7IHRpbWVzdGFtcCwgc2hvd1RpbWVzdGFtcCwgZm9ybWF0VGltZSwgd2lkdGggfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKFxuICAgICAgIWZvcm1hdFRpbWUgfHxcbiAgICAgICFzaG93VGltZXN0YW1wIHx8XG4gICAgICB0eXBlb2YgdGltZXN0YW1wID09PSAnc3RyaW5nJyB8fFxuICAgICAgdHlwZW9mIHRpbWVzdGFtcCA9PT0gJ2Jvb2xlYW4nXG4gICAgKVxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCB0ZXh0ID0gdGltZXN0YW1wID09PSBudWxsID8gJycgOiBmb3JtYXRUaW1lKHRpbWVzdGFtcCk7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZVRlbXBvcmFyeUNvbnRhaW5lcigpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGNvbnRhaW5lcik7XG4gICAgY29uc3QgZm9udFNpemUgPSBjb21wdXRlTWF4Rm9udFNpemUoe1xuICAgICAgdGV4dCxcbiAgICAgIG1heFdpZHRoOiB3aWR0aCxcbiAgICAgIG1heEhlaWdodCxcbiAgICAgIGNsYXNzTmFtZTogJ2tpY2tlcicsXG4gICAgICBjb250YWluZXIsXG4gICAgfSk7XG4gICAgY29udGFpbmVyLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwia2lja2VyXCJcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBmb250U2l6ZSxcbiAgICAgICAgICBoZWlnaHQ6IG1heEhlaWdodCxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAge3RleHR9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVySGVhZGVyKG1heEhlaWdodDogbnVtYmVyKSB7XG4gICAgY29uc3QgeyBiaWdOdW1iZXIsIGhlYWRlckZvcm1hdHRlciwgd2lkdGgsIGNvbG9yVGhyZXNob2xkRm9ybWF0dGVycyB9ID1cbiAgICAgIHRoaXMucHJvcHM7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHRleHQgPSBiaWdOdW1iZXIgPT09IG51bGwgPyB0KCdObyBkYXRhJykgOiBoZWFkZXJGb3JtYXR0ZXIoYmlnTnVtYmVyKTtcblxuICAgIGNvbnN0IGhhc1RocmVzaG9sZENvbG9yRm9ybWF0dGVyID1cbiAgICAgIEFycmF5LmlzQXJyYXkoY29sb3JUaHJlc2hvbGRGb3JtYXR0ZXJzKSAmJlxuICAgICAgY29sb3JUaHJlc2hvbGRGb3JtYXR0ZXJzLmxlbmd0aCA+IDA7XG5cbiAgICBsZXQgbnVtYmVyQ29sb3I7XG4gICAgaWYgKGhhc1RocmVzaG9sZENvbG9yRm9ybWF0dGVyKSB7XG4gICAgICBjb2xvclRocmVzaG9sZEZvcm1hdHRlcnMhLmZvckVhY2goZm9ybWF0dGVyID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyUmVzdWx0ID0gYmlnTnVtYmVyXG4gICAgICAgICAgPyBmb3JtYXR0ZXIuZ2V0Q29sb3JGcm9tVmFsdWUoYmlnTnVtYmVyIGFzIG51bWJlcilcbiAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoZm9ybWF0dGVyUmVzdWx0KSB7XG4gICAgICAgICAgbnVtYmVyQ29sb3IgPSBmb3JtYXR0ZXJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW1iZXJDb2xvciA9ICdibGFjayc7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jcmVhdGVUZW1wb3JhcnlDb250YWluZXIoKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChjb250YWluZXIpO1xuICAgIGNvbnN0IGZvbnRTaXplID0gY29tcHV0ZU1heEZvbnRTaXplKHtcbiAgICAgIHRleHQsXG4gICAgICBtYXhXaWR0aDogd2lkdGggLSA4LCAvLyBEZWNyZWFzZSA4cHggZm9yIG1vcmUgcHJlY2lzZSBmb250IHNpemVcbiAgICAgIG1heEhlaWdodCxcbiAgICAgIGNsYXNzTmFtZTogJ2hlYWRlci1saW5lJyxcbiAgICAgIGNvbnRhaW5lcixcbiAgICB9KTtcbiAgICBjb250YWluZXIucmVtb3ZlKCk7XG5cbiAgICBjb25zdCBvbkNvbnRleHRNZW51ID0gKGU6IE1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUubmF0aXZlRXZlbnQuY2xpZW50WCwgZS5uYXRpdmVFdmVudC5jbGllbnRZKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwiaGVhZGVyLWxpbmVcIlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGZvbnRTaXplLFxuICAgICAgICAgIGhlaWdodDogbWF4SGVpZ2h0LFxuICAgICAgICAgIGNvbG9yOiBudW1iZXJDb2xvcixcbiAgICAgICAgfX1cbiAgICAgICAgb25Db250ZXh0TWVudT17b25Db250ZXh0TWVudX1cbiAgICAgID5cbiAgICAgICAge3RleHR9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyU3ViaGVhZGVyKG1heEhlaWdodDogbnVtYmVyKSB7XG4gICAgY29uc3QgeyBiaWdOdW1iZXIsIHN1YmhlYWRlciwgd2lkdGgsIGJpZ051bWJlckZhbGxiYWNrIH0gPSB0aGlzLnByb3BzO1xuICAgIGxldCBmb250U2l6ZSA9IDA7XG5cbiAgICBjb25zdCBOT19EQVRBX09SX0hBU05UX0xBTkRFRCA9IHQoXG4gICAgICAnTm8gZGF0YSBhZnRlciBmaWx0ZXJpbmcgb3IgZGF0YSBpcyBOVUxMIGZvciB0aGUgbGF0ZXN0IHRpbWUgcmVjb3JkJyxcbiAgICApO1xuICAgIGNvbnN0IE5PX0RBVEEgPSB0KFxuICAgICAgJ1RyeSBhcHBseWluZyBkaWZmZXJlbnQgZmlsdGVycyBvciBlbnN1cmluZyB5b3VyIGRhdGFzb3VyY2UgaGFzIGRhdGEnLFxuICAgICk7XG4gICAgbGV0IHRleHQgPSBzdWJoZWFkZXI7XG4gICAgaWYgKGJpZ051bWJlciA9PT0gbnVsbCkge1xuICAgICAgdGV4dCA9IGJpZ051bWJlckZhbGxiYWNrID8gTk9fREFUQSA6IE5PX0RBVEFfT1JfSEFTTlRfTEFOREVEO1xuICAgIH1cbiAgICBpZiAodGV4dCkge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jcmVhdGVUZW1wb3JhcnlDb250YWluZXIoKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGNvbnRhaW5lcik7XG4gICAgICBmb250U2l6ZSA9IGNvbXB1dGVNYXhGb250U2l6ZSh7XG4gICAgICAgIHRleHQsXG4gICAgICAgIG1heFdpZHRoOiB3aWR0aCxcbiAgICAgICAgbWF4SGVpZ2h0LFxuICAgICAgICBjbGFzc05hbWU6ICdzdWJoZWFkZXItbGluZScsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgIH0pO1xuICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwic3ViaGVhZGVyLWxpbmVcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBmb250U2l6ZSxcbiAgICAgICAgICAgIGhlaWdodDogbWF4SGVpZ2h0LFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7dGV4dH1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJlbmRlclRyZW5kbGluZShtYXhIZWlnaHQ6IG51bWJlcikge1xuICAgIGNvbnN0IHsgd2lkdGgsIHRyZW5kTGluZURhdGEsIGVjaGFydE9wdGlvbnMsIHJlZnMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBpZiBjYW4ndCBmaW5kIGFueSBub24tbnVsbCB2YWx1ZXMsIG5vIHBvaW50IHJlbmRlcmluZyB0aGUgdHJlbmRsaW5lXG4gICAgaWYgKCF0cmVuZExpbmVEYXRhPy5zb21lKGQgPT4gZFsxXSAhPT0gbnVsbCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50SGFuZGxlcnM6IEV2ZW50SGFuZGxlcnMgPSB7XG4gICAgICBjb250ZXh0bWVudTogZXZlbnRQYXJhbXMgPT4ge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KSB7XG4gICAgICAgICAgZXZlbnRQYXJhbXMuZXZlbnQuc3RvcCgpO1xuICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZXZlbnRQYXJhbXM7XG4gICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ZXJFdmVudCA9IGV2ZW50UGFyYW1zLmV2ZW50LmV2ZW50O1xuICAgICAgICAgICAgY29uc3QgZHJpbGxUb0RldGFpbEZpbHRlcnM6IEJpbmFyeVF1ZXJ5T2JqZWN0RmlsdGVyQ2xhdXNlW10gPSBbXTtcbiAgICAgICAgICAgIGRyaWxsVG9EZXRhaWxGaWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgICBjb2w6IHRoaXMucHJvcHMuZm9ybURhdGE/LmdyYW51bGFyaXR5U3FsYSxcbiAgICAgICAgICAgICAgZ3JhaW46IHRoaXMucHJvcHMuZm9ybURhdGE/LnRpbWVHcmFpblNxbGEsXG4gICAgICAgICAgICAgIG9wOiAnPT0nLFxuICAgICAgICAgICAgICB2YWw6IGRhdGFbMF0sXG4gICAgICAgICAgICAgIGZvcm1hdHRlZFZhbDogdGhpcy5wcm9wcy54VmFsdWVGb3JtYXR0ZXI/LihkYXRhWzBdKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KFxuICAgICAgICAgICAgICBwb2ludGVyRXZlbnQuY2xpZW50WCxcbiAgICAgICAgICAgICAgcG9pbnRlckV2ZW50LmNsaWVudFksXG4gICAgICAgICAgICAgIHsgZHJpbGxUb0RldGFpbDogZHJpbGxUb0RldGFpbEZpbHRlcnMgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgZWNoYXJ0T3B0aW9ucyAmJiAoXG4gICAgICAgIDxFY2hhcnRcbiAgICAgICAgICByZWZzPXtyZWZzfVxuICAgICAgICAgIHdpZHRoPXtNYXRoLmZsb29yKHdpZHRoKX1cbiAgICAgICAgICBoZWlnaHQ9e21heEhlaWdodH1cbiAgICAgICAgICBlY2hhcnRPcHRpb25zPXtlY2hhcnRPcHRpb25zfVxuICAgICAgICAgIGV2ZW50SGFuZGxlcnM9e2V2ZW50SGFuZGxlcnN9XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBzaG93VHJlbmRMaW5lLFxuICAgICAgaGVpZ2h0LFxuICAgICAga2lja2VyRm9udFNpemUsXG4gICAgICBoZWFkZXJGb250U2l6ZSxcbiAgICAgIHN1YmhlYWRlckZvbnRTaXplLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuZ2V0Q2xhc3NOYW1lKCk7XG5cbiAgICBpZiAoc2hvd1RyZW5kTGluZSkge1xuICAgICAgY29uc3QgY2hhcnRIZWlnaHQgPSBNYXRoLmZsb29yKFBST1BPUlRJT04uVFJFTkRMSU5FICogaGVpZ2h0KTtcbiAgICAgIGNvbnN0IGFsbFRleHRIZWlnaHQgPSBoZWlnaHQgLSBjaGFydEhlaWdodDtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNvbnRhaW5lclwiIHN0eWxlPXt7IGhlaWdodDogYWxsVGV4dEhlaWdodCB9fT5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlckZhbGxiYWNrV2FybmluZygpfVxuICAgICAgICAgICAge3RoaXMucmVuZGVyS2lja2VyKFxuICAgICAgICAgICAgICBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgKGtpY2tlckZvbnRTaXplIHx8IDApICogKDEgLSBQUk9QT1JUSU9OLlRSRU5ETElORSkgKiBoZWlnaHQsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3RoaXMucmVuZGVySGVhZGVyKFxuICAgICAgICAgICAgICBNYXRoLmNlaWwoaGVhZGVyRm9udFNpemUgKiAoMSAtIFBST1BPUlRJT04uVFJFTkRMSU5FKSAqIGhlaWdodCksXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3RoaXMucmVuZGVyU3ViaGVhZGVyKFxuICAgICAgICAgICAgICBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgc3ViaGVhZGVyRm9udFNpemUgKiAoMSAtIFBST1BPUlRJT04uVFJFTkRMSU5FKSAqIGhlaWdodCxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3RoaXMucmVuZGVyVHJlbmRsaW5lKGNoYXJ0SGVpZ2h0KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBzdHlsZT17eyBoZWlnaHQgfX0+XG4gICAgICAgIHt0aGlzLnJlbmRlckZhbGxiYWNrV2FybmluZygpfVxuICAgICAgICB7dGhpcy5yZW5kZXJLaWNrZXIoKGtpY2tlckZvbnRTaXplIHx8IDApICogaGVpZ2h0KX1cbiAgICAgICAge3RoaXMucmVuZGVySGVhZGVyKE1hdGguY2VpbChoZWFkZXJGb250U2l6ZSAqIGhlaWdodCkpfVxuICAgICAgICB7dGhpcy5yZW5kZXJTdWJoZWFkZXIoTWF0aC5jZWlsKHN1YmhlYWRlckZvbnRTaXplICogaGVpZ2h0KSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0eWxlZChCaWdOdW1iZXJWaXMpYFxuICAkeyh7IHRoZW1lIH0pID0+IGBcbiAgICBmb250LWZhbWlseTogJHt0aGVtZS50eXBvZ3JhcGh5LmZhbWlsaWVzLnNhbnNTZXJpZn07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcblxuICAgICYubm8tdHJlbmRsaW5lIC5zdWJoZWFkZXItbGluZSB7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogMC4zZW07XG4gICAgfVxuXG4gICAgLnRleHQtY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgIC5hbGVydCB7XG4gICAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9O1xuICAgICAgICBtYXJnaW46IC0wLjVlbSAwIDAuNGVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgICAgcGFkZGluZzogJHt0aGVtZS5ncmlkVW5pdH1weDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGVtZS5ncmlkVW5pdH1weDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAua2lja2VyIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICBwYWRkaW5nLWJvdHRvbTogMmVtO1xuICAgIH1cblxuICAgIC5oZWFkZXItbGluZSB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBsaW5lLWhlaWdodDogMWVtO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIHNwYW4ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuc3ViaGVhZGVyLWxpbmUge1xuICAgICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cblxuICAgICYuaXMtZmFsbGJhY2stdmFsdWUge1xuICAgICAgLmtpY2tlcixcbiAgICAgIC5oZWFkZXItbGluZSxcbiAgICAgIC5zdWJoZWFkZXItbGluZSB7XG4gICAgICAgIG9wYWNpdHk6ICR7dGhlbWUub3BhY2l0eS5tZWRpdW1IZWF2eX07XG4gICAgICB9XG4gICAgfVxuICBgfVxuYDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-echarts/src/components/Echart.tsx":
/*!****************************************************************!*\
  !*** ./plugins/plugin-chart-echarts/src/components/Echart.tsx ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var echarts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! echarts */ \"./node_modules/echarts/index.js\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.styled.div`\n  height: ${({ height }) => height};\n  width: ${({ width }) => width};\n`;\nfunction Echart({ width, height, echartOptions, eventHandlers, zrEventHandlers, selectedValues = {}, refs }, ref) {\n  const divRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  if (refs) {\n    // eslint-disable-next-line no-param-reassign\n    refs.divRef = divRef;\n  }\n  const chartRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const currentSelection = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Object.keys(selectedValues) || [], [selectedValues]);\n  const previousSelection = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, () => ({\n    getEchartInstance: () => chartRef.current\n  }));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!divRef.current)\n    return;\n    if (!chartRef.current) {\n      chartRef.current = (0,echarts__WEBPACK_IMPORTED_MODULE_1__.init)(divRef.current);\n    }\n    Object.entries(eventHandlers || {}).forEach(([name, handler]) => {var _chartRef$current, _chartRef$current2;\n      (_chartRef$current = chartRef.current) == null ? void 0 : _chartRef$current.off(name);\n      (_chartRef$current2 = chartRef.current) == null ? void 0 : _chartRef$current2.on(name, handler);\n    });\n    Object.entries(zrEventHandlers || {}).forEach(([name, handler]) => {var _chartRef$current3, _chartRef$current4;\n      (_chartRef$current3 = chartRef.current) == null ? void 0 : _chartRef$current3.getZr().off(name);\n      (_chartRef$current4 = chartRef.current) == null ? void 0 : _chartRef$current4.getZr().on(name, handler);\n    });\n    chartRef.current.setOption(echartOptions, true);\n  }, [echartOptions, eventHandlers, zrEventHandlers]);\n  // highlighting\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!chartRef.current)\n    return;\n    chartRef.current.dispatchAction({\n      type: 'downplay',\n      dataIndex: previousSelection.current.filter((value) => !currentSelection.includes(value))\n    });\n    if (currentSelection.length) {\n      chartRef.current.dispatchAction({\n        type: 'highlight',\n        dataIndex: currentSelection\n      });\n    }\n    previousSelection.current = currentSelection;\n  }, [currentSelection]);\n  const handleSizeChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(({ width, height }) => {\n    if (chartRef.current) {\n      chartRef.current.resize({ width, height });\n    }\n  }, []);\n  // did mount\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    handleSizeChange({ width, height });\n    return () => {var _chartRef$current5;return (_chartRef$current5 = chartRef.current) == null ? void 0 : _chartRef$current5.dispose();};\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    handleSizeChange({ width, height });\n  }, [width, height, handleSizeChange]);\n  return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_3__.jsx)(Styles, { ref: divRef, height: height, width: width });\n}__signature__(Echart, \"useRef{divRef}\\nuseRef{chartRef}\\nuseMemo{currentSelection}\\nuseRef{previousSelection}\\nuseImperativeHandle{}\\nuseEffect{}\\nuseEffect{}\\nuseCallback{handleSizeChange}\\nuseEffect{}\\nuseLayoutEffect{}\", () => [react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle]);const _default = /*#__PURE__*/\n(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(Echart);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx\");reactHotLoader.register(Echart, \"Echart\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx\");reactHotLoader.register(_default, \"default\", \"/home/pawank/Documents/dcim/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1lY2hhcnRzL3NyYy9jb21wb25lbnRzL0VjaGFydC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBU0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LWVjaGFydHMvc3JjL2NvbXBvbmVudHMvRWNoYXJ0LnRzeD9jZTgzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCwge1xuICB1c2VSZWYsXG4gIHVzZUVmZmVjdCxcbiAgdXNlTWVtbyxcbiAgZm9yd2FyZFJlZixcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZSxcbiAgdXNlTGF5b3V0RWZmZWN0LFxuICB1c2VDYWxsYmFjayxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgRUNoYXJ0cywgaW5pdCB9IGZyb20gJ2VjaGFydHMnO1xuaW1wb3J0IHsgRWNoYXJ0c0hhbmRsZXIsIEVjaGFydHNQcm9wcywgRWNoYXJ0c1N0eWxlc1Byb3BzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBTdHlsZXMgPSBzdHlsZWQuZGl2PEVjaGFydHNTdHlsZXNQcm9wcz5gXG4gIGhlaWdodDogJHsoeyBoZWlnaHQgfSkgPT4gaGVpZ2h0fTtcbiAgd2lkdGg6ICR7KHsgd2lkdGggfSkgPT4gd2lkdGh9O1xuYDtcblxuZnVuY3Rpb24gRWNoYXJ0KFxuICB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIGVjaGFydE9wdGlvbnMsXG4gICAgZXZlbnRIYW5kbGVycyxcbiAgICB6ckV2ZW50SGFuZGxlcnMsXG4gICAgc2VsZWN0ZWRWYWx1ZXMgPSB7fSxcbiAgICByZWZzLFxuICB9OiBFY2hhcnRzUHJvcHMsXG4gIHJlZjogUmVhY3QuUmVmPEVjaGFydHNIYW5kbGVyPixcbikge1xuICBjb25zdCBkaXZSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBpZiAocmVmcykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHJlZnMuZGl2UmVmID0gZGl2UmVmO1xuICB9XG4gIGNvbnN0IGNoYXJ0UmVmID0gdXNlUmVmPEVDaGFydHM+KCk7XG4gIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb24gPSB1c2VNZW1vKFxuICAgICgpID0+IE9iamVjdC5rZXlzKHNlbGVjdGVkVmFsdWVzKSB8fCBbXSxcbiAgICBbc2VsZWN0ZWRWYWx1ZXNdLFxuICApO1xuICBjb25zdCBwcmV2aW91c1NlbGVjdGlvbiA9IHVzZVJlZjxzdHJpbmdbXT4oW10pO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGdldEVjaGFydEluc3RhbmNlOiAoKSA9PiBjaGFydFJlZi5jdXJyZW50LFxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRpdlJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgaWYgKCFjaGFydFJlZi5jdXJyZW50KSB7XG4gICAgICBjaGFydFJlZi5jdXJyZW50ID0gaW5pdChkaXZSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmVudHJpZXMoZXZlbnRIYW5kbGVycyB8fCB7fSkuZm9yRWFjaCgoW25hbWUsIGhhbmRsZXJdKSA9PiB7XG4gICAgICBjaGFydFJlZi5jdXJyZW50Py5vZmYobmFtZSk7XG4gICAgICBjaGFydFJlZi5jdXJyZW50Py5vbihuYW1lLCBoYW5kbGVyKTtcbiAgICB9KTtcblxuICAgIE9iamVjdC5lbnRyaWVzKHpyRXZlbnRIYW5kbGVycyB8fCB7fSkuZm9yRWFjaCgoW25hbWUsIGhhbmRsZXJdKSA9PiB7XG4gICAgICBjaGFydFJlZi5jdXJyZW50Py5nZXRacigpLm9mZihuYW1lKTtcbiAgICAgIGNoYXJ0UmVmLmN1cnJlbnQ/LmdldFpyKCkub24obmFtZSwgaGFuZGxlcik7XG4gICAgfSk7XG5cbiAgICBjaGFydFJlZi5jdXJyZW50LnNldE9wdGlvbihlY2hhcnRPcHRpb25zLCB0cnVlKTtcbiAgfSwgW2VjaGFydE9wdGlvbnMsIGV2ZW50SGFuZGxlcnMsIHpyRXZlbnRIYW5kbGVyc10pO1xuXG4gIC8vIGhpZ2hsaWdodGluZ1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY2hhcnRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIGNoYXJ0UmVmLmN1cnJlbnQuZGlzcGF0Y2hBY3Rpb24oe1xuICAgICAgdHlwZTogJ2Rvd25wbGF5JyxcbiAgICAgIGRhdGFJbmRleDogcHJldmlvdXNTZWxlY3Rpb24uY3VycmVudC5maWx0ZXIoXG4gICAgICAgIHZhbHVlID0+ICFjdXJyZW50U2VsZWN0aW9uLmluY2x1ZGVzKHZhbHVlKSxcbiAgICAgICksXG4gICAgfSk7XG4gICAgaWYgKGN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICBjaGFydFJlZi5jdXJyZW50LmRpc3BhdGNoQWN0aW9uKHtcbiAgICAgICAgdHlwZTogJ2hpZ2hsaWdodCcsXG4gICAgICAgIGRhdGFJbmRleDogY3VycmVudFNlbGVjdGlvbixcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwcmV2aW91c1NlbGVjdGlvbi5jdXJyZW50ID0gY3VycmVudFNlbGVjdGlvbjtcbiAgfSwgW2N1cnJlbnRTZWxlY3Rpb25dKTtcblxuICBjb25zdCBoYW5kbGVTaXplQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKHsgd2lkdGgsIGhlaWdodCB9OiB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH0pID0+IHtcbiAgICAgIGlmIChjaGFydFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNoYXJ0UmVmLmN1cnJlbnQucmVzaXplKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtdLFxuICApO1xuXG4gIC8vIGRpZCBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGhhbmRsZVNpemVDaGFuZ2UoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIHJldHVybiAoKSA9PiBjaGFydFJlZi5jdXJyZW50Py5kaXNwb3NlKCk7XG4gIH0sIFtdKTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGhhbmRsZVNpemVDaGFuZ2UoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICB9LCBbd2lkdGgsIGhlaWdodCwgaGFuZGxlU2l6ZUNoYW5nZV0pO1xuXG4gIHJldHVybiA8U3R5bGVzIHJlZj17ZGl2UmVmfSBoZWlnaHQ9e2hlaWdodH0gd2lkdGg9e3dpZHRofSAvPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZm9yd2FyZFJlZihFY2hhcnQpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-echarts/src/components/Echart.tsx\n");

/***/ })

}]);